(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Ny={exports:{}},Ec={},Ty={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ia=Symbol.for("react.element"),gE=Symbol.for("react.portal"),yE=Symbol.for("react.fragment"),xE=Symbol.for("react.strict_mode"),vE=Symbol.for("react.profiler"),wE=Symbol.for("react.provider"),_E=Symbol.for("react.context"),EE=Symbol.for("react.forward_ref"),bE=Symbol.for("react.suspense"),NE=Symbol.for("react.memo"),TE=Symbol.for("react.lazy"),Pp=Symbol.iterator;function IE(t){return t===null||typeof t!="object"?null:(t=Pp&&t[Pp]||t["@@iterator"],typeof t=="function"?t:null)}var Iy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Sy=Object.assign,ky={};function Ti(t,e,n){this.props=t,this.context=e,this.refs=ky,this.updater=n||Iy}Ti.prototype.isReactComponent={};Ti.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ti.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function jy(){}jy.prototype=Ti.prototype;function Oh(t,e,n){this.props=t,this.context=e,this.refs=ky,this.updater=n||Iy}var Uh=Oh.prototype=new jy;Uh.constructor=Oh;Sy(Uh,Ti.prototype);Uh.isPureReactComponent=!0;var Rp=Array.isArray,Cy=Object.prototype.hasOwnProperty,Fh={current:null},Ay={key:!0,ref:!0,__self:!0,__source:!0};function Py(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)Cy.call(e,r)&&!Ay.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:ia,type:t,key:i,ref:a,props:s,_owner:Fh.current}}function SE(t,e){return{$$typeof:ia,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function zh(t){return typeof t=="object"&&t!==null&&t.$$typeof===ia}function kE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Dp=/\/+/g;function Pu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?kE(""+t.key):e.toString(36)}function cl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case ia:case gE:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Pu(a,0):r,Rp(s)?(n="",t!=null&&(n=t.replace(Dp,"$&/")+"/"),cl(s,e,n,"",function(d){return d})):s!=null&&(zh(s)&&(s=SE(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Dp,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",Rp(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+Pu(i,c);a+=cl(i,e,n,u,s)}else if(u=IE(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+Pu(i,c++),a+=cl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Ua(t,e,n){if(t==null)return t;var r=[],s=0;return cl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function jE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var bt={current:null},ul={transition:null},CE={ReactCurrentDispatcher:bt,ReactCurrentBatchConfig:ul,ReactCurrentOwner:Fh};function Ry(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:Ua,forEach:function(t,e,n){Ua(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ua(t,function(){e++}),e},toArray:function(t){return Ua(t,function(e){return e})||[]},only:function(t){if(!zh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Component=Ti;ue.Fragment=yE;ue.Profiler=vE;ue.PureComponent=Oh;ue.StrictMode=xE;ue.Suspense=bE;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CE;ue.act=Ry;ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Sy({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Fh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)Cy.call(e,u)&&!Ay.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:ia,type:t.type,key:s,ref:i,props:r,_owner:a}};ue.createContext=function(t){return t={$$typeof:_E,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:wE,_context:t},t.Consumer=t};ue.createElement=Py;ue.createFactory=function(t){var e=Py.bind(null,t);return e.type=t,e};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:EE,render:t}};ue.isValidElement=zh;ue.lazy=function(t){return{$$typeof:TE,_payload:{_status:-1,_result:t},_init:jE}};ue.memo=function(t,e){return{$$typeof:NE,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=ul.transition;ul.transition={};try{t()}finally{ul.transition=e}};ue.unstable_act=Ry;ue.useCallback=function(t,e){return bt.current.useCallback(t,e)};ue.useContext=function(t){return bt.current.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t){return bt.current.useDeferredValue(t)};ue.useEffect=function(t,e){return bt.current.useEffect(t,e)};ue.useId=function(){return bt.current.useId()};ue.useImperativeHandle=function(t,e,n){return bt.current.useImperativeHandle(t,e,n)};ue.useInsertionEffect=function(t,e){return bt.current.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return bt.current.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return bt.current.useMemo(t,e)};ue.useReducer=function(t,e,n){return bt.current.useReducer(t,e,n)};ue.useRef=function(t){return bt.current.useRef(t)};ue.useState=function(t){return bt.current.useState(t)};ue.useSyncExternalStore=function(t,e,n){return bt.current.useSyncExternalStore(t,e,n)};ue.useTransition=function(){return bt.current.useTransition()};ue.version="18.3.1";Ty.exports=ue;var L=Ty.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AE=L,PE=Symbol.for("react.element"),RE=Symbol.for("react.fragment"),DE=Object.prototype.hasOwnProperty,VE=AE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ME={key:!0,ref:!0,__self:!0,__source:!0};function Dy(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)DE.call(e,r)&&!ME.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:PE,type:t,key:i,ref:a,props:s,_owner:VE.current}}Ec.Fragment=RE;Ec.jsx=Dy;Ec.jsxs=Dy;Ny.exports=Ec;var o=Ny.exports,Vy={exports:{}},Ut={},My={exports:{}},Ly={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,Y){var X=B.length;B.push(Y);e:for(;0<X;){var ie=X-1>>>1,$=B[ie];if(0<s($,Y))B[ie]=Y,B[X]=$,X=ie;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var Y=B[0],X=B.pop();if(X!==Y){B[0]=X;e:for(var ie=0,$=B.length,G=$>>>1;ie<G;){var te=2*(ie+1)-1,oe=B[te],we=te+1,Me=B[we];if(0>s(oe,X))we<$&&0>s(Me,oe)?(B[ie]=Me,B[we]=X,ie=we):(B[ie]=oe,B[te]=X,ie=te);else if(we<$&&0>s(Me,X))B[ie]=Me,B[we]=X,ie=we;else break e}}return Y}function s(B,Y){var X=B.sortIndex-Y.sortIndex;return X!==0?X:B.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var u=[],d=[],m=1,p=null,g=3,N=!1,j=!1,k=!1,P=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(B){for(var Y=n(d);Y!==null;){if(Y.callback===null)r(d);else if(Y.startTime<=B)r(d),Y.sortIndex=Y.expirationTime,e(u,Y);else break;Y=n(d)}}function A(B){if(k=!1,E(B),!j)if(n(u)!==null)j=!0,F(D);else{var Y=n(d);Y!==null&&xe(A,Y.startTime-B)}}function D(B,Y){j=!1,k&&(k=!1,_(y),y=-1),N=!0;var X=g;try{for(E(Y),p=n(u);p!==null&&(!(p.expirationTime>Y)||B&&!T());){var ie=p.callback;if(typeof ie=="function"){p.callback=null,g=p.priorityLevel;var $=ie(p.expirationTime<=Y);Y=t.unstable_now(),typeof $=="function"?p.callback=$:p===n(u)&&r(u),E(Y)}else r(u);p=n(u)}if(p!==null)var G=!0;else{var te=n(d);te!==null&&xe(A,te.startTime-Y),G=!1}return G}finally{p=null,g=X,N=!1}}var V=!1,b=null,y=-1,x=5,S=-1;function T(){return!(t.unstable_now()-S<x)}function C(){if(b!==null){var B=t.unstable_now();S=B;var Y=!0;try{Y=b(!0,B)}finally{Y?I():(V=!1,b=null)}}else V=!1}var I;if(typeof w=="function")I=function(){w(C)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,H=ee.port2;ee.port1.onmessage=C,I=function(){H.postMessage(null)}}else I=function(){P(C,0)};function F(B){b=B,V||(V=!0,I())}function xe(B,Y){y=P(function(){B(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){j||N||(j=!0,F(D))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(g){case 1:case 2:case 3:var Y=3;break;default:Y=g}var X=g;g=Y;try{return B()}finally{g=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,Y){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var X=g;g=B;try{return Y()}finally{g=X}},t.unstable_scheduleCallback=function(B,Y,X){var ie=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ie+X:ie):X=ie,B){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=X+$,B={id:m++,callback:Y,priorityLevel:B,startTime:X,expirationTime:$,sortIndex:-1},X>ie?(B.sortIndex=X,e(d,B),n(u)===null&&B===n(d)&&(k?(_(y),y=-1):k=!0,xe(A,X-ie))):(B.sortIndex=$,e(u,B),j||N||(j=!0,F(D))),B},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(B){var Y=g;return function(){var X=g;g=Y;try{return B.apply(this,arguments)}finally{g=X}}}})(Ly);My.exports=Ly;var LE=My.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OE=L,Ot=LE;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Oy=new Set,Ao={};function _s(t,e){ai(t,e),ai(t+"Capture",e)}function ai(t,e){for(Ao[t]=e,t=0;t<e.length;t++)Oy.add(e[t])}var $n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yd=Object.prototype.hasOwnProperty,UE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vp={},Mp={};function FE(t){return yd.call(Mp,t)?!0:yd.call(Vp,t)?!1:UE.test(t)?Mp[t]=!0:(Vp[t]=!0,!1)}function zE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function $E(t,e,n,r){if(e===null||typeof e>"u"||zE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nt(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var it={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){it[t]=new Nt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];it[e]=new Nt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){it[t]=new Nt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){it[t]=new Nt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){it[t]=new Nt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){it[t]=new Nt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){it[t]=new Nt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){it[t]=new Nt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){it[t]=new Nt(t,5,!1,t.toLowerCase(),null,!1,!1)});var $h=/[\-:]([a-z])/g;function Bh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace($h,Bh);it[e]=new Nt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace($h,Bh);it[e]=new Nt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace($h,Bh);it[e]=new Nt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){it[t]=new Nt(t,1,!1,t.toLowerCase(),null,!1,!1)});it.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){it[t]=new Nt(t,1,!1,t.toLowerCase(),null,!0,!0)});function qh(t,e,n,r){var s=it.hasOwnProperty(e)?it[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&($E(e,n,s,r)&&(n=null),r||s===null?FE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Yn=OE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fa=Symbol.for("react.element"),Ms=Symbol.for("react.portal"),Ls=Symbol.for("react.fragment"),Wh=Symbol.for("react.strict_mode"),xd=Symbol.for("react.profiler"),Uy=Symbol.for("react.provider"),Fy=Symbol.for("react.context"),Hh=Symbol.for("react.forward_ref"),vd=Symbol.for("react.suspense"),wd=Symbol.for("react.suspense_list"),Gh=Symbol.for("react.memo"),ar=Symbol.for("react.lazy"),zy=Symbol.for("react.offscreen"),Lp=Symbol.iterator;function Qi(t){return t===null||typeof t!="object"?null:(t=Lp&&t[Lp]||t["@@iterator"],typeof t=="function"?t:null)}var De=Object.assign,Ru;function so(t){if(Ru===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ru=e&&e[1]||""}return`
`+Ru+t}var Du=!1;function Vu(t,e){if(!t||Du)return"";Du=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,c=i.length-1;1<=a&&0<=c&&s[a]!==i[c];)c--;for(;1<=a&&0<=c;a--,c--)if(s[a]!==i[c]){if(a!==1||c!==1)do if(a--,c--,0>c||s[a]!==i[c]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=c);break}}}finally{Du=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?so(t):""}function BE(t){switch(t.tag){case 5:return so(t.type);case 16:return so("Lazy");case 13:return so("Suspense");case 19:return so("SuspenseList");case 0:case 2:case 15:return t=Vu(t.type,!1),t;case 11:return t=Vu(t.type.render,!1),t;case 1:return t=Vu(t.type,!0),t;default:return""}}function _d(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ls:return"Fragment";case Ms:return"Portal";case xd:return"Profiler";case Wh:return"StrictMode";case vd:return"Suspense";case wd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Fy:return(t.displayName||"Context")+".Consumer";case Uy:return(t._context.displayName||"Context")+".Provider";case Hh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Gh:return e=t.displayName||null,e!==null?e:_d(t.type)||"Memo";case ar:e=t._payload,t=t._init;try{return _d(t(e))}catch{}}return null}function qE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _d(e);case 8:return e===Wh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Pr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function $y(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function WE(t){var e=$y(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function za(t){t._valueTracker||(t._valueTracker=WE(t))}function By(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=$y(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Al(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ed(t,e){var n=e.checked;return De({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Op(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Pr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function qy(t,e){e=e.checked,e!=null&&qh(t,"checked",e,!1)}function bd(t,e){qy(t,e);var n=Pr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Nd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Nd(t,e.type,Pr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Up(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Nd(t,e,n){(e!=="number"||Al(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var io=Array.isArray;function Ys(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Pr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Td(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return De({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Fp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(io(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Pr(n)}}function Wy(t,e){var n=Pr(e.value),r=Pr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function zp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Hy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Id(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Hy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var $a,Gy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for($a=$a||document.createElement("div"),$a.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=$a.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Po(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var go={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},HE=["Webkit","ms","Moz","O"];Object.keys(go).forEach(function(t){HE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),go[e]=go[t]})});function Ky(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||go.hasOwnProperty(t)&&go[t]?(""+e).trim():e+"px"}function Qy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Ky(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var GE=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sd(t,e){if(e){if(GE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function kd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jd=null;function Kh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Cd=null,Xs=null,Js=null;function $p(t){if(t=la(t)){if(typeof Cd!="function")throw Error(z(280));var e=t.stateNode;e&&(e=Sc(e),Cd(t.stateNode,t.type,e))}}function Yy(t){Xs?Js?Js.push(t):Js=[t]:Xs=t}function Xy(){if(Xs){var t=Xs,e=Js;if(Js=Xs=null,$p(t),e)for(t=0;t<e.length;t++)$p(e[t])}}function Jy(t,e){return t(e)}function Zy(){}var Mu=!1;function ex(t,e,n){if(Mu)return t(e,n);Mu=!0;try{return Jy(t,e,n)}finally{Mu=!1,(Xs!==null||Js!==null)&&(Zy(),Xy())}}function Ro(t,e){var n=t.stateNode;if(n===null)return null;var r=Sc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var Ad=!1;if($n)try{var Yi={};Object.defineProperty(Yi,"passive",{get:function(){Ad=!0}}),window.addEventListener("test",Yi,Yi),window.removeEventListener("test",Yi,Yi)}catch{Ad=!1}function KE(t,e,n,r,s,i,a,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(m){this.onError(m)}}var yo=!1,Pl=null,Rl=!1,Pd=null,QE={onError:function(t){yo=!0,Pl=t}};function YE(t,e,n,r,s,i,a,c,u){yo=!1,Pl=null,KE.apply(QE,arguments)}function XE(t,e,n,r,s,i,a,c,u){if(YE.apply(this,arguments),yo){if(yo){var d=Pl;yo=!1,Pl=null}else throw Error(z(198));Rl||(Rl=!0,Pd=d)}}function Es(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function tx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Bp(t){if(Es(t)!==t)throw Error(z(188))}function JE(t){var e=t.alternate;if(!e){if(e=Es(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Bp(s),t;if(i===r)return Bp(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a){for(c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function nx(t){return t=JE(t),t!==null?rx(t):null}function rx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=rx(t);if(e!==null)return e;t=t.sibling}return null}var sx=Ot.unstable_scheduleCallback,qp=Ot.unstable_cancelCallback,ZE=Ot.unstable_shouldYield,eb=Ot.unstable_requestPaint,ze=Ot.unstable_now,tb=Ot.unstable_getCurrentPriorityLevel,Qh=Ot.unstable_ImmediatePriority,ix=Ot.unstable_UserBlockingPriority,Dl=Ot.unstable_NormalPriority,nb=Ot.unstable_LowPriority,ox=Ot.unstable_IdlePriority,bc=null,_n=null;function rb(t){if(_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(bc,t,void 0,(t.current.flags&128)===128)}catch{}}var sn=Math.clz32?Math.clz32:ob,sb=Math.log,ib=Math.LN2;function ob(t){return t>>>=0,t===0?32:31-(sb(t)/ib|0)|0}var Ba=64,qa=4194304;function oo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Vl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var c=a&~s;c!==0?r=oo(c):(i&=a,i!==0&&(r=oo(i)))}else a=n&~s,a!==0?r=oo(a):i!==0&&(r=oo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-sn(e),s=1<<n,r|=t[n],e&=~s;return r}function ab(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lb(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-sn(i),c=1<<a,u=s[a];u===-1?(!(c&n)||c&r)&&(s[a]=ab(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function Rd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ax(){var t=Ba;return Ba<<=1,!(Ba&4194240)&&(Ba=64),t}function Lu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function oa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-sn(e),t[e]=n}function cb(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-sn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Yh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-sn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var be=0;function lx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var cx,Xh,ux,dx,hx,Dd=!1,Wa=[],xr=null,vr=null,wr=null,Do=new Map,Vo=new Map,cr=[],ub="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wp(t,e){switch(t){case"focusin":case"focusout":xr=null;break;case"dragenter":case"dragleave":vr=null;break;case"mouseover":case"mouseout":wr=null;break;case"pointerover":case"pointerout":Do.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vo.delete(e.pointerId)}}function Xi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=la(e),e!==null&&Xh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function db(t,e,n,r,s){switch(e){case"focusin":return xr=Xi(xr,t,e,n,r,s),!0;case"dragenter":return vr=Xi(vr,t,e,n,r,s),!0;case"mouseover":return wr=Xi(wr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Do.set(i,Xi(Do.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Vo.set(i,Xi(Vo.get(i)||null,t,e,n,r,s)),!0}return!1}function mx(t){var e=ns(t.target);if(e!==null){var n=Es(e);if(n!==null){if(e=n.tag,e===13){if(e=tx(n),e!==null){t.blockedOn=e,hx(t.priority,function(){ux(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function dl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Vd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);jd=r,n.target.dispatchEvent(r),jd=null}else return e=la(n),e!==null&&Xh(e),t.blockedOn=n,!1;e.shift()}return!0}function Hp(t,e,n){dl(t)&&n.delete(e)}function hb(){Dd=!1,xr!==null&&dl(xr)&&(xr=null),vr!==null&&dl(vr)&&(vr=null),wr!==null&&dl(wr)&&(wr=null),Do.forEach(Hp),Vo.forEach(Hp)}function Ji(t,e){t.blockedOn===e&&(t.blockedOn=null,Dd||(Dd=!0,Ot.unstable_scheduleCallback(Ot.unstable_NormalPriority,hb)))}function Mo(t){function e(s){return Ji(s,t)}if(0<Wa.length){Ji(Wa[0],t);for(var n=1;n<Wa.length;n++){var r=Wa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(xr!==null&&Ji(xr,t),vr!==null&&Ji(vr,t),wr!==null&&Ji(wr,t),Do.forEach(e),Vo.forEach(e),n=0;n<cr.length;n++)r=cr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<cr.length&&(n=cr[0],n.blockedOn===null);)mx(n),n.blockedOn===null&&cr.shift()}var Zs=Yn.ReactCurrentBatchConfig,Ml=!0;function mb(t,e,n,r){var s=be,i=Zs.transition;Zs.transition=null;try{be=1,Jh(t,e,n,r)}finally{be=s,Zs.transition=i}}function fb(t,e,n,r){var s=be,i=Zs.transition;Zs.transition=null;try{be=4,Jh(t,e,n,r)}finally{be=s,Zs.transition=i}}function Jh(t,e,n,r){if(Ml){var s=Vd(t,e,n,r);if(s===null)Gu(t,e,r,Ll,n),Wp(t,r);else if(db(s,t,e,n,r))r.stopPropagation();else if(Wp(t,r),e&4&&-1<ub.indexOf(t)){for(;s!==null;){var i=la(s);if(i!==null&&cx(i),i=Vd(t,e,n,r),i===null&&Gu(t,e,r,Ll,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Gu(t,e,r,null,n)}}var Ll=null;function Vd(t,e,n,r){if(Ll=null,t=Kh(r),t=ns(t),t!==null)if(e=Es(t),e===null)t=null;else if(n=e.tag,n===13){if(t=tx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ll=t,null}function fx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tb()){case Qh:return 1;case ix:return 4;case Dl:case nb:return 16;case ox:return 536870912;default:return 16}default:return 16}}var pr=null,Zh=null,hl=null;function px(){if(hl)return hl;var t,e=Zh,n=e.length,r,s="value"in pr?pr.value:pr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return hl=s.slice(t,1<r?1-r:void 0)}function ml(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ha(){return!0}function Gp(){return!1}function Ft(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ha:Gp,this.isPropagationStopped=Gp,this}return De(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ha)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ha)},persist:function(){},isPersistent:Ha}),e}var Ii={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},em=Ft(Ii),aa=De({},Ii,{view:0,detail:0}),pb=Ft(aa),Ou,Uu,Zi,Nc=De({},aa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Zi&&(Zi&&t.type==="mousemove"?(Ou=t.screenX-Zi.screenX,Uu=t.screenY-Zi.screenY):Uu=Ou=0,Zi=t),Ou)},movementY:function(t){return"movementY"in t?t.movementY:Uu}}),Kp=Ft(Nc),gb=De({},Nc,{dataTransfer:0}),yb=Ft(gb),xb=De({},aa,{relatedTarget:0}),Fu=Ft(xb),vb=De({},Ii,{animationName:0,elapsedTime:0,pseudoElement:0}),wb=Ft(vb),_b=De({},Ii,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Eb=Ft(_b),bb=De({},Ii,{data:0}),Qp=Ft(bb),Nb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ib={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sb(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ib[t])?!!e[t]:!1}function tm(){return Sb}var kb=De({},aa,{key:function(t){if(t.key){var e=Nb[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ml(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Tb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tm,charCode:function(t){return t.type==="keypress"?ml(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ml(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),jb=Ft(kb),Cb=De({},Nc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yp=Ft(Cb),Ab=De({},aa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tm}),Pb=Ft(Ab),Rb=De({},Ii,{propertyName:0,elapsedTime:0,pseudoElement:0}),Db=Ft(Rb),Vb=De({},Nc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Mb=Ft(Vb),Lb=[9,13,27,32],nm=$n&&"CompositionEvent"in window,xo=null;$n&&"documentMode"in document&&(xo=document.documentMode);var Ob=$n&&"TextEvent"in window&&!xo,gx=$n&&(!nm||xo&&8<xo&&11>=xo),Xp=" ",Jp=!1;function yx(t,e){switch(t){case"keyup":return Lb.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Os=!1;function Ub(t,e){switch(t){case"compositionend":return xx(e);case"keypress":return e.which!==32?null:(Jp=!0,Xp);case"textInput":return t=e.data,t===Xp&&Jp?null:t;default:return null}}function Fb(t,e){if(Os)return t==="compositionend"||!nm&&yx(t,e)?(t=px(),hl=Zh=pr=null,Os=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return gx&&e.locale!=="ko"?null:e.data;default:return null}}var zb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!zb[t.type]:e==="textarea"}function vx(t,e,n,r){Yy(r),e=Ol(e,"onChange"),0<e.length&&(n=new em("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var vo=null,Lo=null;function $b(t){Cx(t,0)}function Tc(t){var e=zs(t);if(By(e))return t}function Bb(t,e){if(t==="change")return e}var wx=!1;if($n){var zu;if($n){var $u="oninput"in document;if(!$u){var eg=document.createElement("div");eg.setAttribute("oninput","return;"),$u=typeof eg.oninput=="function"}zu=$u}else zu=!1;wx=zu&&(!document.documentMode||9<document.documentMode)}function tg(){vo&&(vo.detachEvent("onpropertychange",_x),Lo=vo=null)}function _x(t){if(t.propertyName==="value"&&Tc(Lo)){var e=[];vx(e,Lo,t,Kh(t)),ex($b,e)}}function qb(t,e,n){t==="focusin"?(tg(),vo=e,Lo=n,vo.attachEvent("onpropertychange",_x)):t==="focusout"&&tg()}function Wb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Tc(Lo)}function Hb(t,e){if(t==="click")return Tc(e)}function Gb(t,e){if(t==="input"||t==="change")return Tc(e)}function Kb(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ln=typeof Object.is=="function"?Object.is:Kb;function Oo(t,e){if(ln(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!yd.call(e,s)||!ln(t[s],e[s]))return!1}return!0}function ng(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function rg(t,e){var n=ng(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ng(n)}}function Ex(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ex(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function bx(){for(var t=window,e=Al();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Al(t.document)}return e}function rm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Qb(t){var e=bx(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Ex(n.ownerDocument.documentElement,n)){if(r!==null&&rm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=rg(n,i);var a=rg(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Yb=$n&&"documentMode"in document&&11>=document.documentMode,Us=null,Md=null,wo=null,Ld=!1;function sg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ld||Us==null||Us!==Al(r)||(r=Us,"selectionStart"in r&&rm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),wo&&Oo(wo,r)||(wo=r,r=Ol(Md,"onSelect"),0<r.length&&(e=new em("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Us)))}function Ga(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Fs={animationend:Ga("Animation","AnimationEnd"),animationiteration:Ga("Animation","AnimationIteration"),animationstart:Ga("Animation","AnimationStart"),transitionend:Ga("Transition","TransitionEnd")},Bu={},Nx={};$n&&(Nx=document.createElement("div").style,"AnimationEvent"in window||(delete Fs.animationend.animation,delete Fs.animationiteration.animation,delete Fs.animationstart.animation),"TransitionEvent"in window||delete Fs.transitionend.transition);function Ic(t){if(Bu[t])return Bu[t];if(!Fs[t])return t;var e=Fs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Nx)return Bu[t]=e[n];return t}var Tx=Ic("animationend"),Ix=Ic("animationiteration"),Sx=Ic("animationstart"),kx=Ic("transitionend"),jx=new Map,ig="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $r(t,e){jx.set(t,e),_s(e,[t])}for(var qu=0;qu<ig.length;qu++){var Wu=ig[qu],Xb=Wu.toLowerCase(),Jb=Wu[0].toUpperCase()+Wu.slice(1);$r(Xb,"on"+Jb)}$r(Tx,"onAnimationEnd");$r(Ix,"onAnimationIteration");$r(Sx,"onAnimationStart");$r("dblclick","onDoubleClick");$r("focusin","onFocus");$r("focusout","onBlur");$r(kx,"onTransitionEnd");ai("onMouseEnter",["mouseout","mouseover"]);ai("onMouseLeave",["mouseout","mouseover"]);ai("onPointerEnter",["pointerout","pointerover"]);ai("onPointerLeave",["pointerout","pointerover"]);_s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_s("onBeforeInput",["compositionend","keypress","textInput","paste"]);_s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ao="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zb=new Set("cancel close invalid load scroll toggle".split(" ").concat(ao));function og(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,XE(r,e,void 0,t),t.currentTarget=null}function Cx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var c=r[a],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;og(s,c,d),i=u}else for(a=0;a<r.length;a++){if(c=r[a],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;og(s,c,d),i=u}}}if(Rl)throw t=Pd,Rl=!1,Pd=null,t}function ke(t,e){var n=e[$d];n===void 0&&(n=e[$d]=new Set);var r=t+"__bubble";n.has(r)||(Ax(e,t,2,!1),n.add(r))}function Hu(t,e,n){var r=0;e&&(r|=4),Ax(n,t,r,e)}var Ka="_reactListening"+Math.random().toString(36).slice(2);function Uo(t){if(!t[Ka]){t[Ka]=!0,Oy.forEach(function(n){n!=="selectionchange"&&(Zb.has(n)||Hu(n,!1,t),Hu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ka]||(e[Ka]=!0,Hu("selectionchange",!1,e))}}function Ax(t,e,n,r){switch(fx(e)){case 1:var s=mb;break;case 4:s=fb;break;default:s=Jh}n=s.bind(null,e,n,t),s=void 0,!Ad||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Gu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;c!==null;){if(a=ns(c),a===null)return;if(u=a.tag,u===5||u===6){r=i=a;continue e}c=c.parentNode}}r=r.return}ex(function(){var d=i,m=Kh(n),p=[];e:{var g=jx.get(t);if(g!==void 0){var N=em,j=t;switch(t){case"keypress":if(ml(n)===0)break e;case"keydown":case"keyup":N=jb;break;case"focusin":j="focus",N=Fu;break;case"focusout":j="blur",N=Fu;break;case"beforeblur":case"afterblur":N=Fu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":N=Kp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":N=yb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":N=Pb;break;case Tx:case Ix:case Sx:N=wb;break;case kx:N=Db;break;case"scroll":N=pb;break;case"wheel":N=Mb;break;case"copy":case"cut":case"paste":N=Eb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":N=Yp}var k=(e&4)!==0,P=!k&&t==="scroll",_=k?g!==null?g+"Capture":null:g;k=[];for(var w=d,E;w!==null;){E=w;var A=E.stateNode;if(E.tag===5&&A!==null&&(E=A,_!==null&&(A=Ro(w,_),A!=null&&k.push(Fo(w,A,E)))),P)break;w=w.return}0<k.length&&(g=new N(g,j,null,n,m),p.push({event:g,listeners:k}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",N=t==="mouseout"||t==="pointerout",g&&n!==jd&&(j=n.relatedTarget||n.fromElement)&&(ns(j)||j[Bn]))break e;if((N||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,N?(j=n.relatedTarget||n.toElement,N=d,j=j?ns(j):null,j!==null&&(P=Es(j),j!==P||j.tag!==5&&j.tag!==6)&&(j=null)):(N=null,j=d),N!==j)){if(k=Kp,A="onMouseLeave",_="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(k=Yp,A="onPointerLeave",_="onPointerEnter",w="pointer"),P=N==null?g:zs(N),E=j==null?g:zs(j),g=new k(A,w+"leave",N,n,m),g.target=P,g.relatedTarget=E,A=null,ns(m)===d&&(k=new k(_,w+"enter",j,n,m),k.target=E,k.relatedTarget=P,A=k),P=A,N&&j)t:{for(k=N,_=j,w=0,E=k;E;E=As(E))w++;for(E=0,A=_;A;A=As(A))E++;for(;0<w-E;)k=As(k),w--;for(;0<E-w;)_=As(_),E--;for(;w--;){if(k===_||_!==null&&k===_.alternate)break t;k=As(k),_=As(_)}k=null}else k=null;N!==null&&ag(p,g,N,k,!1),j!==null&&P!==null&&ag(p,P,j,k,!0)}}e:{if(g=d?zs(d):window,N=g.nodeName&&g.nodeName.toLowerCase(),N==="select"||N==="input"&&g.type==="file")var D=Bb;else if(Zp(g))if(wx)D=Gb;else{D=Wb;var V=qb}else(N=g.nodeName)&&N.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(D=Hb);if(D&&(D=D(t,d))){vx(p,D,n,m);break e}V&&V(t,g,d),t==="focusout"&&(V=g._wrapperState)&&V.controlled&&g.type==="number"&&Nd(g,"number",g.value)}switch(V=d?zs(d):window,t){case"focusin":(Zp(V)||V.contentEditable==="true")&&(Us=V,Md=d,wo=null);break;case"focusout":wo=Md=Us=null;break;case"mousedown":Ld=!0;break;case"contextmenu":case"mouseup":case"dragend":Ld=!1,sg(p,n,m);break;case"selectionchange":if(Yb)break;case"keydown":case"keyup":sg(p,n,m)}var b;if(nm)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Os?yx(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(gx&&n.locale!=="ko"&&(Os||y!=="onCompositionStart"?y==="onCompositionEnd"&&Os&&(b=px()):(pr=m,Zh="value"in pr?pr.value:pr.textContent,Os=!0)),V=Ol(d,y),0<V.length&&(y=new Qp(y,t,null,n,m),p.push({event:y,listeners:V}),b?y.data=b:(b=xx(n),b!==null&&(y.data=b)))),(b=Ob?Ub(t,n):Fb(t,n))&&(d=Ol(d,"onBeforeInput"),0<d.length&&(m=new Qp("onBeforeInput","beforeinput",null,n,m),p.push({event:m,listeners:d}),m.data=b))}Cx(p,e)})}function Fo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ol(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ro(t,n),i!=null&&r.unshift(Fo(t,i,s)),i=Ro(t,e),i!=null&&r.push(Fo(t,i,s))),t=t.return}return r}function As(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ag(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=Ro(n,i),u!=null&&a.unshift(Fo(n,u,c))):s||(u=Ro(n,i),u!=null&&a.push(Fo(n,u,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var eN=/\r\n?/g,tN=/\u0000|\uFFFD/g;function lg(t){return(typeof t=="string"?t:""+t).replace(eN,`
`).replace(tN,"")}function Qa(t,e,n){if(e=lg(e),lg(t)!==e&&n)throw Error(z(425))}function Ul(){}var Od=null,Ud=null;function Fd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zd=typeof setTimeout=="function"?setTimeout:void 0,nN=typeof clearTimeout=="function"?clearTimeout:void 0,cg=typeof Promise=="function"?Promise:void 0,rN=typeof queueMicrotask=="function"?queueMicrotask:typeof cg<"u"?function(t){return cg.resolve(null).then(t).catch(sN)}:zd;function sN(t){setTimeout(function(){throw t})}function Ku(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Mo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Mo(e)}function _r(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ug(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Si=Math.random().toString(36).slice(2),yn="__reactFiber$"+Si,zo="__reactProps$"+Si,Bn="__reactContainer$"+Si,$d="__reactEvents$"+Si,iN="__reactListeners$"+Si,oN="__reactHandles$"+Si;function ns(t){var e=t[yn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Bn]||n[yn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ug(t);t!==null;){if(n=t[yn])return n;t=ug(t)}return e}t=n,n=t.parentNode}return null}function la(t){return t=t[yn]||t[Bn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function zs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function Sc(t){return t[zo]||null}var Bd=[],$s=-1;function Br(t){return{current:t}}function Ce(t){0>$s||(t.current=Bd[$s],Bd[$s]=null,$s--)}function Ie(t,e){$s++,Bd[$s]=t.current,t.current=e}var Rr={},gt=Br(Rr),jt=Br(!1),cs=Rr;function li(t,e){var n=t.type.contextTypes;if(!n)return Rr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ct(t){return t=t.childContextTypes,t!=null}function Fl(){Ce(jt),Ce(gt)}function dg(t,e,n){if(gt.current!==Rr)throw Error(z(168));Ie(gt,e),Ie(jt,n)}function Px(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,qE(t)||"Unknown",s));return De({},n,r)}function zl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Rr,cs=gt.current,Ie(gt,t),Ie(jt,jt.current),!0}function hg(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=Px(t,e,cs),r.__reactInternalMemoizedMergedChildContext=t,Ce(jt),Ce(gt),Ie(gt,t)):Ce(jt),Ie(jt,n)}var Rn=null,kc=!1,Qu=!1;function Rx(t){Rn===null?Rn=[t]:Rn.push(t)}function aN(t){kc=!0,Rx(t)}function qr(){if(!Qu&&Rn!==null){Qu=!0;var t=0,e=be;try{var n=Rn;for(be=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Rn=null,kc=!1}catch(s){throw Rn!==null&&(Rn=Rn.slice(t+1)),sx(Qh,qr),s}finally{be=e,Qu=!1}}return null}var Bs=[],qs=0,$l=null,Bl=0,zt=[],$t=0,us=null,Dn=1,Vn="";function Zr(t,e){Bs[qs++]=Bl,Bs[qs++]=$l,$l=t,Bl=e}function Dx(t,e,n){zt[$t++]=Dn,zt[$t++]=Vn,zt[$t++]=us,us=t;var r=Dn;t=Vn;var s=32-sn(r)-1;r&=~(1<<s),n+=1;var i=32-sn(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Dn=1<<32-sn(e)+s|n<<s|r,Vn=i+t}else Dn=1<<i|n<<s|r,Vn=t}function sm(t){t.return!==null&&(Zr(t,1),Dx(t,1,0))}function im(t){for(;t===$l;)$l=Bs[--qs],Bs[qs]=null,Bl=Bs[--qs],Bs[qs]=null;for(;t===us;)us=zt[--$t],zt[$t]=null,Vn=zt[--$t],zt[$t]=null,Dn=zt[--$t],zt[$t]=null}var Mt=null,Dt=null,Ae=!1,nn=null;function Vx(t,e){var n=Wt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function mg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Mt=t,Dt=_r(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Mt=t,Dt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=us!==null?{id:Dn,overflow:Vn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Wt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Mt=t,Dt=null,!0):!1;default:return!1}}function qd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Wd(t){if(Ae){var e=Dt;if(e){var n=e;if(!mg(t,e)){if(qd(t))throw Error(z(418));e=_r(n.nextSibling);var r=Mt;e&&mg(t,e)?Vx(r,n):(t.flags=t.flags&-4097|2,Ae=!1,Mt=t)}}else{if(qd(t))throw Error(z(418));t.flags=t.flags&-4097|2,Ae=!1,Mt=t}}}function fg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Mt=t}function Ya(t){if(t!==Mt)return!1;if(!Ae)return fg(t),Ae=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Fd(t.type,t.memoizedProps)),e&&(e=Dt)){if(qd(t))throw Mx(),Error(z(418));for(;e;)Vx(t,e),e=_r(e.nextSibling)}if(fg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Dt=_r(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Dt=null}}else Dt=Mt?_r(t.stateNode.nextSibling):null;return!0}function Mx(){for(var t=Dt;t;)t=_r(t.nextSibling)}function ci(){Dt=Mt=null,Ae=!1}function om(t){nn===null?nn=[t]:nn.push(t)}var lN=Yn.ReactCurrentBatchConfig;function eo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var c=s.refs;a===null?delete c[i]:c[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Xa(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function pg(t){var e=t._init;return e(t._payload)}function Lx(t){function e(_,w){if(t){var E=_.deletions;E===null?(_.deletions=[w],_.flags|=16):E.push(w)}}function n(_,w){if(!t)return null;for(;w!==null;)e(_,w),w=w.sibling;return null}function r(_,w){for(_=new Map;w!==null;)w.key!==null?_.set(w.key,w):_.set(w.index,w),w=w.sibling;return _}function s(_,w){return _=Tr(_,w),_.index=0,_.sibling=null,_}function i(_,w,E){return _.index=E,t?(E=_.alternate,E!==null?(E=E.index,E<w?(_.flags|=2,w):E):(_.flags|=2,w)):(_.flags|=1048576,w)}function a(_){return t&&_.alternate===null&&(_.flags|=2),_}function c(_,w,E,A){return w===null||w.tag!==6?(w=nd(E,_.mode,A),w.return=_,w):(w=s(w,E),w.return=_,w)}function u(_,w,E,A){var D=E.type;return D===Ls?m(_,w,E.props.children,A,E.key):w!==null&&(w.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===ar&&pg(D)===w.type)?(A=s(w,E.props),A.ref=eo(_,w,E),A.return=_,A):(A=wl(E.type,E.key,E.props,null,_.mode,A),A.ref=eo(_,w,E),A.return=_,A)}function d(_,w,E,A){return w===null||w.tag!==4||w.stateNode.containerInfo!==E.containerInfo||w.stateNode.implementation!==E.implementation?(w=rd(E,_.mode,A),w.return=_,w):(w=s(w,E.children||[]),w.return=_,w)}function m(_,w,E,A,D){return w===null||w.tag!==7?(w=as(E,_.mode,A,D),w.return=_,w):(w=s(w,E),w.return=_,w)}function p(_,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return w=nd(""+w,_.mode,E),w.return=_,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Fa:return E=wl(w.type,w.key,w.props,null,_.mode,E),E.ref=eo(_,null,w),E.return=_,E;case Ms:return w=rd(w,_.mode,E),w.return=_,w;case ar:var A=w._init;return p(_,A(w._payload),E)}if(io(w)||Qi(w))return w=as(w,_.mode,E,null),w.return=_,w;Xa(_,w)}return null}function g(_,w,E,A){var D=w!==null?w.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return D!==null?null:c(_,w,""+E,A);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Fa:return E.key===D?u(_,w,E,A):null;case Ms:return E.key===D?d(_,w,E,A):null;case ar:return D=E._init,g(_,w,D(E._payload),A)}if(io(E)||Qi(E))return D!==null?null:m(_,w,E,A,null);Xa(_,E)}return null}function N(_,w,E,A,D){if(typeof A=="string"&&A!==""||typeof A=="number")return _=_.get(E)||null,c(w,_,""+A,D);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Fa:return _=_.get(A.key===null?E:A.key)||null,u(w,_,A,D);case Ms:return _=_.get(A.key===null?E:A.key)||null,d(w,_,A,D);case ar:var V=A._init;return N(_,w,E,V(A._payload),D)}if(io(A)||Qi(A))return _=_.get(E)||null,m(w,_,A,D,null);Xa(w,A)}return null}function j(_,w,E,A){for(var D=null,V=null,b=w,y=w=0,x=null;b!==null&&y<E.length;y++){b.index>y?(x=b,b=null):x=b.sibling;var S=g(_,b,E[y],A);if(S===null){b===null&&(b=x);break}t&&b&&S.alternate===null&&e(_,b),w=i(S,w,y),V===null?D=S:V.sibling=S,V=S,b=x}if(y===E.length)return n(_,b),Ae&&Zr(_,y),D;if(b===null){for(;y<E.length;y++)b=p(_,E[y],A),b!==null&&(w=i(b,w,y),V===null?D=b:V.sibling=b,V=b);return Ae&&Zr(_,y),D}for(b=r(_,b);y<E.length;y++)x=N(b,_,y,E[y],A),x!==null&&(t&&x.alternate!==null&&b.delete(x.key===null?y:x.key),w=i(x,w,y),V===null?D=x:V.sibling=x,V=x);return t&&b.forEach(function(T){return e(_,T)}),Ae&&Zr(_,y),D}function k(_,w,E,A){var D=Qi(E);if(typeof D!="function")throw Error(z(150));if(E=D.call(E),E==null)throw Error(z(151));for(var V=D=null,b=w,y=w=0,x=null,S=E.next();b!==null&&!S.done;y++,S=E.next()){b.index>y?(x=b,b=null):x=b.sibling;var T=g(_,b,S.value,A);if(T===null){b===null&&(b=x);break}t&&b&&T.alternate===null&&e(_,b),w=i(T,w,y),V===null?D=T:V.sibling=T,V=T,b=x}if(S.done)return n(_,b),Ae&&Zr(_,y),D;if(b===null){for(;!S.done;y++,S=E.next())S=p(_,S.value,A),S!==null&&(w=i(S,w,y),V===null?D=S:V.sibling=S,V=S);return Ae&&Zr(_,y),D}for(b=r(_,b);!S.done;y++,S=E.next())S=N(b,_,y,S.value,A),S!==null&&(t&&S.alternate!==null&&b.delete(S.key===null?y:S.key),w=i(S,w,y),V===null?D=S:V.sibling=S,V=S);return t&&b.forEach(function(C){return e(_,C)}),Ae&&Zr(_,y),D}function P(_,w,E,A){if(typeof E=="object"&&E!==null&&E.type===Ls&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Fa:e:{for(var D=E.key,V=w;V!==null;){if(V.key===D){if(D=E.type,D===Ls){if(V.tag===7){n(_,V.sibling),w=s(V,E.props.children),w.return=_,_=w;break e}}else if(V.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===ar&&pg(D)===V.type){n(_,V.sibling),w=s(V,E.props),w.ref=eo(_,V,E),w.return=_,_=w;break e}n(_,V);break}else e(_,V);V=V.sibling}E.type===Ls?(w=as(E.props.children,_.mode,A,E.key),w.return=_,_=w):(A=wl(E.type,E.key,E.props,null,_.mode,A),A.ref=eo(_,w,E),A.return=_,_=A)}return a(_);case Ms:e:{for(V=E.key;w!==null;){if(w.key===V)if(w.tag===4&&w.stateNode.containerInfo===E.containerInfo&&w.stateNode.implementation===E.implementation){n(_,w.sibling),w=s(w,E.children||[]),w.return=_,_=w;break e}else{n(_,w);break}else e(_,w);w=w.sibling}w=rd(E,_.mode,A),w.return=_,_=w}return a(_);case ar:return V=E._init,P(_,w,V(E._payload),A)}if(io(E))return j(_,w,E,A);if(Qi(E))return k(_,w,E,A);Xa(_,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,w!==null&&w.tag===6?(n(_,w.sibling),w=s(w,E),w.return=_,_=w):(n(_,w),w=nd(E,_.mode,A),w.return=_,_=w),a(_)):n(_,w)}return P}var ui=Lx(!0),Ox=Lx(!1),ql=Br(null),Wl=null,Ws=null,am=null;function lm(){am=Ws=Wl=null}function cm(t){var e=ql.current;Ce(ql),t._currentValue=e}function Hd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ei(t,e){Wl=t,am=Ws=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(kt=!0),t.firstContext=null)}function Kt(t){var e=t._currentValue;if(am!==t)if(t={context:t,memoizedValue:e,next:null},Ws===null){if(Wl===null)throw Error(z(308));Ws=t,Wl.dependencies={lanes:0,firstContext:t}}else Ws=Ws.next=t;return e}var rs=null;function um(t){rs===null?rs=[t]:rs.push(t)}function Ux(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,um(e)):(n.next=s.next,s.next=n),e.interleaved=n,qn(t,r)}function qn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var lr=!1;function dm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function On(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Er(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ye&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,qn(t,n)}return s=r.interleaved,s===null?(e.next=e,um(r)):(e.next=s.next,s.next=e),r.interleaved=e,qn(t,n)}function fl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Yh(t,n)}}function gg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Hl(t,e,n,r){var s=t.updateQueue;lr=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,a===null?i=d:a.next=d,a=u;var m=t.alternate;m!==null&&(m=m.updateQueue,c=m.lastBaseUpdate,c!==a&&(c===null?m.firstBaseUpdate=d:c.next=d,m.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;a=0,m=d=u=null,c=i;do{var g=c.lane,N=c.eventTime;if((r&g)===g){m!==null&&(m=m.next={eventTime:N,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var j=t,k=c;switch(g=e,N=n,k.tag){case 1:if(j=k.payload,typeof j=="function"){p=j.call(N,p,g);break e}p=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=k.payload,g=typeof j=="function"?j.call(N,p,g):j,g==null)break e;p=De({},p,g);break e;case 2:lr=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[c]:g.push(c))}else N={eventTime:N,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},m===null?(d=m=N,u=p):m=m.next=N,a|=g;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;g=c,c=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(m===null&&(u=p),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);hs|=a,t.lanes=a,t.memoizedState=p}}function yg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var ca={},En=Br(ca),$o=Br(ca),Bo=Br(ca);function ss(t){if(t===ca)throw Error(z(174));return t}function hm(t,e){switch(Ie(Bo,e),Ie($o,t),Ie(En,ca),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Id(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Id(e,t)}Ce(En),Ie(En,e)}function di(){Ce(En),Ce($o),Ce(Bo)}function zx(t){ss(Bo.current);var e=ss(En.current),n=Id(e,t.type);e!==n&&(Ie($o,t),Ie(En,n))}function mm(t){$o.current===t&&(Ce(En),Ce($o))}var Pe=Br(0);function Gl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Yu=[];function fm(){for(var t=0;t<Yu.length;t++)Yu[t]._workInProgressVersionPrimary=null;Yu.length=0}var pl=Yn.ReactCurrentDispatcher,Xu=Yn.ReactCurrentBatchConfig,ds=0,Re=null,Ge=null,Je=null,Kl=!1,_o=!1,qo=0,cN=0;function ut(){throw Error(z(321))}function pm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ln(t[n],e[n]))return!1;return!0}function gm(t,e,n,r,s,i){if(ds=i,Re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,pl.current=t===null||t.memoizedState===null?mN:fN,t=n(r,s),_o){i=0;do{if(_o=!1,qo=0,25<=i)throw Error(z(301));i+=1,Je=Ge=null,e.updateQueue=null,pl.current=pN,t=n(r,s)}while(_o)}if(pl.current=Ql,e=Ge!==null&&Ge.next!==null,ds=0,Je=Ge=Re=null,Kl=!1,e)throw Error(z(300));return t}function ym(){var t=qo!==0;return qo=0,t}function pn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?Re.memoizedState=Je=t:Je=Je.next=t,Je}function Qt(){if(Ge===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=Ge.next;var e=Je===null?Re.memoizedState:Je.next;if(e!==null)Je=e,Ge=t;else{if(t===null)throw Error(z(310));Ge=t,t={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},Je===null?Re.memoizedState=Je=t:Je=Je.next=t}return Je}function Wo(t,e){return typeof e=="function"?e(t):e}function Ju(t){var e=Qt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=Ge,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=a=null,u=null,d=i;do{var m=d.lane;if((ds&m)===m)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=p,a=r):u=u.next=p,Re.lanes|=m,hs|=m}d=d.next}while(d!==null&&d!==i);u===null?a=r:u.next=c,ln(r,e.memoizedState)||(kt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Re.lanes|=i,hs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Zu(t){var e=Qt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);ln(i,e.memoizedState)||(kt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function $x(){}function Bx(t,e){var n=Re,r=Qt(),s=e(),i=!ln(r.memoizedState,s);if(i&&(r.memoizedState=s,kt=!0),r=r.queue,xm(Hx.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Je!==null&&Je.memoizedState.tag&1){if(n.flags|=2048,Ho(9,Wx.bind(null,n,r,s,e),void 0,null),Ze===null)throw Error(z(349));ds&30||qx(n,e,s)}return s}function qx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Wx(t,e,n,r){e.value=n,e.getSnapshot=r,Gx(e)&&Kx(t)}function Hx(t,e,n){return n(function(){Gx(e)&&Kx(t)})}function Gx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ln(t,n)}catch{return!0}}function Kx(t){var e=qn(t,1);e!==null&&on(e,t,1,-1)}function xg(t){var e=pn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wo,lastRenderedState:t},e.queue=t,t=t.dispatch=hN.bind(null,Re,t),[e.memoizedState,t]}function Ho(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Qx(){return Qt().memoizedState}function gl(t,e,n,r){var s=pn();Re.flags|=t,s.memoizedState=Ho(1|e,n,void 0,r===void 0?null:r)}function jc(t,e,n,r){var s=Qt();r=r===void 0?null:r;var i=void 0;if(Ge!==null){var a=Ge.memoizedState;if(i=a.destroy,r!==null&&pm(r,a.deps)){s.memoizedState=Ho(e,n,i,r);return}}Re.flags|=t,s.memoizedState=Ho(1|e,n,i,r)}function vg(t,e){return gl(8390656,8,t,e)}function xm(t,e){return jc(2048,8,t,e)}function Yx(t,e){return jc(4,2,t,e)}function Xx(t,e){return jc(4,4,t,e)}function Jx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Zx(t,e,n){return n=n!=null?n.concat([t]):null,jc(4,4,Jx.bind(null,e,t),n)}function vm(){}function ev(t,e){var n=Qt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&pm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function tv(t,e){var n=Qt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&pm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function nv(t,e,n){return ds&21?(ln(n,e)||(n=ax(),Re.lanes|=n,hs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,kt=!0),t.memoizedState=n)}function uN(t,e){var n=be;be=n!==0&&4>n?n:4,t(!0);var r=Xu.transition;Xu.transition={};try{t(!1),e()}finally{be=n,Xu.transition=r}}function rv(){return Qt().memoizedState}function dN(t,e,n){var r=Nr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},sv(t))iv(e,n);else if(n=Ux(t,e,n,r),n!==null){var s=Et();on(n,t,r,s),ov(n,e,r)}}function hN(t,e,n){var r=Nr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(sv(t))iv(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,c=i(a,n);if(s.hasEagerState=!0,s.eagerState=c,ln(c,a)){var u=e.interleaved;u===null?(s.next=s,um(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Ux(t,e,s,r),n!==null&&(s=Et(),on(n,t,r,s),ov(n,e,r))}}function sv(t){var e=t.alternate;return t===Re||e!==null&&e===Re}function iv(t,e){_o=Kl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ov(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Yh(t,n)}}var Ql={readContext:Kt,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useInsertionEffect:ut,useLayoutEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useMutableSource:ut,useSyncExternalStore:ut,useId:ut,unstable_isNewReconciler:!1},mN={readContext:Kt,useCallback:function(t,e){return pn().memoizedState=[t,e===void 0?null:e],t},useContext:Kt,useEffect:vg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,gl(4194308,4,Jx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return gl(4194308,4,t,e)},useInsertionEffect:function(t,e){return gl(4,2,t,e)},useMemo:function(t,e){var n=pn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=pn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=dN.bind(null,Re,t),[r.memoizedState,t]},useRef:function(t){var e=pn();return t={current:t},e.memoizedState=t},useState:xg,useDebugValue:vm,useDeferredValue:function(t){return pn().memoizedState=t},useTransition:function(){var t=xg(!1),e=t[0];return t=uN.bind(null,t[1]),pn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Re,s=pn();if(Ae){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),Ze===null)throw Error(z(349));ds&30||qx(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,vg(Hx.bind(null,r,i,t),[t]),r.flags|=2048,Ho(9,Wx.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=pn(),e=Ze.identifierPrefix;if(Ae){var n=Vn,r=Dn;n=(r&~(1<<32-sn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=qo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=cN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},fN={readContext:Kt,useCallback:ev,useContext:Kt,useEffect:xm,useImperativeHandle:Zx,useInsertionEffect:Yx,useLayoutEffect:Xx,useMemo:tv,useReducer:Ju,useRef:Qx,useState:function(){return Ju(Wo)},useDebugValue:vm,useDeferredValue:function(t){var e=Qt();return nv(e,Ge.memoizedState,t)},useTransition:function(){var t=Ju(Wo)[0],e=Qt().memoizedState;return[t,e]},useMutableSource:$x,useSyncExternalStore:Bx,useId:rv,unstable_isNewReconciler:!1},pN={readContext:Kt,useCallback:ev,useContext:Kt,useEffect:xm,useImperativeHandle:Zx,useInsertionEffect:Yx,useLayoutEffect:Xx,useMemo:tv,useReducer:Zu,useRef:Qx,useState:function(){return Zu(Wo)},useDebugValue:vm,useDeferredValue:function(t){var e=Qt();return Ge===null?e.memoizedState=t:nv(e,Ge.memoizedState,t)},useTransition:function(){var t=Zu(Wo)[0],e=Qt().memoizedState;return[t,e]},useMutableSource:$x,useSyncExternalStore:Bx,useId:rv,unstable_isNewReconciler:!1};function en(t,e){if(t&&t.defaultProps){e=De({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Gd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:De({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Cc={isMounted:function(t){return(t=t._reactInternals)?Es(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Et(),s=Nr(t),i=On(r,s);i.payload=e,n!=null&&(i.callback=n),e=Er(t,i,s),e!==null&&(on(e,t,s,r),fl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Et(),s=Nr(t),i=On(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Er(t,i,s),e!==null&&(on(e,t,s,r),fl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Et(),r=Nr(t),s=On(n,r);s.tag=2,e!=null&&(s.callback=e),e=Er(t,s,r),e!==null&&(on(e,t,r,n),fl(e,t,r))}};function wg(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Oo(n,r)||!Oo(s,i):!0}function av(t,e,n){var r=!1,s=Rr,i=e.contextType;return typeof i=="object"&&i!==null?i=Kt(i):(s=Ct(e)?cs:gt.current,r=e.contextTypes,i=(r=r!=null)?li(t,s):Rr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Cc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function _g(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Cc.enqueueReplaceState(e,e.state,null)}function Kd(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},dm(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Kt(i):(i=Ct(e)?cs:gt.current,s.context=li(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Gd(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Cc.enqueueReplaceState(s,s.state,null),Hl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function hi(t,e){try{var n="",r=e;do n+=BE(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function ed(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Qd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var gN=typeof WeakMap=="function"?WeakMap:Map;function lv(t,e,n){n=On(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Xl||(Xl=!0,ih=r),Qd(t,e)},n}function cv(t,e,n){n=On(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Qd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Qd(t,e),typeof r!="function"&&(br===null?br=new Set([this]):br.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Eg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new gN;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=CN.bind(null,t,e,n),e.then(t,t))}function bg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ng(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=On(-1,1),e.tag=2,Er(n,e,1))),n.lanes|=1),t)}var yN=Yn.ReactCurrentOwner,kt=!1;function wt(t,e,n,r){e.child=t===null?Ox(e,null,n,r):ui(e,t.child,n,r)}function Tg(t,e,n,r,s){n=n.render;var i=e.ref;return ei(e,s),r=gm(t,e,n,r,i,s),n=ym(),t!==null&&!kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wn(t,e,s)):(Ae&&n&&sm(e),e.flags|=1,wt(t,e,r,s),e.child)}function Ig(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Sm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,uv(t,e,i,r,s)):(t=wl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Oo,n(a,r)&&t.ref===e.ref)return Wn(t,e,s)}return e.flags|=1,t=Tr(i,r),t.ref=e.ref,t.return=e,e.child=t}function uv(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Oo(i,r)&&t.ref===e.ref)if(kt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(kt=!0);else return e.lanes=t.lanes,Wn(t,e,s)}return Yd(t,e,n,r,s)}function dv(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(Gs,Rt),Rt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ie(Gs,Rt),Rt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ie(Gs,Rt),Rt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ie(Gs,Rt),Rt|=r;return wt(t,e,s,n),e.child}function hv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Yd(t,e,n,r,s){var i=Ct(n)?cs:gt.current;return i=li(e,i),ei(e,s),n=gm(t,e,n,r,i,s),r=ym(),t!==null&&!kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wn(t,e,s)):(Ae&&r&&sm(e),e.flags|=1,wt(t,e,n,s),e.child)}function Sg(t,e,n,r,s){if(Ct(n)){var i=!0;zl(e)}else i=!1;if(ei(e,s),e.stateNode===null)yl(t,e),av(e,n,r),Kd(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,c=e.memoizedProps;a.props=c;var u=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Kt(d):(d=Ct(n)?cs:gt.current,d=li(e,d));var m=n.getDerivedStateFromProps,p=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==r||u!==d)&&_g(e,a,r,d),lr=!1;var g=e.memoizedState;a.state=g,Hl(e,r,a,s),u=e.memoizedState,c!==r||g!==u||jt.current||lr?(typeof m=="function"&&(Gd(e,n,m,r),u=e.memoizedState),(c=lr||wg(e,n,c,r,g,u,d))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=d,r=c):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Fx(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:en(e.type,c),a.props=d,p=e.pendingProps,g=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Kt(u):(u=Ct(n)?cs:gt.current,u=li(e,u));var N=n.getDerivedStateFromProps;(m=typeof N=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==p||g!==u)&&_g(e,a,r,u),lr=!1,g=e.memoizedState,a.state=g,Hl(e,r,a,s);var j=e.memoizedState;c!==p||g!==j||jt.current||lr?(typeof N=="function"&&(Gd(e,n,N,r),j=e.memoizedState),(d=lr||wg(e,n,d,r,g,j,u)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,j,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,j,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=j),a.props=r,a.state=j,a.context=u,r=d):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Xd(t,e,n,r,i,s)}function Xd(t,e,n,r,s,i){hv(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&hg(e,n,!1),Wn(t,e,i);r=e.stateNode,yN.current=e;var c=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=ui(e,t.child,null,i),e.child=ui(e,null,c,i)):wt(t,e,c,i),e.memoizedState=r.state,s&&hg(e,n,!0),e.child}function mv(t){var e=t.stateNode;e.pendingContext?dg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&dg(t,e.context,!1),hm(t,e.containerInfo)}function kg(t,e,n,r,s){return ci(),om(s),e.flags|=256,wt(t,e,n,r),e.child}var Jd={dehydrated:null,treeContext:null,retryLane:0};function Zd(t){return{baseLanes:t,cachePool:null,transitions:null}}function fv(t,e,n){var r=e.pendingProps,s=Pe.current,i=!1,a=(e.flags&128)!==0,c;if((c=a)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ie(Pe,s&1),t===null)return Wd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Rc(a,r,0,null),t=as(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Zd(n),e.memoizedState=Jd,t):wm(e,a));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return xN(t,e,a,r,c,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Tr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=Tr(c,i):(i=as(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?Zd(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Jd,r}return i=t.child,t=i.sibling,r=Tr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function wm(t,e){return e=Rc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ja(t,e,n,r){return r!==null&&om(r),ui(e,t.child,null,n),t=wm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function xN(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=ed(Error(z(422))),Ja(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Rc({mode:"visible",children:r.children},s,0,null),i=as(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ui(e,t.child,null,a),e.child.memoizedState=Zd(a),e.memoizedState=Jd,i);if(!(e.mode&1))return Ja(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(z(419)),r=ed(i,r,void 0),Ja(t,e,a,r)}if(c=(a&t.childLanes)!==0,kt||c){if(r=Ze,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,qn(t,s),on(r,t,s,-1))}return Im(),r=ed(Error(z(421))),Ja(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=AN.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Dt=_r(s.nextSibling),Mt=e,Ae=!0,nn=null,t!==null&&(zt[$t++]=Dn,zt[$t++]=Vn,zt[$t++]=us,Dn=t.id,Vn=t.overflow,us=e),e=wm(e,r.children),e.flags|=4096,e)}function jg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Hd(t.return,e,n)}function td(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function pv(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(wt(t,e,r.children,n),r=Pe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&jg(t,n,e);else if(t.tag===19)jg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ie(Pe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Gl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),td(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Gl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}td(e,!0,n,null,i);break;case"together":td(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function yl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),hs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=Tr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Tr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function vN(t,e,n){switch(e.tag){case 3:mv(e),ci();break;case 5:zx(e);break;case 1:Ct(e.type)&&zl(e);break;case 4:hm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ie(ql,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ie(Pe,Pe.current&1),e.flags|=128,null):n&e.child.childLanes?fv(t,e,n):(Ie(Pe,Pe.current&1),t=Wn(t,e,n),t!==null?t.sibling:null);Ie(Pe,Pe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return pv(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ie(Pe,Pe.current),r)break;return null;case 22:case 23:return e.lanes=0,dv(t,e,n)}return Wn(t,e,n)}var gv,eh,yv,xv;gv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};eh=function(){};yv=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ss(En.current);var i=null;switch(n){case"input":s=Ed(t,s),r=Ed(t,r),i=[];break;case"select":s=De({},s,{value:void 0}),r=De({},r,{value:void 0}),i=[];break;case"textarea":s=Td(t,s),r=Td(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ul)}Sd(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ao.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(a in c)!c.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&c[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ao.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&ke("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};xv=function(t,e,n,r){n!==r&&(e.flags|=4)};function to(t,e){if(!Ae)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function wN(t,e,n){var r=e.pendingProps;switch(im(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(e),null;case 1:return Ct(e.type)&&Fl(),dt(e),null;case 3:return r=e.stateNode,di(),Ce(jt),Ce(gt),fm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ya(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,nn!==null&&(lh(nn),nn=null))),eh(t,e),dt(e),null;case 5:mm(e);var s=ss(Bo.current);if(n=e.type,t!==null&&e.stateNode!=null)yv(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return dt(e),null}if(t=ss(En.current),Ya(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[yn]=e,r[zo]=i,t=(e.mode&1)!==0,n){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(s=0;s<ao.length;s++)ke(ao[s],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":Op(r,i),ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ke("invalid",r);break;case"textarea":Fp(r,i),ke("invalid",r)}Sd(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var c=i[a];a==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&Qa(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Qa(r.textContent,c,t),s=["children",""+c]):Ao.hasOwnProperty(a)&&c!=null&&a==="onScroll"&&ke("scroll",r)}switch(n){case"input":za(r),Up(r,i,!0);break;case"textarea":za(r),zp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ul)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Hy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[yn]=e,t[zo]=r,gv(t,e,!1,!1),e.stateNode=t;e:{switch(a=kd(n,r),n){case"dialog":ke("cancel",t),ke("close",t),s=r;break;case"iframe":case"object":case"embed":ke("load",t),s=r;break;case"video":case"audio":for(s=0;s<ao.length;s++)ke(ao[s],t);s=r;break;case"source":ke("error",t),s=r;break;case"img":case"image":case"link":ke("error",t),ke("load",t),s=r;break;case"details":ke("toggle",t),s=r;break;case"input":Op(t,r),s=Ed(t,r),ke("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=De({},r,{value:void 0}),ke("invalid",t);break;case"textarea":Fp(t,r),s=Td(t,r),ke("invalid",t);break;default:s=r}Sd(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?Qy(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Gy(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Po(t,u):typeof u=="number"&&Po(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ao.hasOwnProperty(i)?u!=null&&i==="onScroll"&&ke("scroll",t):u!=null&&qh(t,i,u,a))}switch(n){case"input":za(t),Up(t,r,!1);break;case"textarea":za(t),zp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Pr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ys(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ys(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ul)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return dt(e),null;case 6:if(t&&e.stateNode!=null)xv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=ss(Bo.current),ss(En.current),Ya(e)){if(r=e.stateNode,n=e.memoizedProps,r[yn]=e,(i=r.nodeValue!==n)&&(t=Mt,t!==null))switch(t.tag){case 3:Qa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Qa(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[yn]=e,e.stateNode=r}return dt(e),null;case 13:if(Ce(Pe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ae&&Dt!==null&&e.mode&1&&!(e.flags&128))Mx(),ci(),e.flags|=98560,i=!1;else if(i=Ya(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[yn]=e}else ci(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;dt(e),i=!1}else nn!==null&&(lh(nn),nn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Pe.current&1?Ke===0&&(Ke=3):Im())),e.updateQueue!==null&&(e.flags|=4),dt(e),null);case 4:return di(),eh(t,e),t===null&&Uo(e.stateNode.containerInfo),dt(e),null;case 10:return cm(e.type._context),dt(e),null;case 17:return Ct(e.type)&&Fl(),dt(e),null;case 19:if(Ce(Pe),i=e.memoizedState,i===null)return dt(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)to(i,!1);else{if(Ke!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Gl(t),a!==null){for(e.flags|=128,to(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ie(Pe,Pe.current&1|2),e.child}t=t.sibling}i.tail!==null&&ze()>mi&&(e.flags|=128,r=!0,to(i,!1),e.lanes=4194304)}else{if(!r)if(t=Gl(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),to(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Ae)return dt(e),null}else 2*ze()-i.renderingStartTime>mi&&n!==1073741824&&(e.flags|=128,r=!0,to(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ze(),e.sibling=null,n=Pe.current,Ie(Pe,r?n&1|2:n&1),e):(dt(e),null);case 22:case 23:return Tm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Rt&1073741824&&(dt(e),e.subtreeFlags&6&&(e.flags|=8192)):dt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function _N(t,e){switch(im(e),e.tag){case 1:return Ct(e.type)&&Fl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return di(),Ce(jt),Ce(gt),fm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return mm(e),null;case 13:if(Ce(Pe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));ci()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ce(Pe),null;case 4:return di(),null;case 10:return cm(e.type._context),null;case 22:case 23:return Tm(),null;case 24:return null;default:return null}}var Za=!1,ft=!1,EN=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Hs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Oe(t,e,r)}else n.current=null}function th(t,e,n){try{n()}catch(r){Oe(t,e,r)}}var Cg=!1;function bN(t,e){if(Od=Ml,t=bx(),rm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,c=-1,u=-1,d=0,m=0,p=t,g=null;t:for(;;){for(var N;p!==n||s!==0&&p.nodeType!==3||(c=a+s),p!==i||r!==0&&p.nodeType!==3||(u=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(N=p.firstChild)!==null;)g=p,p=N;for(;;){if(p===t)break t;if(g===n&&++d===s&&(c=a),g===i&&++m===r&&(u=a),(N=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=N}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ud={focusedElem:t,selectionRange:n},Ml=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var j=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var k=j.memoizedProps,P=j.memoizedState,_=e.stateNode,w=_.getSnapshotBeforeUpdate(e.elementType===e.type?k:en(e.type,k),P);_.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(A){Oe(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return j=Cg,Cg=!1,j}function Eo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&th(e,n,i)}s=s.next}while(s!==r)}}function Ac(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function nh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function vv(t){var e=t.alternate;e!==null&&(t.alternate=null,vv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[yn],delete e[zo],delete e[$d],delete e[iN],delete e[oN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function wv(t){return t.tag===5||t.tag===3||t.tag===4}function Ag(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||wv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function rh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ul));else if(r!==4&&(t=t.child,t!==null))for(rh(t,e,n),t=t.sibling;t!==null;)rh(t,e,n),t=t.sibling}function sh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(sh(t,e,n),t=t.sibling;t!==null;)sh(t,e,n),t=t.sibling}var tt=null,tn=!1;function ir(t,e,n){for(n=n.child;n!==null;)_v(t,e,n),n=n.sibling}function _v(t,e,n){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(bc,n)}catch{}switch(n.tag){case 5:ft||Hs(n,e);case 6:var r=tt,s=tn;tt=null,ir(t,e,n),tt=r,tn=s,tt!==null&&(tn?(t=tt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):tt.removeChild(n.stateNode));break;case 18:tt!==null&&(tn?(t=tt,n=n.stateNode,t.nodeType===8?Ku(t.parentNode,n):t.nodeType===1&&Ku(t,n),Mo(t)):Ku(tt,n.stateNode));break;case 4:r=tt,s=tn,tt=n.stateNode.containerInfo,tn=!0,ir(t,e,n),tt=r,tn=s;break;case 0:case 11:case 14:case 15:if(!ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&th(n,e,a),s=s.next}while(s!==r)}ir(t,e,n);break;case 1:if(!ft&&(Hs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Oe(n,e,c)}ir(t,e,n);break;case 21:ir(t,e,n);break;case 22:n.mode&1?(ft=(r=ft)||n.memoizedState!==null,ir(t,e,n),ft=r):ir(t,e,n);break;default:ir(t,e,n)}}function Pg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new EN),e.forEach(function(r){var s=PN.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Zt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,c=a;e:for(;c!==null;){switch(c.tag){case 5:tt=c.stateNode,tn=!1;break e;case 3:tt=c.stateNode.containerInfo,tn=!0;break e;case 4:tt=c.stateNode.containerInfo,tn=!0;break e}c=c.return}if(tt===null)throw Error(z(160));_v(i,a,s),tt=null,tn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Oe(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ev(e,t),e=e.sibling}function Ev(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Zt(e,t),hn(t),r&4){try{Eo(3,t,t.return),Ac(3,t)}catch(k){Oe(t,t.return,k)}try{Eo(5,t,t.return)}catch(k){Oe(t,t.return,k)}}break;case 1:Zt(e,t),hn(t),r&512&&n!==null&&Hs(n,n.return);break;case 5:if(Zt(e,t),hn(t),r&512&&n!==null&&Hs(n,n.return),t.flags&32){var s=t.stateNode;try{Po(s,"")}catch(k){Oe(t,t.return,k)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&qy(s,i),kd(c,a);var d=kd(c,i);for(a=0;a<u.length;a+=2){var m=u[a],p=u[a+1];m==="style"?Qy(s,p):m==="dangerouslySetInnerHTML"?Gy(s,p):m==="children"?Po(s,p):qh(s,m,p,d)}switch(c){case"input":bd(s,i);break;case"textarea":Wy(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var N=i.value;N!=null?Ys(s,!!i.multiple,N,!1):g!==!!i.multiple&&(i.defaultValue!=null?Ys(s,!!i.multiple,i.defaultValue,!0):Ys(s,!!i.multiple,i.multiple?[]:"",!1))}s[zo]=i}catch(k){Oe(t,t.return,k)}}break;case 6:if(Zt(e,t),hn(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(k){Oe(t,t.return,k)}}break;case 3:if(Zt(e,t),hn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Mo(e.containerInfo)}catch(k){Oe(t,t.return,k)}break;case 4:Zt(e,t),hn(t);break;case 13:Zt(e,t),hn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(bm=ze())),r&4&&Pg(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(ft=(d=ft)||m,Zt(e,t),ft=d):Zt(e,t),hn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!m&&t.mode&1)for(Q=t,m=t.child;m!==null;){for(p=Q=m;Q!==null;){switch(g=Q,N=g.child,g.tag){case 0:case 11:case 14:case 15:Eo(4,g,g.return);break;case 1:Hs(g,g.return);var j=g.stateNode;if(typeof j.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,j.props=e.memoizedProps,j.state=e.memoizedState,j.componentWillUnmount()}catch(k){Oe(r,n,k)}}break;case 5:Hs(g,g.return);break;case 22:if(g.memoizedState!==null){Dg(p);continue}}N!==null?(N.return=g,Q=N):Dg(p)}m=m.sibling}e:for(m=null,p=t;;){if(p.tag===5){if(m===null){m=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=p.stateNode,u=p.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=Ky("display",a))}catch(k){Oe(t,t.return,k)}}}else if(p.tag===6){if(m===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(k){Oe(t,t.return,k)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;m===p&&(m=null),p=p.return}m===p&&(m=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Zt(e,t),hn(t),r&4&&Pg(t);break;case 21:break;default:Zt(e,t),hn(t)}}function hn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(wv(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Po(s,""),r.flags&=-33);var i=Ag(t);sh(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,c=Ag(t);rh(t,c,a);break;default:throw Error(z(161))}}catch(u){Oe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function NN(t,e,n){Q=t,bv(t)}function bv(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var s=Q,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Za;if(!a){var c=s.alternate,u=c!==null&&c.memoizedState!==null||ft;c=Za;var d=ft;if(Za=a,(ft=u)&&!d)for(Q=s;Q!==null;)a=Q,u=a.child,a.tag===22&&a.memoizedState!==null?Vg(s):u!==null?(u.return=a,Q=u):Vg(s);for(;i!==null;)Q=i,bv(i),i=i.sibling;Q=s,Za=c,ft=d}Rg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Q=i):Rg(t)}}function Rg(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ft||Ac(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ft)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:en(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&yg(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}yg(e,a,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var p=m.dehydrated;p!==null&&Mo(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}ft||e.flags&512&&nh(e)}catch(g){Oe(e,e.return,g)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Dg(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Vg(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ac(4,e)}catch(u){Oe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Oe(e,s,u)}}var i=e.return;try{nh(e)}catch(u){Oe(e,i,u)}break;case 5:var a=e.return;try{nh(e)}catch(u){Oe(e,a,u)}}}catch(u){Oe(e,e.return,u)}if(e===t){Q=null;break}var c=e.sibling;if(c!==null){c.return=e.return,Q=c;break}Q=e.return}}var TN=Math.ceil,Yl=Yn.ReactCurrentDispatcher,_m=Yn.ReactCurrentOwner,Ht=Yn.ReactCurrentBatchConfig,ye=0,Ze=null,qe=null,st=0,Rt=0,Gs=Br(0),Ke=0,Go=null,hs=0,Pc=0,Em=0,bo=null,It=null,bm=0,mi=1/0,Pn=null,Xl=!1,ih=null,br=null,el=!1,gr=null,Jl=0,No=0,oh=null,xl=-1,vl=0;function Et(){return ye&6?ze():xl!==-1?xl:xl=ze()}function Nr(t){return t.mode&1?ye&2&&st!==0?st&-st:lN.transition!==null?(vl===0&&(vl=ax()),vl):(t=be,t!==0||(t=window.event,t=t===void 0?16:fx(t.type)),t):1}function on(t,e,n,r){if(50<No)throw No=0,oh=null,Error(z(185));oa(t,n,r),(!(ye&2)||t!==Ze)&&(t===Ze&&(!(ye&2)&&(Pc|=n),Ke===4&&ur(t,st)),At(t,r),n===1&&ye===0&&!(e.mode&1)&&(mi=ze()+500,kc&&qr()))}function At(t,e){var n=t.callbackNode;lb(t,e);var r=Vl(t,t===Ze?st:0);if(r===0)n!==null&&qp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&qp(n),e===1)t.tag===0?aN(Mg.bind(null,t)):Rx(Mg.bind(null,t)),rN(function(){!(ye&6)&&qr()}),n=null;else{switch(lx(r)){case 1:n=Qh;break;case 4:n=ix;break;case 16:n=Dl;break;case 536870912:n=ox;break;default:n=Dl}n=Av(n,Nv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Nv(t,e){if(xl=-1,vl=0,ye&6)throw Error(z(327));var n=t.callbackNode;if(ti()&&t.callbackNode!==n)return null;var r=Vl(t,t===Ze?st:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Zl(t,r);else{e=r;var s=ye;ye|=2;var i=Iv();(Ze!==t||st!==e)&&(Pn=null,mi=ze()+500,os(t,e));do try{kN();break}catch(c){Tv(t,c)}while(!0);lm(),Yl.current=i,ye=s,qe!==null?e=0:(Ze=null,st=0,e=Ke)}if(e!==0){if(e===2&&(s=Rd(t),s!==0&&(r=s,e=ah(t,s))),e===1)throw n=Go,os(t,0),ur(t,r),At(t,ze()),n;if(e===6)ur(t,r);else{if(s=t.current.alternate,!(r&30)&&!IN(s)&&(e=Zl(t,r),e===2&&(i=Rd(t),i!==0&&(r=i,e=ah(t,i))),e===1))throw n=Go,os(t,0),ur(t,r),At(t,ze()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:es(t,It,Pn);break;case 3:if(ur(t,r),(r&130023424)===r&&(e=bm+500-ze(),10<e)){if(Vl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Et(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=zd(es.bind(null,t,It,Pn),e);break}es(t,It,Pn);break;case 4:if(ur(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-sn(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=ze()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*TN(r/1960))-r,10<r){t.timeoutHandle=zd(es.bind(null,t,It,Pn),r);break}es(t,It,Pn);break;case 5:es(t,It,Pn);break;default:throw Error(z(329))}}}return At(t,ze()),t.callbackNode===n?Nv.bind(null,t):null}function ah(t,e){var n=bo;return t.current.memoizedState.isDehydrated&&(os(t,e).flags|=256),t=Zl(t,e),t!==2&&(e=It,It=n,e!==null&&lh(e)),t}function lh(t){It===null?It=t:It.push.apply(It,t)}function IN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!ln(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ur(t,e){for(e&=~Em,e&=~Pc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-sn(e),r=1<<n;t[n]=-1,e&=~r}}function Mg(t){if(ye&6)throw Error(z(327));ti();var e=Vl(t,0);if(!(e&1))return At(t,ze()),null;var n=Zl(t,e);if(t.tag!==0&&n===2){var r=Rd(t);r!==0&&(e=r,n=ah(t,r))}if(n===1)throw n=Go,os(t,0),ur(t,e),At(t,ze()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,es(t,It,Pn),At(t,ze()),null}function Nm(t,e){var n=ye;ye|=1;try{return t(e)}finally{ye=n,ye===0&&(mi=ze()+500,kc&&qr())}}function ms(t){gr!==null&&gr.tag===0&&!(ye&6)&&ti();var e=ye;ye|=1;var n=Ht.transition,r=be;try{if(Ht.transition=null,be=1,t)return t()}finally{be=r,Ht.transition=n,ye=e,!(ye&6)&&qr()}}function Tm(){Rt=Gs.current,Ce(Gs)}function os(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,nN(n)),qe!==null)for(n=qe.return;n!==null;){var r=n;switch(im(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Fl();break;case 3:di(),Ce(jt),Ce(gt),fm();break;case 5:mm(r);break;case 4:di();break;case 13:Ce(Pe);break;case 19:Ce(Pe);break;case 10:cm(r.type._context);break;case 22:case 23:Tm()}n=n.return}if(Ze=t,qe=t=Tr(t.current,null),st=Rt=e,Ke=0,Go=null,Em=Pc=hs=0,It=bo=null,rs!==null){for(e=0;e<rs.length;e++)if(n=rs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}rs=null}return t}function Tv(t,e){do{var n=qe;try{if(lm(),pl.current=Ql,Kl){for(var r=Re.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Kl=!1}if(ds=0,Je=Ge=Re=null,_o=!1,qo=0,_m.current=null,n===null||n.return===null){Ke=1,Go=e,qe=null;break}e:{var i=t,a=n.return,c=n,u=e;if(e=st,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,m=c,p=m.tag;if(!(m.mode&1)&&(p===0||p===11||p===15)){var g=m.alternate;g?(m.updateQueue=g.updateQueue,m.memoizedState=g.memoizedState,m.lanes=g.lanes):(m.updateQueue=null,m.memoizedState=null)}var N=bg(a);if(N!==null){N.flags&=-257,Ng(N,a,c,i,e),N.mode&1&&Eg(i,d,e),e=N,u=d;var j=e.updateQueue;if(j===null){var k=new Set;k.add(u),e.updateQueue=k}else j.add(u);break e}else{if(!(e&1)){Eg(i,d,e),Im();break e}u=Error(z(426))}}else if(Ae&&c.mode&1){var P=bg(a);if(P!==null){!(P.flags&65536)&&(P.flags|=256),Ng(P,a,c,i,e),om(hi(u,c));break e}}i=u=hi(u,c),Ke!==4&&(Ke=2),bo===null?bo=[i]:bo.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=lv(i,u,e);gg(i,_);break e;case 1:c=u;var w=i.type,E=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(br===null||!br.has(E)))){i.flags|=65536,e&=-e,i.lanes|=e;var A=cv(i,c,e);gg(i,A);break e}}i=i.return}while(i!==null)}kv(n)}catch(D){e=D,qe===n&&n!==null&&(qe=n=n.return);continue}break}while(!0)}function Iv(){var t=Yl.current;return Yl.current=Ql,t===null?Ql:t}function Im(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),Ze===null||!(hs&268435455)&&!(Pc&268435455)||ur(Ze,st)}function Zl(t,e){var n=ye;ye|=2;var r=Iv();(Ze!==t||st!==e)&&(Pn=null,os(t,e));do try{SN();break}catch(s){Tv(t,s)}while(!0);if(lm(),ye=n,Yl.current=r,qe!==null)throw Error(z(261));return Ze=null,st=0,Ke}function SN(){for(;qe!==null;)Sv(qe)}function kN(){for(;qe!==null&&!ZE();)Sv(qe)}function Sv(t){var e=Cv(t.alternate,t,Rt);t.memoizedProps=t.pendingProps,e===null?kv(t):qe=e,_m.current=null}function kv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=_N(n,e),n!==null){n.flags&=32767,qe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ke=6,qe=null;return}}else if(n=wN(n,e,Rt),n!==null){qe=n;return}if(e=e.sibling,e!==null){qe=e;return}qe=e=t}while(e!==null);Ke===0&&(Ke=5)}function es(t,e,n){var r=be,s=Ht.transition;try{Ht.transition=null,be=1,jN(t,e,n,r)}finally{Ht.transition=s,be=r}return null}function jN(t,e,n,r){do ti();while(gr!==null);if(ye&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(cb(t,i),t===Ze&&(qe=Ze=null,st=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||el||(el=!0,Av(Dl,function(){return ti(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ht.transition,Ht.transition=null;var a=be;be=1;var c=ye;ye|=4,_m.current=null,bN(t,n),Ev(n,t),Qb(Ud),Ml=!!Od,Ud=Od=null,t.current=n,NN(n),eb(),ye=c,be=a,Ht.transition=i}else t.current=n;if(el&&(el=!1,gr=t,Jl=s),i=t.pendingLanes,i===0&&(br=null),rb(n.stateNode),At(t,ze()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Xl)throw Xl=!1,t=ih,ih=null,t;return Jl&1&&t.tag!==0&&ti(),i=t.pendingLanes,i&1?t===oh?No++:(No=0,oh=t):No=0,qr(),null}function ti(){if(gr!==null){var t=lx(Jl),e=Ht.transition,n=be;try{if(Ht.transition=null,be=16>t?16:t,gr===null)var r=!1;else{if(t=gr,gr=null,Jl=0,ye&6)throw Error(z(331));var s=ye;for(ye|=4,Q=t.current;Q!==null;){var i=Q,a=i.child;if(Q.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(Q=d;Q!==null;){var m=Q;switch(m.tag){case 0:case 11:case 15:Eo(8,m,i)}var p=m.child;if(p!==null)p.return=m,Q=p;else for(;Q!==null;){m=Q;var g=m.sibling,N=m.return;if(vv(m),m===d){Q=null;break}if(g!==null){g.return=N,Q=g;break}Q=N}}}var j=i.alternate;if(j!==null){var k=j.child;if(k!==null){j.child=null;do{var P=k.sibling;k.sibling=null,k=P}while(k!==null)}}Q=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,Q=a;else e:for(;Q!==null;){if(i=Q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Eo(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,Q=_;break e}Q=i.return}}var w=t.current;for(Q=w;Q!==null;){a=Q;var E=a.child;if(a.subtreeFlags&2064&&E!==null)E.return=a,Q=E;else e:for(a=w;Q!==null;){if(c=Q,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Ac(9,c)}}catch(D){Oe(c,c.return,D)}if(c===a){Q=null;break e}var A=c.sibling;if(A!==null){A.return=c.return,Q=A;break e}Q=c.return}}if(ye=s,qr(),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(bc,t)}catch{}r=!0}return r}finally{be=n,Ht.transition=e}}return!1}function Lg(t,e,n){e=hi(n,e),e=lv(t,e,1),t=Er(t,e,1),e=Et(),t!==null&&(oa(t,1,e),At(t,e))}function Oe(t,e,n){if(t.tag===3)Lg(t,t,n);else for(;e!==null;){if(e.tag===3){Lg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(br===null||!br.has(r))){t=hi(n,t),t=cv(e,t,1),e=Er(e,t,1),t=Et(),e!==null&&(oa(e,1,t),At(e,t));break}}e=e.return}}function CN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Et(),t.pingedLanes|=t.suspendedLanes&n,Ze===t&&(st&n)===n&&(Ke===4||Ke===3&&(st&130023424)===st&&500>ze()-bm?os(t,0):Em|=n),At(t,e)}function jv(t,e){e===0&&(t.mode&1?(e=qa,qa<<=1,!(qa&130023424)&&(qa=4194304)):e=1);var n=Et();t=qn(t,e),t!==null&&(oa(t,e,n),At(t,n))}function AN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),jv(t,n)}function PN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),jv(t,n)}var Cv;Cv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||jt.current)kt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return kt=!1,vN(t,e,n);kt=!!(t.flags&131072)}else kt=!1,Ae&&e.flags&1048576&&Dx(e,Bl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;yl(t,e),t=e.pendingProps;var s=li(e,gt.current);ei(e,n),s=gm(null,e,r,t,s,n);var i=ym();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ct(r)?(i=!0,zl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,dm(e),s.updater=Cc,e.stateNode=s,s._reactInternals=e,Kd(e,r,t,n),e=Xd(null,e,r,!0,i,n)):(e.tag=0,Ae&&i&&sm(e),wt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(yl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=DN(r),t=en(r,t),s){case 0:e=Yd(null,e,r,t,n);break e;case 1:e=Sg(null,e,r,t,n);break e;case 11:e=Tg(null,e,r,t,n);break e;case 14:e=Ig(null,e,r,en(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:en(r,s),Yd(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:en(r,s),Sg(t,e,r,s,n);case 3:e:{if(mv(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Fx(t,e),Hl(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=hi(Error(z(423)),e),e=kg(t,e,r,n,s);break e}else if(r!==s){s=hi(Error(z(424)),e),e=kg(t,e,r,n,s);break e}else for(Dt=_r(e.stateNode.containerInfo.firstChild),Mt=e,Ae=!0,nn=null,n=Ox(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ci(),r===s){e=Wn(t,e,n);break e}wt(t,e,r,n)}e=e.child}return e;case 5:return zx(e),t===null&&Wd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,Fd(r,s)?a=null:i!==null&&Fd(r,i)&&(e.flags|=32),hv(t,e),wt(t,e,a,n),e.child;case 6:return t===null&&Wd(e),null;case 13:return fv(t,e,n);case 4:return hm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ui(e,null,r,n):wt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:en(r,s),Tg(t,e,r,s,n);case 7:return wt(t,e,e.pendingProps,n),e.child;case 8:return wt(t,e,e.pendingProps.children,n),e.child;case 12:return wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Ie(ql,r._currentValue),r._currentValue=a,i!==null)if(ln(i.value,a)){if(i.children===s.children&&!jt.current){e=Wn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){a=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=On(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?u.next=u:(u.next=m.next,m.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Hd(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(z(341));a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),Hd(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}wt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ei(e,n),s=Kt(s),r=r(s),e.flags|=1,wt(t,e,r,n),e.child;case 14:return r=e.type,s=en(r,e.pendingProps),s=en(r.type,s),Ig(t,e,r,s,n);case 15:return uv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:en(r,s),yl(t,e),e.tag=1,Ct(r)?(t=!0,zl(e)):t=!1,ei(e,n),av(e,r,s),Kd(e,r,s,n),Xd(null,e,r,!0,t,n);case 19:return pv(t,e,n);case 22:return dv(t,e,n)}throw Error(z(156,e.tag))};function Av(t,e){return sx(t,e)}function RN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(t,e,n,r){return new RN(t,e,n,r)}function Sm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function DN(t){if(typeof t=="function")return Sm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Hh)return 11;if(t===Gh)return 14}return 2}function Tr(t,e){var n=t.alternate;return n===null?(n=Wt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function wl(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")Sm(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Ls:return as(n.children,s,i,e);case Wh:a=8,s|=8;break;case xd:return t=Wt(12,n,e,s|2),t.elementType=xd,t.lanes=i,t;case vd:return t=Wt(13,n,e,s),t.elementType=vd,t.lanes=i,t;case wd:return t=Wt(19,n,e,s),t.elementType=wd,t.lanes=i,t;case zy:return Rc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Uy:a=10;break e;case Fy:a=9;break e;case Hh:a=11;break e;case Gh:a=14;break e;case ar:a=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=Wt(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function as(t,e,n,r){return t=Wt(7,t,r,e),t.lanes=n,t}function Rc(t,e,n,r){return t=Wt(22,t,r,e),t.elementType=zy,t.lanes=n,t.stateNode={isHidden:!1},t}function nd(t,e,n){return t=Wt(6,t,null,e),t.lanes=n,t}function rd(t,e,n){return e=Wt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function VN(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lu(0),this.expirationTimes=Lu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function km(t,e,n,r,s,i,a,c,u){return t=new VN(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Wt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},dm(i),t}function MN(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ms,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Pv(t){if(!t)return Rr;t=t._reactInternals;e:{if(Es(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ct(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Ct(n))return Px(t,n,e)}return e}function Rv(t,e,n,r,s,i,a,c,u){return t=km(n,r,!0,t,s,i,a,c,u),t.context=Pv(null),n=t.current,r=Et(),s=Nr(n),i=On(r,s),i.callback=e??null,Er(n,i,s),t.current.lanes=s,oa(t,s,r),At(t,r),t}function Dc(t,e,n,r){var s=e.current,i=Et(),a=Nr(s);return n=Pv(n),e.context===null?e.context=n:e.pendingContext=n,e=On(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Er(s,e,a),t!==null&&(on(t,s,a,i),fl(t,s,a)),a}function ec(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Og(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function jm(t,e){Og(t,e),(t=t.alternate)&&Og(t,e)}function LN(){return null}var Dv=typeof reportError=="function"?reportError:function(t){console.error(t)};function Cm(t){this._internalRoot=t}Vc.prototype.render=Cm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Dc(t,e,null,null)};Vc.prototype.unmount=Cm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ms(function(){Dc(null,t,null,null)}),e[Bn]=null}};function Vc(t){this._internalRoot=t}Vc.prototype.unstable_scheduleHydration=function(t){if(t){var e=dx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<cr.length&&e!==0&&e<cr[n].priority;n++);cr.splice(n,0,t),n===0&&mx(t)}};function Am(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Mc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ug(){}function ON(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=ec(a);i.call(d)}}var a=Rv(e,r,t,0,null,!1,!1,"",Ug);return t._reactRootContainer=a,t[Bn]=a.current,Uo(t.nodeType===8?t.parentNode:t),ms(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=ec(u);c.call(d)}}var u=km(t,0,!1,null,null,!1,!1,"",Ug);return t._reactRootContainer=u,t[Bn]=u.current,Uo(t.nodeType===8?t.parentNode:t),ms(function(){Dc(e,u,n,r)}),u}function Lc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var c=s;s=function(){var u=ec(a);c.call(u)}}Dc(e,a,t,s)}else a=ON(n,e,t,s,r);return ec(a)}cx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=oo(e.pendingLanes);n!==0&&(Yh(e,n|1),At(e,ze()),!(ye&6)&&(mi=ze()+500,qr()))}break;case 13:ms(function(){var r=qn(t,1);if(r!==null){var s=Et();on(r,t,1,s)}}),jm(t,1)}};Xh=function(t){if(t.tag===13){var e=qn(t,134217728);if(e!==null){var n=Et();on(e,t,134217728,n)}jm(t,134217728)}};ux=function(t){if(t.tag===13){var e=Nr(t),n=qn(t,e);if(n!==null){var r=Et();on(n,t,e,r)}jm(t,e)}};dx=function(){return be};hx=function(t,e){var n=be;try{return be=t,e()}finally{be=n}};Cd=function(t,e,n){switch(e){case"input":if(bd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Sc(r);if(!s)throw Error(z(90));By(r),bd(r,s)}}}break;case"textarea":Wy(t,n);break;case"select":e=n.value,e!=null&&Ys(t,!!n.multiple,e,!1)}};Jy=Nm;Zy=ms;var UN={usingClientEntryPoint:!1,Events:[la,zs,Sc,Yy,Xy,Nm]},no={findFiberByHostInstance:ns,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},FN={bundleType:no.bundleType,version:no.version,rendererPackageName:no.rendererPackageName,rendererConfig:no.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=nx(t),t===null?null:t.stateNode},findFiberByHostInstance:no.findFiberByHostInstance||LN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tl.isDisabled&&tl.supportsFiber)try{bc=tl.inject(FN),_n=tl}catch{}}Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UN;Ut.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Am(e))throw Error(z(200));return MN(t,e,null,n)};Ut.createRoot=function(t,e){if(!Am(t))throw Error(z(299));var n=!1,r="",s=Dv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=km(t,1,!1,null,null,n,!1,r,s),t[Bn]=e.current,Uo(t.nodeType===8?t.parentNode:t),new Cm(e)};Ut.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=nx(e),t=t===null?null:t.stateNode,t};Ut.flushSync=function(t){return ms(t)};Ut.hydrate=function(t,e,n){if(!Mc(e))throw Error(z(200));return Lc(null,t,e,!0,n)};Ut.hydrateRoot=function(t,e,n){if(!Am(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=Dv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=Rv(e,null,t,1,n??null,s,!1,i,a),t[Bn]=e.current,Uo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Vc(e)};Ut.render=function(t,e,n){if(!Mc(e))throw Error(z(200));return Lc(null,t,e,!1,n)};Ut.unmountComponentAtNode=function(t){if(!Mc(t))throw Error(z(40));return t._reactRootContainer?(ms(function(){Lc(null,null,t,!1,function(){t._reactRootContainer=null,t[Bn]=null})}),!0):!1};Ut.unstable_batchedUpdates=Nm;Ut.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Mc(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Lc(t,e,n,!1,r)};Ut.version="18.3.1-next-f1338f8080-20240426";function Vv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Vv)}catch(t){console.error(t)}}Vv(),Vy.exports=Ut;var zN=Vy.exports,Mv,Fg=zN;Mv=Fg.createRoot,Fg.hydrateRoot;const $N="modulepreload",BN=function(t){return"/"+t},zg={},mn=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=BN(u),u in zg)return;zg[u]=!0;const d=u.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${m}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":$N,d||(p.as="script"),p.crossOrigin="",p.href=u,c&&p.setAttribute("nonce",c),document.head.appendChild(p),d)return new Promise((g,N)=>{p.addEventListener("load",g),p.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return s.then(a=>{for(const c of a||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})},qN=()=>{};var $g={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},WN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},Ov={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,c=a?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,m=i>>2,p=(i&3)<<4|c>>4;let g=(c&15)<<2|d>>6,N=d&63;u||(N=64,a||(g=64)),r.push(n[m],n[p],n[g],n[N])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Lv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):WN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||p==null)throw new HN;const g=i<<2|c>>4;if(r.push(g),d!==64){const N=c<<4&240|d>>2;if(r.push(N),p!==64){const j=d<<6&192|p;r.push(j)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class HN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GN=function(t){const e=Lv(t);return Ov.encodeByteArray(e,!0)},tc=function(t){return GN(t).replace(/\./g,"")},Uv=function(t){try{return Ov.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN=()=>KN().__FIREBASE_DEFAULTS__,YN=()=>{if(typeof process>"u"||typeof $g>"u")return;const t=$g.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},XN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Uv(t[1]);return e&&JSON.parse(e)},Oc=()=>{try{return qN()||QN()||YN()||XN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Fv=t=>{var e,n;return(n=(e=Oc())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},JN=t=>{const e=Fv(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},zv=()=>{var t;return(t=Oc())==null?void 0:t.config},$v=t=>{var e;return(e=Oc())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Bv(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[tc(JSON.stringify(n)),tc(JSON.stringify(a)),""].join(".")}const To={};function t2(){const t={prod:[],emulator:[]};for(const e of Object.keys(To))To[e]?t.emulator.push(e):t.prod.push(e);return t}function n2(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Bg=!1;function qv(t,e){if(typeof window>"u"||typeof document>"u"||!ki(window.location.host)||To[t]===e||To[t]||Bg)return;To[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=t2().prod.length>0;function a(){const g=document.getElementById(r);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,N){g.setAttribute("width","24"),g.setAttribute("id",N),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Bg=!0,a()},g}function m(g,N){g.setAttribute("id",N),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=n2(r),N=n("text"),j=document.getElementById(N)||document.createElement("span"),k=n("learnmore"),P=document.getElementById(k)||document.createElement("a"),_=n("preprendIcon"),w=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const E=g.element;c(E),m(P,k);const A=d();u(w,_),E.append(w,j,P,A),document.body.appendChild(E)}i?(j.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function r2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yt())}function s2(){var e;const t=(e=Oc())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function i2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function o2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function a2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function l2(){const t=yt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function c2(){return!s2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function u2(){try{return typeof indexedDB=="object"}catch{return!1}}function d2(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2="FirebaseError";class Xn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=h2,Object.setPrototypeOf(this,Xn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ua.prototype.create)}}class ua{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?m2(i,r):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new Xn(s,c,r)}}function m2(t,e){return t.replace(f2,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const f2=/\{\$([^}]+)}/g;function p2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function fs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(qg(i)&&qg(a)){if(!fs(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function qg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function da(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function lo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function co(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function g2(t,e){const n=new y2(t,e);return n.subscribe.bind(n)}class y2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");x2(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=sd),s.error===void 0&&(s.error=sd),s.complete===void 0&&(s.complete=sd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function x2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function sd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(t){return t&&t._delegate?t._delegate:t}class ps{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ZN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_2(e))try{this.getOrInitializeService({instanceIdentifier:ts})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ts){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ts){return this.instances.has(e)}getOptions(e=ts){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&a.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:w2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ts){return this.component?this.component.multipleInstances?e:ts:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function w2(t){return t===ts?void 0:t}function _2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new v2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var de;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(de||(de={}));const b2={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},N2=de.INFO,T2={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},I2=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=T2[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pm{constructor(e){this.name=e,this._logLevel=N2,this._logHandler=I2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?b2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}}const S2=(t,e)=>e.some(n=>t instanceof n);let Wg,Hg;function k2(){return Wg||(Wg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function j2(){return Hg||(Hg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Wv=new WeakMap,ch=new WeakMap,Hv=new WeakMap,id=new WeakMap,Rm=new WeakMap;function C2(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Ir(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Wv.set(n,t)}).catch(()=>{}),Rm.set(e,t),e}function A2(t){if(ch.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});ch.set(t,e)}let uh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ch.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Hv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ir(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function P2(t){uh=t(uh)}function R2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(od(this),e,...n);return Hv.set(r,e.sort?e.sort():[e]),Ir(r)}:j2().includes(t)?function(...e){return t.apply(od(this),e),Ir(Wv.get(this))}:function(...e){return Ir(t.apply(od(this),e))}}function D2(t){return typeof t=="function"?R2(t):(t instanceof IDBTransaction&&A2(t),S2(t,k2())?new Proxy(t,uh):t)}function Ir(t){if(t instanceof IDBRequest)return C2(t);if(id.has(t))return id.get(t);const e=D2(t);return e!==t&&(id.set(t,e),Rm.set(e,t)),e}const od=t=>Rm.get(t);function V2(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),c=Ir(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Ir(a.result),u.oldVersion,u.newVersion,Ir(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const M2=["get","getKey","getAll","getAllKeys","count"],L2=["put","add","delete","clear"],ad=new Map;function Gg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ad.get(e))return ad.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=L2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||M2.includes(n)))return;const i=async function(a,...c){const u=this.transaction(a,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return ad.set(e,i),i}P2(t=>({...t,get:(e,n,r)=>Gg(e,n)||t.get(e,n,r),has:(e,n)=>!!Gg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(U2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function U2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const dh="@firebase/app",Kg="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn=new Pm("@firebase/app"),F2="@firebase/app-compat",z2="@firebase/analytics-compat",$2="@firebase/analytics",B2="@firebase/app-check-compat",q2="@firebase/app-check",W2="@firebase/auth",H2="@firebase/auth-compat",G2="@firebase/database",K2="@firebase/data-connect",Q2="@firebase/database-compat",Y2="@firebase/functions",X2="@firebase/functions-compat",J2="@firebase/installations",Z2="@firebase/installations-compat",eT="@firebase/messaging",tT="@firebase/messaging-compat",nT="@firebase/performance",rT="@firebase/performance-compat",sT="@firebase/remote-config",iT="@firebase/remote-config-compat",oT="@firebase/storage",aT="@firebase/storage-compat",lT="@firebase/firestore",cT="@firebase/ai",uT="@firebase/firestore-compat",dT="firebase",hT="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh="[DEFAULT]",mT={[dh]:"fire-core",[F2]:"fire-core-compat",[$2]:"fire-analytics",[z2]:"fire-analytics-compat",[q2]:"fire-app-check",[B2]:"fire-app-check-compat",[W2]:"fire-auth",[H2]:"fire-auth-compat",[G2]:"fire-rtdb",[K2]:"fire-data-connect",[Q2]:"fire-rtdb-compat",[Y2]:"fire-fn",[X2]:"fire-fn-compat",[J2]:"fire-iid",[Z2]:"fire-iid-compat",[eT]:"fire-fcm",[tT]:"fire-fcm-compat",[nT]:"fire-perf",[rT]:"fire-perf-compat",[sT]:"fire-rc",[iT]:"fire-rc-compat",[oT]:"fire-gcs",[aT]:"fire-gcs-compat",[lT]:"fire-fst",[uT]:"fire-fst-compat",[cT]:"fire-vertex","fire-js":"fire-js",[dT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nc=new Map,fT=new Map,mh=new Map;function Qg(t,e){try{t.container.addComponent(e)}catch(n){Hn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function fi(t){const e=t.name;if(mh.has(e))return Hn.debug(`There were multiple attempts to register component ${e}.`),!1;mh.set(e,t);for(const n of nc.values())Qg(n,t);for(const n of fT.values())Qg(n,t);return!0}function Dm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Bt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Sr=new ua("app","Firebase",pT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ps("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji=hT;function Gv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:hh,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Sr.create("bad-app-name",{appName:String(s)});if(n||(n=zv()),!n)throw Sr.create("no-options");const i=nc.get(s);if(i){if(fs(n,i.options)&&fs(r,i.config))return i;throw Sr.create("duplicate-app",{appName:s})}const a=new E2(s);for(const u of mh.values())a.addComponent(u);const c=new gT(n,r,a);return nc.set(s,c),c}function Kv(t=hh){const e=nc.get(t);if(!e&&t===hh&&zv())return Gv();if(!e)throw Sr.create("no-app",{appName:t});return e}function kr(t,e,n){let r=mT[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hn.warn(a.join(" "));return}fi(new ps(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT="firebase-heartbeat-database",xT=1,Ko="firebase-heartbeat-store";let ld=null;function Qv(){return ld||(ld=V2(yT,xT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ko)}catch(n){console.warn(n)}}}}).catch(t=>{throw Sr.create("idb-open",{originalErrorMessage:t.message})})),ld}async function vT(t){try{const n=(await Qv()).transaction(Ko),r=await n.objectStore(Ko).get(Yv(t));return await n.done,r}catch(e){if(e instanceof Xn)Hn.warn(e.message);else{const n=Sr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Hn.warn(n.message)}}}async function Yg(t,e){try{const r=(await Qv()).transaction(Ko,"readwrite");await r.objectStore(Ko).put(e,Yv(t)),await r.done}catch(n){if(n instanceof Xn)Hn.warn(n.message);else{const r=Sr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Hn.warn(r.message)}}}function Yv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT=1024,_T=30;class ET{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new NT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Xg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>_T){const a=TT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Hn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Xg(),{heartbeatsToSend:r,unsentEntries:s}=bT(this._heartbeatsCache.heartbeats),i=tc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Hn.warn(n),""}}}function Xg(){return new Date().toISOString().substring(0,10)}function bT(t,e=wT){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),Jg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Jg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class NT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return u2()?d2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await vT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Yg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Yg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Jg(t){return tc(JSON.stringify({version:2,heartbeats:t})).length}function TT(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(t){fi(new ps("platform-logger",e=>new O2(e),"PRIVATE")),fi(new ps("heartbeat",e=>new ET(e),"PRIVATE")),kr(dh,Kg,t),kr(dh,Kg,"esm2020"),kr("fire-js","")}IT("");var Zg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jr,Xv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,y){function x(){}x.prototype=y.prototype,b.D=y.prototype,b.prototype=new x,b.prototype.constructor=b,b.C=function(S,T,C){for(var I=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)I[ee-2]=arguments[ee];return y.prototype[T].apply(S,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,y,x){x||(x=0);var S=Array(16);if(typeof y=="string")for(var T=0;16>T;++T)S[T]=y.charCodeAt(x++)|y.charCodeAt(x++)<<8|y.charCodeAt(x++)<<16|y.charCodeAt(x++)<<24;else for(T=0;16>T;++T)S[T]=y[x++]|y[x++]<<8|y[x++]<<16|y[x++]<<24;y=b.g[0],x=b.g[1],T=b.g[2];var C=b.g[3],I=y+(C^x&(T^C))+S[0]+3614090360&4294967295;y=x+(I<<7&4294967295|I>>>25),I=C+(T^y&(x^T))+S[1]+3905402710&4294967295,C=y+(I<<12&4294967295|I>>>20),I=T+(x^C&(y^x))+S[2]+606105819&4294967295,T=C+(I<<17&4294967295|I>>>15),I=x+(y^T&(C^y))+S[3]+3250441966&4294967295,x=T+(I<<22&4294967295|I>>>10),I=y+(C^x&(T^C))+S[4]+4118548399&4294967295,y=x+(I<<7&4294967295|I>>>25),I=C+(T^y&(x^T))+S[5]+1200080426&4294967295,C=y+(I<<12&4294967295|I>>>20),I=T+(x^C&(y^x))+S[6]+2821735955&4294967295,T=C+(I<<17&4294967295|I>>>15),I=x+(y^T&(C^y))+S[7]+4249261313&4294967295,x=T+(I<<22&4294967295|I>>>10),I=y+(C^x&(T^C))+S[8]+1770035416&4294967295,y=x+(I<<7&4294967295|I>>>25),I=C+(T^y&(x^T))+S[9]+2336552879&4294967295,C=y+(I<<12&4294967295|I>>>20),I=T+(x^C&(y^x))+S[10]+4294925233&4294967295,T=C+(I<<17&4294967295|I>>>15),I=x+(y^T&(C^y))+S[11]+2304563134&4294967295,x=T+(I<<22&4294967295|I>>>10),I=y+(C^x&(T^C))+S[12]+1804603682&4294967295,y=x+(I<<7&4294967295|I>>>25),I=C+(T^y&(x^T))+S[13]+4254626195&4294967295,C=y+(I<<12&4294967295|I>>>20),I=T+(x^C&(y^x))+S[14]+2792965006&4294967295,T=C+(I<<17&4294967295|I>>>15),I=x+(y^T&(C^y))+S[15]+1236535329&4294967295,x=T+(I<<22&4294967295|I>>>10),I=y+(T^C&(x^T))+S[1]+4129170786&4294967295,y=x+(I<<5&4294967295|I>>>27),I=C+(x^T&(y^x))+S[6]+3225465664&4294967295,C=y+(I<<9&4294967295|I>>>23),I=T+(y^x&(C^y))+S[11]+643717713&4294967295,T=C+(I<<14&4294967295|I>>>18),I=x+(C^y&(T^C))+S[0]+3921069994&4294967295,x=T+(I<<20&4294967295|I>>>12),I=y+(T^C&(x^T))+S[5]+3593408605&4294967295,y=x+(I<<5&4294967295|I>>>27),I=C+(x^T&(y^x))+S[10]+38016083&4294967295,C=y+(I<<9&4294967295|I>>>23),I=T+(y^x&(C^y))+S[15]+3634488961&4294967295,T=C+(I<<14&4294967295|I>>>18),I=x+(C^y&(T^C))+S[4]+3889429448&4294967295,x=T+(I<<20&4294967295|I>>>12),I=y+(T^C&(x^T))+S[9]+568446438&4294967295,y=x+(I<<5&4294967295|I>>>27),I=C+(x^T&(y^x))+S[14]+3275163606&4294967295,C=y+(I<<9&4294967295|I>>>23),I=T+(y^x&(C^y))+S[3]+4107603335&4294967295,T=C+(I<<14&4294967295|I>>>18),I=x+(C^y&(T^C))+S[8]+1163531501&4294967295,x=T+(I<<20&4294967295|I>>>12),I=y+(T^C&(x^T))+S[13]+2850285829&4294967295,y=x+(I<<5&4294967295|I>>>27),I=C+(x^T&(y^x))+S[2]+4243563512&4294967295,C=y+(I<<9&4294967295|I>>>23),I=T+(y^x&(C^y))+S[7]+1735328473&4294967295,T=C+(I<<14&4294967295|I>>>18),I=x+(C^y&(T^C))+S[12]+2368359562&4294967295,x=T+(I<<20&4294967295|I>>>12),I=y+(x^T^C)+S[5]+4294588738&4294967295,y=x+(I<<4&4294967295|I>>>28),I=C+(y^x^T)+S[8]+2272392833&4294967295,C=y+(I<<11&4294967295|I>>>21),I=T+(C^y^x)+S[11]+1839030562&4294967295,T=C+(I<<16&4294967295|I>>>16),I=x+(T^C^y)+S[14]+4259657740&4294967295,x=T+(I<<23&4294967295|I>>>9),I=y+(x^T^C)+S[1]+2763975236&4294967295,y=x+(I<<4&4294967295|I>>>28),I=C+(y^x^T)+S[4]+1272893353&4294967295,C=y+(I<<11&4294967295|I>>>21),I=T+(C^y^x)+S[7]+4139469664&4294967295,T=C+(I<<16&4294967295|I>>>16),I=x+(T^C^y)+S[10]+3200236656&4294967295,x=T+(I<<23&4294967295|I>>>9),I=y+(x^T^C)+S[13]+681279174&4294967295,y=x+(I<<4&4294967295|I>>>28),I=C+(y^x^T)+S[0]+3936430074&4294967295,C=y+(I<<11&4294967295|I>>>21),I=T+(C^y^x)+S[3]+3572445317&4294967295,T=C+(I<<16&4294967295|I>>>16),I=x+(T^C^y)+S[6]+76029189&4294967295,x=T+(I<<23&4294967295|I>>>9),I=y+(x^T^C)+S[9]+3654602809&4294967295,y=x+(I<<4&4294967295|I>>>28),I=C+(y^x^T)+S[12]+3873151461&4294967295,C=y+(I<<11&4294967295|I>>>21),I=T+(C^y^x)+S[15]+530742520&4294967295,T=C+(I<<16&4294967295|I>>>16),I=x+(T^C^y)+S[2]+3299628645&4294967295,x=T+(I<<23&4294967295|I>>>9),I=y+(T^(x|~C))+S[0]+4096336452&4294967295,y=x+(I<<6&4294967295|I>>>26),I=C+(x^(y|~T))+S[7]+1126891415&4294967295,C=y+(I<<10&4294967295|I>>>22),I=T+(y^(C|~x))+S[14]+2878612391&4294967295,T=C+(I<<15&4294967295|I>>>17),I=x+(C^(T|~y))+S[5]+4237533241&4294967295,x=T+(I<<21&4294967295|I>>>11),I=y+(T^(x|~C))+S[12]+1700485571&4294967295,y=x+(I<<6&4294967295|I>>>26),I=C+(x^(y|~T))+S[3]+2399980690&4294967295,C=y+(I<<10&4294967295|I>>>22),I=T+(y^(C|~x))+S[10]+4293915773&4294967295,T=C+(I<<15&4294967295|I>>>17),I=x+(C^(T|~y))+S[1]+2240044497&4294967295,x=T+(I<<21&4294967295|I>>>11),I=y+(T^(x|~C))+S[8]+1873313359&4294967295,y=x+(I<<6&4294967295|I>>>26),I=C+(x^(y|~T))+S[15]+4264355552&4294967295,C=y+(I<<10&4294967295|I>>>22),I=T+(y^(C|~x))+S[6]+2734768916&4294967295,T=C+(I<<15&4294967295|I>>>17),I=x+(C^(T|~y))+S[13]+1309151649&4294967295,x=T+(I<<21&4294967295|I>>>11),I=y+(T^(x|~C))+S[4]+4149444226&4294967295,y=x+(I<<6&4294967295|I>>>26),I=C+(x^(y|~T))+S[11]+3174756917&4294967295,C=y+(I<<10&4294967295|I>>>22),I=T+(y^(C|~x))+S[2]+718787259&4294967295,T=C+(I<<15&4294967295|I>>>17),I=x+(C^(T|~y))+S[9]+3951481745&4294967295,b.g[0]=b.g[0]+y&4294967295,b.g[1]=b.g[1]+(T+(I<<21&4294967295|I>>>11))&4294967295,b.g[2]=b.g[2]+T&4294967295,b.g[3]=b.g[3]+C&4294967295}r.prototype.u=function(b,y){y===void 0&&(y=b.length);for(var x=y-this.blockSize,S=this.B,T=this.h,C=0;C<y;){if(T==0)for(;C<=x;)s(this,b,C),C+=this.blockSize;if(typeof b=="string"){for(;C<y;)if(S[T++]=b.charCodeAt(C++),T==this.blockSize){s(this,S),T=0;break}}else for(;C<y;)if(S[T++]=b[C++],T==this.blockSize){s(this,S),T=0;break}}this.h=T,this.o+=y},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var y=1;y<b.length-8;++y)b[y]=0;var x=8*this.o;for(y=b.length-8;y<b.length;++y)b[y]=x&255,x/=256;for(this.u(b),b=Array(16),y=x=0;4>y;++y)for(var S=0;32>S;S+=8)b[x++]=this.g[y]>>>S&255;return b};function i(b,y){var x=c;return Object.prototype.hasOwnProperty.call(x,b)?x[b]:x[b]=y(b)}function a(b,y){this.h=y;for(var x=[],S=!0,T=b.length-1;0<=T;T--){var C=b[T]|0;S&&C==y||(x[T]=C,S=!1)}this.g=x}var c={};function u(b){return-128<=b&&128>b?i(b,function(y){return new a([y|0],0>y?-1:0)}):new a([b|0],0>b?-1:0)}function d(b){if(isNaN(b)||!isFinite(b))return p;if(0>b)return P(d(-b));for(var y=[],x=1,S=0;b>=x;S++)y[S]=b/x|0,x*=4294967296;return new a(y,0)}function m(b,y){if(b.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(b.charAt(0)=="-")return P(m(b.substring(1),y));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=d(Math.pow(y,8)),S=p,T=0;T<b.length;T+=8){var C=Math.min(8,b.length-T),I=parseInt(b.substring(T,T+C),y);8>C?(C=d(Math.pow(y,C)),S=S.j(C).add(d(I))):(S=S.j(x),S=S.add(d(I)))}return S}var p=u(0),g=u(1),N=u(16777216);t=a.prototype,t.m=function(){if(k(this))return-P(this).m();for(var b=0,y=1,x=0;x<this.g.length;x++){var S=this.i(x);b+=(0<=S?S:4294967296+S)*y,y*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(j(this))return"0";if(k(this))return"-"+P(this).toString(b);for(var y=d(Math.pow(b,6)),x=this,S="";;){var T=A(x,y).g;x=_(x,T.j(y));var C=((0<x.g.length?x.g[0]:x.h)>>>0).toString(b);if(x=T,j(x))return C+S;for(;6>C.length;)C="0"+C;S=C+S}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function j(b){if(b.h!=0)return!1;for(var y=0;y<b.g.length;y++)if(b.g[y]!=0)return!1;return!0}function k(b){return b.h==-1}t.l=function(b){return b=_(this,b),k(b)?-1:j(b)?0:1};function P(b){for(var y=b.g.length,x=[],S=0;S<y;S++)x[S]=~b.g[S];return new a(x,~b.h).add(g)}t.abs=function(){return k(this)?P(this):this},t.add=function(b){for(var y=Math.max(this.g.length,b.g.length),x=[],S=0,T=0;T<=y;T++){var C=S+(this.i(T)&65535)+(b.i(T)&65535),I=(C>>>16)+(this.i(T)>>>16)+(b.i(T)>>>16);S=I>>>16,C&=65535,I&=65535,x[T]=I<<16|C}return new a(x,x[x.length-1]&-2147483648?-1:0)};function _(b,y){return b.add(P(y))}t.j=function(b){if(j(this)||j(b))return p;if(k(this))return k(b)?P(this).j(P(b)):P(P(this).j(b));if(k(b))return P(this.j(P(b)));if(0>this.l(N)&&0>b.l(N))return d(this.m()*b.m());for(var y=this.g.length+b.g.length,x=[],S=0;S<2*y;S++)x[S]=0;for(S=0;S<this.g.length;S++)for(var T=0;T<b.g.length;T++){var C=this.i(S)>>>16,I=this.i(S)&65535,ee=b.i(T)>>>16,H=b.i(T)&65535;x[2*S+2*T]+=I*H,w(x,2*S+2*T),x[2*S+2*T+1]+=C*H,w(x,2*S+2*T+1),x[2*S+2*T+1]+=I*ee,w(x,2*S+2*T+1),x[2*S+2*T+2]+=C*ee,w(x,2*S+2*T+2)}for(S=0;S<y;S++)x[S]=x[2*S+1]<<16|x[2*S];for(S=y;S<2*y;S++)x[S]=0;return new a(x,0)};function w(b,y){for(;(b[y]&65535)!=b[y];)b[y+1]+=b[y]>>>16,b[y]&=65535,y++}function E(b,y){this.g=b,this.h=y}function A(b,y){if(j(y))throw Error("division by zero");if(j(b))return new E(p,p);if(k(b))return y=A(P(b),y),new E(P(y.g),P(y.h));if(k(y))return y=A(b,P(y)),new E(P(y.g),y.h);if(30<b.g.length){if(k(b)||k(y))throw Error("slowDivide_ only works with positive integers.");for(var x=g,S=y;0>=S.l(b);)x=D(x),S=D(S);var T=V(x,1),C=V(S,1);for(S=V(S,2),x=V(x,2);!j(S);){var I=C.add(S);0>=I.l(b)&&(T=T.add(x),C=I),S=V(S,1),x=V(x,1)}return y=_(b,T.j(y)),new E(T,y)}for(T=p;0<=b.l(y);){for(x=Math.max(1,Math.floor(b.m()/y.m())),S=Math.ceil(Math.log(x)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),C=d(x),I=C.j(y);k(I)||0<I.l(b);)x-=S,C=d(x),I=C.j(y);j(C)&&(C=g),T=T.add(C),b=_(b,I)}return new E(T,b)}t.A=function(b){return A(this,b).h},t.and=function(b){for(var y=Math.max(this.g.length,b.g.length),x=[],S=0;S<y;S++)x[S]=this.i(S)&b.i(S);return new a(x,this.h&b.h)},t.or=function(b){for(var y=Math.max(this.g.length,b.g.length),x=[],S=0;S<y;S++)x[S]=this.i(S)|b.i(S);return new a(x,this.h|b.h)},t.xor=function(b){for(var y=Math.max(this.g.length,b.g.length),x=[],S=0;S<y;S++)x[S]=this.i(S)^b.i(S);return new a(x,this.h^b.h)};function D(b){for(var y=b.g.length+1,x=[],S=0;S<y;S++)x[S]=b.i(S)<<1|b.i(S-1)>>>31;return new a(x,b.h)}function V(b,y){var x=y>>5;y%=32;for(var S=b.g.length-x,T=[],C=0;C<S;C++)T[C]=0<y?b.i(C+x)>>>y|b.i(C+x+1)<<32-y:b.i(C+x);return new a(T,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Xv=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=m,jr=a}).apply(typeof Zg<"u"?Zg:typeof self<"u"?self:typeof window<"u"?window:{});var nl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jv,uo,Zv,_l,fh,ew,tw,nw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,f){return l==Array.prototype||l==Object.prototype||(l[h]=f.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof nl=="object"&&nl];for(var h=0;h<l.length;++h){var f=l[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var f=r;l=l.split(".");for(var v=0;v<l.length-1;v++){var R=l[v];if(!(R in f))break e;f=f[R]}l=l[l.length-1],v=f[l],h=h(v),h!=v&&h!=null&&e(f,l,{configurable:!0,writable:!0,value:h})}}function i(l,h){l instanceof String&&(l+="");var f=0,v=!1,R={next:function(){if(!v&&f<l.length){var M=f++;return{value:h(M,l[M]),done:!1}}return v=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}s("Array.prototype.values",function(l){return l||function(){return i(this,function(h,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function u(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function d(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function m(l,h,f){return l.call.apply(l.bind,arguments)}function p(l,h,f){if(!l)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var R=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(R,v),l.apply(h,R)}}return function(){return l.apply(h,arguments)}}function g(l,h,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:p,g.apply(null,arguments)}function N(l,h){var f=Array.prototype.slice.call(arguments,1);return function(){var v=f.slice();return v.push.apply(v,arguments),l.apply(this,v)}}function j(l,h){function f(){}f.prototype=h.prototype,l.aa=h.prototype,l.prototype=new f,l.prototype.constructor=l,l.Qb=function(v,R,M){for(var q=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)q[Ne-2]=arguments[Ne];return h.prototype[R].apply(v,q)}}function k(l){const h=l.length;if(0<h){const f=Array(h);for(let v=0;v<h;v++)f[v]=l[v];return f}return[]}function P(l,h){for(let f=1;f<arguments.length;f++){const v=arguments[f];if(u(v)){const R=l.length||0,M=v.length||0;l.length=R+M;for(let q=0;q<M;q++)l[R+q]=v[q]}else l.push(v)}}class _{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function w(l){return/^[\s\xa0]*$/.test(l)}function E(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function A(l){return A[" "](l),l}A[" "]=function(){};var D=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function V(l,h,f){for(const v in l)h.call(f,l[v],v,l)}function b(l,h){for(const f in l)h.call(void 0,l[f],f,l)}function y(l){const h={};for(const f in l)h[f]=l[f];return h}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(l,h){let f,v;for(let R=1;R<arguments.length;R++){v=arguments[R];for(f in v)l[f]=v[f];for(let M=0;M<x.length;M++)f=x[M],Object.prototype.hasOwnProperty.call(v,f)&&(l[f]=v[f])}}function T(l){var h=1;l=l.split(":");const f=[];for(;0<h&&l.length;)f.push(l.shift()),h--;return l.length&&f.push(l.join(":")),f}function C(l){c.setTimeout(()=>{throw l},0)}function I(){var l=Y;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class ee{constructor(){this.h=this.g=null}add(h,f){const v=H.get();v.set(h,f),this.h?this.h.next=v:this.g=v,this.h=v}}var H=new _(()=>new F,l=>l.reset());class F{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let xe,B=!1,Y=new ee,X=()=>{const l=c.Promise.resolve(void 0);xe=()=>{l.then(ie)}};var ie=()=>{for(var l;l=I();){try{l.h.call(l.g)}catch(f){C(f)}var h=H;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}B=!1};function $(){this.s=this.s,this.C=this.C}$.prototype.s=!1,$.prototype.ma=function(){this.s||(this.s=!0,this.N())},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var te=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const f=()=>{};c.addEventListener("test",f,h),c.removeEventListener("test",f,h)}catch{}return l}();function oe(l,h){if(G.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var f=this.type=l.type,v=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(D){e:{try{A(h.nodeName);var R=!0;break e}catch{}R=!1}R||(h=null)}}else f=="mouseover"?h=l.fromElement:f=="mouseout"&&(h=l.toElement);this.relatedTarget=h,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:we[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&oe.aa.h.call(this)}}j(oe,G);var we={2:"touch",3:"pen",4:"mouse"};oe.prototype.h=function(){oe.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Me="closure_listenable_"+(1e6*Math.random()|0),Zn=0;function er(l,h,f,v,R){this.listener=l,this.proxy=null,this.src=h,this.type=f,this.capture=!!v,this.ha=R,this.key=++Zn,this.da=this.fa=!1}function tr(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Ea(l){this.src=l,this.g={},this.h=0}Ea.prototype.add=function(l,h,f,v,R){var M=l.toString();l=this.g[M],l||(l=this.g[M]=[],this.h++);var q=uu(l,h,v,R);return-1<q?(h=l[q],f||(h.fa=!1)):(h=new er(h,this.src,M,!!v,R),h.fa=f,l.push(h)),h};function cu(l,h){var f=h.type;if(f in l.g){var v=l.g[f],R=Array.prototype.indexOf.call(v,h,void 0),M;(M=0<=R)&&Array.prototype.splice.call(v,R,1),M&&(tr(h),l.g[f].length==0&&(delete l.g[f],l.h--))}}function uu(l,h,f,v){for(var R=0;R<l.length;++R){var M=l[R];if(!M.da&&M.listener==h&&M.capture==!!f&&M.ha==v)return R}return-1}var du="closure_lm_"+(1e6*Math.random()|0),hu={};function Rf(l,h,f,v,R){if(Array.isArray(h)){for(var M=0;M<h.length;M++)Rf(l,h[M],f,v,R);return null}return f=Mf(f),l&&l[Me]?l.K(h,f,d(v)?!!v.capture:!!v,R):z1(l,h,f,!1,v,R)}function z1(l,h,f,v,R,M){if(!h)throw Error("Invalid event type");var q=d(R)?!!R.capture:!!R,Ne=fu(l);if(Ne||(l[du]=Ne=new Ea(l)),f=Ne.add(h,f,v,q,M),f.proxy)return f;if(v=$1(),f.proxy=v,v.src=l,v.listener=f,l.addEventListener)te||(R=q),R===void 0&&(R=!1),l.addEventListener(h.toString(),v,R);else if(l.attachEvent)l.attachEvent(Vf(h.toString()),v);else if(l.addListener&&l.removeListener)l.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return f}function $1(){function l(f){return h.call(l.src,l.listener,f)}const h=B1;return l}function Df(l,h,f,v,R){if(Array.isArray(h))for(var M=0;M<h.length;M++)Df(l,h[M],f,v,R);else v=d(v)?!!v.capture:!!v,f=Mf(f),l&&l[Me]?(l=l.i,h=String(h).toString(),h in l.g&&(M=l.g[h],f=uu(M,f,v,R),-1<f&&(tr(M[f]),Array.prototype.splice.call(M,f,1),M.length==0&&(delete l.g[h],l.h--)))):l&&(l=fu(l))&&(h=l.g[h.toString()],l=-1,h&&(l=uu(h,f,v,R)),(f=-1<l?h[l]:null)&&mu(f))}function mu(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[Me])cu(h.i,l);else{var f=l.type,v=l.proxy;h.removeEventListener?h.removeEventListener(f,v,l.capture):h.detachEvent?h.detachEvent(Vf(f),v):h.addListener&&h.removeListener&&h.removeListener(v),(f=fu(h))?(cu(f,l),f.h==0&&(f.src=null,h[du]=null)):tr(l)}}}function Vf(l){return l in hu?hu[l]:hu[l]="on"+l}function B1(l,h){if(l.da)l=!0;else{h=new oe(h,this);var f=l.listener,v=l.ha||l.src;l.fa&&mu(l),l=f.call(v,h)}return l}function fu(l){return l=l[du],l instanceof Ea?l:null}var pu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mf(l){return typeof l=="function"?l:(l[pu]||(l[pu]=function(h){return l.handleEvent(h)}),l[pu])}function at(){$.call(this),this.i=new Ea(this),this.M=this,this.F=null}j(at,$),at.prototype[Me]=!0,at.prototype.removeEventListener=function(l,h,f,v){Df(this,l,h,f,v)};function xt(l,h){var f,v=l.F;if(v)for(f=[];v;v=v.F)f.push(v);if(l=l.M,v=h.type||h,typeof h=="string")h=new G(h,l);else if(h instanceof G)h.target=h.target||l;else{var R=h;h=new G(v,l),S(h,R)}if(R=!0,f)for(var M=f.length-1;0<=M;M--){var q=h.g=f[M];R=ba(q,v,!0,h)&&R}if(q=h.g=l,R=ba(q,v,!0,h)&&R,R=ba(q,v,!1,h)&&R,f)for(M=0;M<f.length;M++)q=h.g=f[M],R=ba(q,v,!1,h)&&R}at.prototype.N=function(){if(at.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var f=l.g[h],v=0;v<f.length;v++)tr(f[v]);delete l.g[h],l.h--}}this.F=null},at.prototype.K=function(l,h,f,v){return this.i.add(String(l),h,!1,f,v)},at.prototype.L=function(l,h,f,v){return this.i.add(String(l),h,!0,f,v)};function ba(l,h,f,v){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var R=!0,M=0;M<h.length;++M){var q=h[M];if(q&&!q.da&&q.capture==f){var Ne=q.listener,et=q.ha||q.src;q.fa&&cu(l.i,q),R=Ne.call(et,v)!==!1&&R}}return R&&!v.defaultPrevented}function Lf(l,h,f){if(typeof l=="function")f&&(l=g(l,f));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(l,h||0)}function Of(l){l.g=Lf(()=>{l.g=null,l.i&&(l.i=!1,Of(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class q1 extends ${constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Of(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mi(l){$.call(this),this.h=l,this.g={}}j(Mi,$);var Uf=[];function Ff(l){V(l.g,function(h,f){this.g.hasOwnProperty(f)&&mu(h)},l),l.g={}}Mi.prototype.N=function(){Mi.aa.N.call(this),Ff(this)},Mi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gu=c.JSON.stringify,W1=c.JSON.parse,H1=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function yu(){}yu.prototype.h=null;function zf(l){return l.h||(l.h=l.i())}function $f(){}var Li={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xu(){G.call(this,"d")}j(xu,G);function vu(){G.call(this,"c")}j(vu,G);var Qr={},Bf=null;function Na(){return Bf=Bf||new at}Qr.La="serverreachability";function qf(l){G.call(this,Qr.La,l)}j(qf,G);function Oi(l){const h=Na();xt(h,new qf(h))}Qr.STAT_EVENT="statevent";function Wf(l,h){G.call(this,Qr.STAT_EVENT,l),this.stat=h}j(Wf,G);function vt(l){const h=Na();xt(h,new Wf(h,l))}Qr.Ma="timingevent";function Hf(l,h){G.call(this,Qr.Ma,l),this.size=h}j(Hf,G);function Ui(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},h)}function Fi(){this.g=!0}Fi.prototype.xa=function(){this.g=!1};function G1(l,h,f,v,R,M){l.info(function(){if(l.g)if(M)for(var q="",Ne=M.split("&"),et=0;et<Ne.length;et++){var ve=Ne[et].split("=");if(1<ve.length){var lt=ve[0];ve=ve[1];var ct=lt.split("_");q=2<=ct.length&&ct[1]=="type"?q+(lt+"="+ve+"&"):q+(lt+"=redacted&")}}else q=null;else q=M;return"XMLHTTP REQ ("+v+") [attempt "+R+"]: "+h+`
`+f+`
`+q})}function K1(l,h,f,v,R,M,q){l.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+R+"]: "+h+`
`+f+`
`+M+" "+q})}function Ss(l,h,f,v){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+Y1(l,f)+(v?" "+v:"")})}function Q1(l,h){l.info(function(){return"TIMEOUT: "+h})}Fi.prototype.info=function(){};function Y1(l,h){if(!l.g)return h;if(!h)return null;try{var f=JSON.parse(h);if(f){for(l=0;l<f.length;l++)if(Array.isArray(f[l])){var v=f[l];if(!(2>v.length)){var R=v[1];if(Array.isArray(R)&&!(1>R.length)){var M=R[0];if(M!="noop"&&M!="stop"&&M!="close")for(var q=1;q<R.length;q++)R[q]=""}}}}return gu(f)}catch{return h}}var Ta={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gf={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},wu;function Ia(){}j(Ia,yu),Ia.prototype.g=function(){return new XMLHttpRequest},Ia.prototype.i=function(){return{}},wu=new Ia;function nr(l,h,f,v){this.j=l,this.i=h,this.l=f,this.R=v||1,this.U=new Mi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Kf}function Kf(){this.i=null,this.g="",this.h=!1}var Qf={},_u={};function Eu(l,h,f){l.L=1,l.v=Ca(Cn(h)),l.m=f,l.P=!0,Yf(l,null)}function Yf(l,h){l.F=Date.now(),Sa(l),l.A=Cn(l.v);var f=l.A,v=l.R;Array.isArray(v)||(v=[String(v)]),up(f.i,"t",v),l.C=0,f=l.j.J,l.h=new Kf,l.g=kp(l.j,f?h:null,!l.m),0<l.O&&(l.M=new q1(g(l.Y,l,l.g),l.O)),h=l.U,f=l.g,v=l.ca;var R="readystatechange";Array.isArray(R)||(R&&(Uf[0]=R.toString()),R=Uf);for(var M=0;M<R.length;M++){var q=Rf(f,R[M],v||h.handleEvent,!1,h.h||h);if(!q)break;h.g[q.key]=q}h=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),Oi(),G1(l.i,l.u,l.A,l.l,l.R,l.m)}nr.prototype.ca=function(l){l=l.target;const h=this.M;h&&An(l)==3?h.j():this.Y(l)},nr.prototype.Y=function(l){try{if(l==this.g)e:{const ct=An(this.g);var h=this.g.Ba();const Cs=this.g.Z();if(!(3>ct)&&(ct!=3||this.g&&(this.h.h||this.g.oa()||yp(this.g)))){this.J||ct!=4||h==7||(h==8||0>=Cs?Oi(3):Oi(2)),bu(this);var f=this.g.Z();this.X=f;t:if(Xf(this)){var v=yp(this.g);l="";var R=v.length,M=An(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yr(this),zi(this);var q="";break t}this.h.i=new c.TextDecoder}for(h=0;h<R;h++)this.h.h=!0,l+=this.h.i.decode(v[h],{stream:!(M&&h==R-1)});v.length=0,this.h.g+=l,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=f==200,K1(this.i,this.u,this.A,this.l,this.R,ct,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ne,et=this.g;if((Ne=et.g?et.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Ne)){var ve=Ne;break t}}ve=null}if(f=ve)Ss(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Nu(this,f);else{this.o=!1,this.s=3,vt(12),Yr(this),zi(this);break e}}if(this.P){f=!0;let Jt;for(;!this.J&&this.C<q.length;)if(Jt=X1(this,q),Jt==_u){ct==4&&(this.s=4,vt(14),f=!1),Ss(this.i,this.l,null,"[Incomplete Response]");break}else if(Jt==Qf){this.s=4,vt(15),Ss(this.i,this.l,q,"[Invalid Chunk]"),f=!1;break}else Ss(this.i,this.l,Jt,null),Nu(this,Jt);if(Xf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||q.length!=0||this.h.h||(this.s=1,vt(16),f=!1),this.o=this.o&&f,!f)Ss(this.i,this.l,q,"[Invalid Chunked Response]"),Yr(this),zi(this);else if(0<q.length&&!this.W){this.W=!0;var lt=this.j;lt.g==this&&lt.ba&&!lt.M&&(lt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),Cu(lt),lt.M=!0,vt(11))}}else Ss(this.i,this.l,q,null),Nu(this,q);ct==4&&Yr(this),this.o&&!this.J&&(ct==4?Np(this.j,this):(this.o=!1,Sa(this)))}else fE(this.g),f==400&&0<q.indexOf("Unknown SID")?(this.s=3,vt(12)):(this.s=0,vt(13)),Yr(this),zi(this)}}}catch{}finally{}};function Xf(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function X1(l,h){var f=l.C,v=h.indexOf(`
`,f);return v==-1?_u:(f=Number(h.substring(f,v)),isNaN(f)?Qf:(v+=1,v+f>h.length?_u:(h=h.slice(v,v+f),l.C=v+f,h)))}nr.prototype.cancel=function(){this.J=!0,Yr(this)};function Sa(l){l.S=Date.now()+l.I,Jf(l,l.I)}function Jf(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Ui(g(l.ba,l),h)}function bu(l){l.B&&(c.clearTimeout(l.B),l.B=null)}nr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Q1(this.i,this.A),this.L!=2&&(Oi(),vt(17)),Yr(this),this.s=2,zi(this)):Jf(this,this.S-l)};function zi(l){l.j.G==0||l.J||Np(l.j,l)}function Yr(l){bu(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,Ff(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function Nu(l,h){try{var f=l.j;if(f.G!=0&&(f.g==l||Tu(f.h,l))){if(!l.K&&Tu(f.h,l)&&f.G==3){try{var v=f.Da.g.parse(h)}catch{v=null}if(Array.isArray(v)&&v.length==3){var R=v;if(R[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<l.F)Ma(f),Da(f);else break e;ju(f),vt(18)}}else f.za=R[1],0<f.za-f.T&&37500>R[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ui(g(f.Za,f),6e3));if(1>=tp(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Jr(f,11)}else if((l.K||f.g==l)&&Ma(f),!w(h))for(R=f.Da.g.parse(h),h=0;h<R.length;h++){let ve=R[h];if(f.T=ve[0],ve=ve[1],f.G==2)if(ve[0]=="c"){f.K=ve[1],f.ia=ve[2];const lt=ve[3];lt!=null&&(f.la=lt,f.j.info("VER="+f.la));const ct=ve[4];ct!=null&&(f.Aa=ct,f.j.info("SVER="+f.Aa));const Cs=ve[5];Cs!=null&&typeof Cs=="number"&&0<Cs&&(v=1.5*Cs,f.L=v,f.j.info("backChannelRequestTimeoutMs_="+v)),v=f;const Jt=l.g;if(Jt){const Oa=Jt.g?Jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oa){var M=v.h;M.g||Oa.indexOf("spdy")==-1&&Oa.indexOf("quic")==-1&&Oa.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Iu(M,M.h),M.h=null))}if(v.D){const Au=Jt.g?Jt.g.getResponseHeader("X-HTTP-Session-Id"):null;Au&&(v.ya=Au,Se(v.I,v.D,Au))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-l.F,f.j.info("Handshake RTT: "+f.R+"ms")),v=f;var q=l;if(v.qa=Sp(v,v.J?v.ia:null,v.W),q.K){np(v.h,q);var Ne=q,et=v.L;et&&(Ne.I=et),Ne.B&&(bu(Ne),Sa(Ne)),v.g=q}else Ep(v);0<f.i.length&&Va(f)}else ve[0]!="stop"&&ve[0]!="close"||Jr(f,7);else f.G==3&&(ve[0]=="stop"||ve[0]=="close"?ve[0]=="stop"?Jr(f,7):ku(f):ve[0]!="noop"&&f.l&&f.l.ta(ve),f.v=0)}}Oi(4)}catch{}}var J1=class{constructor(l,h){this.g=l,this.map=h}};function Zf(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ep(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function tp(l){return l.h?1:l.g?l.g.size:0}function Tu(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Iu(l,h){l.g?l.g.add(h):l.h=h}function np(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}Zf.prototype.cancel=function(){if(this.i=rp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function rp(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const f of l.g.values())h=h.concat(f.D);return h}return k(l.i)}function Z1(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var h=[],f=l.length,v=0;v<f;v++)h.push(l[v]);return h}h=[],f=0;for(v in l)h[f++]=l[v];return h}function eE(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var h=[];l=l.length;for(var f=0;f<l;f++)h.push(f);return h}h=[],f=0;for(const v in l)h[f++]=v;return h}}}function sp(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var f=eE(l),v=Z1(l),R=v.length,M=0;M<R;M++)h.call(void 0,v[M],f&&f[M],l)}var ip=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tE(l,h){if(l){l=l.split("&");for(var f=0;f<l.length;f++){var v=l[f].indexOf("="),R=null;if(0<=v){var M=l[f].substring(0,v);R=l[f].substring(v+1)}else M=l[f];h(M,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function Xr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Xr){this.h=l.h,ka(this,l.j),this.o=l.o,this.g=l.g,ja(this,l.s),this.l=l.l;var h=l.i,f=new qi;f.i=h.i,h.g&&(f.g=new Map(h.g),f.h=h.h),op(this,f),this.m=l.m}else l&&(h=String(l).match(ip))?(this.h=!1,ka(this,h[1]||"",!0),this.o=$i(h[2]||""),this.g=$i(h[3]||"",!0),ja(this,h[4]),this.l=$i(h[5]||"",!0),op(this,h[6]||"",!0),this.m=$i(h[7]||"")):(this.h=!1,this.i=new qi(null,this.h))}Xr.prototype.toString=function(){var l=[],h=this.j;h&&l.push(Bi(h,ap,!0),":");var f=this.g;return(f||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Bi(h,ap,!0),"@"),l.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&l.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&l.push("/"),l.push(Bi(f,f.charAt(0)=="/"?sE:rE,!0))),(f=this.i.toString())&&l.push("?",f),(f=this.m)&&l.push("#",Bi(f,oE)),l.join("")};function Cn(l){return new Xr(l)}function ka(l,h,f){l.j=f?$i(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function ja(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function op(l,h,f){h instanceof qi?(l.i=h,aE(l.i,l.h)):(f||(h=Bi(h,iE)),l.i=new qi(h,l.h))}function Se(l,h,f){l.i.set(h,f)}function Ca(l){return Se(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function $i(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Bi(l,h,f){return typeof l=="string"?(l=encodeURI(l).replace(h,nE),f&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function nE(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var ap=/[#\/\?@]/g,rE=/[#\?:]/g,sE=/[#\?]/g,iE=/[#\?@]/g,oE=/#/g;function qi(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function rr(l){l.g||(l.g=new Map,l.h=0,l.i&&tE(l.i,function(h,f){l.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}t=qi.prototype,t.add=function(l,h){rr(this),this.i=null,l=ks(this,l);var f=this.g.get(l);return f||this.g.set(l,f=[]),f.push(h),this.h+=1,this};function lp(l,h){rr(l),h=ks(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function cp(l,h){return rr(l),h=ks(l,h),l.g.has(h)}t.forEach=function(l,h){rr(this),this.g.forEach(function(f,v){f.forEach(function(R){l.call(h,R,v,this)},this)},this)},t.na=function(){rr(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),f=[];for(let v=0;v<h.length;v++){const R=l[v];for(let M=0;M<R.length;M++)f.push(h[v])}return f},t.V=function(l){rr(this);let h=[];if(typeof l=="string")cp(this,l)&&(h=h.concat(this.g.get(ks(this,l))));else{l=Array.from(this.g.values());for(let f=0;f<l.length;f++)h=h.concat(l[f])}return h},t.set=function(l,h){return rr(this),this.i=null,l=ks(this,l),cp(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function up(l,h,f){lp(l,h),0<f.length&&(l.i=null,l.g.set(ks(l,h),k(f)),l.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var f=0;f<h.length;f++){var v=h[f];const M=encodeURIComponent(String(v)),q=this.V(v);for(v=0;v<q.length;v++){var R=M;q[v]!==""&&(R+="="+encodeURIComponent(String(q[v]))),l.push(R)}}return this.i=l.join("&")};function ks(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function aE(l,h){h&&!l.j&&(rr(l),l.i=null,l.g.forEach(function(f,v){var R=v.toLowerCase();v!=R&&(lp(this,v),up(this,R,f))},l)),l.j=h}function lE(l,h){const f=new Fi;if(c.Image){const v=new Image;v.onload=N(sr,f,"TestLoadImage: loaded",!0,h,v),v.onerror=N(sr,f,"TestLoadImage: error",!1,h,v),v.onabort=N(sr,f,"TestLoadImage: abort",!1,h,v),v.ontimeout=N(sr,f,"TestLoadImage: timeout",!1,h,v),c.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=l}else h(!1)}function cE(l,h){const f=new Fi,v=new AbortController,R=setTimeout(()=>{v.abort(),sr(f,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:v.signal}).then(M=>{clearTimeout(R),M.ok?sr(f,"TestPingServer: ok",!0,h):sr(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(R),sr(f,"TestPingServer: error",!1,h)})}function sr(l,h,f,v,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),v(f)}catch{}}function uE(){this.g=new H1}function dE(l,h,f){const v=f||"";try{sp(l,function(R,M){let q=R;d(R)&&(q=gu(R)),h.push(v+M+"="+encodeURIComponent(q))})}catch(R){throw h.push(v+"type="+encodeURIComponent("_badmap")),R}}function Aa(l){this.l=l.Ub||null,this.j=l.eb||!1}j(Aa,yu),Aa.prototype.g=function(){return new Pa(this.l,this.j)},Aa.prototype.i=function(l){return function(){return l}}({});function Pa(l,h){at.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}j(Pa,at),t=Pa.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,Hi(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wi(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Hi(this)),this.g&&(this.readyState=3,Hi(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;dp(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function dp(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Wi(this):Hi(this),this.readyState==3&&dp(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Wi(this))},t.Qa=function(l){this.g&&(this.response=l,Wi(this))},t.ga=function(){this.g&&Wi(this)};function Wi(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Hi(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,l.push(f[0]+": "+f[1]),f=h.next();return l.join(`\r
`)};function Hi(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Pa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function hp(l){let h="";return V(l,function(f,v){h+=v,h+=":",h+=f,h+=`\r
`}),h}function Su(l,h,f){e:{for(v in f){var v=!1;break e}v=!0}v||(f=hp(f),typeof l=="string"?f!=null&&encodeURIComponent(String(f)):Se(l,h,f))}function Le(l){at.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}j(Le,at);var hE=/^https?$/i,mE=["POST","PUT"];t=Le.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,f,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():wu.g(),this.v=this.o?zf(this.o):zf(wu),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(M){mp(this,M);return}if(l=f||"",f=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var R in v)f.set(R,v[R]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const M of v.keys())f.set(M,v.get(M));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(f.keys()).find(M=>M.toLowerCase()=="content-type"),R=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(mE,h,void 0))||v||R||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,q]of f)this.g.setRequestHeader(M,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gp(this),this.u=!0,this.g.send(l),this.u=!1}catch(M){mp(this,M)}};function mp(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,fp(l),Ra(l)}function fp(l){l.A||(l.A=!0,xt(l,"complete"),xt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,xt(this,"complete"),xt(this,"abort"),Ra(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ra(this,!0)),Le.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?pp(this):this.bb())},t.bb=function(){pp(this)};function pp(l){if(l.h&&typeof a<"u"&&(!l.v[1]||An(l)!=4||l.Z()!=2)){if(l.u&&An(l)==4)Lf(l.Ea,0,l);else if(xt(l,"readystatechange"),An(l)==4){l.h=!1;try{const q=l.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var v;if(v=q===0){var R=String(l.D).match(ip)[1]||null;!R&&c.self&&c.self.location&&(R=c.self.location.protocol.slice(0,-1)),v=!hE.test(R?R.toLowerCase():"")}f=v}if(f)xt(l,"complete"),xt(l,"success");else{l.m=6;try{var M=2<An(l)?l.g.statusText:""}catch{M=""}l.l=M+" ["+l.Z()+"]",fp(l)}}finally{Ra(l)}}}}function Ra(l,h){if(l.g){gp(l);const f=l.g,v=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||xt(l,"ready");try{f.onreadystatechange=v}catch{}}}function gp(l){l.I&&(c.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function An(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<An(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),W1(h)}};function yp(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function fE(l){const h={};l=(l.g&&2<=An(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<l.length;v++){if(w(l[v]))continue;var f=T(l[v]);const R=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const M=h[R]||[];h[R]=M,M.push(f)}b(h,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gi(l,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[l]||h}function xp(l){this.Aa=0,this.i=[],this.j=new Fi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gi("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gi("baseRetryDelayMs",5e3,l),this.cb=Gi("retryDelaySeedMs",1e4,l),this.Wa=Gi("forwardChannelMaxRetries",2,l),this.wa=Gi("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Zf(l&&l.concurrentRequestLimit),this.Da=new uE,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=xp.prototype,t.la=8,t.G=1,t.connect=function(l,h,f,v){vt(0),this.W=l,this.H=h||{},f&&v!==void 0&&(this.H.OSID=f,this.H.OAID=v),this.F=this.X,this.I=Sp(this,null,this.W),Va(this)};function ku(l){if(vp(l),l.G==3){var h=l.U++,f=Cn(l.I);if(Se(f,"SID",l.K),Se(f,"RID",h),Se(f,"TYPE","terminate"),Ki(l,f),h=new nr(l,l.j,h),h.L=2,h.v=Ca(Cn(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=h.v,f=!0),f||(h.g=kp(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Sa(h)}Ip(l)}function Da(l){l.g&&(Cu(l),l.g.cancel(),l.g=null)}function vp(l){Da(l),l.u&&(c.clearTimeout(l.u),l.u=null),Ma(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function Va(l){if(!ep(l.h)&&!l.s){l.s=!0;var h=l.Ga;xe||X(),B||(xe(),B=!0),Y.add(h,l),l.B=0}}function pE(l,h){return tp(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Ui(g(l.Ga,l,h),Tp(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const R=new nr(this,this.j,l);let M=this.o;if(this.S&&(M?(M=y(M),S(M,this.S)):M=this.S),this.m!==null||this.O||(R.H=M,M=null),this.P)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var v=this.i[f];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(h+=v,4096<h){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=_p(this,R,h),f=Cn(this.I),Se(f,"RID",l),Se(f,"CVER",22),this.D&&Se(f,"X-HTTP-Session-Id",this.D),Ki(this,f),M&&(this.O?h="headers="+encodeURIComponent(String(hp(M)))+"&"+h:this.m&&Su(f,this.m,M)),Iu(this.h,R),this.Ua&&Se(f,"TYPE","init"),this.P?(Se(f,"$req",h),Se(f,"SID","null"),R.T=!0,Eu(R,f,null)):Eu(R,f,h),this.G=2}}else this.G==3&&(l?wp(this,l):this.i.length==0||ep(this.h)||wp(this))};function wp(l,h){var f;h?f=h.l:f=l.U++;const v=Cn(l.I);Se(v,"SID",l.K),Se(v,"RID",f),Se(v,"AID",l.T),Ki(l,v),l.m&&l.o&&Su(v,l.m,l.o),f=new nr(l,l.j,f,l.B+1),l.m===null&&(f.H=l.o),h&&(l.i=h.D.concat(l.i)),h=_p(l,f,1e3),f.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Iu(l.h,f),Eu(f,v,h)}function Ki(l,h){l.H&&V(l.H,function(f,v){Se(h,v,f)}),l.l&&sp({},function(f,v){Se(h,v,f)})}function _p(l,h,f){f=Math.min(l.i.length,f);var v=l.l?g(l.l.Na,l.l,l):null;e:{var R=l.i;let M=-1;for(;;){const q=["count="+f];M==-1?0<f?(M=R[0].g,q.push("ofs="+M)):M=0:q.push("ofs="+M);let Ne=!0;for(let et=0;et<f;et++){let ve=R[et].g;const lt=R[et].map;if(ve-=M,0>ve)M=Math.max(0,R[et].g-100),Ne=!1;else try{dE(lt,q,"req"+ve+"_")}catch{v&&v(lt)}}if(Ne){v=q.join("&");break e}}}return l=l.i.splice(0,f),h.D=l,v}function Ep(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;xe||X(),B||(xe(),B=!0),Y.add(h,l),l.v=0}}function ju(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Ui(g(l.Fa,l),Tp(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,bp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Ui(g(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vt(10),Da(this),bp(this))};function Cu(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function bp(l){l.g=new nr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=Cn(l.qa);Se(h,"RID","rpc"),Se(h,"SID",l.K),Se(h,"AID",l.T),Se(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&Se(h,"TO",l.ja),Se(h,"TYPE","xmlhttp"),Ki(l,h),l.m&&l.o&&Su(h,l.m,l.o),l.L&&(l.g.I=l.L);var f=l.g;l=l.ia,f.L=1,f.v=Ca(Cn(h)),f.m=null,f.P=!0,Yf(f,l)}t.Za=function(){this.C!=null&&(this.C=null,Da(this),ju(this),vt(19))};function Ma(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function Np(l,h){var f=null;if(l.g==h){Ma(l),Cu(l),l.g=null;var v=2}else if(Tu(l.h,h))f=h.D,np(l.h,h),v=1;else return;if(l.G!=0){if(h.o)if(v==1){f=h.m?h.m.length:0,h=Date.now()-h.F;var R=l.B;v=Na(),xt(v,new Hf(v,f)),Va(l)}else Ep(l);else if(R=h.s,R==3||R==0&&0<h.X||!(v==1&&pE(l,h)||v==2&&ju(l)))switch(f&&0<f.length&&(h=l.h,h.i=h.i.concat(f)),R){case 1:Jr(l,5);break;case 4:Jr(l,10);break;case 3:Jr(l,6);break;default:Jr(l,2)}}}function Tp(l,h){let f=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(f*=2),f*h}function Jr(l,h){if(l.j.info("Error code "+h),h==2){var f=g(l.fb,l),v=l.Xa;const R=!v;v=new Xr(v||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ka(v,"https"),Ca(v),R?lE(v.toString(),f):cE(v.toString(),f)}else vt(2);l.G=0,l.l&&l.l.sa(h),Ip(l),vp(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),vt(2)):(this.j.info("Failed to ping google.com"),vt(1))};function Ip(l){if(l.G=0,l.ka=[],l.l){const h=rp(l.h);(h.length!=0||l.i.length!=0)&&(P(l.ka,h),P(l.ka,l.i),l.h.i.length=0,k(l.i),l.i.length=0),l.l.ra()}}function Sp(l,h,f){var v=f instanceof Xr?Cn(f):new Xr(f);if(v.g!="")h&&(v.g=h+"."+v.g),ja(v,v.s);else{var R=c.location;v=R.protocol,h=h?h+"."+R.hostname:R.hostname,R=+R.port;var M=new Xr(null);v&&ka(M,v),h&&(M.g=h),R&&ja(M,R),f&&(M.l=f),v=M}return f=l.D,h=l.ya,f&&h&&Se(v,f,h),Se(v,"VER",l.la),Ki(l,v),v}function kp(l,h,f){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new Le(new Aa({eb:f})):new Le(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function jp(){}t=jp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function La(){}La.prototype.g=function(l,h){return new Pt(l,h)};function Pt(l,h){at.call(this),this.g=new xp(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!w(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!w(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new js(this)}j(Pt,at),Pt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Pt.prototype.close=function(){ku(this.g)},Pt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var f={};f.__data__=l,l=f}else this.u&&(f={},f.__data__=gu(l),l=f);h.i.push(new J1(h.Ya++,l)),h.G==3&&Va(h)},Pt.prototype.N=function(){this.g.l=null,delete this.j,ku(this.g),delete this.g,Pt.aa.N.call(this)};function Cp(l){xu.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const f in h){l=f;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}j(Cp,xu);function Ap(){vu.call(this),this.status=1}j(Ap,vu);function js(l){this.g=l}j(js,jp),js.prototype.ua=function(){xt(this.g,"a")},js.prototype.ta=function(l){xt(this.g,new Cp(l))},js.prototype.sa=function(l){xt(this.g,new Ap)},js.prototype.ra=function(){xt(this.g,"b")},La.prototype.createWebChannel=La.prototype.g,Pt.prototype.send=Pt.prototype.o,Pt.prototype.open=Pt.prototype.m,Pt.prototype.close=Pt.prototype.close,nw=function(){return new La},tw=function(){return Na()},ew=Qr,fh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ta.NO_ERROR=0,Ta.TIMEOUT=8,Ta.HTTP_ERROR=6,_l=Ta,Gf.COMPLETE="complete",Zv=Gf,$f.EventType=Li,Li.OPEN="a",Li.CLOSE="b",Li.ERROR="c",Li.MESSAGE="d",at.prototype.listen=at.prototype.K,uo=$f,Le.prototype.listenOnce=Le.prototype.L,Le.prototype.getLastError=Le.prototype.Ka,Le.prototype.getLastErrorCode=Le.prototype.Ba,Le.prototype.getStatus=Le.prototype.Z,Le.prototype.getResponseJson=Le.prototype.Oa,Le.prototype.getResponseText=Le.prototype.oa,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Ha,Jv=Le}).apply(typeof nl<"u"?nl:typeof self<"u"?self:typeof window<"u"?window:{});const e0="@firebase/firestore",t0="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};mt.UNAUTHENTICATED=new mt(null),mt.GOOGLE_CREDENTIALS=new mt("google-credentials-uid"),mt.FIRST_PARTY=new mt("first-party-uid"),mt.MOCK_USER=new mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ci="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs=new Pm("@firebase/firestore");function Ps(){return gs.logLevel}function K(t,...e){if(gs.logLevel<=de.DEBUG){const n=e.map(Vm);gs.debug(`Firestore (${Ci}): ${t}`,...n)}}function Gn(t,...e){if(gs.logLevel<=de.ERROR){const n=e.map(Vm);gs.error(`Firestore (${Ci}): ${t}`,...n)}}function pi(t,...e){if(gs.logLevel<=de.WARN){const n=e.map(Vm);gs.warn(`Firestore (${Ci}): ${t}`,...n)}}function Vm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,rw(t,r,n)}function rw(t,e,n){let r=`FIRESTORE (${Ci}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Gn(r),new Error(r)}function Ee(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||rw(e,s,r)}function le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends Xn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ST{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(mt.UNAUTHENTICATED))}shutdown(){}}class kT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class jT{constructor(e){this.t=e,this.currentUser=mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ee(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Un;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Un,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Un)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ee(typeof r.accessToken=="string",31837,{l:r}),new sw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string",2055,{h:e}),new mt(e)}}class CT{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=mt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class AT{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new CT(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class n0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PT{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Bt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ee(this.o===void 0,3512);const r=i=>{i.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,K("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new n0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ee(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new n0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=RT(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function he(t,e){return t<e?-1:t>e?1:0}function ph(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return cd(s)===cd(i)?he(s,i):cd(s)?1:-1}return he(t.length,e.length)}const DT=55296,VT=57343;function cd(t){const e=t.charCodeAt(0);return e>=DT&&e<=VT}function gi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0="__name__";class gn{constructor(e,n,r){n===void 0?n=0:n>e.length&&se(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&se(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return gn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof gn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=gn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return he(e.length,n.length)}static compareSegments(e,n){const r=gn.isNumericId(e),s=gn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?gn.extractNumericId(e).compare(gn.extractNumericId(n)):ph(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return jr.fromString(e.substring(4,e.length-2))}}class Te extends gn{construct(e,n,r){return new Te(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Te(n)}static emptyPath(){return new Te([])}}const MT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rt extends gn{construct(e,n,r){return new rt(e,n,r)}static isValidIdentifier(e){return MT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===r0}static keyField(){return new rt([r0])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new W(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new W(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new W(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(r+=c,s++):(i(),s++)}if(i(),a)throw new W(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rt(n)}static emptyPath(){return new rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.path=e}static fromPath(e){return new Z(Te.fromString(e))}static fromName(e){return new Z(Te.fromString(e).popFirst(5))}static empty(){return new Z(Te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Te.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Z(new Te(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iw(t,e,n){if(!n)throw new W(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function LT(t,e,n,r){if(e===!0&&r===!0)throw new W(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function s0(t){if(!Z.isDocumentKey(t))throw new W(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function i0(t){if(Z.isDocumentKey(t))throw new W(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ow(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Uc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":se(12329,{type:typeof t})}function cn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Uc(t);throw new W(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function OT(t,e){if(e<=0)throw new W(O.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(t,e){const n={typeString:t};return e&&(n.value=e),n}function ha(t,e){if(!ow(t))throw new W(O.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new W(O.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0=-62135596800,a0=1e6;class je{static now(){return je.fromMillis(Date.now())}static fromDate(e){return je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*a0);return new je(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<o0)throw new W(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/a0}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:je._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ha(e,je._jsonSchema))return new je(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-o0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}je._jsonSchemaVersion="firestore/timestamp/1.0",je._jsonSchema={type:He("string",je._jsonSchemaVersion),seconds:He("number"),nanoseconds:He("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{static fromTimestamp(e){return new ae(e)}static min(){return new ae(new je(0,0))}static max(){return new ae(new je(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo=-1;function UT(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ae.fromTimestamp(r===1e9?new je(n+1,0):new je(n,r));return new Dr(s,Z.empty(),e)}function FT(t){return new Dr(t.readTime,t.key,Qo)}class Dr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Dr(ae.min(),Z.empty(),Qo)}static max(){return new Dr(ae.max(),Z.empty(),Qo)}}function zT(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Z.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class BT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ai(t){if(t.code!==O.FAILED_PRECONDITION||t.message!==$T)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,a=!1;e.forEach(c=>{++s,c.next(()=>{++i,a&&i===s&&n()},u=>r(u))}),a=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,a=new Array(i);let c=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(m=>{a[d]=m,++c,c===i&&r(a)},m=>s(m))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function qT(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Pi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Fc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm=-1;function zc(t){return t==null}function rc(t){return t===0&&1/t==-1/0}function WT(t){return typeof t=="number"&&Number.isInteger(t)&&!rc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw="";function HT(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=l0(e)),e=GT(t.get(n),e);return l0(e)}function GT(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case aw:n+="";break;default:n+=i}}return n}function l0(t){return t+aw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function lw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e,n){this.comparator=e,this.root=n||nt.EMPTY}insert(e,n){return new Ve(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,nt.BLACK,null,null))}remove(e){return new Ve(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rl(this.root,e,this.comparator,!1)}getReverseIterator(){return new rl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rl(this.root,e,this.comparator,!0)}}class rl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??nt.RED,this.left=s??nt.EMPTY,this.right=i??nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new nt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return nt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw se(27949);return e+(this.isRed()?0:1)}}nt.EMPTY=null,nt.RED=!0,nt.BLACK=!1;nt.EMPTY=new class{constructor(){this.size=0}get key(){throw se(57766)}get value(){throw se(16141)}get color(){throw se(16727)}get left(){throw se(29726)}get right(){throw se(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new nt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new u0(this.data.getIterator())}getIteratorFrom(e){return new u0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Qe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Qe(this.comparator);return n.data=e,n}}class u0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.fields=e,e.sort(rt.comparator)}static empty(){return new Vt([])}unionWith(e){let n=new Qe(rt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Vt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return gi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new cw("Invalid base64 string: "+i):i}}(e);return new ot(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ot.EMPTY_BYTE_STRING=new ot("");const KT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vr(t){if(Ee(!!t,39018),typeof t=="string"){let e=0;const n=KT.exec(t);if(Ee(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fe(t.seconds),nanos:Fe(t.nanos)}}function Fe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Mr(t){return typeof t=="string"?ot.fromBase64String(t):ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw="server_timestamp",dw="__type__",hw="__previous_value__",mw="__local_write_time__";function Om(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[dw])==null?void 0:r.stringValue)===uw}function $c(t){const e=t.mapValue.fields[hw];return Om(e)?$c(e):e}function Yo(t){const e=Vr(t.mapValue.fields[mw].timestampValue);return new je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e,n,r,s,i,a,c,u,d,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=m}}const sc="(default)";class Xo{constructor(e,n){this.projectId=e,this.database=n||sc}static empty(){return new Xo("","")}get isDefaultDatabase(){return this.database===sc}isEqual(e){return e instanceof Xo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw="__type__",pw="__max__",sl={mapValue:{fields:{__type__:{stringValue:pw}}}},gw="__vector__",ic="value";function Lr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Om(t)?4:XT(t)?9007199254740991:YT(t)?10:11:se(28295,{value:t})}function jn(t,e){if(t===e)return!0;const n=Lr(t);if(n!==Lr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Yo(t).isEqual(Yo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Vr(s.timestampValue),c=Vr(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Mr(s.bytesValue).isEqual(Mr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Fe(s.geoPointValue.latitude)===Fe(i.geoPointValue.latitude)&&Fe(s.geoPointValue.longitude)===Fe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Fe(s.integerValue)===Fe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Fe(s.doubleValue),c=Fe(i.doubleValue);return a===c?rc(a)===rc(c):isNaN(a)&&isNaN(c)}return!1}(t,e);case 9:return gi(t.arrayValue.values||[],e.arrayValue.values||[],jn);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},c=i.mapValue.fields||{};if(c0(a)!==c0(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!jn(a[u],c[u])))return!1;return!0}(t,e);default:return se(52216,{left:t})}}function Jo(t,e){return(t.values||[]).find(n=>jn(n,e))!==void 0}function yi(t,e){if(t===e)return 0;const n=Lr(t),r=Lr(e);if(n!==r)return he(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(i,a){const c=Fe(i.integerValue||i.doubleValue),u=Fe(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return d0(t.timestampValue,e.timestampValue);case 4:return d0(Yo(t),Yo(e));case 5:return ph(t.stringValue,e.stringValue);case 6:return function(i,a){const c=Mr(i),u=Mr(a);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),u=a.split("/");for(let d=0;d<c.length&&d<u.length;d++){const m=he(c[d],u[d]);if(m!==0)return m}return he(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const c=he(Fe(i.latitude),Fe(a.latitude));return c!==0?c:he(Fe(i.longitude),Fe(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return h0(t.arrayValue,e.arrayValue);case 10:return function(i,a){var g,N,j,k;const c=i.fields||{},u=a.fields||{},d=(g=c[ic])==null?void 0:g.arrayValue,m=(N=u[ic])==null?void 0:N.arrayValue,p=he(((j=d==null?void 0:d.values)==null?void 0:j.length)||0,((k=m==null?void 0:m.values)==null?void 0:k.length)||0);return p!==0?p:h0(d,m)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===sl.mapValue&&a===sl.mapValue)return 0;if(i===sl.mapValue)return 1;if(a===sl.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),d=a.fields||{},m=Object.keys(d);u.sort(),m.sort();for(let p=0;p<u.length&&p<m.length;++p){const g=ph(u[p],m[p]);if(g!==0)return g;const N=yi(c[u[p]],d[m[p]]);if(N!==0)return N}return he(u.length,m.length)}(t.mapValue,e.mapValue);default:throw se(23264,{he:n})}}function d0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);const n=Vr(t),r=Vr(e),s=he(n.seconds,r.seconds);return s!==0?s:he(n.nanos,r.nanos)}function h0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=yi(n[s],r[s]);if(i)return i}return he(n.length,r.length)}function xi(t){return gh(t)}function gh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Vr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Mr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=gh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${gh(n.fields[a])}`;return s+"}"}(t.mapValue):se(61005,{value:t})}function El(t){switch(Lr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$c(t);return e?16+El(e):16;case 5:return 2*t.stringValue.length;case 6:return Mr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+El(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Wr(r.fields,(i,a)=>{s+=i.length+El(a)}),s}(t.mapValue);default:throw se(13486,{value:t})}}function m0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function yh(t){return!!t&&"integerValue"in t}function Um(t){return!!t&&"arrayValue"in t}function f0(t){return!!t&&"nullValue"in t}function p0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function bl(t){return!!t&&"mapValue"in t}function YT(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[fw])==null?void 0:r.stringValue)===gw}function Io(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Wr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Io(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Io(t.arrayValue.values[n]);return e}return{...t}}function XT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===pw}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.value=e}static empty(){return new St({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!bl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Io(n)}setAll(e){let n=rt.emptyPath(),r={},s=[];e.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}a?r[c.lastSegment()]=Io(a):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());bl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return jn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];bl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Wr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new St(Io(this.value))}}function yw(t){const e=[];return Wr(t.fields,(n,r)=>{const s=new rt([n]);if(bl(r)){const i=yw(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new Vt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n,r,s,i,a,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new pt(e,0,ae.min(),ae.min(),ae.min(),St.empty(),0)}static newFoundDocument(e,n,r,s){return new pt(e,1,n,ae.min(),r,s,0)}static newNoDocument(e,n){return new pt(e,2,n,ae.min(),ae.min(),St.empty(),0)}static newUnknownDocument(e,n){return new pt(e,3,n,ae.min(),ae.min(),St.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=St.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=St.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,n){this.position=e,this.inclusive=n}}function g0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=Z.comparator(Z.fromName(a.referenceValue),n.key):r=yi(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function y0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!jn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,n="asc"){this.field=e,this.dir=n}}function JT(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{}class We extends xw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new eI(e,n,r):n==="array-contains"?new rI(e,r):n==="in"?new sI(e,r):n==="not-in"?new iI(e,r):n==="array-contains-any"?new oI(e,r):new We(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new tI(e,r):new nI(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(yi(n,this.value)):n!==null&&Lr(this.value)===Lr(n)&&this.matchesComparison(yi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class un extends xw{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new un(e,n)}matches(e){return vw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function vw(t){return t.op==="and"}function ww(t){return ZT(t)&&vw(t)}function ZT(t){for(const e of t.filters)if(e instanceof un)return!1;return!0}function xh(t){if(t instanceof We)return t.field.canonicalString()+t.op.toString()+xi(t.value);if(ww(t))return t.filters.map(e=>xh(e)).join(",");{const e=t.filters.map(n=>xh(n)).join(",");return`${t.op}(${e})`}}function _w(t,e){return t instanceof We?function(r,s){return s instanceof We&&r.op===s.op&&r.field.isEqual(s.field)&&jn(r.value,s.value)}(t,e):t instanceof un?function(r,s){return s instanceof un&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,c)=>i&&_w(a,s.filters[c]),!0):!1}(t,e):void se(19439)}function Ew(t){return t instanceof We?function(n){return`${n.field.canonicalString()} ${n.op} ${xi(n.value)}`}(t):t instanceof un?function(n){return n.op.toString()+" {"+n.getFilters().map(Ew).join(" ,")+"}"}(t):"Filter"}class eI extends We{constructor(e,n,r){super(e,n,r),this.key=Z.fromName(r.referenceValue)}matches(e){const n=Z.comparator(e.key,this.key);return this.matchesComparison(n)}}class tI extends We{constructor(e,n){super(e,"in",n),this.keys=bw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class nI extends We{constructor(e,n){super(e,"not-in",n),this.keys=bw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function bw(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Z.fromName(r.referenceValue))}class rI extends We{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Um(n)&&Jo(n.arrayValue,this.value)}}class sI extends We{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Jo(this.value.arrayValue,n)}}class iI extends We{constructor(e,n){super(e,"not-in",n)}matches(e){if(Jo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Jo(this.value.arrayValue,n)}}class oI extends We{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Um(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Jo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e,n=null,r=[],s=[],i=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=c,this.Te=null}}function x0(t,e=null,n=[],r=[],s=null,i=null,a=null){return new aI(t,e,n,r,s,i,a)}function Fm(t){const e=le(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>xh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),zc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>xi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>xi(r)).join(",")),e.Te=n}return e.Te}function zm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!JT(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_w(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!y0(t.startAt,e.startAt)&&y0(t.endAt,e.endAt)}function vh(t){return Z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,n=null,r=[],s=[],i=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function lI(t,e,n,r,s,i,a,c){return new Ri(t,e,n,r,s,i,a,c)}function $m(t){return new Ri(t)}function v0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Nw(t){return t.collectionGroup!==null}function So(t){const e=le(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Qe(rt.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Zo(i,r))}),n.has(rt.keyField().canonicalString())||e.Ie.push(new Zo(rt.keyField(),r))}return e.Ie}function bn(t){const e=le(t);return e.Ee||(e.Ee=cI(e,So(t))),e.Ee}function cI(t,e){if(t.limitType==="F")return x0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Zo(s.field,i)});const n=t.endAt?new oc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new oc(t.startAt.position,t.startAt.inclusive):null;return x0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function wh(t,e){const n=t.filters.concat([e]);return new Ri(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ac(t,e,n){return new Ri(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Bc(t,e){return zm(bn(t),bn(e))&&t.limitType===e.limitType}function Tw(t){return`${Fm(bn(t))}|lt:${t.limitType}`}function Rs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Ew(s)).join(", ")}]`),zc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>xi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>xi(s)).join(",")),`Target(${r})`}(bn(t))}; limitType=${t.limitType})`}function qc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Z.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of So(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,c,u){const d=g0(a,c,u);return a.inclusive?d<=0:d<0}(r.startAt,So(r),s)||r.endAt&&!function(a,c,u){const d=g0(a,c,u);return a.inclusive?d>=0:d>0}(r.endAt,So(r),s))}(t,e)}function uI(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Iw(t){return(e,n)=>{let r=!1;for(const s of So(t)){const i=dI(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function dI(t,e,n){const r=t.field.isKeyField()?Z.comparator(e.key,n.key):function(i,a,c){const u=a.data.field(i),d=c.data.field(i);return u!==null&&d!==null?yi(u,d):se(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return se(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Wr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return lw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI=new Ve(Z.comparator);function Kn(){return hI}const Sw=new Ve(Z.comparator);function ho(...t){let e=Sw;for(const n of t)e=e.insert(n.key,n);return e}function kw(t){let e=Sw;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function is(){return ko()}function jw(){return ko()}function ko(){return new bs(t=>t.toString(),(t,e)=>t.isEqual(e))}const mI=new Ve(Z.comparator),fI=new Qe(Z.comparator);function me(...t){let e=fI;for(const n of t)e=e.add(n);return e}const pI=new Qe(he);function gI(){return pI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rc(e)?"-0":e}}function Cw(t){return{integerValue:""+t}}function Aw(t,e){return WT(e)?Cw(e):Bm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(){this._=void 0}}function yI(t,e,n){return t instanceof lc?function(s,i){const a={fields:{[dw]:{stringValue:uw},[mw]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Om(i)&&(i=$c(i)),i&&(a.fields[hw]=i),{mapValue:a}}(n,e):t instanceof ea?Rw(t,e):t instanceof ta?Dw(t,e):function(s,i){const a=Pw(s,i),c=w0(a)+w0(s.Ae);return yh(a)&&yh(s.Ae)?Cw(c):Bm(s.serializer,c)}(t,e)}function xI(t,e,n){return t instanceof ea?Rw(t,e):t instanceof ta?Dw(t,e):n}function Pw(t,e){return t instanceof na?function(r){return yh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class lc extends Wc{}class ea extends Wc{constructor(e){super(),this.elements=e}}function Rw(t,e){const n=Vw(e);for(const r of t.elements)n.some(s=>jn(s,r))||n.push(r);return{arrayValue:{values:n}}}class ta extends Wc{constructor(e){super(),this.elements=e}}function Dw(t,e){let n=Vw(e);for(const r of t.elements)n=n.filter(s=>!jn(s,r));return{arrayValue:{values:n}}}class na extends Wc{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function w0(t){return Fe(t.integerValue||t.doubleValue)}function Vw(t){return Um(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e,n){this.field=e,this.transform=n}}function wI(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ea&&s instanceof ea||r instanceof ta&&s instanceof ta?gi(r.elements,s.elements,jn):r instanceof na&&s instanceof na?jn(r.Ae,s.Ae):r instanceof lc&&s instanceof lc}(t.transform,e.transform)}class _I{constructor(e,n){this.version=e,this.transformResults=n}}class Gt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Gt}static exists(e){return new Gt(void 0,e)}static updateTime(e){return new Gt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Hc{}function Mw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new qm(t.key,Gt.none()):new ma(t.key,t.data,Gt.none());{const n=t.data,r=St.empty();let s=new Qe(rt.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Hr(t.key,r,new Vt(s.toArray()),Gt.none())}}function EI(t,e,n){t instanceof ma?function(s,i,a){const c=s.value.clone(),u=E0(s.fieldTransforms,i,a.transformResults);c.setAll(u),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Hr?function(s,i,a){if(!Nl(s.precondition,i))return void i.convertToUnknownDocument(a.version);const c=E0(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(Lw(s)),u.setAll(c),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function jo(t,e,n,r){return t instanceof ma?function(i,a,c,u){if(!Nl(i.precondition,a))return c;const d=i.value.clone(),m=b0(i.fieldTransforms,u,a);return d.setAll(m),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Hr?function(i,a,c,u){if(!Nl(i.precondition,a))return c;const d=b0(i.fieldTransforms,u,a),m=a.data;return m.setAll(Lw(i)),m.setAll(d),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,a,c){return Nl(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(t,e,n)}function bI(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Pw(r.transform,s||null);i!=null&&(n===null&&(n=St.empty()),n.set(r.field,i))}return n||null}function _0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&gi(r,s,(i,a)=>wI(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ma extends Hc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Hr extends Hc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Lw(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function E0(t,e,n){const r=new Map;Ee(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,c=e.data.field(i.field);r.set(i.field,xI(a,c,n[s]))}return r}function b0(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,yI(i,a,e))}return r}class qm extends Hc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class NI extends Hc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&EI(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=jo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=jo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=jw();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let c=this.applyToLocalView(a,i.mutatedFields);c=n.has(s.key)?null:c;const u=Mw(a,c);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),me())}isEqual(e){return this.batchId===e.batchId&&gi(this.mutations,e.mutations,(n,r)=>_0(n,r))&&gi(this.baseMutations,e.baseMutations,(n,r)=>_0(n,r))}}class Wm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ee(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return mI}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Wm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be,fe;function kI(t){switch(t){case O.OK:return se(64938);case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return se(15467,{code:t})}}function Ow(t){if(t===void 0)return Gn("GRPC error has no .code"),O.UNKNOWN;switch(t){case Be.OK:return O.OK;case Be.CANCELLED:return O.CANCELLED;case Be.UNKNOWN:return O.UNKNOWN;case Be.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Be.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Be.INTERNAL:return O.INTERNAL;case Be.UNAVAILABLE:return O.UNAVAILABLE;case Be.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Be.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Be.NOT_FOUND:return O.NOT_FOUND;case Be.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Be.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Be.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Be.ABORTED:return O.ABORTED;case Be.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Be.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Be.DATA_LOSS:return O.DATA_LOSS;default:return se(39323,{code:t})}}(fe=Be||(Be={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI=new jr([4294967295,4294967295],0);function N0(t){const e=jI().encode(t),n=new Xv;return n.update(e),new Uint8Array(n.digest())}function T0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new jr([n,r],0),new jr([s,i],0)]}class Hm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new mo(`Invalid padding: ${n}`);if(r<0)throw new mo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new mo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new mo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=jr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(jr.fromNumber(r)));return s.compare(CI)===1&&(s=new jr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=N0(e),[r,s]=T0(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Hm(i,s,n);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.ge===0)return;const n=N0(e),[r,s]=T0(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class mo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,fa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Gc(ae.min(),s,new Ve(he),Kn(),me())}}class fa{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new fa(r,n,me(),me(),me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class Uw{constructor(e,n){this.targetId=e,this.Ce=n}}class Fw{constructor(e,n,r=ot.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class I0{constructor(){this.ve=0,this.Fe=S0(),this.Me=ot.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=me(),n=me(),r=me();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:se(38017,{changeType:i})}}),new fa(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=S0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ee(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class AI{constructor(e){this.Ge=e,this.ze=new Map,this.je=Kn(),this.Je=il(),this.He=il(),this.Ye=new Ve(he)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:se(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(vh(i))if(r===0){const a=new Z(i.path);this.et(n,a,pt.newNoDocument(a,ae.min()))}else Ee(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const c=this.ut(e),u=c?this.ct(c,e,a):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,c;try{a=Mr(r).toUint8Array()}catch(u){if(u instanceof cw)return pi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Hm(a,s,i)}catch(u){return pi(u instanceof mo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Ge.ht(),c=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,a)=>{const c=this.ot(a);if(c){if(i.current&&vh(c.target)){const u=new Z(c.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,pt.newNoDocument(u,e))}i.Be&&(n.set(a,i.ke()),i.qe())}});let r=me();this.He.forEach((i,a)=>{let c=!0;a.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.je.forEach((i,a)=>a.setReadTime(e));const s=new Gc(e,n,this.Ye,this.je,r);return this.je=Kn(),this.Je=il(),this.He=il(),this.Ye=new Ve(he),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new I0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Qe(he),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Qe(he),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new I0),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function il(){return new Ve(Z.comparator)}function S0(){return new Ve(Z.comparator)}const PI={asc:"ASCENDING",desc:"DESCENDING"},RI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},DI={and:"AND",or:"OR"};class VI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function _h(t,e){return t.useProto3Json||zc(e)?e:{value:e}}function cc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function MI(t,e){return cc(t,e.toTimestamp())}function Nn(t){return Ee(!!t,49232),ae.fromTimestamp(function(n){const r=Vr(n);return new je(r.seconds,r.nanos)}(t))}function Gm(t,e){return Eh(t,e).canonicalString()}function Eh(t,e){const n=function(s){return new Te(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function $w(t){const e=Te.fromString(t);return Ee(Gw(e),10190,{key:e.toString()}),e}function bh(t,e){return Gm(t.databaseId,e.path)}function ud(t,e){const n=$w(e);if(n.get(1)!==t.databaseId.projectId)throw new W(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Z(qw(n))}function Bw(t,e){return Gm(t.databaseId,e)}function LI(t){const e=$w(t);return e.length===4?Te.emptyPath():qw(e)}function Nh(t){return new Te(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function qw(t){return Ee(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function k0(t,e,n){return{name:bh(t,e),fields:n.value.mapValue.fields}}function OI(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:se(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,m){return d.useProto3Json?(Ee(m===void 0||typeof m=="string",58123),ot.fromBase64String(m||"")):(Ee(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),ot.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(d){const m=d.code===void 0?O.UNKNOWN:Ow(d.code);return new W(m,d.message||"")}(a);n=new Fw(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ud(t,r.document.name),i=Nn(r.document.updateTime),a=r.document.createTime?Nn(r.document.createTime):ae.min(),c=new St({mapValue:{fields:r.document.fields}}),u=pt.newFoundDocument(s,i,a,c),d=r.targetIds||[],m=r.removedTargetIds||[];n=new Tl(d,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ud(t,r.document),i=r.readTime?Nn(r.readTime):ae.min(),a=pt.newNoDocument(s,i),c=r.removedTargetIds||[];n=new Tl([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ud(t,r.document),i=r.removedTargetIds||[];n=new Tl([],i,s,null)}else{if(!("filter"in e))return se(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new SI(s,i),c=r.targetId;n=new Uw(c,a)}}return n}function UI(t,e){let n;if(e instanceof ma)n={update:k0(t,e.key,e.value)};else if(e instanceof qm)n={delete:bh(t,e.key)};else if(e instanceof Hr)n={update:k0(t,e.key,e.data),updateMask:KI(e.fieldMask)};else{if(!(e instanceof NI))return se(16599,{Vt:e.type});n={verify:bh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof lc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ea)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ta)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof na)return{fieldPath:a.field.canonicalString(),increment:c.Ae};throw se(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:MI(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:se(27497)}(t,e.precondition)),n}function FI(t,e){return t&&t.length>0?(Ee(e!==void 0,14353),t.map(n=>function(s,i){let a=s.updateTime?Nn(s.updateTime):Nn(i);return a.isEqual(ae.min())&&(a=Nn(i)),new _I(a,s.transformResults||[])}(n,e))):[]}function zI(t,e){return{documents:[Bw(t,e.path)]}}function $I(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Bw(t,s);const i=function(d){if(d.length!==0)return Hw(un.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(m=>function(g){return{field:Ds(g.field),direction:WI(g.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const c=_h(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function BI(t){let e=LI(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ee(r===1,65062);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let i=[];n.where&&(i=function(p){const g=Ww(p);return g instanceof un&&ww(g)?g.getFilters():[g]}(n.where));let a=[];n.orderBy&&(a=function(p){return p.map(g=>function(j){return new Zo(Vs(j.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(j.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(p){let g;return g=typeof p=="object"?p.value:p,zc(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,N=p.values||[];return new oc(N,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,N=p.values||[];return new oc(N,g)}(n.endAt)),lI(e,s,a,i,c,"F",u,d)}function qI(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return se(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Ww(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Vs(n.unaryFilter.field);return We.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Vs(n.unaryFilter.field);return We.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Vs(n.unaryFilter.field);return We.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Vs(n.unaryFilter.field);return We.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return se(61313);default:return se(60726)}}(t):t.fieldFilter!==void 0?function(n){return We.create(Vs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return se(58110);default:return se(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return un.create(n.compositeFilter.filters.map(r=>Ww(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return se(1026)}}(n.compositeFilter.op))}(t):se(30097,{filter:t})}function WI(t){return PI[t]}function HI(t){return RI[t]}function GI(t){return DI[t]}function Ds(t){return{fieldPath:t.canonicalString()}}function Vs(t){return rt.fromServerFormat(t.fieldPath)}function Hw(t){return t instanceof We?function(n){if(n.op==="=="){if(p0(n.value))return{unaryFilter:{field:Ds(n.field),op:"IS_NAN"}};if(f0(n.value))return{unaryFilter:{field:Ds(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(p0(n.value))return{unaryFilter:{field:Ds(n.field),op:"IS_NOT_NAN"}};if(f0(n.value))return{unaryFilter:{field:Ds(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ds(n.field),op:HI(n.op),value:n.value}}}(t):t instanceof un?function(n){const r=n.getFilters().map(s=>Hw(s));return r.length===1?r[0]:{compositeFilter:{op:GI(n.op),filters:r}}}(t):se(54877,{filter:t})}function KI(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Gw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,n,r,s,i=ae.min(),a=ae.min(),c=ot.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new yr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e){this.yt=e}}function YI(t){const e=BI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ac(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(){this.Cn=new JI}addToCollectionParentIndex(e,n){return this.Cn.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Dr.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Dr.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class JI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Qe(Te.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Qe(Te.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Kw=41943040;class Tt{static withCacheSize(e){return new Tt(e,Tt.DEFAULT_COLLECTION_PERCENTILE,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tt.DEFAULT_COLLECTION_PERCENTILE=10,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tt.DEFAULT=new Tt(Kw,Tt.DEFAULT_COLLECTION_PERCENTILE,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tt.DISABLED=new Tt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new vi(0)}static cr(){return new vi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="LruGarbageCollector",ZI=1048576;function A0([t,e],[n,r]){const s=he(t,n);return s===0?he(e,r):s}class eS{constructor(e){this.Ir=e,this.buffer=new Qe(A0),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();A0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class tS{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){K(C0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Pi(n)?K(C0,"Ignoring IndexedDB error during garbage collection: ",n):await Ai(n)}await this.Vr(3e5)})}}class nS{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return U.resolve(Fc.ce);const r=new eS(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(K("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(j0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(K("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),j0):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,a,c,u,d;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(K("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,a=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,n))).next(p=>(i=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),Ps()<=de.DEBUG&&K("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${s} in `+(c-a)+`ms
	Removed ${i} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(d-u)+`ms
Total Duration: ${d-m}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function rS(t,e){return new nS(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(){this.changes=new bs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,pt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&jo(r.mutation,s,Vt.empty(),je.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,me()).next(()=>r))}getLocalViewOfDocuments(e,n,r=me()){const s=is();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=ho();return i.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=is();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,me()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,c)=>{n.set(a,c)})})}computeViews(e,n,r,s){let i=Kn();const a=ko(),c=function(){return ko()}();return n.forEach((u,d)=>{const m=r.get(d.key);s.has(d.key)&&(m===void 0||m.mutation instanceof Hr)?i=i.insert(d.key,d):m!==void 0?(a.set(d.key,m.mutation.getFieldMask()),jo(m.mutation,d,m.mutation.getFieldMask(),je.now())):a.set(d.key,Vt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,m)=>a.set(d,m)),n.forEach((d,m)=>c.set(d,new iS(m,a.get(d)??null))),c))}recalculateAndSaveOverlays(e,n){const r=ko();let s=new Ve((a,c)=>a-c),i=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const c of a)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let m=r.get(u)||Vt.empty();m=c.applyToLocalView(d,m),r.set(u,m);const p=(s.get(c.batchId)||me()).add(u);s=s.insert(c.batchId,p)})}).next(()=>{const a=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,m=u.value,p=jw();m.forEach(g=>{if(!i.has(g)){const N=Mw(n.get(g),r.get(g));N!==null&&p.set(g,N),i=i.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,p))}return U.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return Z.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Nw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(is());let c=Qo,u=i;return a.next(d=>U.forEach(d,(m,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),i.get(m)?U.resolve():this.remoteDocumentCache.getEntry(e,m).next(g=>{u=u.insert(m,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,me())).next(m=>({batchId:c,changes:kw(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Z(n)).next(r=>{let s=ho();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=ho();return this.indexManager.getCollectionParents(e,i).next(c=>U.forEach(c,u=>{const d=function(p,g){return new Ri(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(m=>{m.forEach((p,g)=>{a=a.insert(p,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((u,d)=>{const m=d.getKey();a.get(m)===null&&(a=a.insert(m,pt.newInvalidDocument(m)))});let c=ho();return a.forEach((u,d)=>{const m=i.get(u);m!==void 0&&jo(m.mutation,d,Vt.empty(),je.now()),qc(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return U.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Nn(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:YI(s.bundledQuery),readTime:Nn(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(){this.overlays=new Ve(Z.comparator),this.qr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=is();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=is(),i=n.length+1,a=new Z(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ve((d,m)=>d-m);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let m=i.get(d.largestBatchId);m===null&&(m=is(),i=i.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const c=is(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,m)=>c.set(d,m)),!(c.size()>=s)););return U.resolve(c)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new II(n,r));let i=this.qr.get(n);i===void 0&&(i=me(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(){this.sessionToken=ot.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(){this.Qr=new Qe(Xe.$r),this.Ur=new Qe(Xe.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Xe(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Xe(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Z(new Te([])),r=new Xe(n,e),s=new Xe(n,e+1),i=[];return this.Ur.forEachInRange([r,s],a=>{this.Gr(a),i.push(a.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Z(new Te([])),r=new Xe(n,e),s=new Xe(n,e+1);let i=me();return this.Ur.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new Xe(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Xe{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Z.comparator(e.key,n.key)||he(e.Yr,n.Yr)}static Kr(e,n){return he(e.Yr,n.Yr)||Z.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Qe(Xe.$r)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new TI(i,n,r,s);this.mutationQueue.push(a);for(const c of s)this.Zr=this.Zr.add(new Xe(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return U.resolve(a)}lookupMutationBatch(e,n){return U.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?Lm:this.tr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Xe(n,0),s=new Xe(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],a=>{const c=this.Xr(a.Yr);i.push(c)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Qe(he);return n.forEach(s=>{const i=new Xe(s,0),a=new Xe(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],c=>{r=r.add(c.Yr)})}),U.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Z.isDocumentKey(i)||(i=i.child(""));const a=new Xe(new Z(i),0);let c=new Qe(he);return this.Zr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.Yr)),!0)},a),U.resolve(this.ti(c))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ee(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return U.forEach(n.mutations,s=>{const i=new Xe(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Xe(n,0),s=this.Zr.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(e){this.ri=e,this.docs=function(){return new Ve(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():pt.newInvalidDocument(n))}getEntries(e,n){let r=Kn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():pt.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Kn();const a=n.path,c=new Z(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:m}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||zT(FT(m),r)<=0||(s.has(m.key)||qc(n,m))&&(i=i.insert(m.key,m.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){se(9500)}ii(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new hS(this)}getSize(e){return U.resolve(this.size)}}class hS extends sS{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e){this.persistence=e,this.si=new bs(n=>Fm(n),zm),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.oi=0,this._i=new Km,this.targetCount=0,this.ai=vi.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),U.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new vi(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Pr(n),U.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((a,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e,n){this.ui={},this.overlays={},this.ci=new Fc(0),this.li=!1,this.li=!0,this.hi=new cS,this.referenceDelegate=e(this),this.Pi=new mS(this),this.indexManager=new XI,this.remoteDocumentCache=function(s){return new dS(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new QI(n),this.Ii=new aS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new lS,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new uS(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const s=new fS(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return U.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class fS extends BT{constructor(e){super(),this.currentSequenceNumber=e}}class Qm{constructor(e){this.persistence=e,this.Ri=new Km,this.Vi=null}static mi(e){return new Qm(e)}get fi(){if(this.Vi)return this.Vi;throw se(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),U.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.fi,r=>{const s=Z.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,ae.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return U.or([()=>U.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class uc{constructor(e,n){this.persistence=e,this.pi=new bs(r=>HT(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=rS(this,n)}static mi(e,n){return new uc(e,n)}Ei(){}di(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return U.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?U.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,a=>this.br(e,a,n).next(c=>{c||(r++,i.removeEntry(a,ae.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=El(e.data.value)),n}br(e,n,r){return U.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return U.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=me(),s=me();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Ym(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return c2()?8:qT(yt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new pS;return this.Ss(e,n,a).next(c=>{if(i.result=c,this.Vs)return this.bs(e,n,a,c.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Ps()<=de.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",Rs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),U.resolve()):(Ps()<=de.DEBUG&&K("QueryEngine","Query:",Rs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Ps()<=de.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",Rs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bn(n))):U.resolve())}ys(e,n){if(v0(n))return U.resolve(null);let r=bn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=ac(n,null,"F"),r=bn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=me(...i);return this.ps.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Ds(n,c);return this.Cs(n,d,a,u.readTime)?this.ys(e,ac(n,null,"F")):this.vs(e,d,n,u)}))})))}ws(e,n,r,s){return v0(n)||s.isEqual(ae.min())?U.resolve(null):this.ps.getDocuments(e,r).next(i=>{const a=this.Ds(n,i);return this.Cs(n,a,r,s)?U.resolve(null):(Ps()<=de.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Rs(n)),this.vs(e,a,n,UT(s,Qo)).next(c=>c))})}Ds(e,n){let r=new Qe(Iw(e));return n.forEach((s,i)=>{qc(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Ps()<=de.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",Rs(n)),this.ps.getDocumentsMatchingQuery(e,n,Dr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm="LocalStore",yS=3e8;class xS{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ve(he),this.xs=new bs(i=>Fm(i),zm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new oS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function vS(t,e,n,r){return new xS(t,e,n,r)}async function Yw(t,e){const n=le(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],c=[];let u=me();for(const d of s){a.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}for(const d of i){c.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ls:d,removedBatchIds:a,addedBatchIds:c}))})})}function wS(t,e){const n=le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(c,u,d,m){const p=d.batch,g=p.keys();let N=U.resolve();return g.forEach(j=>{N=N.next(()=>m.getEntry(u,j)).next(k=>{const P=d.docVersions.get(j);Ee(P!==null,48541),k.version.compareTo(P)<0&&(p.applyToRemoteDocument(k,d),k.isValidDocument()&&(k.setReadTime(d.commitVersion),m.addEntry(k)))})}),N.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=me();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Xw(t){const e=le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function _S(t,e){const n=le(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const c=[];e.targetChanges.forEach((m,p)=>{const g=s.get(p);if(!g)return;c.push(n.Pi.removeMatchingKeys(i,m.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(i,m.addedDocuments,p)));let N=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?N=N.withResumeToken(ot.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):m.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(m.resumeToken,r)),s=s.insert(p,N),function(k,P,_){return k.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=yS?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(g,N,m)&&c.push(n.Pi.updateTargetData(i,N))});let u=Kn(),d=me();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,m))}),c.push(ES(i,a,e.documentUpdates).next(m=>{u=m.ks,d=m.qs})),!r.isEqual(ae.min())){const m=n.Pi.getLastRemoteSnapshotVersion(i).next(p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(m)}return U.waitFor(c).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.Ms=s,i))}function ES(t,e,n){let r=me(),s=me();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Kn();return n.forEach((c,u)=>{const d=i.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(ae.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):K(Xm,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{ks:a,qs:s}})}function bS(t,e){const n=le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Lm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function NS(t,e){const n=le(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Pi.allocateTargetId(r).next(a=>(s=new yr(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Th(t,e,n){const r=le(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Pi(a))throw a;K(Xm,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function P0(t,e,n){const r=le(t);let s=ae.min(),i=me();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,m){const p=le(u),g=p.xs.get(m);return g!==void 0?U.resolve(p.Ms.get(g)):p.Pi.getTargetData(d,m)}(r,a,bn(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,c.targetId).next(u=>{i=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,e,n?s:ae.min(),n?i:me())).next(c=>(TS(r,uI(e),c),{documents:c,Qs:i})))}function TS(t,e,n){let r=t.Os.get(e)||ae.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class R0{constructor(){this.activeTargetIds=gI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class IS{constructor(){this.Mo=new R0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new R0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0="ConnectivityMonitor";class V0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){K(D0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){K(D0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ol=null;function Ih(){return ol===null?ol=function(){return 268435456+Math.round(2147483648*Math.random())}():ol++,"0x"+ol.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd="RestConnection",kS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class jS{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===sc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const a=Ih(),c=this.zo(e,n.toUriEncodedString());K(dd,`Sending RPC '${e}' ${a}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,i);const{host:d}=new URL(c),m=ki(d);return this.Jo(e,c,u,r,m).then(p=>(K(dd,`Received RPC '${e}' ${a}: `,p),p),p=>{throw pi(dd,`RPC '${e}' ${a} failed with error: `,p,"url: ",c,"request:",r),p})}Ho(e,n,r,s,i,a){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ci}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=kS[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht="WebChannelConnection";class AS extends jS{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const a=Ih();return new Promise((c,u)=>{const d=new Jv;d.setWithCredentials(!0),d.listenOnce(Zv.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case _l.NO_ERROR:const p=d.getResponseJson();K(ht,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(p)),c(p);break;case _l.TIMEOUT:K(ht,`RPC '${e}' ${a} timed out`),u(new W(O.DEADLINE_EXCEEDED,"Request time out"));break;case _l.HTTP_ERROR:const g=d.getStatus();if(K(ht,`RPC '${e}' ${a} failed with status:`,g,"response text:",d.getResponseText()),g>0){let N=d.getResponseJson();Array.isArray(N)&&(N=N[0]);const j=N==null?void 0:N.error;if(j&&j.status&&j.message){const k=function(_){const w=_.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(w)>=0?w:O.UNKNOWN}(j.status);u(new W(k,j.message))}else u(new W(O.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new W(O.UNAVAILABLE,"Connection failed."));break;default:se(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{K(ht,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(s);K(ht,`RPC '${e}' ${a} sending request:`,s),d.send(n,"POST",m,r,15)})}T_(e,n,r){const s=Ih(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=nw(),c=tw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const m=i.join("");K(ht,`Creating RPC '${e}' stream ${s}: ${m}`,u);const p=a.createWebChannel(m,u);this.I_(p);let g=!1,N=!1;const j=new CS({Yo:P=>{N?K(ht,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(g||(K(ht,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),K(ht,`RPC '${e}' stream ${s} sending:`,P),p.send(P))},Zo:()=>p.close()}),k=(P,_,w)=>{P.listen(_,E=>{try{w(E)}catch(A){setTimeout(()=>{throw A},0)}})};return k(p,uo.EventType.OPEN,()=>{N||(K(ht,`RPC '${e}' stream ${s} transport opened.`),j.o_())}),k(p,uo.EventType.CLOSE,()=>{N||(N=!0,K(ht,`RPC '${e}' stream ${s} transport closed`),j.a_(),this.E_(p))}),k(p,uo.EventType.ERROR,P=>{N||(N=!0,pi(ht,`RPC '${e}' stream ${s} transport errored. Name:`,P.name,"Message:",P.message),j.a_(new W(O.UNAVAILABLE,"The operation could not be completed")))}),k(p,uo.EventType.MESSAGE,P=>{var _;if(!N){const w=P.data[0];Ee(!!w,16349);const E=w,A=(E==null?void 0:E.error)||((_=E[0])==null?void 0:_.error);if(A){K(ht,`RPC '${e}' stream ${s} received error:`,A);const D=A.status;let V=function(x){const S=Be[x];if(S!==void 0)return Ow(S)}(D),b=A.message;V===void 0&&(V=O.INTERNAL,b="Unknown error status: "+D+" with message "+A.message),N=!0,j.a_(new W(V,b)),p.close()}else K(ht,`RPC '${e}' stream ${s} received:`,w),j.u_(w)}}),k(c,ew.STAT_EVENT,P=>{P.stat===fh.PROXY?K(ht,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===fh.NOPROXY&&K(ht,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{j.__()},0),j}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function hd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(t){return new VI(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&K("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0="PersistentStream";class Zw{constructor(e,n,r,s,i,a,c,u){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Jw(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(Gn(n.toString()),Gn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new W(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return K(M0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(K(M0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class PS extends Zw{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=OI(this.serializer,e),r=function(i){if(!("targetChange"in i))return ae.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?ae.min():a.readTime?Nn(a.readTime):ae.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Nh(this.serializer),n.addTarget=function(i,a){let c;const u=a.target;if(c=vh(u)?{documents:zI(i,u)}:{query:$I(i,u).ft},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=zw(i,a.resumeToken);const d=_h(i,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(ae.min())>0){c.readTime=cc(i,a.snapshotVersion.toTimestamp());const d=_h(i,a.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=qI(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Nh(this.serializer),n.removeTarget=e,this.q_(n)}}class RS extends Zw{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ee(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ee(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=FI(e.writeResults,e.commitTime),r=Nn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Nh(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>UI(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{}class VS extends DS{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new W(O.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Go(e,Eh(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new W(O.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Ho(e,Eh(n,r),s,a,c,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new W(O.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class MS{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Gn(n),this.aa=!1):K("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys="RemoteStore";class LS{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{Ns(this)&&(K(ys,"Restarting streams for network reachability change."),await async function(u){const d=le(u);d.Ea.add(4),await pa(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Qc(d)}(this))})}),this.Ra=new MS(r,s)}}async function Qc(t){if(Ns(t))for(const e of t.da)await e(!0)}async function pa(t){for(const e of t.da)await e(!1)}function e_(t,e){const n=le(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),tf(n)?ef(n):Di(n).O_()&&Zm(n,e))}function Jm(t,e){const n=le(t),r=Di(n);n.Ia.delete(e),r.O_()&&t_(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ns(n)&&n.Ra.set("Unknown"))}function Zm(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Di(t).Y_(e)}function t_(t,e){t.Va.Ue(e),Di(t).Z_(e)}function ef(t){t.Va=new AI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Di(t).start(),t.Ra.ua()}function tf(t){return Ns(t)&&!Di(t).x_()&&t.Ia.size>0}function Ns(t){return le(t).Ea.size===0}function n_(t){t.Va=void 0}async function OS(t){t.Ra.set("Online")}async function US(t){t.Ia.forEach((e,n)=>{Zm(t,e)})}async function FS(t,e){n_(t),tf(t)?(t.Ra.ha(e),ef(t)):t.Ra.set("Unknown")}async function zS(t,e,n){if(t.Ra.set("Online"),e instanceof Fw&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const c of i.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,a),s.Ia.delete(c),s.Va.removeTarget(c))}(t,e)}catch(r){K(ys,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await dc(t,r)}else if(e instanceof Tl?t.Va.Ze(e):e instanceof Uw?t.Va.st(e):t.Va.tt(e),!n.isEqual(ae.min()))try{const r=await Xw(t.localStore);n.compareTo(r)>=0&&await function(i,a){const c=i.Va.Tt(a);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const m=i.Ia.get(d);m&&i.Ia.set(d,m.withResumeToken(u.resumeToken,a))}}),c.targetMismatches.forEach((u,d)=>{const m=i.Ia.get(u);if(!m)return;i.Ia.set(u,m.withResumeToken(ot.EMPTY_BYTE_STRING,m.snapshotVersion)),t_(i,u);const p=new yr(m.target,u,d,m.sequenceNumber);Zm(i,p)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){K(ys,"Failed to raise snapshot:",r),await dc(t,r)}}async function dc(t,e,n){if(!Pi(e))throw e;t.Ea.add(1),await pa(t),t.Ra.set("Offline"),n||(n=()=>Xw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K(ys,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Qc(t)})}function r_(t,e){return e().catch(n=>dc(t,n,e))}async function Yc(t){const e=le(t),n=Or(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Lm;for(;$S(e);)try{const s=await bS(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,BS(e,s)}catch(s){await dc(e,s)}s_(e)&&i_(e)}function $S(t){return Ns(t)&&t.Ta.length<10}function BS(t,e){t.Ta.push(e);const n=Or(t);n.O_()&&n.X_&&n.ea(e.mutations)}function s_(t){return Ns(t)&&!Or(t).x_()&&t.Ta.length>0}function i_(t){Or(t).start()}async function qS(t){Or(t).ra()}async function WS(t){const e=Or(t);for(const n of t.Ta)e.ea(n.mutations)}async function HS(t,e,n){const r=t.Ta.shift(),s=Wm.from(r,e,n);await r_(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Yc(t)}async function GS(t,e){e&&Or(t).X_&&await async function(r,s){if(function(a){return kI(a)&&a!==O.ABORTED}(s.code)){const i=r.Ta.shift();Or(r).B_(),await r_(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Yc(r)}}(t,e),s_(t)&&i_(t)}async function L0(t,e){const n=le(t);n.asyncQueue.verifyOperationInProgress(),K(ys,"RemoteStore received new credentials");const r=Ns(n);n.Ea.add(3),await pa(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Qc(n)}async function KS(t,e){const n=le(t);e?(n.Ea.delete(2),await Qc(n)):e||(n.Ea.add(2),await pa(n),n.Ra.set("Unknown"))}function Di(t){return t.ma||(t.ma=function(n,r,s){const i=le(n);return i.sa(),new PS(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:OS.bind(null,t),t_:US.bind(null,t),r_:FS.bind(null,t),H_:zS.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),tf(t)?ef(t):t.Ra.set("Unknown")):(await t.ma.stop(),n_(t))})),t.ma}function Or(t){return t.fa||(t.fa=function(n,r,s){const i=le(n);return i.sa(),new RS(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:qS.bind(null,t),r_:GS.bind(null,t),ta:WS.bind(null,t),na:HS.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Yc(t)):(await t.fa.stop(),t.Ta.length>0&&(K(ys,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Un,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,c=new nf(e,n,a,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rf(t,e){if(Gn("AsyncQueue",`${e}: ${t}`),Pi(t))return new W(O.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{static emptySet(e){return new ni(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Z.comparator(n.key,r.key):(n,r)=>Z.comparator(n.key,r.key),this.keyedMap=ho(),this.sortedSet=new Ve(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ni)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ni;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(){this.ga=new Ve(Z.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):se(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class wi{constructor(e,n,r,s,i,a,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new wi(e,n,ni.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class YS{constructor(){this.queries=U0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=le(n),i=s.queries;s.queries=U0(),i.forEach((a,c)=>{for(const u of c.Sa)u.onError(r)})})(this,new W(O.ABORTED,"Firestore shutting down"))}}function U0(){return new bs(t=>Tw(t),Bc)}async function o_(t,e){const n=le(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new QS,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const c=rf(a,`Initialization of query '${Rs(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&sf(n)}async function a_(t,e){const n=le(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Sa.indexOf(e);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function XS(t,e){const n=le(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const c of a.Sa)c.Fa(s)&&(r=!0);a.wa=s}}r&&sf(n)}function JS(t,e,n){const r=le(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function sf(t){t.Ca.forEach(e=>{e.next()})}var Sh,F0;(F0=Sh||(Sh={})).Ma="default",F0.Cache="cache";class l_{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new wi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=wi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Sh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(e){this.key=e}}class u_{constructor(e){this.key=e}}class ZS{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=me(),this.mutatedKeys=me(),this.eu=Iw(e),this.tu=new ni(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new O0,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,p)=>{const g=s.get(m),N=qc(this.query,p)?p:null,j=!!g&&this.mutatedKeys.has(g.key),k=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let P=!1;g&&N?g.data.isEqual(N.data)?j!==k&&(r.track({type:3,doc:N}),P=!0):this.su(g,N)||(r.track({type:2,doc:N}),P=!0,(u&&this.eu(N,u)>0||d&&this.eu(N,d)<0)&&(c=!0)):!g&&N?(r.track({type:0,doc:N}),P=!0):g&&!N&&(r.track({type:1,doc:g}),P=!0,(u||d)&&(c=!0)),P&&(N?(a=a.add(N),i=k?i.add(m):i.delete(m)):(a=a.delete(m),i=i.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),i=i.delete(m.key),r.track({type:1,doc:m})}return{tu:a,iu:r,Cs:c,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((m,p)=>function(N,j){const k=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return se(20277,{Rt:P})}};return k(N)-k(j)}(m.type,p.type)||this.eu(m.doc,p.doc)),this.ou(r),s=s??!1;const c=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,d=u!==this.Za;return this.Za=u,a.length!==0||d?{snapshot:new wi(this.query,e.tu,i,a,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new O0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=me(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new u_(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new c_(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=me();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return wi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const of="SyncEngine";class ek{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class tk{constructor(e){this.key=e,this.hu=!1}}class nk{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new bs(c=>Tw(c),Bc),this.Iu=new Map,this.Eu=new Set,this.du=new Ve(Z.comparator),this.Au=new Map,this.Ru=new Km,this.Vu={},this.mu=new Map,this.fu=vi.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function rk(t,e,n=!0){const r=g_(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await d_(r,e,n,!0),s}async function sk(t,e){const n=g_(t);await d_(n,e,!0,!1)}async function d_(t,e,n,r){const s=await NS(t.localStore,bn(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await ik(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&e_(t.remoteStore,s),c}async function ik(t,e,n,r,s){t.pu=(p,g,N)=>async function(k,P,_,w){let E=P.view.ru(_);E.Cs&&(E=await P0(k.localStore,P.query,!1).then(({documents:b})=>P.view.ru(b,E)));const A=w&&w.targetChanges.get(P.targetId),D=w&&w.targetMismatches.get(P.targetId)!=null,V=P.view.applyChanges(E,k.isPrimaryClient,A,D);return $0(k,P.targetId,V.au),V.snapshot}(t,p,g,N);const i=await P0(t.localStore,e,!0),a=new ZS(e,i.Qs),c=a.ru(i.documents),u=fa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(c,t.isPrimaryClient,u);$0(t,n,d.au);const m=new ek(e,n,a);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function ok(t,e,n){const r=le(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(a=>!Bc(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Th(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Jm(r.remoteStore,s.targetId),kh(r,s.targetId)}).catch(Ai)):(kh(r,s.targetId),await Th(r.localStore,s.targetId,!0))}async function ak(t,e){const n=le(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Jm(n.remoteStore,r.targetId))}async function lk(t,e,n){const r=pk(t);try{const s=await function(a,c){const u=le(a),d=je.now(),m=c.reduce((N,j)=>N.add(j.key),me());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",N=>{let j=Kn(),k=me();return u.Ns.getEntries(N,m).next(P=>{j=P,j.forEach((_,w)=>{w.isValidDocument()||(k=k.add(_))})}).next(()=>u.localDocuments.getOverlayedDocuments(N,j)).next(P=>{p=P;const _=[];for(const w of c){const E=bI(w,p.get(w.key).overlayedDocument);E!=null&&_.push(new Hr(w.key,E,yw(E.value.mapValue),Gt.exists(!0)))}return u.mutationQueue.addMutationBatch(N,d,_,c)}).next(P=>{g=P;const _=P.applyToLocalDocumentSet(p,k);return u.documentOverlayCache.saveOverlays(N,P.batchId,_)})}).then(()=>({batchId:g.batchId,changes:kw(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,c,u){let d=a.Vu[a.currentUser.toKey()];d||(d=new Ve(he)),d=d.insert(c,u),a.Vu[a.currentUser.toKey()]=d}(r,s.batchId,n),await ga(r,s.changes),await Yc(r.remoteStore)}catch(s){const i=rf(s,"Failed to persist write");n.reject(i)}}async function h_(t,e){const n=le(t);try{const r=await _S(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Au.get(i);a&&(Ee(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?Ee(a.hu,14607):s.removedDocuments.size>0&&(Ee(a.hu,42227),a.hu=!1))}),await ga(n,r,e)}catch(r){await Ai(r)}}function z0(t,e,n){const r=le(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,a)=>{const c=a.view.va(e);c.snapshot&&s.push(c.snapshot)}),function(a,c){const u=le(a);u.onlineState=c;let d=!1;u.queries.forEach((m,p)=>{for(const g of p.Sa)g.va(c)&&(d=!0)}),d&&sf(u)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ck(t,e,n){const r=le(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let a=new Ve(Z.comparator);a=a.insert(i,pt.newNoDocument(i,ae.min()));const c=me().add(i),u=new Gc(ae.min(),new Map,new Ve(he),a,c);await h_(r,u),r.du=r.du.remove(i),r.Au.delete(e),af(r)}else await Th(r.localStore,e,!1).then(()=>kh(r,e,n)).catch(Ai)}async function uk(t,e){const n=le(t),r=e.batch.batchId;try{const s=await wS(n.localStore,e);f_(n,r,null),m_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ga(n,s)}catch(s){await Ai(s)}}async function dk(t,e,n){const r=le(t);try{const s=await function(a,c){const u=le(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let m;return u.mutationQueue.lookupMutationBatch(d,c).next(p=>(Ee(p!==null,37113),m=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,m,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m)).next(()=>u.localDocuments.getDocuments(d,m))})}(r.localStore,e);f_(r,e,n),m_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ga(r,s)}catch(s){await Ai(s)}}function m_(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function f_(t,e,n){const r=le(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function kh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||p_(t,r)})}function p_(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Jm(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),af(t))}function $0(t,e,n){for(const r of n)r instanceof c_?(t.Ru.addReference(r.key,e),hk(t,r)):r instanceof u_?(K(of,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||p_(t,r.key)):se(19791,{wu:r})}function hk(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(K(of,"New document in limbo: "+n),t.Eu.add(r),af(t))}function af(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Z(Te.fromString(e)),r=t.fu.next();t.Au.set(r,new tk(n)),t.du=t.du.insert(n,r),e_(t.remoteStore,new yr(bn($m(n.path)),r,"TargetPurposeLimboResolution",Fc.ce))}}async function ga(t,e,n){const r=le(t),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{a.push(r.pu(u,e,n).then(d=>{var m;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(m=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:m.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){s.push(d);const p=Ym.As(u.targetId,d);i.push(p)}}))}),await Promise.all(a),r.Pu.H_(s),await async function(u,d){const m=le(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>U.forEach(d,g=>U.forEach(g.Es,N=>m.persistence.referenceDelegate.addReference(p,g.targetId,N)).next(()=>U.forEach(g.ds,N=>m.persistence.referenceDelegate.removeReference(p,g.targetId,N)))))}catch(p){if(!Pi(p))throw p;K(Xm,"Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const N=m.Ms.get(g),j=N.snapshotVersion,k=N.withLastLimboFreeSnapshotVersion(j);m.Ms=m.Ms.insert(g,k)}}}(r.localStore,i))}async function mk(t,e){const n=le(t);if(!n.currentUser.isEqual(e)){K(of,"User change. New user:",e.toKey());const r=await Yw(n.localStore,e);n.currentUser=e,function(i,a){i.mu.forEach(c=>{c.forEach(u=>{u.reject(new W(O.CANCELLED,a))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ga(n,r.Ls)}}function fk(t,e){const n=le(t),r=n.Au.get(e);if(r&&r.hu)return me().add(r.key);{let s=me();const i=n.Iu.get(e);if(!i)return s;for(const a of i){const c=n.Tu.get(a);s=s.unionWith(c.view.nu)}return s}}function g_(t){const e=le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=h_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ck.bind(null,e),e.Pu.H_=XS.bind(null,e.eventManager),e.Pu.yu=JS.bind(null,e.eventManager),e}function pk(t){const e=le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dk.bind(null,e),e}class hc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Kc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return vS(this.persistence,new gS,e.initialUser,this.serializer)}Cu(e){return new Qw(Qm.mi,this.serializer)}Du(e){return new IS}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}hc.provider={build:()=>new hc};class gk extends hc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ee(this.persistence.referenceDelegate instanceof uc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new tS(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Tt.withCacheSize(this.cacheSizeBytes):Tt.DEFAULT;return new Qw(r=>uc.mi(r,n),this.serializer)}}class jh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>z0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=mk.bind(null,this.syncEngine),await KS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new YS}()}createDatastore(e){const n=Kc(e.databaseInfo.databaseId),r=function(i){return new AS(i)}(e.databaseInfo);return function(i,a,c,u){return new VS(i,a,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,c){return new LS(r,s,i,a,c)}(this.localStore,this.datastore,e.asyncQueue,n=>z0(this.syncEngine,n,0),function(){return V0.v()?new V0:new SS}())}createSyncEngine(e,n){return function(s,i,a,c,u,d,m){const p=new nk(s,i,a,c,u,d);return m&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=le(s);K(ys,"RemoteStore shutting down."),i.Ea.add(5),await pa(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}jh.provider={build:()=>new jh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Gn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur="FirestoreClient";class yk{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=mt.UNAUTHENTICATED,this.clientId=Mm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{K(Ur,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(K(Ur,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Un;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=rf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function md(t,e){t.asyncQueue.verifyOperationInProgress(),K(Ur,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Yw(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function B0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await xk(t);K(Ur,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>L0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>L0(e.remoteStore,s)),t._onlineComponents=e}async function xk(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K(Ur,"Using user provided OfflineComponentProvider");try{await md(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===O.FAILED_PRECONDITION||s.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;pi("Error using user provided cache. Falling back to memory cache: "+n),await md(t,new hc)}}else K(Ur,"Using default OfflineComponentProvider"),await md(t,new gk(void 0));return t._offlineComponents}async function x_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K(Ur,"Using user provided OnlineComponentProvider"),await B0(t,t._uninitializedComponentsProvider._online)):(K(Ur,"Using default OnlineComponentProvider"),await B0(t,new jh))),t._onlineComponents}function vk(t){return x_(t).then(e=>e.syncEngine)}async function v_(t){const e=await x_(t),n=e.eventManager;return n.onListen=rk.bind(null,e.syncEngine),n.onUnlisten=ok.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=sk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ak.bind(null,e.syncEngine),n}function wk(t,e,n={}){const r=new Un;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,u,d){const m=new y_({next:g=>{m.Nu(),a.enqueueAndForget(()=>a_(i,p));const N=g.docs.has(c);!N&&g.fromCache?d.reject(new W(O.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&g.fromCache&&u&&u.source==="server"?d.reject(new W(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new l_($m(c.path),m,{includeMetadataChanges:!0,qa:!0});return o_(i,p)}(await v_(t),t.asyncQueue,e,n,r)),r.promise}function _k(t,e,n={}){const r=new Un;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,u,d){const m=new y_({next:g=>{m.Nu(),a.enqueueAndForget(()=>a_(i,p)),g.fromCache&&u.source==="server"?d.reject(new W(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new l_(c,m,{includeMetadataChanges:!0,qa:!0});return o_(i,p)}(await v_(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __="firestore.googleapis.com",W0=!0;class H0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new W(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=__,this.ssl=W0}else this.host=e.host,this.ssl=e.ssl??W0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Kw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ZI)throw new W(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}LT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=w_(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new W(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new W(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new W(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new H0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new H0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ST;switch(r.type){case"firstParty":return new AT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=q0.get(n);r&&(K("ComponentProvider","Removing Datastore"),q0.delete(n),r.terminate())}(this),Promise.resolve()}}function Ek(t,e,n,r={}){var d;t=cn(t,Xc);const s=ki(e),i=t._getSettings(),a={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(Bv(`https://${c}`),qv("Firestore",!0)),i.host!==__&&i.host!==c&&pi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:c,ssl:s,emulatorOptions:r};if(!fs(u,a)&&(t._setSettings(u),r.mockUserToken)){let m,p;if(typeof r.mockUserToken=="string")m=r.mockUserToken,p=mt.MOCK_USER;else{m=e2(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new W(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new mt(g)}t._authCredentials=new kT(new sw(m,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Gr(this.firestore,e,this._query)}}class $e{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $e(this.firestore,e,this._key)}toJSON(){return{type:$e._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ha(n,$e._jsonSchema))return new $e(e,r||null,new Z(Te.fromString(n.referencePath)))}}$e._jsonSchemaVersion="firestore/documentReference/1.0",$e._jsonSchema={type:He("string",$e._jsonSchemaVersion),referencePath:He("string")};class Cr extends Gr{constructor(e,n,r){super(e,n,$m(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $e(this.firestore,null,new Z(e))}withConverter(e){return new Cr(this.firestore,e,this._path)}}function ce(t,e,...n){if(t=Ye(t),iw("collection","path",e),t instanceof Xc){const r=Te.fromString(e,...n);return i0(r),new Cr(t,null,r)}{if(!(t instanceof $e||t instanceof Cr))throw new W(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Te.fromString(e,...n));return i0(r),new Cr(t.firestore,null,r)}}function _t(t,e,...n){if(t=Ye(t),arguments.length===1&&(e=Mm.newId()),iw("doc","path",e),t instanceof Xc){const r=Te.fromString(e,...n);return s0(r),new $e(t,null,new Z(r))}{if(!(t instanceof $e||t instanceof Cr))throw new W(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Te.fromString(e,...n));return s0(r),new $e(t.firestore,t instanceof Cr?t.converter:null,new Z(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0="AsyncQueue";class K0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Jw(this,"async_queue_retry"),this._c=()=>{const r=hd();r&&K(G0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=hd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=hd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Un;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Pi(e))throw e;K(G0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Gn("INTERNAL UNHANDLED ERROR: ",Q0(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=nf.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&se(47125,{Pc:Q0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Q0(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Ts extends Xc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new K0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new K0(e),this._firestoreClient=void 0,await e}}}function bk(t,e){const n=typeof t=="object"?t:Kv(),r=typeof t=="string"?t:sc,s=Dm(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=JN("firestore");i&&Ek(s,...i)}return s}function lf(t){if(t._terminated)throw new W(O.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Nk(t),t._firestoreClient}function Nk(t){var r,s,i;const e=t._freezeSettings(),n=function(c,u,d,m){return new QT(c,u,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,w_(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new yk(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qt(ot.fromBase64String(e))}catch(n){throw new W(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new qt(ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:qt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ha(e,qt._jsonSchema))return qt.fromBase64String(e.bytes)}}qt._jsonSchemaVersion="firestore/bytes/1.0",qt._jsonSchema={type:He("string",qt._jsonSchemaVersion),bytes:He("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Tn._jsonSchemaVersion}}static fromJSON(e){if(ha(e,Tn._jsonSchema))return new Tn(e.latitude,e.longitude)}}Tn._jsonSchemaVersion="firestore/geoPoint/1.0",Tn._jsonSchema={type:He("string",Tn._jsonSchemaVersion),latitude:He("number"),longitude:He("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:In._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ha(e,In._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new In(e.vectorValues);throw new W(O.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}In._jsonSchemaVersion="firestore/vectorValue/1.0",In._jsonSchema={type:He("string",In._jsonSchemaVersion),vectorValues:He("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk=/^__.*__$/;class Ik{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Hr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ma(e,this.data,n,this.fieldTransforms)}}class E_{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Hr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function b_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se(40011,{Ac:t})}}class cf{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new cf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return mc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(b_(this.Ac)&&Tk.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Sk{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Kc(e)}Cc(e,n,r,s=!1){return new cf({Ac:e,methodName:n,Dc:r,path:rt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function eu(t){const e=t._freezeSettings(),n=Kc(t._databaseId);return new Sk(t._databaseId,!!e.ignoreUndefinedProperties,n)}function N_(t,e,n,r,s,i={}){const a=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);df("Data must be an object, but it was:",a,r);const c=T_(r,a);let u,d;if(i.merge)u=new Vt(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const m=[];for(const p of i.mergeFields){const g=Ch(e,p,n);if(!a.contains(g))throw new W(O.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);S_(m,g)||m.push(g)}u=new Vt(m),d=a.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=a.fieldTransforms;return new Ik(new St(c),u,d)}class tu extends Zc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof tu}}class uf extends Zc{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new na(e.serializer,Aw(e.serializer,this.Fc));return new vI(e.path,n)}isEqual(e){return e instanceof uf&&this.Fc===e.Fc}}function kk(t,e,n,r){const s=t.Cc(1,e,n);df("Data must be an object, but it was:",s,r);const i=[],a=St.empty();Wr(r,(u,d)=>{const m=hf(e,u,n);d=Ye(d);const p=s.yc(m);if(d instanceof tu)i.push(m);else{const g=ya(d,p);g!=null&&(i.push(m),a.set(m,g))}});const c=new Vt(i);return new E_(a,c,s.fieldTransforms)}function jk(t,e,n,r,s,i){const a=t.Cc(1,e,n),c=[Ch(e,r,n)],u=[s];if(i.length%2!=0)throw new W(O.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)c.push(Ch(e,i[g])),u.push(i[g+1]);const d=[],m=St.empty();for(let g=c.length-1;g>=0;--g)if(!S_(d,c[g])){const N=c[g];let j=u[g];j=Ye(j);const k=a.yc(N);if(j instanceof tu)d.push(N);else{const P=ya(j,k);P!=null&&(d.push(N),m.set(N,P))}}const p=new Vt(d);return new E_(m,p,a.fieldTransforms)}function Ck(t,e,n,r=!1){return ya(n,t.Cc(r?4:3,e))}function ya(t,e){if(I_(t=Ye(t)))return df("Unsupported field value:",e,t),T_(t,e);if(t instanceof Zc)return function(r,s){if(!b_(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const c of r){let u=ya(c,s.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ye(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Aw(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=je.fromDate(r);return{timestampValue:cc(s.serializer,i)}}if(r instanceof je){const i=new je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:cc(s.serializer,i)}}if(r instanceof Tn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qt)return{bytesValue:zw(s.serializer,r._byteString)};if(r instanceof $e){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Gm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof In)return function(a,c){return{mapValue:{fields:{[fw]:{stringValue:gw},[ic]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return Bm(c.serializer,d)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Uc(r)}`)}(t,e)}function T_(t,e){const n={};return lw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wr(t,(r,s)=>{const i=ya(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function I_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof je||t instanceof Tn||t instanceof qt||t instanceof $e||t instanceof Zc||t instanceof In)}function df(t,e,n){if(!I_(n)||!ow(n)){const r=Uc(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Ch(t,e,n){if((e=Ye(e))instanceof Jc)return e._internalPath;if(typeof e=="string")return hf(t,e);throw mc("Field path arguments must be of type string or ",t,!1,void 0,n)}const Ak=new RegExp("[~\\*/\\[\\]]");function hf(t,e,n){if(e.search(Ak)>=0)throw mc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Jc(...e.split("."))._internalPath}catch{throw mc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function mc(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new W(O.INVALID_ARGUMENT,c+t+u)}function S_(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new $e(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Pk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(nu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Pk extends k_{data(){return super.data()}}function nu(t,e){return typeof e=="string"?hf(t,e):e instanceof Jc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mf{}class ff extends mf{}function pe(t,e,...n){let r=[];e instanceof mf&&r.push(e),r=r.concat(n),function(i){const a=i.filter(u=>u instanceof pf).length,c=i.filter(u=>u instanceof ru).length;if(a>1||a>0&&c>0)throw new W(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class ru extends ff{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ru(e,n,r)}_apply(e){const n=this._parse(e);return j_(e._query,n),new Gr(e.firestore,e.converter,wh(e._query,n))}_parse(e){const n=eu(e.firestore);return function(i,a,c,u,d,m,p){let g;if(d.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new W(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){X0(p,m);const j=[];for(const k of p)j.push(Y0(u,i,k));g={arrayValue:{values:j}}}else g=Y0(u,i,p)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||X0(p,m),g=Ck(c,a,p,m==="in"||m==="not-in");return We.create(d,m,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function _e(t,e,n){const r=e,s=nu("where",t);return ru._create(s,r,n)}class pf extends mf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new pf(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:un.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const c=i.getFlattenedFilters();for(const u of c)j_(a,u),a=wh(a,u)}(e._query,n),new Gr(e.firestore,e.converter,wh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class gf extends ff{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new gf(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new W(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new W(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zo(i,a)}(e._query,this._field,this._direction);return new Gr(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new Ri(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function su(t,e="asc"){const n=e,r=nu("orderBy",t);return gf._create(r,n)}class yf extends ff{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new yf(e,n,r)}_apply(e){return new Gr(e.firestore,e.converter,ac(e._query,this._limit,this._limitType))}}function ra(t){return OT("limit",t),yf._create("limit",t,"F")}function Y0(t,e,n){if(typeof(n=Ye(n))=="string"){if(n==="")throw new W(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Nw(e)&&n.indexOf("/")!==-1)throw new W(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Te.fromString(n));if(!Z.isDocumentKey(r))throw new W(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return m0(t,new Z(r))}if(n instanceof $e)return m0(t,n._key);throw new W(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Uc(n)}.`)}function X0(t,e){if(!Array.isArray(t)||t.length===0)throw new W(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function j_(t,e){const n=function(s,i){for(const a of s)for(const c of a.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Dk{convertValue(e,n="none"){switch(Lr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Mr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw se(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Wr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[ic].arrayValue)==null?void 0:s.values)==null?void 0:i.map(a=>Fe(a.doubleValue));return new In(n)}convertGeoPoint(e){return new Tn(Fe(e.latitude),Fe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=$c(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Yo(e));default:return null}}convertTimestamp(e){const n=Vr(e);return new je(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Te.fromString(e);Ee(Gw(r),9688,{name:e});const s=new Xo(r.get(1),r.get(3)),i=new Z(r.popFirst(5));return s.isEqual(n)||Gn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class fo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ls extends k_{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Il(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(nu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new W(O.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ls._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ls._jsonSchemaVersion="firestore/documentSnapshot/1.0",ls._jsonSchema={type:He("string",ls._jsonSchemaVersion),bundleSource:He("string","DocumentSnapshot"),bundleName:He("string"),bundle:He("string")};class Il extends ls{data(e={}){return super.data(e)}}class ri{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new fo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Il(this._firestore,this._userDataWriter,r.key,r,new fo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(c=>{const u=new Il(s._firestore,s._userDataWriter,c.doc.key,c.doc,new fo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new Il(s._firestore,s._userDataWriter,c.doc.key,c.doc,new fo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,m=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),m=a.indexOf(c.doc.key)),{type:Vk(c.type),doc:u,oldIndex:d,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new W(O.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ri._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Mm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Vk(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return se(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(t){t=cn(t,$e);const e=cn(t.firestore,Ts);return wk(lf(e),t._key).then(n=>Mk(e,t,n))}ri._jsonSchemaVersion="firestore/querySnapshot/1.0",ri._jsonSchema={type:He("string",ri._jsonSchemaVersion),bundleSource:He("string","QuerySnapshot"),bundleName:He("string"),bundle:He("string")};class A_ extends Dk{constructor(e){super(),this.firestore=e}convertBytes(e){return new qt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $e(this.firestore,null,n)}}function ge(t){t=cn(t,Gr);const e=cn(t.firestore,Ts),n=lf(e),r=new A_(e);return Rk(t._query),_k(n,t._query).then(s=>new ri(e,r,t,s))}function P_(t,e,n){t=cn(t,$e);const r=cn(t.firestore,Ts),s=C_(t.converter,e);return iu(r,[N_(eu(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Gt.none())])}function _i(t,e,n,...r){t=cn(t,$e);const s=cn(t.firestore,Ts),i=eu(s);let a;return a=typeof(e=Ye(e))=="string"||e instanceof Jc?jk(i,"updateDoc",t._key,e,n,r):kk(i,"updateDoc",t._key,e),iu(s,[a.toMutation(t._key,Gt.exists(!0))])}function R_(t){return iu(cn(t.firestore,Ts),[new qm(t._key,Gt.none())])}function xs(t,e){const n=cn(t.firestore,Ts),r=_t(t),s=C_(t.converter,e);return iu(n,[N_(eu(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Gt.exists(!1))]).then(()=>r)}function iu(t,e){return function(r,s){const i=new Un;return r.asyncQueue.enqueueAndForget(async()=>lk(await vk(r),s,i)),i.promise}(lf(t),e)}function Mk(t,e,n){const r=n.docs.get(e._key),s=new A_(t);return new ls(t,s,e._key,r,new fo(n.hasPendingWrites,n.fromCache),e.converter)}function Ah(t){return new uf("increment",t)}(function(e,n=!0){(function(s){Ci=s})(ji),fi(new ps("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),c=new Ts(new jT(r.getProvider("auth-internal")),new PT(a,r.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new W(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xo(d.options.projectId,m)}(a,s),a);return i={useFetchStreams:n,...i},c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),kr(e0,t0,e),kr(e0,t0,"esm2020")})();var Lk="firebase",Ok="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kr(Lk,Ok,"app");function D_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Uk=D_,V_=new ua("auth","Firebase",D_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc=new Pm("@firebase/auth");function Fk(t,...e){fc.logLevel<=de.WARN&&fc.warn(`Auth (${ji}): ${t}`,...e)}function Sl(t,...e){fc.logLevel<=de.ERROR&&fc.error(`Auth (${ji}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(t,...e){throw xf(t,...e)}function Sn(t,...e){return xf(t,...e)}function M_(t,e,n){const r={...Uk(),[e]:n};return new ua("auth","Firebase",r).create(e,{appName:t.name})}function zn(t){return M_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return V_.create(t,...e)}function re(t,e,...n){if(!t)throw xf(e,...n)}function Mn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Sl(e),new Error(e)}function Qn(t,e){t||Mn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function zk(){return J0()==="http:"||J0()==="https:"}function J0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $k(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zk()||o2()||"connection"in navigator)?navigator.onLine:!0}function Bk(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,n){this.shortDelay=e,this.longDelay=n,Qn(n>e,"Short delay should be less than long delay!"),this.isMobile=r2()||a2()}get(){return $k()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(t,e){Qn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Mn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Mn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Mn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Hk=new xa(3e4,6e4);function Kr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Jn(t,e,n,r,s={}){return O_(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const c=da({key:t.config.apiKey,...a}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...i};return i2()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&ki(t.emulatorConfig.host)&&(d.credentials="include"),L_.fetch()(await U_(t,t.config.apiHost,n,c),d)})}async function O_(t,e,n){t._canInitEmulator=!1;const r={...qk,...e};try{const s=new Kk(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw al(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const c=i.ok?a.errorMessage:a.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw al(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw al(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw al(t,"user-disabled",a);const m=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw M_(t,m,d);dn(t,m)}}catch(s){if(s instanceof Xn)throw s;dn(t,"network-request-failed",{message:String(s)})}}async function va(t,e,n,r,s={}){const i=await Jn(t,e,n,r,s);return"mfaPendingCredential"in i&&dn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function U_(t,e,n,r){const s=`${e}${n}?${r}`,i=t,a=i.config.emulator?vf(t.config,s):`${t.config.apiScheme}://${s}`;return Wk.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function Gk(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Kk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Sn(this.auth,"network-request-failed")),Hk.get())})}}function al(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Sn(t,e,r);return s.customData._tokenResponse=n,s}function Z0(t){return t!==void 0&&t.enterprise!==void 0}class Qk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Gk(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Yk(t,e){return Jn(t,"GET","/v2/recaptchaConfig",Kr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xk(t,e){return Jn(t,"POST","/v1/accounts:delete",e)}async function pc(t,e){return Jn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Co(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Jk(t,e=!1){const n=Ye(t),r=await n.getIdToken(e),s=wf(r);re(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Co(fd(s.auth_time)),issuedAtTime:Co(fd(s.iat)),expirationTime:Co(fd(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function fd(t){return Number(t)*1e3}function wf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Sl("JWT malformed, contained fewer than 3 sections"),null;try{const s=Uv(n);return s?JSON.parse(s):(Sl("Failed to decode base64 JWT payload"),null)}catch(s){return Sl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function ey(t){const e=wf(t);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ei(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Xn&&Zk(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Zk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Co(this.lastLoginAt),this.creationTime=Co(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gc(t){var p;const e=t.auth,n=await t.getIdToken(),r=await Ei(t,pc(e,{idToken:n}));re(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(p=s.providerUserInfo)!=null&&p.length?F_(s.providerUserInfo):[],a=nj(t.providerData,i),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=c?u:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Rh(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,m)}async function tj(t){const e=Ye(t);await gc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nj(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function F_(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rj(t,e){const n=await O_(t,{},async()=>{const r=da({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=await U_(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return t.emulatorConfig&&ki(t.emulatorConfig.host)&&(u.credentials="include"),L_.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function sj(t,e){return Jn(t,"POST","/v2/accounts:revokeToken",Kr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ey(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){re(e.length!==0,"internal-error");const n=ey(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await rj(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new si;return r&&(re(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(re(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(re(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new si,this.toJSON())}_performRefresh(){return Mn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(t,e){re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class rn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new ej(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Rh(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ei(this,this.stsTokenManager.getToken(this.auth,e));return re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Jk(this,e)}reload(){return tj(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new rn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await gc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Bt(this.auth.app))return Promise.reject(zn(this.auth));const e=await this.getIdToken();return await Ei(this,Xk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,a=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:N,providerData:j,stsTokenManager:k}=n;re(p&&k,e,"internal-error");const P=si.fromJSON(this.name,k);re(typeof p=="string",e,"internal-error"),or(r,e.name),or(s,e.name),re(typeof g=="boolean",e,"internal-error"),re(typeof N=="boolean",e,"internal-error"),or(i,e.name),or(a,e.name),or(c,e.name),or(u,e.name),or(d,e.name),or(m,e.name);const _=new rn({uid:p,auth:e,email:s,emailVerified:g,displayName:r,isAnonymous:N,photoURL:a,phoneNumber:i,tenantId:c,stsTokenManager:P,createdAt:d,lastLoginAt:m});return j&&Array.isArray(j)&&(_.providerData=j.map(w=>({...w}))),u&&(_._redirectEventId=u),_}static async _fromIdTokenResponse(e,n,r=!1){const s=new si;s.updateFromServerResponse(n);const i=new rn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await gc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];re(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?F_(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new si;c.updateFromIdToken(r);const u=new rn({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Rh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty=new Map;function Ln(t){Qn(t instanceof Function,"Expected a class definition");let e=ty.get(t);return e?(Qn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ty.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}z_.type="NONE";const ny=z_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(t,e,n){return`firebase:${t}:${e}:${n}`}class ii{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=kl(this.userKey,s.apiKey,i),this.fullPersistenceKey=kl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await pc(this.auth,{idToken:e}).catch(()=>{});return n?rn._fromGetAccountInfoResponse(this.auth,n,e):null}return rn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ii(Ln(ny),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Ln(ny);const a=kl(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const m=await d._get(a);if(m){let p;if(typeof m=="string"){const g=await pc(e,{idToken:m}).catch(()=>{});if(!g)break;p=await rn._fromGetAccountInfoResponse(e,g,m)}else p=rn._fromJSON(e,m);d!==i&&(c=p),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new ii(i,e,r):(i=u[0],c&&await i._set(a,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new ii(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(W_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(G_(e))return"Blackberry";if(K_(e))return"Webos";if(B_(e))return"Safari";if((e.includes("chrome/")||q_(e))&&!e.includes("edge/"))return"Chrome";if(H_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function $_(t=yt()){return/firefox\//i.test(t)}function B_(t=yt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function q_(t=yt()){return/crios\//i.test(t)}function W_(t=yt()){return/iemobile/i.test(t)}function H_(t=yt()){return/android/i.test(t)}function G_(t=yt()){return/blackberry/i.test(t)}function K_(t=yt()){return/webos/i.test(t)}function _f(t=yt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function ij(t=yt()){var e;return _f(t)&&!!((e=window.navigator)!=null&&e.standalone)}function oj(){return l2()&&document.documentMode===10}function Q_(t=yt()){return _f(t)||H_(t)||K_(t)||G_(t)||/windows phone/i.test(t)||W_(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y_(t,e=[]){let n;switch(t){case"Browser":n=ry(yt());break;case"Worker":n=`${ry(yt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ji}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,c)=>{try{const u=e(i);a(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lj(t,e={}){return Jn(t,"GET","/v2/passwordPolicy",Kr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj=6;class uj{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??cj,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sy(this),this.idTokenSubscription=new sy(this),this.beforeStateQueue=new aj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=V_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ln(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await ii.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await pc(this,{idToken:e}),r=await rn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Bt(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(i=this.redirectUser)==null?void 0:i._redirectEventId,c=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===c)&&(u!=null&&u.user)&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await gc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Bk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Bt(this.app))return Promise.reject(zn(this));const n=e?Ye(e):null;return n&&re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Bt(this.app)?Promise.reject(zn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Bt(this.app)?Promise.reject(zn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ln(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await lj(this),n=new uj(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ua("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await sj(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ln(e)||this._popupRedirectResolver;re(n,this,"argument-error"),this.redirectPersistenceManager=await ii.create(this,[Ln(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(c,this,"internal-error"),c.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Y_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Bt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Fk(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Is(t){return Ye(t)}class sy{constructor(e){this.auth=e,this.observer=null,this.addObserver=g2(n=>this.observer=n)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ou={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hj(t){ou=t}function X_(t){return ou.loadJS(t)}function mj(){return ou.recaptchaEnterpriseScript}function fj(){return ou.gapiScript}function pj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class gj{constructor(){this.enterprise=new yj}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class yj{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const xj="recaptcha-enterprise",J_="NO_RECAPTCHA";class vj{constructor(e){this.type=xj,this.auth=Is(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,c)=>{Yk(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new Qk(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,a(d.siteKey)}}).catch(u=>{c(u)})})}function s(i,a,c){const u=window.grecaptcha;Z0(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{a(d)}).catch(()=>{a(J_)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new gj().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{r(this.auth).then(c=>{if(!n&&Z0(window.grecaptcha))s(c,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=mj();u.length!==0&&(u+=c),X_(u).then(()=>{s(c,i,a)}).catch(d=>{a(d)})}}).catch(c=>{a(c)})})}}async function iy(t,e,n,r=!1,s=!1){const i=new vj(t);let a;if(s)a=J_;else try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:a}):Object.assign(c,{captchaResponse:a}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Dh(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await iy(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await iy(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wj(t,e){const n=Dm(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(fs(i,e??{}))return s;dn(s,"already-initialized")}return n.initialize({options:e})}function _j(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ln);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Ej(t,e,n){const r=Is(t);re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=Z_(e),{host:a,port:c}=bj(e),u=c===null?"":`:${c}`,d={url:`${i}//${a}${u}/`},m=Object.freeze({host:a,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),re(fs(d,r.config.emulator)&&fs(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,ki(a)?(Bv(`${i}//${a}${u}`),qv("Auth",!0)):Nj()}function Z_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function bj(t){const e=Z_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:oy(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:oy(a)}}}function oy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Nj(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Mn("not implemented")}_getIdTokenResponse(e){return Mn("not implemented")}_linkToIdToken(e,n){return Mn("not implemented")}_getReauthenticationResolver(e){return Mn("not implemented")}}async function Tj(t,e){return Jn(t,"POST","/v1/accounts:update",e)}async function Ij(t,e){return Jn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sj(t,e){return va(t,"POST","/v1/accounts:signInWithPassword",Kr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kj(t,e){return va(t,"POST","/v1/accounts:signInWithEmailLink",Kr(t,e))}async function jj(t,e){return va(t,"POST","/v1/accounts:signInWithEmailLink",Kr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa extends Ef{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new sa(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new sa(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Dh(e,n,"signInWithPassword",Sj);case"emailLink":return kj(e,{email:this._email,oobCode:this._password});default:dn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Dh(e,r,"signUpPassword",Ij);case"emailLink":return jj(e,{idToken:n,email:this._email,oobCode:this._password});default:dn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oi(t,e){return va(t,"POST","/v1/accounts:signInWithIdp",Kr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj="http://localhost";class vs extends Ef{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new vs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):dn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const a=new vs(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return oi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,oi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,oi(e,n)}buildRequest(){const e={requestUri:Cj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=da(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aj(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Pj(t){const e=lo(co(t)).link,n=e?lo(co(e)).deep_link_id:null,r=lo(co(t)).deep_link_id;return(r?lo(co(r)).link:null)||r||n||e||t}class bf{constructor(e){const n=lo(co(e)),r=n.apiKey??null,s=n.oobCode??null,i=Aj(n.mode??null);re(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Pj(e);try{return new bf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(){this.providerId=Vi.PROVIDER_ID}static credential(e,n){return sa._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=bf.parseLink(n);return re(r,"argument-error"),sa._fromEmailAndCode(e,r.code,r.tenantId)}}Vi.PROVIDER_ID="password";Vi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Vi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa extends e1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends wa{constructor(){super("facebook.com")}static credential(e){return vs._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return dr.credential(e.oauthAccessToken)}catch{return null}}}dr.FACEBOOK_SIGN_IN_METHOD="facebook.com";dr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends wa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return vs._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return hr.credential(n,r)}catch{return null}}}hr.GOOGLE_SIGN_IN_METHOD="google.com";hr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends wa{constructor(){super("github.com")}static credential(e){return vs._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mr.credential(e.oauthAccessToken)}catch{return null}}}mr.GITHUB_SIGN_IN_METHOD="github.com";mr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends wa{constructor(){super("twitter.com")}static credential(e,n){return vs._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return fr.credential(n,r)}catch{return null}}}fr.TWITTER_SIGN_IN_METHOD="twitter.com";fr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rj(t,e){return va(t,"POST","/v1/accounts:signUp",Kr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await rn._fromIdTokenResponse(e,r,s),a=ay(r);return new ws({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=ay(r);return new ws({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function ay(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc extends Xn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,yc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new yc(e,n,r,s)}}function t1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?yc._fromErrorAndOperation(t,i,e,r):i})}async function Dj(t,e,n=!1){const r=await Ei(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ws._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vj(t,e,n=!1){const{auth:r}=t;if(Bt(r.app))return Promise.reject(zn(r));const s="reauthenticate";try{const i=await Ei(t,t1(r,s,e,t),n);re(i.idToken,r,"internal-error");const a=wf(i.idToken);re(a,r,"internal-error");const{sub:c}=a;return re(t.uid===c,r,"user-mismatch"),ws._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&dn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n1(t,e,n=!1){if(Bt(t.app))return Promise.reject(zn(t));const r="signIn",s=await t1(t,r,e),i=await ws._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Mj(t,e){return n1(Is(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r1(t){const e=Is(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Lj(t,e,n){if(Bt(t.app))return Promise.reject(zn(t));const r=Is(t),a=await Dh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Rj).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&r1(t),u}),c=await ws._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(c.user),c}function Oj(t,e,n){return Bt(t.app)?Promise.reject(zn(t)):Mj(Ye(t),Vi.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&r1(t),r})}function Uj(t,e){return Fj(Ye(t),null,e)}async function Fj(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const a=await Ei(t,Tj(r,i));await t._updateTokensIfNecessary(a,!0)}function zj(t,e,n,r){return Ye(t).onIdTokenChanged(e,n,r)}function $j(t,e,n){return Ye(t).beforeAuthStateChanged(e,n)}function Bj(t,e,n,r){return Ye(t).onAuthStateChanged(e,n,r)}function qj(t){return Ye(t).signOut()}const xc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(xc,"1"),this.storage.removeItem(xc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj=1e3,Hj=10;class i1 extends s1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Q_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);oj()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Hj):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Wj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}i1.type="LOCAL";const Gj=i1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1 extends s1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}o1.type="SESSION";const a1=o1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kj(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new au(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(a).map(async d=>d(n.origin,i)),u=await Kj(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}au.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((c,u)=>{const d=Nf("",20);s.port1.start();const m=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(m),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(g.data.response);break;default:clearTimeout(m),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(){return window}function Yj(t){kn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(){return typeof kn().WorkerGlobalScope<"u"&&typeof kn().importScripts=="function"}async function Xj(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Jj(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function Zj(){return l1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1="firebaseLocalStorageDb",eC=1,vc="firebaseLocalStorage",u1="fbase_key";class _a{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function lu(t,e){return t.transaction([vc],e?"readwrite":"readonly").objectStore(vc)}function tC(){const t=indexedDB.deleteDatabase(c1);return new _a(t).toPromise()}function Vh(){const t=indexedDB.open(c1,eC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(vc,{keyPath:u1})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(vc)?e(r):(r.close(),await tC(),e(await Vh()))})})}async function ly(t,e,n){const r=lu(t,!0).put({[u1]:e,value:n});return new _a(r).toPromise()}async function nC(t,e){const n=lu(t,!1).get(e),r=await new _a(n).toPromise();return r===void 0?null:r.value}function cy(t,e){const n=lu(t,!0).delete(e);return new _a(n).toPromise()}const rC=800,sC=3;class d1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>sC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return l1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=au._getInstance(Zj()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await Xj(),!this.activeServiceWorker)return;this.sender=new Qj(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Jj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vh();return await ly(e,xc,"1"),await cy(e,xc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ly(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>nC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>cy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=lu(s,!1).getAll();return new _a(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}d1.type="LOCAL";const iC=d1;new xa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(t,e){return e?Ln(e):(re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf extends Ef{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return oi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return oi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return oi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function aC(t){return n1(t.auth,new Tf(t),t.bypassAuthState)}function lC(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),Vj(n,new Tf(t),t.bypassAuthState)}async function cC(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),Dj(n,new Tf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:c}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return aC;case"linkViaPopup":case"linkViaRedirect":return cC;case"reauthViaPopup":case"reauthViaRedirect":return lC;default:dn(this.auth,"internal-error")}}resolve(e){Qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC=new xa(2e3,1e4);class Ks extends h1{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ks.currentPopupAction&&Ks.currentPopupAction.cancel(),Ks.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return re(e,this.auth,"internal-error"),e}async onExecution(){Qn(this.filter.length===1,"Popup operations only handle one event");const e=Nf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Sn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Sn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ks.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,uC.get())};e()}}Ks.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC="pendingRedirect",jl=new Map;class hC extends h1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=jl.get(this.auth._key());if(!e){try{const r=await mC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}jl.set(this.auth._key(),e)}return this.bypassAuthState||jl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mC(t,e){const n=gC(e),r=pC(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function fC(t,e){jl.set(t._key(),e)}function pC(t){return Ln(t._redirectPersistence)}function gC(t){return kl(dC,t.config.apiKey,t.name)}async function yC(t,e,n=!1){if(Bt(t.app))return Promise.reject(zn(t));const r=Is(t),s=oC(r,e),a=await new hC(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=10*60*1e3;class vC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!m1(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Sn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xC&&this.cachedEventUids.clear(),this.cachedEventUids.has(uy(e))}saveEventToCache(e){this.cachedEventUids.add(uy(e)),this.lastProcessedEventTime=Date.now()}}function uy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function m1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function wC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return m1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _C(t,e={}){return Jn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bC=/^https?/;async function NC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await _C(t);for(const n of e)try{if(TC(n))return}catch{}dn(t,"unauthorized-domain")}function TC(t){const e=Ph(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!bC.test(n))return!1;if(EC.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=new xa(3e4,6e4);function dy(){const t=kn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function SC(t){return new Promise((e,n)=>{var s,i,a;function r(){dy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{dy(),n(Sn(t,"network-request-failed"))},timeout:IC.get()})}if((i=(s=kn().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((a=kn().gapi)!=null&&a.load)r();else{const c=pj("iframefcb");return kn()[c]=()=>{gapi.load?r():n(Sn(t,"network-request-failed"))},X_(`${fj()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Cl=null,e})}let Cl=null;function kC(t){return Cl=Cl||SC(t),Cl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC=new xa(5e3,15e3),CC="__/auth/iframe",AC="emulator/auth/iframe",PC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},RC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DC(t){const e=t.config;re(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?vf(e,AC):`https://${t.config.authDomain}/${CC}`,r={apiKey:e.apiKey,appName:t.name,v:ji},s=RC.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${da(r).slice(1)}`}async function VC(t){const e=await kC(t),n=kn().gapi;return re(n,t,"internal-error"),e.open({where:document.body,url:DC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:PC,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=Sn(t,"network-request-failed"),c=kn().setTimeout(()=>{i(a)},jC.get());function u(){kn().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},LC=500,OC=600,UC="_blank",FC="http://localhost";class hy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zC(t,e,n,r=LC,s=OC){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...MC,width:r.toString(),height:s.toString(),top:i,left:a},d=yt().toLowerCase();n&&(c=q_(d)?UC:n),$_(d)&&(e=e||FC,u.scrollbars="yes");const m=Object.entries(u).reduce((g,[N,j])=>`${g}${N}=${j},`,"");if(ij(d)&&c!=="_self")return $C(e||"",c),new hy(null);const p=window.open(e||"",c,m);re(p,t,"popup-blocked");try{p.focus()}catch{}return new hy(p)}function $C(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC="__/auth/handler",qC="emulator/auth/handler",WC=encodeURIComponent("fac");async function my(t,e,n,r,s,i){re(t.config.authDomain,t,"auth-domain-config-required"),re(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ji,eventId:s};if(e instanceof e1){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",p2(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,p]of Object.entries({}))a[m]=p}if(e instanceof wa){const m=e.getScopes().filter(p=>p!=="");m.length>0&&(a.scopes=m.join(","))}t.tenantId&&(a.tid=t.tenantId);const c=a;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const u=await t._getAppCheckToken(),d=u?`#${WC}=${encodeURIComponent(u)}`:"";return`${HC(t)}?${da(c).slice(1)}${d}`}function HC({config:t}){return t.emulator?vf(t,qC):`https://${t.authDomain}/${BC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd="webStorageSupport";class GC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=a1,this._completeRedirectFn=yC,this._overrideRedirectResult=fC}async _openPopup(e,n,r,s){var a;Qn((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const i=await my(e,n,r,Ph(),s);return zC(e,i,Nf())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await my(e,n,r,Ph(),s);return Yj(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Qn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await VC(e),r=new vC(e);return n.register("authEvent",s=>(re(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(pd,{type:pd},s=>{var a;const i=(a=s==null?void 0:s[0])==null?void 0:a[pd];i!==void 0&&n(!!i),dn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=NC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Q_()||B_()||_f()}}const KC=GC;var fy="@firebase/auth",py="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function XC(t){fi(new ps("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;re(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:a,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Y_(t)},d=new dj(r,s,i,u);return _j(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),fi(new ps("auth-internal",e=>{const n=Is(e.getProvider("auth").getImmediate());return(r=>new QC(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),kr(fy,py,YC(t)),kr(fy,py,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC=5*60,ZC=$v("authIdTokenMaxAge")||JC;let gy=null;const eA=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>ZC)return;const s=n==null?void 0:n.token;gy!==s&&(gy=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function tA(t=Kv()){const e=Dm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=wj(t,{popupRedirectResolver:KC,persistence:[iC,Gj,a1]}),r=$v("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=eA(i.toString());$j(n,a,()=>a(n.currentUser)),zj(n,c=>a(c))}}const s=Fv("auth");return s&&Ej(n,`http://${s}`),n}function nA(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}hj({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Sn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",nA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});XC("Browser");const rA={apiKey:"AIzaSyBTDEFh60Y0Rbgdgz7L5qvTTfwF6tTU4_w",authDomain:"vocabulary-app-7fe34.firebaseapp.com",projectId:"vocabulary-app-7fe34",storageBucket:"vocabulary-app-7fe34.firebasestorage.app",messagingSenderId:"791241143324",appId:"1:791241143324:web:da37f567108608702b9bd9",measurementId:"G-4TMRJZ28JX"},f1=Gv(rA),ll=tA(f1),J=bk(f1),sA=async(t,e,n)=>{console.log("Saving collection with userId:",t),console.log("Collection data:",n);const r={...n,userId:t,username:e,rating:0,usageCount:0,createdAt:n.createdAt},s=await xs(ce(J,"collections"),r);return console.log("Collection saved with ID:",s.id),{id:s.id,...r}},p1=async t=>{console.log("Loading user collections for userId:",t);const e=pe(ce(J,"collections"),_e("userId","==",t)),n=await ge(e);console.log("Found user collections:",n.docs.length);const r=n.docs.map(s=>({id:s.id,...s.data(),createdAt:s.data().createdAt.toDate()}));return r.sort((s,i)=>i.createdAt.getTime()-s.createdAt.getTime()),console.log("Processed user collections:",r),r},g1=async t=>{console.log("Loading saved collections for userId:",t);const e=pe(ce(J,"saved_collections"),_e("userId","==",t)),r=(await ge(e)).docs.map(c=>c.data().collectionId);if(r.length===0)return[];const s=pe(ce(J,"collections")),a=(await ge(s)).docs.filter(c=>r.includes(c.id)).map(c=>({id:c.id,...c.data(),createdAt:c.data().createdAt.toDate()}));return console.log("Found saved collections:",a.length),a},y1=async()=>{console.log("Loading public collections");const t=pe(ce(J,"collections"),_e("visibility","==","public")),e=await ge(t);console.log("Found public collections:",e.docs.length);const n=e.docs.map(r=>({id:r.id,...r.data(),createdAt:r.data().createdAt.toDate()}));return n.sort((r,s)=>s.rating!==r.rating?s.rating-r.rating:s.usageCount-r.usageCount),n},x1=async(t=10)=>{console.log("Loading top rated collections");try{const e=pe(ce(J,"collections"),_e("visibility","==","public")),r=(await ge(e)).docs.map(s=>({id:s.id,...s.data(),createdAt:s.data().createdAt.toDate()}));return r.sort((s,i)=>i.rating!==s.rating?i.rating-s.rating:i.usageCount-s.usageCount),r.slice(0,t)}catch(e){return console.error("Error in loadTopRatedCollections:",e),[]}},v1=async t=>{await R_(_t(J,"collections",t))},w1=async(t,e)=>{console.log("Updating collection:",t,e),await _i(_t(J,"collections",t),e)},iA=async(t,e)=>{try{console.log("🎓 Marking collection as learned:",{userId:t,collectionId:e});let n=null;const r=_t(J,"collections",e),s=await Fn(r);if(s.exists()){const c=s.data();n={id:s.id,...c,createdAt:c.createdAt.toDate()}}else{const c=_t(J,"public_exams",e),u=await Fn(c);if(u.exists()){const d=u.data();n={id:u.id,name:d.name,description:d.description||"",words:d.embeddedWords||[],createdAt:d.createdAt.toDate(),userId:d.userId,username:d.username,visibility:"public",rating:d.rating||0,usageCount:d.totalAttempts||0}}}if(!n)throw console.log("⚠️ Collection not found for learning, it may have been deleted:",e),new Error(`Collection ${e} not found. It may have been deleted.`);console.log("📦 Embedding collection data:",n.name);const i=pe(ce(J,"learned_collections"),_e("userId","==",t),_e("collectionId","==",e)),a=await ge(i);if(a.empty)console.log("📝 Creating new learned record..."),await xs(ce(J,"learned_collections"),{userId:t,collectionId:e,learnedAt:new Date,perfectScoreCount:1,embeddedData:n}),console.log("✅ New learned record created");else{console.log("📝 Updating existing learned record...");const c=a.docs[0].ref;await _i(c,{perfectScoreCount:Ah(1),learnedAt:new Date,embeddedData:n}),console.log("✅ Existing learned record updated")}try{console.log("📈 Attempting to update collection usage count...");const c=_t(J,"collections",e),u=await Fn(c);if(u.exists()){const d=u.data();console.log("🔍 Collection owner:",d.userId,"Current user:",t),d.userId===t?(await _i(c,{usageCount:Ah(1)}),console.log("✅ Collection usage count updated")):console.log("⚠️ Skipping usage count update - user does not own collection")}else console.log("⚠️ Collection document not found")}catch(c){console.error("❌ Error updating collection usage count (non-critical):",c)}}catch(n){throw console.error("❌ Error in markCollectionAsLearned:",n),n}},If=async t=>{const e=pe(ce(J,"learned_collections"),_e("userId","==",t));return(await ge(e)).docs.map(r=>({id:r.id,...r.data(),learnedAt:r.data().learnedAt.toDate()}))},_1=async t=>{try{console.log("📚 Loading learned collections with embedded data for user:",t);const e=pe(ce(J,"learned_collections"),_e("userId","==",t)),n=await ge(e);if(console.log("🔍 Found learned records:",n.docs.length),n.empty)return[];const r=[],s=n.docs.map(async i=>{const a=i.data();if(a.embeddedData){const c={...a.embeddedData,createdAt:a.embeddedData.createdAt.toDate?a.embeddedData.createdAt.toDate():a.embeddedData.createdAt};r.push(c),console.log("✅ Using embedded data for collection:",a.embeddedData.name);return}console.log(`⚠️ No embedded data found for learned collection: ${a.collectionId}, trying to find original...`);try{const c=_t(J,"collections",a.collectionId),u=await Fn(c);if(u.exists()){const p=u.data(),g={id:u.id,...p,createdAt:p.createdAt.toDate()};r.push(g),console.log("✅ Found original collection in collections table:",p.name);return}const d=_t(J,"public_exams",a.collectionId),m=await Fn(d);if(m.exists()){const p=m.data(),g={id:m.id,name:p.name,description:p.description||"",words:p.embeddedWords||[],createdAt:p.createdAt.toDate(),userId:p.userId,username:p.username,visibility:"public",rating:p.rating||0,usageCount:p.totalAttempts||0};r.push(g),console.log("✅ Found original collection in public_exams table:",p.name);return}console.log(`❌ Could not find original collection for: ${a.collectionId}`)}catch(c){console.error(`❌ Error finding original collection for ${a.collectionId}:`,c)}});return await Promise.all(s),console.log("✅ Loaded learned collections with embedded data:",r.length),r}catch(e){return console.error("❌ Error getting learned collections with embedded data:",e),[]}},E1=async(t,e)=>{const n=pe(ce(J,"saved_collections"),_e("userId","==",t),_e("collectionId","==",e));(await ge(n)).empty&&await xs(ce(J,"saved_collections"),{userId:t,collectionId:e,savedAt:new Date})},b1=async(t,e)=>{const n=pe(ce(J,"saved_collections"),_e("userId","==",t),_e("collectionId","==",e));(await ge(n)).docs.forEach(async s=>{await R_(s.ref)})},N1=async(t,e)=>{const n=pe(ce(J,"saved_collections"),_e("userId","==",t),_e("collectionId","==",e));return!(await ge(n)).empty},Sf=async()=>{var t;try{console.log("Loading leaderboard data...");const e=pe(ce(J,"users")),n=await ge(e);console.log(`👥 Total users found: ${n.docs.length}`);const r=new Map;n.docs.forEach(u=>{const d=u.data();r.set(u.id,{username:d.username||`user_${u.id.substring(0,8)}`,totalCollections:0,publicCollections:0,totalWords:0,totalUsage:0,totalExams:0,totalExamScore:0,perfectExams:0})});const s=pe(ce(J,"collections")),i=await ge(s);console.log(`📝 Total collections found: ${i.docs.length}`),i.docs.forEach(u=>{var N;const d=u.data(),m=d.userId;if(!m||!r.has(m)){console.log("⚠️ Skipping collection without valid userId:",{id:u.id,name:d.name,userId:m});return}const p=r.get(m);p.totalCollections++,(d.visibility==="public"||!d.visibility)&&(p.publicCollections++,p.totalWords+=((N=d.words)==null?void 0:N.length)||0,p.totalUsage+=d.usageCount||0)}),console.log("📖 Getting learned collections...");const a=new Map;try{const u=pe(ce(J,"learned_collections")),d=await ge(u);console.log(`📚 Found ${d.docs.length} learned collections`);for(const m of d.docs){const p=m.data(),g=p.userId,N=p.collectionId,j=await ge(pe(ce(J,"collections"),_e("__name__","==",N)));if(!j.empty){const P=((t=j.docs[0].data().words)==null?void 0:t.length)||0;a.set(g,(a.get(g)||0)+P)}}}catch(u){console.error("❌ Error getting learned collections (skipping):",u)}try{const u=pe(ce(J,"exam_participations")),d=await ge(u);console.log(`🎓 Found ${d.docs.length} exam participations`);for(const m of d.docs){const p=m.data(),g=p.userId;if(r.has(g)){const N=r.get(g);N.totalExams++,N.totalExamScore+=p.scorePercentage||0,p.scorePercentage>=100&&N.perfectExams++}}}catch(u){console.error("❌ Error getting exam participations (skipping):",u)}const c=[];return r.forEach((u,d)=>{c.push({id:d,username:u.username,totalCollections:u.publicCollections,publicCollections:u.publicCollections,totalWords:u.totalWords,learnedWords:a.get(d)||0,totalUsage:u.totalUsage,totalExams:u.totalExams,averageExamScore:u.totalExams>0?u.totalExamScore/u.totalExams:0,perfectExams:u.perfectExams,joinedAt:new Date(2024,0,1)})}),console.log("Leaderboard data loaded:",c.length,"total users"),c}catch(e){return console.error("Error loading leaderboard data:",e),[]}},T1=async(t=10)=>{const n=[...await Sf()].sort((r,s)=>s.totalCollections!==r.totalCollections?s.totalCollections-r.totalCollections:s.totalWords-r.totalWords);return n.forEach((r,s)=>{r.rank=s+1}),n.slice(0,t)},I1=async(t=10)=>{const n=[...await Sf()].sort((r,s)=>s.learnedWords!==r.learnedWords?s.learnedWords-r.learnedWords:s.totalCollections-r.totalCollections);return n.forEach((r,s)=>{r.rank=s+1}),n.slice(0,t)},Qs=()=>Math.random().toString(36).substr(2,9),S1="vocabulary_settings",k1=t=>{localStorage.setItem(S1,JSON.stringify(t))},j1=()=>{const t=localStorage.getItem(S1);if(!t)return{autoAdvance:!0};try{return{autoAdvance:!0,...JSON.parse(t)}}catch{return{autoAdvance:!0}}},oA=async(t,e,n,r)=>{if(!n.name)throw new Error("Name is required for exams");const s=r.filter(c=>n.selectedCollections.includes(c.id));if(s.length===0)throw new Error("Seçilmiş kolleksiyalar tapılmadı");const i=[];s.forEach(c=>{c.words.forEach(u=>{i.push({id:u.id,word:u.english||u.word,english:u.english,meaning:u.meaning,type:u.type||"noun"})})}),console.log("📚 Combined words for exam:",i.length,"total words"),console.log("🔍 Sample words being embedded:",i.slice(0,3)),s.forEach((c,u)=>{console.log(`   ${u+1}. ${c.name} (${c.words.length} words)`)});const a={name:n.name,description:n.description||"",userId:t,username:e,settings:{selectedCollections:n.selectedCollections,variantCount:n.variantCount,wordCount:n.wordCount,timeLimit:n.timeLimit,isPublic:n.isPublic,name:n.name,description:n.description},embeddedWords:i,collectionsMetadata:s.map(c=>({id:c.id,name:c.name,wordCount:c.words.length})),createdAt:new Date,totalAttempts:0,averageScore:0,rating:0};console.log("🔥 Attempting to save public exam:",a),console.log("🔍 Exam settings isPublic:",n.isPublic),console.log("🔍 newExam.settings.isPublic:",a.settings.isPublic);try{console.log("🧪 Testing collection access...");const c=ce(J,"public_exams");console.log("🧪 Collection reference created successfully");const u=await xs(c,a);return console.log("✅ Public exam saved successfully with ID:",u.id),console.log("✅ Saved exam data:",{id:u.id,name:a.name,isPublic:a.settings.isPublic,userId:a.userId,username:a.username}),{id:u.id,...a}}catch(c){console.error("❌ Detailed error in savePublicExam:",{message:c.message,code:c.code,details:c}),console.log("🔄 Trying alternative approach - saving as public collection...");try{const u={...a,isPublicExam:!0,examType:"public"},d=await xs(ce(J,"collections"),u);return console.log("✅ Alternative save successful:",d.id),{id:d.id,...u}}catch(u){throw console.error("❌ Alternative approach also failed:",u),c}}},kf=async(t=50)=>{console.log("🔍 Starting to load all public exams...");try{const e=pe(ce(J,"public_exams"),su("createdAt","desc"),ra(t));console.log("🔍 Query created for public_exams collection");const n=await ge(e);console.log("📊 Query executed. Found docs:",n.docs.length),n.docs.length>0&&n.docs.forEach((i,a)=>{var u;const c=i.data();console.log(`📋 Exam ${a+1}:`,{id:i.id,name:c.name,isPublic:(u=c.settings)==null?void 0:u.isPublic,userId:c.userId,username:c.username})});let r=n.docs.map(i=>({id:i.id,...i.data(),createdAt:i.data().createdAt.toDate()}));const s=await Promise.all(r.map(async i=>{const a=await A1(i.id);return{...i,totalAttempts:a.totalAttempts||0,averageScore:a.averageScore||0}}));return console.log("🔍 Loaded public exams with embedded words check:"),s.forEach((i,a)=>{console.log(`   ${a+1}. ${i.name} - embeddedWords: ${i.embeddedWords?i.embeddedWords.length:"NONE"} - attempts: ${i.totalAttempts} - avg: ${i.averageScore.toFixed(1)}%`)}),s}catch(e){console.log("❌ Error in loadAllPublicExams:",e),console.log("⚠️ Failed to load from public_exams, trying collections instead...");const n=pe(ce(J,"collections"),_e("isPublicExam","==",!0),ra(t)),r=await ge(n);return console.log("📊 Loaded public exams from collections:",r.docs.length),r.docs.map(s=>({id:s.id,...s.data(),createdAt:s.data().createdAt.toDate()}))}},C1=async t=>{console.log("🔍 Loading user exams for userId:",t);try{const e=pe(ce(J,"public_exams"),_e("userId","==",t)),n=await ge(e);return console.log("📊 Loaded user public exams from public_exams:",n.docs.length),n.docs.length>0&&n.docs.forEach((r,s)=>{var a;const i=r.data();console.log(`📋 User Exam ${s+1}:`,{id:r.id,name:i.name,isPublic:(a=i.settings)==null?void 0:a.isPublic,userId:i.userId})}),n.docs.map(r=>({id:r.id,...r.data(),createdAt:r.data().createdAt.toDate()}))}catch(e){throw console.log("❌ Error in loadUserPublicExams:",e),e}},aA=async(t,e,n)=>{try{const r=_t(J,"exam_stats",t),s=e/n*100,i=await Fn(r);if(i.exists()){const a=i.data(),c=a.totalAttempts||0,u=a.averageScore||0,d=c===0?s:(u*c+s)/(c+1);await _i(r,{totalAttempts:Ah(1),averageScore:d,lastUpdated:new Date}),console.log("✅ Exam stats updated:",t,{newAttempts:c+1,newAverage:d.toFixed(1)})}else await P_(r,{examId:t,totalAttempts:1,averageScore:s,createdAt:new Date,lastUpdated:new Date}),console.log("✅ New exam stats created:",t,{totalAttempts:1,averageScore:s.toFixed(1)})}catch(r){console.error("❌ Error updating exam stats:",r)}},A1=async t=>{try{const e=await Fn(_t(J,"exam_stats",t));return e.exists()?e.data():{totalAttempts:0,averageScore:0}}catch(e){return console.error("❌ Error getting exam stats:",e),{totalAttempts:0,averageScore:0}}},lA=async(t,e,n,r,s)=>{const i=e/n*100,a={userId:t,score:e,totalQuestions:n,scorePercentage:i,timeSpent:r,examSettings:s||null,completedAt:new Date};await xs(ce(J,"exam_results"),a)},cA=async(t,e,n,r,s)=>{const i={userId:t,examId:e,score:n,totalQuestions:r,scorePercentage:n/r*100,timeSpent:s,participatedAt:new Date};await xs(ce(J,"exam_participations"),i)},P1=async t=>{console.log("🔍 Loading participated exams for userId:",t);try{const e=pe(ce(J,"exam_participations"),_e("userId","==",t),su("participatedAt","desc")),n=await ge(e),r=[...new Set(n.docs.map(a=>a.data().examId))];if(r.length===0)return[];const s=r.map(async a=>{const c=await ge(pe(ce(J,"public_exams"),_e("__name__","==",a)));if(!c.empty){const u=c.docs[0];return{id:u.id,...u.data(),createdAt:u.data().createdAt.toDate()}}return null});return(await Promise.all(s)).filter(a=>a!==null)}catch(e){return console.error("Error loading participated exams:",e),[]}},uA=async(t,e)=>{try{const n=pe(ce(J,"exam_participations"),_e("userId","==",t),_e("examId","==",e),su("scorePercentage","desc"),ra(5));return(await ge(n)).docs.map(s=>({id:s.id,...s.data(),participatedAt:s.data().participatedAt.toDate()}))}catch(n){return console.error("Error loading user exam results:",n),[]}},R1=async(t,e)=>{try{const n=pe(ce(J,"exam_participations"),_e("userId","==",t),_e("examId","==",e),ra(1));return(await ge(n)).docs.length>0}catch(n){return console.error("Error checking user participation:",n),!1}},jf=async(t,e)=>{try{const n=pe(ce(J,"exam_participations"),_e("userId","==",t),_e("examId","==",e),su("scorePercentage","desc"),ra(1)),r=await ge(n);return r.docs.length>0?{...r.docs[0].data(),participatedAt:r.docs[0].data().participatedAt.toDate()}:null}catch(n){return console.error("Error loading user best exam result:",n),null}},dA=async()=>{var t,e;console.log("🔄 Starting migration of old exams to embedded words format...");try{const n=pe(ce(J,"public_exams")),r=await ge(n);let s=0;for(const i of r.docs){const a=i.data();if(a.embeddedWords&&a.embeddedWords.length>0){console.log(`✅ Exam ${a.name} already has embedded words, skipping...`);continue}if(console.log(`🔄 Migrating exam: ${a.name}`),((e=(t=a.settings)==null?void 0:t.selectedCollections)==null?void 0:e.length)>0)try{const c=[];for(const u of a.settings.selectedCollections){const d=await ge(pe(ce(J,"collections"),_e("__name__","==",u)));d.docs.length>0&&c.push(d.docs[0].data())}if(c.length>0){const u=[];c.forEach(m=>{m.words&&Array.isArray(m.words)&&m.words.forEach(p=>{u.push({id:p.id,word:p.english||p.word,english:p.english,meaning:p.meaning,type:p.type||"noun"})})});const d=_t(J,"public_exams",i.id);await _i(d,{embeddedWords:u,collectionsMetadata:c.map(m=>{var p;return{id:m.id,name:m.name,wordCount:((p=m.words)==null?void 0:p.length)||0}})}),console.log(`✅ Migrated exam ${a.name} with ${u.length} words`),s++}else console.log(`⚠️ No collections found for exam ${a.name}`)}catch(c){console.error(`❌ Error migrating exam ${a.name}:`,c)}else console.log(`⚠️ Exam ${a.name} has no selected collections`)}return console.log(`🎉 Migration completed! Migrated ${s} exams.`),{success:!0,migratedCount:s}}catch(n){return console.error("❌ Migration failed:",n),{success:!1,error:n}}},D1=async()=>{try{console.log("📊 Loading global statistics...");const t=pe(ce(J,"collections")),e=await ge(t),n=e.size;console.log("🔍 Total collections found:",n);const r=pe(ce(J,"public_exams")),s=await ge(r),i=s.size;console.log("🔍 Total exams found:",i);const a=pe(ce(J,"users")),u=(await ge(a)).size;console.log("🔍 Total users found:",u);let d=0,m=0;e.forEach(N=>{const j=N.data();j.words&&Array.isArray(j.words)&&(d+=j.words.length)}),s.forEach(N=>{const j=N.data();j.embeddedWords&&Array.isArray(j.embeddedWords)&&(d+=j.embeddedWords.length)}),console.log("🔍 Total words found:",d);const p=pe(ce(J,"learned_collections")),g=await ge(p);return console.log("🔍 Total learned records found:",g.size),g.forEach(N=>{const j=N.data();if(j.embeddedData&&j.embeddedData.words)m+=j.embeddedData.words.length;else{const k=j.collectionId,P=e.docs.find(_=>_.id===k);if(P){const _=P.data();_.words&&(m+=_.words.length)}else{const _=s.docs.find(w=>w.id===k);if(_){const w=_.data();w.embeddedWords&&(m+=w.embeddedWords.length)}}}}),console.log("🔍 Total learned words found:",m),{totalCollections:n,totalExams:i,totalUsers:u,totalWords:d,totalLearnedWords:m}}catch(t){return console.error("Error getting global statistics:",t),{totalCollections:0,totalExams:0,totalUsers:0,totalWords:0,totalLearnedWords:0}}},fn=Object.freeze(Object.defineProperty({__proto__:null,deleteCollection:v1,generateId:Qs,getExamStats:A1,getGlobalStatistics:D1,getLeaderboardData:Sf,getLearnedCollections:If,getLearnedCollectionsWithData:_1,getTopCreators:T1,getTopLearners:I1,getUserBestExamResult:jf,getUserExamResults:uA,hasUserParticipatedInExam:R1,isCollectionSaved:N1,loadAllPublicExams:kf,loadPublicCollections:y1,loadSavedCollections:g1,loadSettings:j1,loadTopRatedCollections:x1,loadUserCollections:p1,loadUserParticipatedExams:P1,loadUserPublicExams:C1,markCollectionAsLearned:iA,migrateOldExamsToEmbedWords:dA,removeSavedCollection:b1,saveCollection:sA,saveCollectionForUser:E1,saveExamResult:lA,savePublicExam:oA,saveSettings:k1,trackExamParticipation:cA,updateCollection:w1,updateExamStats:aA},Symbol.toStringTag,{value:"Module"}));/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ne=(t,e)=>{const n=L.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:c="",children:u,...d},m)=>L.createElement("svg",{ref:m,...hA,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${mA(t)}`,c].join(" "),...d},[...e.map(([p,g])=>L.createElement(p,g)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yy=ne("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=ne("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=ne("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=ne("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=ne("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=ne("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=ne("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=ne("BookmarkCheck",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=ne("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=ne("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=ne("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=ne("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bi=ne("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=ne("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=ne("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=ne("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=ne("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=ne("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=ne("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=ne("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0",key:"aigmz7"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2",key:"1n6bmn"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8",key:"a9iiix"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=ne("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=ne("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=ne("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=ne("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=ne("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=ne("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=ne("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=ne("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=ne("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=ne("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=ne("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=ne("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cf=ne("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=ne("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=ne("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Af=ne("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=ne("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=ne("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=ne("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=ne("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mh=ne("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=ne("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=ne("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=ne("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=ne("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pf=ne("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=ne("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=ne("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=ne("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=ne("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=ne("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),F1=L.createContext({}),Xt=()=>L.useContext(F1),RA=({children:t})=>{const[e,n]=L.useState(null),[r,s]=L.useState(null),[i,a]=L.useState(!0),c=async(N,j,k)=>{try{const _=(await Lj(ll,N,k)).user,w=pe(ce(J,"users"),_e("email","==",N));if(!(await ge(w)).empty)throw await _.delete(),new Error("Bu email artıq istifadə edilir");const A=pe(ce(J,"users"),_e("username","==",j));if(!(await ge(A)).empty)throw await _.delete(),new Error("Bu username artıq istifadə edilir");const V={id:_.uid,email:N,username:j,createdAt:new Date};return await P_(_t(J,"users",_.uid),V),n(V),V}catch(P){throw P}},u=async(N,j)=>{let k=N;if(!N.includes("@")){const A=pe(ce(J,"users"),_e("username","==",N)),D=await ge(A);if(D.empty)throw new Error("İstifadəçi tapılmadı");k=D.docs[0].data().email}const _=(await Oj(ll,k,j)).user,w=await Fn(_t(J,"users",_.uid));if(!w.exists())throw new Error("İstifadəçi məlumatları tapılmadı");const E={...w.data(),createdAt:w.data().createdAt.toDate()};return n(E),E},d=async()=>{await qj(ll),n(null)},m=async N=>{if(!r||!e)throw new Error("İstifadəçi sistemə daxil olmayıb");if(N.username&&N.username!==e.username){const j=pe(ce(J,"users"),_e("username","==",N.username));if(!(await ge(j)).empty)throw new Error("Bu username artıq istifadə edilir")}await _i(_t(J,"users",r.uid),N),n(j=>j?{...j,...N}:null)},p=async N=>{if(!r)throw new Error("İstifadəçi sistemə daxil olmayıb");await Uj(r,N)};L.useEffect(()=>Bj(ll,async j=>{if(s(j),j){const k=await Fn(_t(J,"users",j.uid));if(k.exists()){const P={...k.data(),createdAt:k.data().createdAt.toDate()};n(P)}}else n(null);a(!1)}),[]);const g={currentUser:e,firebaseUser:r,login:u,register:c,logout:d,updateUserProfile:m,updateUserPassword:p,loading:i};return o.jsx(F1.Provider,{value:g,children:!i&&t})},DA=({onNavigateToCollections:t,onNavigateToAllCollections:e,onNavigateToLeaderboard:n,onNavigateToExam:r,onNavigateToAllExams:s,onNavigateToMyExams:i,onNavigateToSettings:a,onNavigateToAITeacher:c,onTakeExam:u,onPlayQuiz:d})=>{const{currentUser:m,logout:p}=Xt(),[g,N]=L.useState([]),[j,k]=L.useState(!0),[P,_]=L.useState([]),[w,E]=L.useState(!0),[A,D]=L.useState({totalCollections:0,totalExams:0,totalUsers:0,totalWords:0,totalLearnedWords:0}),[V,b]=L.useState(!0),[y,x]=L.useState(new Set);L.useEffect(()=>{S(),T(),C(),I(),window.location.search.includes("migrate=true")&&mn(async()=>{const{migrateOldExamsToEmbedWords:H}=await Promise.resolve().then(()=>fn);return{migrateOldExamsToEmbedWords:H}},void 0).then(({migrateOldExamsToEmbedWords:H})=>{console.log("🔄 Running one-time migration..."),H().then(F=>{console.log("Migration result:",F),alert(`Migration tamamlandı! ${F.migratedCount||0} imtahan yeniləndi.`)})})},[m]);const S=async()=>{try{k(!0);const H=await x1(10);N(H)}catch(H){console.error("Error loading top collections:",H)}finally{k(!1)}},T=async()=>{try{E(!0);const H=await kf(6);_(H)}catch(H){console.error("Error loading top exams:",H)}finally{E(!1)}},C=async()=>{try{b(!0);const H=await D1();D(H)}catch(H){console.error("Error loading global statistics:",H)}finally{b(!1)}},I=async()=>{if(m)try{const H=await If(m.id),F=new Set(H.map(xe=>xe.collectionId));x(F)}catch(H){console.error("Error loading learned collections:",H)}},ee=async()=>{try{await p()}catch(H){console.error("Logout failed:",H)}};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[o.jsx("div",{className:"bg-white shadow-sm border-b",children:o.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg",children:o.jsx(Ue,{className:"w-6 h-6 text-white"})}),o.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Learning App"})]}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[o.jsx(Pf,{className:"w-4 h-4"}),o.jsx("span",{className:"font-medium",children:m==null?void 0:m.username})]}),o.jsx("button",{onClick:a,className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:o.jsx(Af,{className:"w-5 h-5"})}),o.jsx("button",{onClick:ee,className:"p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors",children:o.jsx(EA,{className:"w-5 h-5"})})]})]})})}),o.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-12",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsxs("h2",{className:"text-4xl font-bold text-gray-800 mb-4",children:["Xoş gəldin, ",m==null?void 0:m.username,"!"]}),o.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"İngilis dili öyrənmə səfərində sənə kömək edəcək alətlər. Yeni sözlər öyrən, kolleksiyalar yarat və biliklərinizi imtahanlarda sınayın."})]}),o.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:[o.jsxs("div",{onClick:t,className:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 p-8 cursor-pointer group transform hover:scale-105",children:[o.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full mb-6 group-hover:from-blue-600 group-hover:to-indigo-700 transition-all",children:o.jsx(Ue,{className:"w-8 h-8 text-white"})}),o.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-3",children:"Kolleksiyalarım"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"Söz kolleksiyalarınızı yaradın, idarə edin və öyrənin."}),o.jsxs("div",{className:"flex items-center text-blue-600 font-semibold group-hover:text-blue-700",children:[o.jsx("span",{children:"Kolleksiyalara get"}),o.jsx("svg",{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),o.jsxs("div",{onClick:n,className:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 p-8 cursor-pointer group transform hover:scale-105",children:[o.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-gradient-to-r from-yellow-500 to-orange-600 rounded-full mb-6 group-hover:from-yellow-600 group-hover:to-orange-700 transition-all",children:o.jsx(wn,{className:"w-8 h-8 text-white"})}),o.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-3",children:"Liderlik Cədvəli"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"Ən çox yaradan və öyrənən istifadəçiləri görün, rəqabət edin."}),o.jsxs("div",{className:"flex items-center text-yellow-600 font-semibold group-hover:text-yellow-700",children:[o.jsx("span",{children:"Liderlərə bax"}),o.jsx("svg",{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),o.jsxs("div",{onClick:r,className:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 p-8 cursor-pointer group transform hover:scale-105",children:[o.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-gradient-to-r from-green-500 to-teal-600 rounded-full mb-6 group-hover:from-green-600 group-hover:to-teal-700 transition-all",children:o.jsx(xn,{className:"w-8 h-8 text-white"})}),o.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-3",children:"Peşəkar İmtahan"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"Comprehensive imtahan verin, bilik səviyyənizi ölçün."}),o.jsxs("div",{className:"flex items-center text-green-600 font-semibold group-hover:text-green-700",children:[o.jsx("span",{children:"İmtahan ver"}),o.jsx("svg",{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),o.jsxs("div",{onClick:i,className:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 p-8 cursor-pointer group transform hover:scale-105",children:[o.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-600 rounded-full mb-6 group-hover:from-purple-600 group-hover:to-pink-700 transition-all",children:o.jsx(xy,{className:"w-8 h-8 text-white"})}),o.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-3",children:"Mənim İmtahanlarım"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"Yaratdığınız və iştirak etdiyiniz imtahanlara baxın."}),o.jsxs("div",{className:"flex items-center text-purple-600 font-semibold group-hover:text-purple-700",children:[o.jsx("span",{children:"İmtahanlarıma get"}),o.jsx("svg",{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),o.jsxs("div",{onClick:c,className:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 p-8 cursor-pointer group transform hover:scale-105 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-purple-500/10 to-blue-500/10 rounded-full -translate-y-8 translate-x-8"}),o.jsxs("div",{className:"flex items-center justify-center w-16 h-16 bg-gradient-to-r from-purple-500 to-blue-600 rounded-full mb-6 group-hover:from-purple-600 group-hover:to-blue-700 transition-all relative",children:[o.jsx(po,{className:"w-8 h-8 text-white"}),o.jsx(U1,{className:"w-4 h-4 text-yellow-300 absolute -top-1 -right-1 animate-pulse"})]}),o.jsxs("h3",{className:"text-2xl font-bold text-gray-800 mb-3 flex items-center",children:["AI Müəllim",o.jsx("span",{className:"ml-2 px-2 py-1 bg-gradient-to-r from-purple-100 to-blue-100 text-purple-700 text-xs font-medium rounded-full",children:"YENİ"})]}),o.jsx("p",{className:"text-gray-600 mb-6",children:"AI müəlliminizlə danışaraq İngilis dilinizi inkişaf etdirin!"}),o.jsxs("div",{className:"flex items-center text-purple-600 font-semibold group-hover:text-purple-700",children:[o.jsx("span",{children:"Söhbətə başla"}),o.jsx("svg",{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]}),o.jsxs("div",{className:"mt-16 bg-white rounded-2xl shadow-lg p-8",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"p-2 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-lg",children:o.jsx(_c,{className:"w-6 h-6 text-white"})}),o.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Ən Populyar Kolleksiyalar"})]}),o.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-blue-600 hover:text-blue-700 font-semibold transition-colors",children:[o.jsx("span",{children:"Hamısını gör"}),o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),j?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("span",{className:"text-gray-600",children:"Populyar kolleksiyalar yüklənir..."})]}):!g||g.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"w-16 h-16 mx-auto bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mb-4",children:o.jsx(Ue,{className:"w-8 h-8 text-gray-400"})}),o.jsx("p",{className:"text-gray-600",children:"Hələ public kolleksiya yoxdur."}),o.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"İlk kolleksiyanızı yaradıb community ilə paylaşın!"})]}):o.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:(g||[]).slice(0,6).map((H,F)=>{var xe;return o.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-white rounded-xl p-6 border border-gray-200 hover:shadow-md transition-shadow cursor-pointer",children:[F<3&&o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold text-white ${F===0?"bg-yellow-500":F===1?"bg-gray-400":"bg-orange-600"}`,children:F+1}),o.jsx("span",{className:"ml-2 text-xs font-medium text-gray-500",children:F===0?"Ən Populyar":F===1?"2-ci":"3-cü"})]}),o.jsx("h4",{className:"font-bold text-gray-800 mb-2 line-clamp-2",children:H.name}),o.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-3",children:[o.jsxs("span",{children:["@",H.username]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(zr,{className:"w-3 h-3 text-yellow-500 mr-1"}),o.jsx("span",{children:H.rating.toFixed(1)})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(an,{className:"w-3 h-3 text-blue-500 mr-1"}),o.jsx("span",{children:H.usageCount})]})]})]}),o.jsxs("div",{className:"text-xs text-gray-500 mb-4",children:[H.words.length," söz • ",(xe=H.tags)==null?void 0:xe.slice(0,2).map(B=>`#${B}`).join(" ")]}),y.has(H.id)&&o.jsxs("div",{className:"flex items-center space-x-2 mb-3 p-2 bg-green-50 rounded-lg",children:[o.jsx(Lt,{className:"w-4 h-4 text-green-600"}),o.jsx("span",{className:"text-sm text-green-700 font-medium",children:"Artıq öyrəndiniz"})]}),o.jsxs("button",{onClick:()=>d(H),className:`w-full flex items-center justify-center space-x-2 py-2 px-4 rounded-lg text-sm font-medium transition-all ${y.has(H.id)?"bg-green-100 text-green-700 border border-green-200 hover:bg-green-200":"bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700"}`,children:[o.jsx(vn,{className:"w-3 h-3"}),o.jsx("span",{children:y.has(H.id)?"Yenidən Oyna":"Quiz Oyna"})]})]},H.id)})}),g&&g.length>6&&o.jsx("div",{className:"text-center mt-6",children:o.jsxs("button",{onClick:e,className:"inline-flex items-center space-x-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-blue-600 hover:to-purple-700 transition-all",children:[o.jsx(Ue,{className:"w-4 h-4"}),o.jsx("span",{children:"Bütün Kolleksiyalara Bax"})]})})]}),o.jsxs("div",{className:"mt-8 bg-white rounded-2xl shadow-lg p-8",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"p-2 bg-gradient-to-r from-green-400 to-blue-500 rounded-lg",children:o.jsx(xn,{className:"w-6 h-6 text-white"})}),o.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Ən Yaxşı İmtahanlar"})]}),o.jsxs("button",{onClick:i,className:"flex items-center space-x-2 text-blue-600 hover:text-blue-700 font-semibold transition-colors",children:[o.jsx("span",{children:"Hamısını gör"}),o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),w?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("span",{className:"text-gray-600",children:"Top imtahanlar yüklənir..."})]}):!P||P.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"w-16 h-16 mx-auto bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mb-4",children:o.jsx(xn,{className:"w-8 h-8 text-gray-400"})}),o.jsx("p",{className:"text-gray-600",children:"Hələ public imtahan yoxdur."}),o.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"İlk imtahanınızı yaradıb community ilə paylaşın!"})]}):o.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:(P||[]).slice(0,6).map((H,F)=>o.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-white rounded-xl p-6 border border-gray-200 hover:shadow-md transition-shadow",children:[F<3&&o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold text-white ${F===0?"bg-yellow-500":F===1?"bg-gray-400":"bg-orange-600"}`,children:F+1}),o.jsx("span",{className:"ml-2 text-xs font-medium text-gray-500",children:F===0?"Ən Populyar":F===1?"2-ci":"3-cü"})]}),o.jsx("h4",{className:"font-bold text-gray-800 mb-2 line-clamp-2",children:H.name}),o.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-3",children:[o.jsxs("span",{children:["@",H.username]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(an,{className:"w-3 h-3 text-blue-500 mr-1"}),o.jsx("span",{children:H.totalAttempts})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(zr,{className:"w-3 h-3 text-yellow-500 mr-1"}),o.jsxs("span",{children:[H.averageScore.toFixed(1),"%"]})]})]})]}),o.jsxs("div",{className:"text-xs text-gray-500 mb-4",children:[H.settings.wordCount," sual • ",H.settings.timeLimit," dəqiqə"]}),o.jsxs("button",{onClick:()=>u(H),className:"w-full flex items-center justify-center space-x-2 bg-gradient-to-r from-green-500 to-blue-600 text-white py-2 px-4 rounded-lg text-sm font-medium hover:from-green-600 hover:to-blue-700 transition-all",children:[o.jsx(vn,{className:"w-3 h-3"}),o.jsx("span",{children:"İmtahan Ver"})]})]},H.id))})]}),o.jsxs("div",{className:"mt-8 bg-white rounded-2xl shadow-lg p-8",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[o.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-400 to-pink-500 rounded-lg",children:o.jsx(xy,{className:"w-6 h-6 text-white"})}),o.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Global Statistikalar"})]}),V?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto mb-4"}),o.jsx("span",{className:"text-gray-600",children:"Statistikalar yüklənir..."})]}):o.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsxs("div",{className:"text-center bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl p-6",children:[o.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-500 rounded-full mx-auto mb-3",children:o.jsx(Ue,{className:"w-6 h-6 text-white"})}),o.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:A.totalCollections}),o.jsx("div",{className:"text-sm text-gray-600",children:"Kolleksiya"})]}),o.jsxs("div",{className:"text-center bg-gradient-to-br from-green-50 to-emerald-100 rounded-xl p-6",children:[o.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-green-500 rounded-full mx-auto mb-3",children:o.jsx(xn,{className:"w-6 h-6 text-white"})}),o.jsx("div",{className:"text-2xl font-bold text-green-600 mb-1",children:A.totalExams}),o.jsx("div",{className:"text-sm text-gray-600",children:"İmtahan"})]}),o.jsxs("div",{className:"text-center bg-gradient-to-br from-purple-50 to-pink-100 rounded-xl p-6",children:[o.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-purple-500 rounded-full mx-auto mb-3",children:o.jsx(an,{className:"w-6 h-6 text-white"})}),o.jsx("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:A.totalUsers}),o.jsx("div",{className:"text-sm text-gray-600",children:"İstifadəçi"})]}),o.jsxs("div",{className:"text-center bg-gradient-to-br from-yellow-50 to-orange-100 rounded-xl p-6",children:[o.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-yellow-500 rounded-full mx-auto mb-3",children:o.jsx(_c,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{className:"text-xl font-bold text-yellow-600 mb-1",children:[A.totalLearnedWords,"/",A.totalWords]}),o.jsx("div",{className:"text-sm text-gray-600",children:"Öyrənilən/Cəmi Sözlər"})]})]})]})]})]})},VA=({onSave:t,onBack:e})=>{const[n,r]=L.useState(""),[s,i]=L.useState(""),[a,c]=L.useState("private"),[u,d]=L.useState([]),[m,p]=L.useState(""),[g,N]=L.useState([]),[j,k]=L.useState(""),[P,_]=L.useState(""),[w,E]=L.useState(""),A=()=>{if(j.trim()&&P.trim()&&g.length<30){const T={id:Qs(),english:j.trim(),meaning:P.trim(),exampleSentence:w.trim()||void 0};N([...g,T]),k(""),_(""),E("")}},D=T=>{N(g.filter(C=>C.id!==T))},V=()=>{m.trim()&&!u.includes(m.trim())&&u.length<5&&(d([...u,m.trim()]),p(""))},b=T=>{d(u.filter(C=>C!==T))},[y,x]=L.useState(!1),S=async()=>{if(n.trim()&&g.length>=6&&!y){x(!0);try{const T={name:n.trim(),description:s.trim()||void 0,words:g,visibility:a,tags:u.length>0?u:void 0,createdAt:new Date};await t(T)}catch(T){console.error("Collection save error:",T),alert("Kolleksiya saxlanmadı. Yenidən cəhd edin.")}finally{x(!1)}}};return o.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200 mr-4",children:o.jsx(Yt,{className:"w-5 h-5 text-gray-600"})}),o.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Yeni Kolleksiya Yarat"})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-6",children:[o.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kolleksiya Adı"}),o.jsx("input",{type:"text",value:n,onChange:T=>r(T.target.value),placeholder:"Məsələn: Günlük sözlər",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Təsvir (isteğe bağlı)"}),o.jsx("textarea",{value:s,onChange:T=>i(T.target.value),placeholder:"Bu kolleksiyanın təsviri...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 h-20 resize-none"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Görünmə Ayarı"}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("button",{type:"button",onClick:()=>c("private"),className:`flex items-center justify-center space-x-2 p-3 rounded-lg border transition-all duration-200 ${a==="private"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-600 hover:border-gray-400"}`,children:[o.jsx(Ni,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm font-medium",children:"Şəxsi"})]}),o.jsxs("button",{type:"button",onClick:()=>c("public"),className:`flex items-center justify-center space-x-2 p-3 rounded-lg border transition-all duration-200 ${a==="public"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-600 hover:border-gray-400"}`,children:[o.jsx(Fr,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm font-medium",children:"Ümumi"})]})]}),o.jsx("p",{className:"text-xs text-gray-500 mt-2",children:a==="private"?"Yalnız sizin üçün görünəcək":"Bütün istifadəçilər görəcək"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Etiketlər (isteğe bağlı)"}),o.jsxs("div",{className:"flex space-x-2 mb-2",children:[o.jsx("input",{type:"text",value:m,onChange:T=>p(T.target.value),placeholder:"etiket",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 text-sm",onKeyPress:T=>T.key==="Enter"&&(T.preventDefault(),V())}),o.jsx("button",{type:"button",onClick:V,disabled:!m.trim()||u.includes(m.trim())||u.length>=5,className:"px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 text-sm",children:o.jsx(xA,{className:"w-4 h-4"})})]}),u.length>0&&o.jsx("div",{className:"flex flex-wrap gap-2",children:u.map((T,C)=>o.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:["#",T,o.jsx("button",{type:"button",onClick:()=>b(T),className:"ml-1 text-blue-600 hover:text-blue-800",children:o.jsx(Ar,{className:"w-3 h-3 rotate-45"})})]},C))}),o.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[u.length,"/5 etiket"]})]})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"İngilis dili sözü"}),o.jsx("input",{type:"text",value:j,onChange:T=>k(T.target.value),placeholder:"Hello",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Azərbaycan dilində mənası"}),o.jsx("input",{type:"text",value:P,onChange:T=>_(T.target.value),placeholder:"Salam",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nümunə cümlə (isteğe bağlı)"}),o.jsx("input",{type:"text",value:w,onChange:T=>E(T.target.value),placeholder:"Hello, how are you?",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"})]}),o.jsxs("button",{onClick:A,disabled:!j.trim()||!P.trim()||g.length>=30,className:"w-full md:w-auto flex items-center justify-center space-x-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-lg",children:[o.jsx(Ar,{className:"w-4 h-4"}),o.jsx("span",{children:"Söz əlavə et"})]})]}),g.length>0&&o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Əlavə edilmiş sözlər (",g.length,"/30)"]}),o.jsx("div",{className:"text-sm text-gray-600",children:g.length>=6?o.jsx("span",{className:"text-green-600 font-medium",children:"✓ Quiz üçün hazır"}):o.jsxs("span",{className:"text-orange-600",children:["Daha ",6-g.length," söz lazım"]})})]}),o.jsx("div",{className:"grid gap-3",children:g.map(T=>o.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors duration-200",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("span",{className:"font-medium text-gray-800",children:T.english}),o.jsx("span",{className:"text-gray-600 mx-3",children:"→"}),o.jsx("span",{className:"text-gray-700",children:T.meaning})]}),o.jsx("button",{onClick:()=>D(T.id),className:"p-1 text-gray-400 hover:text-red-500 transition-colors duration-200",children:o.jsx(Ar,{className:"w-4 h-4 transform rotate-45"})})]}),T.exampleSentence&&o.jsxs("div",{className:"text-sm text-gray-600 italic pl-2 border-l-2 border-blue-200",children:['"',T.exampleSentence,'"']})]},T.id))})]}),o.jsx("div",{className:"flex justify-center",children:o.jsx("button",{onClick:S,disabled:!n.trim()||g.length<6||y,className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white px-8 py-4 rounded-xl font-semibold text-lg hover:from-green-600 hover:to-emerald-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:y?"Saxlanılır...":"Kolleksiyanı Saxla"})})]})},MA=({onBack:t,onNavigateToAllCollections:e,onPlayQuiz:n,onSaveCollection:r})=>{const{currentUser:s}=Xt(),[i,a]=L.useState([]),[c,u]=L.useState([]),[d,m]=L.useState([]),[p,g]=L.useState(new Set),[N,j]=L.useState(!0),[k,P]=L.useState(!1),[_,w]=L.useState(null),[E,A]=L.useState({name:"",visibility:"public"});L.useEffect(()=>{D()},[s]);const D=async()=>{if(s){j(!0);try{const[T,C,I,ee]=await Promise.all([p1(s.id),g1(s.id),_1(s.id),If(s.id)]);console.log("📊 Loaded collections:",{own:T.length,saved:C.length,learned:I.length,learnedRecords:ee.length}),a(T),u(C),m(I);const H=new Set(ee.map(F=>F.collectionId));g(H),console.log("🎯 Learned collection IDs:",Array.from(H)),console.log("📚 Learned collections with data:",I.map(F=>({id:F.id,name:F.name})))}catch(T){console.error("Error loading collections:",T)}finally{j(!1)}}},V=async T=>{await r(T),P(!1),await D()},b=async T=>{if(window.confirm("Bu kolleksiyanı silmək istədiyinizə əminsiniz?"))try{await v1(T),a(C=>C.filter(I=>I.id!==T))}catch(C){console.error("Error deleting collection:",C),alert("Kolleksiya silinə bilmədi. Yenidən cəhd edin.")}},y=T=>{w(T),A({name:T.name,visibility:T.visibility||"public"})},x=async()=>{if(!(!_||!E.name.trim()))try{await w1(_.id,{name:E.name.trim(),visibility:E.visibility}),a(T=>T.map(C=>C.id===_.id?{...C,name:E.name.trim(),visibility:E.visibility}:C)),w(null),A({name:"",visibility:"public"})}catch(T){console.error("Error updating collection:",T),alert("Kolleksiya yenilənə bilmədi. Yenidən cəhd edin.")}},S=()=>{w(null),A({name:"",visibility:"public"})};return k?o.jsx(VA,{onSave:V,onBack:()=>P(!1)}):o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[o.jsx("div",{className:"bg-white shadow-sm border-b",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-4",children:[o.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[o.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:o.jsx(Yt,{className:"w-5 h-5 text-gray-600"})}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg",children:o.jsx(Ue,{className:"w-6 h-6 text-white"})}),o.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Kolleksiyalarım"})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[o.jsxs("button",{onClick:e,className:"flex items-center justify-center space-x-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white px-4 sm:px-6 py-3 rounded-lg font-semibold hover:from-green-600 hover:to-emerald-700 transition-all shadow-lg hover:shadow-xl text-sm sm:text-base",children:[o.jsx(Ue,{className:"w-4 h-4"}),o.jsx("span",{children:"Bütün Kolleksiyalar"})]}),o.jsxs("button",{onClick:()=>P(!0),className:"flex items-center justify-center space-x-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white px-4 sm:px-6 py-3 rounded-lg font-semibold hover:from-blue-600 hover:to-purple-700 transition-all shadow-lg hover:shadow-xl text-sm sm:text-base",children:[o.jsx(Ar,{className:"w-4 h-4"}),o.jsx("span",{children:"Yeni Kolleksiya"})]})]})]})}),o.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8",children:N?o.jsxs("div",{className:"flex justify-center items-center py-20",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),o.jsx("span",{className:"ml-4 text-gray-600",children:"Kolleksiyalar yüklənir..."})]}):i.length===0&&c.length===0&&d.length===0?o.jsxs("div",{className:"text-center py-20",children:[o.jsx("div",{className:"w-24 h-24 mx-auto bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mb-6",children:o.jsx(Ue,{className:"w-12 h-12 text-gray-400"})}),o.jsx("h3",{className:"text-2xl font-semibold text-gray-600 mb-4",children:"Hələ kolleksiya yoxdur"}),o.jsx("p",{className:"text-gray-500 mb-8 max-w-md mx-auto",children:"İlk kolleksiyanızı yaradın və söz öyrənməyə başlayın. Hər kolleksiya minimum 6 söz içərməlidir."}),o.jsxs("button",{onClick:()=>P(!0),className:"flex items-center space-x-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white px-8 py-4 rounded-xl font-semibold text-lg hover:from-blue-600 hover:to-purple-700 transition-all shadow-lg hover:shadow-xl mx-auto",children:[o.jsx(Ar,{className:"w-5 h-5"}),o.jsx("span",{children:"İlk Kolleksiyanı Yarat"})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid md:grid-cols-4 gap-6 mb-8",children:[o.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:o.jsx(Ue,{className:"w-6 h-6 text-blue-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"text-2xl font-bold text-gray-800",children:i.length+c.length+d.length}),o.jsx("div",{className:"text-gray-600",children:"Cəmi Kolleksiya"})]})]})}),o.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:o.jsx(Lt,{className:"w-6 h-6 text-green-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"text-2xl font-bold text-gray-800",children:[...i,...c].filter(T=>p.has(T.id)).reduce((T,C)=>{var I;return T+(((I=C.words)==null?void 0:I.length)||0)},0)}),o.jsx("div",{className:"text-gray-600",children:"Öyrənilən Söz"})]})]})}),o.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:o.jsx(_y,{className:"w-6 h-6 text-orange-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"text-2xl font-bold text-gray-800",children:[...i,...c].reduce((T,C)=>{var I;return T+(((I=C.words)==null?void 0:I.length)||0)},0)}),o.jsx("div",{className:"text-gray-600",children:"Cəmi Söz"})]})]})}),o.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:o.jsx(vn,{className:"w-6 h-6 text-purple-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"text-2xl font-bold text-gray-800",children:[...i,...c].filter(T=>{var C;return(((C=T.words)==null?void 0:C.length)||0)>=6&&!p.has(T.id)}).length}),o.jsx("div",{className:"text-gray-600",children:"Quiz Hazır"})]})]})})]}),(()=>{const T=(i||[]).filter(F=>!p.has(F.id));(i||[]).filter(F=>p.has(F.id));const C=(c||[]).filter(F=>!(i||[]).some(xe=>xe.id===F.id)),I=C.filter(F=>!p.has(F.id));C.filter(F=>p.has(F.id));const ee=d||[],H=[...T||[],...I||[]];return o.jsxs(o.Fragment,{children:[H.length>0&&o.jsxs("div",{className:"mb-12",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:o.jsx(bi,{className:"w-6 h-6 text-blue-600"})}),o.jsxs("h2",{className:"text-2xl font-bold text-gray-800 ml-4",children:["Öyrəniləsi Olanlar (",H.length,")"]})]}),o.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:H.map(F=>{var xe,B,Y,X,ie,$,G,te;return o.jsx("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden border-l-4 border-blue-500",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-800 line-clamp-2",children:F.name}),F.userId===(s==null?void 0:s.id)&&o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>y(F),className:"p-1 text-gray-400 hover:text-blue-500 transition-colors",children:o.jsx(_y,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>b(F.id),className:"p-1 text-gray-400 hover:text-red-500 transition-colors",children:o.jsx(Ey,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{className:"space-y-2 mb-4",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Müəllif"}),o.jsx("span",{className:"font-semibold text-gray-800",children:F.userId===(s==null?void 0:s.id)?"Mən":`@${F.username}`})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Sözlər"}),o.jsx("span",{className:"font-semibold text-gray-800",children:((xe=F.words)==null?void 0:xe.length)||0})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Yaradılma"}),o.jsx("span",{className:"text-gray-800",children:F.createdAt.toLocaleDateString("az-AZ")})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Status"}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${(((B=F.words)==null?void 0:B.length)||0)>=6?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:(((Y=F.words)==null?void 0:Y.length)||0)>=6?"Quiz hazır":`${6-(((X=F.words)==null?void 0:X.length)||0)} söz lazım`})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Görünürlük"}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${(F.visibility||"public")==="public"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:(F.visibility||"public")==="public"?"Açıq":"Gizli"})]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Nümunə sözlər:"}),o.jsxs("div",{className:"space-y-1",children:[(F.words||[]).slice(0,2).map((oe,we)=>o.jsxs("div",{className:"text-sm bg-gray-50 rounded p-2",children:[o.jsx("span",{className:"font-medium",children:oe.english}),o.jsx("span",{className:"text-gray-600 mx-2",children:"→"}),o.jsx("span",{className:"text-gray-700",children:oe.meaning})]},we)),(((ie=F.words)==null?void 0:ie.length)||0)>2&&o.jsxs("div",{className:"text-sm text-gray-500 text-center py-1",children:["...və ",((($=F.words)==null?void 0:$.length)||0)-2," söz daha"]})]})]}),o.jsxs("button",{onClick:()=>n(F),disabled:(((G=F.words)==null?void 0:G.length)||0)<6,className:"w-full flex items-center justify-center space-x-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white py-3 rounded-lg font-semibold hover:from-blue-600 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx(vn,{className:"w-4 h-4"}),o.jsx("span",{children:(((te=F.words)==null?void 0:te.length)||0)>=6?"Quiz Oyna":"Quiz üçün hazır deyil"})]})]})},F.id)})})]}),C.length>0&&o.jsxs("div",{className:"mb-12",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:o.jsx(L1,{className:"w-6 h-6 text-yellow-600"})}),o.jsxs("h2",{className:"text-2xl font-bold text-gray-800 ml-4",children:["Saxlanılan Kolleksiyalar (",C.length,")"]})]}),o.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:C.map(F=>{var xe,B,Y,X;return o.jsx("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden border-l-4 border-yellow-500",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-800 line-clamp-2",children:F.name}),o.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full font-medium",children:"Saxlanılan"})]}),o.jsxs("div",{className:"space-y-2 mb-4",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Müəllif"}),o.jsxs("span",{className:"font-semibold text-gray-800",children:["@",F.username]})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Sözlər"}),o.jsx("span",{className:"font-semibold text-gray-800",children:((xe=F.words)==null?void 0:xe.length)||0})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Status"}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${p.has(F.id)?"bg-green-100 text-green-800":(((B=F.words)==null?void 0:B.length)||0)>=6?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:p.has(F.id)?"Öyrənildi":(((Y=F.words)==null?void 0:Y.length)||0)>=6?"Quiz hazır":"Quiz yoxdur"})]})]}),(((X=F.words)==null?void 0:X.length)||0)>=6&&o.jsxs("button",{onClick:()=>n(F),disabled:p.has(F.id),className:`w-full flex items-center justify-center space-x-2 py-3 rounded-lg font-semibold transition-all ${p.has(F.id)?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700"}`,children:[o.jsx(vn,{className:"w-4 h-4"}),o.jsx("span",{children:p.has(F.id)?"Öyrənildi":"Quiz Oyna"})]})]})},`saved-${F.id}`)})})]}),ee.length>0&&o.jsxs("div",{className:"mb-12",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:o.jsx(Lt,{className:"w-6 h-6 text-green-600"})}),o.jsxs("h2",{className:"text-2xl font-bold text-gray-800 ml-4",children:["Öyrənilən Kolleksiyalar (",ee.length,")"]})]}),o.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:ee.map(F=>{var xe,B,Y;return o.jsx("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden border-l-4 border-green-500 opacity-90",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-800 line-clamp-2",children:F.name}),o.jsx(Lt,{className:"w-5 h-5 text-green-600 ml-2 flex-shrink-0"})]}),F.userId===(s==null?void 0:s.id)&&o.jsx("button",{onClick:()=>b(F.id),className:"p-1 text-gray-400 hover:text-red-500 transition-colors",children:o.jsx(Ey,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"space-y-2 mb-4",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Müəllif"}),o.jsx("span",{className:"font-semibold text-gray-800",children:F.userId===(s==null?void 0:s.id)?"Mən":`@${F.username}`})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Sözlər"}),o.jsx("span",{className:"font-semibold text-gray-800",children:((xe=F.words)==null?void 0:xe.length)||0})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Yaradılma"}),o.jsx("span",{className:"text-gray-800",children:F.createdAt.toLocaleDateString("az-AZ")})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Status"}),o.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"✨ Öyrənildi"})]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Nümunə sözlər:"}),o.jsxs("div",{className:"space-y-1",children:[(F.words||[]).slice(0,2).map((X,ie)=>o.jsxs("div",{className:"text-sm bg-green-50 rounded p-2",children:[o.jsx("span",{className:"font-medium",children:X.english}),o.jsx("span",{className:"text-gray-600 mx-2",children:"→"}),o.jsx("span",{className:"text-gray-700",children:X.meaning})]},ie)),(((B=F.words)==null?void 0:B.length)||0)>2&&o.jsxs("div",{className:"text-sm text-gray-500 text-center py-1",children:["...və ",(((Y=F.words)==null?void 0:Y.length)||0)-2," söz daha"]})]})]}),o.jsxs("button",{onClick:()=>n(F),className:"w-full flex items-center justify-center space-x-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white py-3 rounded-lg font-semibold hover:from-green-600 hover:to-emerald-700 transition-all",children:[o.jsx(vn,{className:"w-4 h-4"}),o.jsx("span",{children:"Yenidən Oyna"})]})]})},F.id)})})]})]})})()]})}),_&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsx("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md",children:o.jsxs("div",{className:"p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:"Kolleksiyanı Redaktə Et"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kolleksiya Adı"}),o.jsx("input",{type:"text",value:E.name,onChange:T=>A(C=>({...C,name:T.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Kolleksiya adını daxil edin"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Görünürlük"}),o.jsxs("div",{className:"flex space-x-4",children:[o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"radio",name:"visibility",value:"public",checked:E.visibility==="public",onChange:T=>A(C=>({...C,visibility:T.target.value})),className:"mr-2"}),o.jsx("span",{className:"text-sm",children:"Açıq (hər kəs görə bilər)"})]}),o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"radio",name:"visibility",value:"private",checked:E.visibility==="private",onChange:T=>A(C=>({...C,visibility:T.target.value})),className:"mr-2"}),o.jsx("span",{className:"text-sm",children:"Gizli (yalnız mən)"})]})]})]})]}),o.jsxs("div",{className:"flex space-x-3 mt-6",children:[o.jsx("button",{onClick:S,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors",children:"Ləğv Et"}),o.jsx("button",{onClick:x,disabled:!E.name.trim(),className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Yadda Saxla"})]})]})})})]})},LA=({onBack:t,onPlayQuiz:e})=>{const{currentUser:n}=Xt(),[r,s]=L.useState([]),[i,a]=L.useState([]),[c,u]=L.useState(!0),[d,m]=L.useState(""),[p,g]=L.useState("rating"),[N,j]=L.useState(new Set);L.useEffect(()=>{k()},[]),L.useEffect(()=>{P()},[r,d,p]);const k=async()=>{try{u(!0);const E=await y1();if(s(E),n){const A=await Promise.all(E.map(async V=>{const b=await N1(n.id,V.id);return{id:V.id,isSaved:b}})),D=new Set(A.filter(V=>V.isSaved).map(V=>V.id));j(D)}}catch(E){console.error("Error loading public collections:",E)}finally{u(!1)}},P=()=>{let E=r;d&&(E=E.filter(A=>{var D;return A.name.toLowerCase().includes(d.toLowerCase())||A.username.toLowerCase().includes(d.toLowerCase())||((D=A.tags)==null?void 0:D.some(V=>V.toLowerCase().includes(d.toLowerCase())))})),E.sort((A,D)=>{switch(p){case"rating":return D.rating!==A.rating?D.rating-A.rating:D.usageCount-A.usageCount;case"recent":return D.createdAt.getTime()-A.createdAt.getTime();case"usage":return D.usageCount!==A.usageCount?D.usageCount-A.usageCount:D.rating-A.rating;default:return 0}}),a(E)},_=async E=>{if(n)try{N.has(E)?(await b1(n.id,E),j(D=>{const V=new Set(D);return V.delete(E),V})):(await E1(n.id,E),j(D=>new Set([...D,E])))}catch(A){console.error("Error saving/removing collection:",A)}},w=async E=>{e(E)};return c?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex justify-center items-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mb-4"}),o.jsx("span",{className:"text-gray-600",children:"Public kolleksiyalar yüklənir..."})]})}):o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[o.jsx("div",{className:"bg-white shadow-sm border-b",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-4",children:[o.jsx("div",{className:"flex items-center justify-between mb-4 sm:mb-0",children:o.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[o.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:o.jsx(Yt,{className:"w-5 h-5 text-gray-600"})}),o.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[o.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg",children:o.jsx(Ue,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),o.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Bütün Kolleksiyalar"})]})]})}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-end space-y-3 sm:space-y-0 sm:space-x-4",children:[o.jsxs("div",{className:"relative flex-1 sm:flex-initial",children:[o.jsx(TA,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Kolleksiya və ya müəllif axtar...",value:d,onChange:E=>m(E.target.value),className:"w-full sm:w-64 pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),o.jsxs("select",{value:p,onChange:E=>g(E.target.value),className:"w-full sm:w-auto px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[o.jsx("option",{value:"rating",children:"Reytinqə görə"}),o.jsx("option",{value:"recent",children:"Yenilərə görə"}),o.jsx("option",{value:"usage",children:"İstifadəyə görə"})]})]})]})}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-6 sm:py-8",children:[o.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[o.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:o.jsx(Ue,{className:"w-6 h-6 text-blue-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"text-2xl font-bold text-gray-800",children:i.length}),o.jsx("div",{className:"text-gray-600",children:"Mövcud Kolleksiya"})]})]})}),o.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:o.jsx(an,{className:"w-6 h-6 text-green-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"text-2xl font-bold text-gray-800",children:new Set(i.map(E=>E.userId)).size}),o.jsx("div",{className:"text-gray-600",children:"Aktiv Müəllif"})]})]})}),o.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:o.jsx(_c,{className:"w-6 h-6 text-purple-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"text-2xl font-bold text-gray-800",children:i.reduce((E,A)=>E+A.usageCount,0)}),o.jsx("div",{className:"text-gray-600",children:"Ümumi İstifadə"})]})]})})]}),i.length===0?o.jsxs("div",{className:"text-center py-20",children:[o.jsx("div",{className:"w-24 h-24 mx-auto bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mb-6",children:o.jsx(Ue,{className:"w-12 h-12 text-gray-400"})}),o.jsx("h3",{className:"text-2xl font-semibold text-gray-600 mb-4",children:d?"Heç bir kolleksiya tapılmadı":"Hələ public kolleksiya yoxdur"}),o.jsx("p",{className:"text-gray-500 max-w-md mx-auto",children:d?"Axtarış kriteriyalarınızı dəyişdirərək yenidən cəhd edin.":"İlk public kolleksiya yaradın və başqaları ilə paylaşın."})]}):o.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(E=>o.jsx("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-800 line-clamp-2 flex-1",children:E.name}),o.jsx("button",{onClick:()=>_(E.id),className:`p-2 rounded-lg transition-colors ${N.has(E.id)?"bg-yellow-100 text-yellow-600 hover:bg-yellow-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,title:N.has(E.id)?"Saxlanılıbdan çıxar":"Saxla",children:N.has(E.id)?o.jsx(fA,{className:"w-4 h-4"}):o.jsx(L1,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"space-y-2 mb-4",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Müəllif"}),o.jsxs("span",{className:"font-semibold text-gray-800",children:["@",E.username]})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Sözlər"}),o.jsx("span",{className:"font-semibold text-gray-800",children:E.words.length})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Reytinq"}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(zr,{className:"w-4 h-4 text-yellow-500 mr-1"}),o.jsx("span",{className:"font-semibold text-gray-800",children:E.rating.toFixed(1)})]})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"İstifadə"}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(an,{className:"w-4 h-4 text-blue-500 mr-1"}),o.jsx("span",{className:"font-semibold text-gray-800",children:E.usageCount})]})]})]}),E.description&&o.jsx("div",{className:"mb-4",children:o.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:E.description})}),o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Nümunə sözlər:"}),o.jsxs("div",{className:"space-y-1",children:[E.words.slice(0,2).map((A,D)=>o.jsxs("div",{className:"text-sm bg-blue-50 rounded p-2",children:[o.jsx("span",{className:"font-medium",children:A.english}),o.jsx("span",{className:"text-gray-600 mx-2",children:"→"}),o.jsx("span",{className:"text-gray-700",children:A.meaning})]},D)),E.words.length>2&&o.jsxs("div",{className:"text-sm text-gray-500 text-center py-1",children:["...və ",E.words.length-2," söz daha"]})]})]}),E.tags&&E.tags.length>0&&o.jsx("div",{className:"mb-4",children:o.jsx("div",{className:"flex flex-wrap gap-2",children:E.tags.map((A,D)=>o.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:["#",A]},D))})}),o.jsxs("button",{onClick:()=>w(E),disabled:E.words.length<6,className:"w-full flex items-center justify-center space-x-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white py-3 rounded-lg font-semibold hover:from-blue-600 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx(vn,{className:"w-4 h-4"}),o.jsx("span",{children:E.words.length>=6?"Quiz Oyna":"Quiz üçün hazır deyil"})]})]})},E.id))})]})]})},OA=({onBack:t,onTakeExam:e})=>{const{currentUser:n}=Xt(),[r,s]=L.useState([]),[i,a]=L.useState({}),[c,u]=L.useState({}),[d,m]=L.useState(!0),[p,g]=L.useState("newest");L.useEffect(()=>{N()},[]);const N=async()=>{try{m(!0);const P=await kf(50);if(s(P),n&&P.length>0){const _=P.map(async b=>{const y=await R1(n.id,b.id);return{examId:b.id,hasParticipated:y}}),w=P.map(async b=>{const y=await jf(n.id,b.id);return{examId:b.id,bestResult:y}}),[E,A]=await Promise.all([Promise.all(_),Promise.all(w)]),D=E.reduce((b,{examId:y,hasParticipated:x})=>(b[y]=x,b),{}),V=A.reduce((b,{examId:y,bestResult:x})=>(x&&(b[y]=x),b),{});a(D),u(V)}}catch(P){console.error("Error loading exams:",P)}finally{m(!1)}},j=r.sort((P,_)=>{switch(p){case"newest":return new Date(_.createdAt).getTime()-new Date(P.createdAt).getTime();case"popular":return _.totalAttempts-P.totalAttempts;case"rating":return _.rating-P.rating;default:return 0}}),k=P=>P>=90?"text-green-600":P>=80?"text-blue-600":P>=70?"text-yellow-600":P>=60?"text-orange-600":"text-red-600";return d?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50 flex justify-center items-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mb-4"}),o.jsx("span",{className:"text-gray-600",children:"İmtahanlar yüklənir..."})]})}):o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50",children:[o.jsx("div",{className:"bg-white shadow-sm border-b",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-4",children:[o.jsx("div",{className:"flex items-center justify-between mb-4 sm:mb-0",children:o.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4 flex-1 min-w-0",children:[o.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors flex-shrink-0",children:o.jsx(Yt,{className:"w-5 h-5 text-gray-600"})}),o.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 min-w-0",children:[o.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-lg flex-shrink-0",children:o.jsx(xn,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),o.jsx("h1",{className:"text-lg sm:text-2xl font-bold text-gray-800 truncate",children:"Bütün İmtahanlar"})]})]})}),o.jsx("div",{className:"flex justify-center sm:justify-end",children:o.jsxs("div",{className:"flex items-center space-x-2 bg-blue-50 px-3 py-2 rounded-lg",children:[o.jsx(wn,{className:"w-4 h-4 text-blue-600"}),o.jsxs("span",{className:"text-sm text-blue-800",children:[o.jsx("strong",{children:r.length})," İmtahan"]})]})})]})}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-6 sm:py-8",children:[o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6 mb-6 sm:mb-8",children:[o.jsxs("div",{className:"sm:hidden",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 text-center",children:"Sıralama"}),o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsx("button",{onClick:()=>g("newest"),className:`px-4 py-3 rounded-lg transition-colors font-medium ${p==="newest"?"bg-purple-500 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"📅 Ən Yeni İmtahanlar"}),o.jsx("button",{onClick:()=>g("popular"),className:`px-4 py-3 rounded-lg transition-colors font-medium ${p==="popular"?"bg-purple-500 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"🔥 Ən Populyar İmtahanlar"}),o.jsx("button",{onClick:()=>g("rating"),className:`px-4 py-3 rounded-lg transition-colors font-medium ${p==="rating"?"bg-purple-500 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"⭐ Ən Yüksək Reytinqli"})]})]}),o.jsxs("div",{className:"hidden sm:flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Sıralama"}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>g("newest"),className:`px-4 py-2 rounded-lg transition-colors ${p==="newest"?"bg-purple-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Ən Yeni"}),o.jsx("button",{onClick:()=>g("popular"),className:`px-4 py-2 rounded-lg transition-colors ${p==="popular"?"bg-purple-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Ən Populyar"}),o.jsx("button",{onClick:()=>g("rating"),className:`px-4 py-2 rounded-lg transition-colors ${p==="rating"?"bg-purple-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Ən Yüksək Reytinq"})]})]})]}),j.length===0?o.jsxs("div",{className:"text-center py-16",children:[o.jsx("div",{className:"w-16 h-16 mx-auto bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mb-4",children:o.jsx(xn,{className:"w-8 h-8 text-gray-400"})}),o.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Hələ public imtahan yoxdur"}),o.jsx("p",{className:"text-gray-500",children:"İlk public imtahanınızı yaradın və community ilə paylaşın!"})]}):o.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(P=>o.jsxs("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 p-6 border border-gray-200",children:[o.jsx("div",{className:"flex items-start justify-between mb-4",children:o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2 line-clamp-2",children:P.name}),o.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["@",P.username]}),P.description&&o.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-3",children:P.description})]})}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[o.jsxs("div",{className:"text-center bg-gray-50 rounded-lg p-3",children:[o.jsxs("div",{className:"flex items-center justify-center mb-1",children:[o.jsx(Ue,{className:"w-4 h-4 text-blue-500 mr-1"}),o.jsx("span",{className:"text-sm text-gray-600",children:"Sözlər"})]}),o.jsx("div",{className:"text-lg font-bold text-gray-800",children:P.settings.wordCount})]}),o.jsxs("div",{className:"text-center bg-gray-50 rounded-lg p-3",children:[o.jsxs("div",{className:"flex items-center justify-center mb-1",children:[o.jsx(bi,{className:"w-4 h-4 text-green-500 mr-1"}),o.jsx("span",{className:"text-sm text-gray-600",children:"Vaxt"})]}),o.jsxs("div",{className:"text-lg font-bold text-gray-800",children:[P.settings.timeLimit,"m"]})]})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(an,{className:"w-3 h-3 mr-1"}),o.jsx("span",{children:P.totalAttempts})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(zr,{className:"w-3 h-3 mr-1 text-yellow-500"}),o.jsx("span",{children:P.rating.toFixed(1)})]})]}),o.jsx("div",{className:"text-xs",children:new Date(P.createdAt).toLocaleDateString("az-AZ")})]}),n&&i[P.id]&&c[P.id]&&o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Lt,{className:"w-4 h-4 text-blue-600 mr-2"}),o.jsx("span",{className:"text-sm font-medium text-blue-800",children:"İştirak etmisiniz"})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:`text-sm font-bold ${k(c[P.id].scorePercentage)}`,children:[c[P.id].scorePercentage.toFixed(1),"%"]}),o.jsxs("div",{className:"text-xs text-gray-600",children:[c[P.id].score,"/",c[P.id].totalQuestions]})]})]})}),o.jsxs("button",{onClick:()=>e(P),className:`w-full flex items-center justify-center space-x-2 py-3 px-4 rounded-lg font-medium transition-all ${n&&i[P.id]?"bg-gradient-to-r from-yellow-500 to-orange-600 hover:from-yellow-600 hover:to-orange-700":"bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700"} text-white`,children:[o.jsx(vn,{className:"w-4 h-4"}),o.jsx("span",{children:n&&i[P.id]?"Yenidən Cəhd Et":"İmtahan Ver"})]})]},P.id))})]})]})},UA=({onBack:t,onTakeExam:e,onNavigateToAllExams:n,onNavigateToCreateExam:r})=>{const{currentUser:s}=Xt(),[i,a]=L.useState([]),[c,u]=L.useState([]),[d,m]=L.useState({}),[p,g]=L.useState(!0);L.useEffect(()=>{N()},[s]);const N=async()=>{if(!s){console.log("❌ No current user in MyExams loadExams");return}console.log("🔥 MyExams loadExams called for user:",s.id,s.username),g(!0);try{console.log("📞 Calling loadUserPublicExams...");const k=await C1(s.id);console.log("✅ loadUserPublicExams result:",k.length,"exams"),a(k),console.log("📞 Calling loadUserParticipatedExams...");const P=await P1(s.id);if(console.log("✅ loadUserParticipatedExams result:",P.length,"exams"),u(P),P.length>0){const _=P.map(async A=>{const D=await jf(s.id,A.id);return{examId:A.id,bestResult:D}}),E=(await Promise.all(_)).reduce((A,{examId:D,bestResult:V})=>(V&&(A[D]=V),A),{});m(E),console.log("✅ Best results loaded for",Object.keys(E).length,"participated exams")}}catch(k){console.error("❌ Error loading exams:",k)}finally{g(!1),console.log("🏁 MyExams loadExams completed")}},j=k=>k>=90?"text-green-600":k>=80?"text-blue-600":k>=70?"text-yellow-600":k>=60?"text-orange-600":"text-red-600";return p?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50 flex justify-center items-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"İmtahanlar yüklənir..."})]})}):o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50",children:[o.jsx("div",{className:"bg-white shadow-lg",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-4",children:[o.jsx("div",{className:"flex items-center justify-between mb-4 sm:mb-0",children:o.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4 flex-1 min-w-0",children:[o.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors flex-shrink-0",children:o.jsx(Yt,{className:"w-5 h-5 text-gray-600"})}),o.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 min-w-0",children:[o.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-lg flex-shrink-0",children:o.jsx(Ue,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),o.jsx("h1",{className:"text-lg sm:text-2xl font-bold text-gray-800 truncate",children:"Mənim İmtahanlarım"})]})]})}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-end space-y-3 sm:space-y-0 sm:space-x-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:hidden",children:[o.jsxs("button",{onClick:r,className:"flex items-center justify-center space-x-2 bg-gradient-to-r from-purple-500 to-indigo-600 text-white px-4 py-3 rounded-lg hover:from-purple-600 hover:to-indigo-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:[o.jsx(Ar,{className:"w-4 h-4"}),o.jsx("span",{className:"font-medium",children:"Yarat"})]}),o.jsxs("button",{onClick:n,className:"flex items-center justify-center space-x-2 bg-gradient-to-r from-blue-500 to-cyan-600 text-white px-4 py-3 rounded-lg hover:from-blue-600 hover:to-cyan-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:[o.jsx(Fr,{className:"w-4 h-4"}),o.jsx("span",{className:"font-medium",children:"Hamısı"})]})]}),o.jsxs("div",{className:"hidden sm:flex sm:items-center sm:space-x-4",children:[o.jsxs("button",{onClick:r,className:"flex items-center space-x-2 bg-gradient-to-r from-purple-500 to-indigo-600 text-white px-4 py-2 rounded-lg hover:from-purple-600 hover:to-indigo-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:[o.jsx(Ar,{className:"w-4 h-4"}),o.jsx("span",{children:"Yeni İmtahan"})]}),o.jsxs("button",{onClick:n,className:"flex items-center space-x-2 bg-gradient-to-r from-blue-500 to-cyan-600 text-white px-4 py-2 rounded-lg hover:from-blue-600 hover:to-cyan-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:[o.jsx(Fr,{className:"w-4 h-4"}),o.jsx("span",{children:"Bütün İmtahanlar"})]})]})]})]})}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-6 sm:py-8",children:[o.jsxs("div",{className:"mb-12",children:[o.jsx("div",{className:"flex items-center justify-between mb-6",children:o.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center space-x-3",children:[o.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:o.jsx(kA,{className:"w-5 h-5 text-purple-600"})}),o.jsx("span",{children:"Yaratdığım İmtahanlar"}),o.jsx("span",{className:"bg-purple-100 text-purple-600 px-2 py-1 rounded-full text-sm font-medium",children:i.length})]})}),i.length===0?o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[o.jsx("div",{className:"w-16 h-16 mx-auto bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mb-4",children:o.jsx(Ue,{className:"w-8 h-8 text-gray-400"})}),o.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Hələ imtahan yaratmamısınız"}),o.jsx("p",{className:"text-gray-500 mb-6",children:"İlk imtahanınızı yaradın və digər istifadəçilərlə paylaşın!"}),o.jsxs("button",{onClick:r,className:"flex items-center space-x-2 bg-gradient-to-r from-purple-500 to-indigo-600 text-white px-6 py-3 rounded-lg hover:from-purple-600 hover:to-indigo-700 transition-all duration-200 shadow-lg hover:shadow-xl mx-auto",children:[o.jsx(Ar,{className:"w-4 h-4"}),o.jsx("span",{children:"İmtahan Yarat"})]})]}):o.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(k=>o.jsxs("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 p-6 border border-gray-200",children:[o.jsx("div",{className:"flex items-start justify-between mb-4",children:o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2 line-clamp-2",children:k.name}),k.description&&o.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-3",children:k.description})]})}),o.jsxs("div",{className:"space-y-3 mb-4",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Söz sayı"}),o.jsx("span",{className:"font-semibold text-gray-800",children:k.settings.wordCount})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Vaxt limiti"}),o.jsxs("span",{className:"font-semibold text-gray-800",children:[k.settings.timeLimit,"m"]})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Söz sayı"}),o.jsx("span",{className:"font-semibold text-gray-800",children:k.settings.wordCount})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Ortalama bal"}),o.jsxs("span",{className:`font-semibold ${j(k.averageScore)}`,children:[k.averageScore.toFixed(1),"%"]})]})]}),o.jsx("div",{className:"flex space-x-2",children:o.jsxs("button",{onClick:()=>e(k),className:"flex-1 flex items-center justify-center space-x-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white py-2 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-200 text-sm font-medium",children:[o.jsx(vn,{className:"w-4 h-4"}),o.jsx("span",{children:"Test Et"})]})})]},k.id))})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center space-x-3",children:[o.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:o.jsx(an,{className:"w-5 h-5 text-blue-600"})}),o.jsx("span",{children:"Digər İmtahanlar"})]}),o.jsx("button",{onClick:n,className:"text-blue-600 hover:text-blue-700 font-medium text-sm transition-colors",children:"Hamısına bax →"})]}),c.length===0?o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[o.jsx("div",{className:"w-16 h-16 mx-auto bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mb-4",children:o.jsx(an,{className:"w-8 h-8 text-gray-400"})}),o.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Hələ imtahanda iştirak etməmisiniz"}),o.jsx("p",{className:"text-gray-500",children:"Digər istifadəçilərin yaratdığı imtahanlarda iştirak etdikləriniz burada görünəcək."})]}):o.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.slice(0,6).map(k=>o.jsxs("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 p-6 border border-gray-200",children:[o.jsx("div",{className:"flex items-start justify-between mb-4",children:o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2 line-clamp-2",children:k.name}),o.jsxs("p",{className:"text-sm text-gray-600  mb-2",children:["@",k.username]}),k.description&&o.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-3",children:k.description})]})}),o.jsxs("div",{className:"space-y-3 mb-4",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Söz sayı"}),o.jsx("span",{className:"font-semibold text-gray-800",children:k.settings.wordCount})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Vaxt limiti"}),o.jsxs("span",{className:"font-semibold text-gray-800",children:[k.settings.timeLimit,"m"]})]}),d[k.id]&&o.jsxs(o.Fragment,{children:[o.jsx("hr",{className:"my-2 border-gray-200"}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Ən yaxşı nəticə"}),o.jsxs("span",{className:`font-bold ${j(d[k.id].scorePercentage)}`,children:[d[k.id].scorePercentage.toFixed(1),"%"]})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Cavablar"}),o.jsxs("span",{className:"font-semibold text-gray-800",children:[d[k.id].score,"/",d[k.id].totalQuestions]})]})]})]}),o.jsxs("button",{onClick:()=>e(k),className:"w-full flex items-center justify-center space-x-2 bg-gradient-to-r from-yellow-500 to-orange-600 text-white py-3 rounded-lg hover:from-yellow-600 hover:to-orange-700 transition-all duration-200 font-medium",children:[o.jsx(vn,{className:"w-4 h-4"}),o.jsx("span",{children:"Yenidən Cəhd Et"})]})]},k.id))})]})]})]})},FA=({onBack:t})=>{const{currentUser:e}=Xt(),[n,r]=L.useState("creators"),[s,i]=L.useState([]),[a,c]=L.useState([]),[u,d]=L.useState([]),[m,p]=L.useState(!0);L.useEffect(()=>{g()},[]);const g=async()=>{try{p(!0),console.log("🚀 Starting to load leaderboard data...");const[_,w]=await Promise.all([T1(50),I1(50)]),E=new Map;[..._,...w].forEach(V=>{(!E.has(V.id)||V.totalExams>0)&&E.set(V.id,V)});const D=Array.from(E.values()).sort((V,b)=>{const y=V.averageExamScore*Math.sqrt(Math.max(1,V.totalExams)),x=b.averageExamScore*Math.sqrt(Math.max(1,b.totalExams));return y!==x?x-y:V.totalExams!==b.totalExams?b.totalExams-V.totalExams:b.averageExamScore-V.averageExamScore}).filter(V=>V.totalExams>0);console.log("🏆 Creators loaded:",_.length),console.log("🎓 Learners loaded:",w.length),console.log("🎓 Exam takers loaded:",D.length),i(_),c(w),d(D)}catch(_){console.error("❌ Error loading leaderboard:",_)}finally{p(!1)}},N=_=>{switch(_){case 1:return o.jsx(pA,{className:"w-5 h-5 sm:w-6 sm:h-6 text-yellow-500"});case 2:return o.jsx(M1,{className:"w-5 h-5 sm:w-6 sm:h-6 text-gray-400"});case 3:return o.jsx(bA,{className:"w-5 h-5 sm:w-6 sm:h-6 text-orange-600"});default:return o.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 bg-blue-100 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-xs font-bold text-blue-600",children:_})})}},j=_=>{switch(_){case 1:return"from-yellow-50 to-yellow-100 border-yellow-200";case 2:return"from-gray-50 to-gray-100 border-gray-200";case 3:return"from-orange-50 to-orange-100 border-orange-200";default:return"from-white to-gray-50 border-gray-200"}},k=n==="creators"?s:n==="learners"?a:u,P=k.findIndex(_=>_.id===(e==null?void 0:e.id))+1;return m?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50 flex justify-center items-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mb-4"}),o.jsx("span",{className:"text-gray-600",children:"Liderlik cədvəli yüklənir..."})]})}):o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50",children:[o.jsx("div",{className:"bg-white shadow-sm border-b",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-4",children:[o.jsx("div",{className:"flex items-center justify-between mb-4 sm:mb-0",children:o.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[o.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:o.jsx(Yt,{className:"w-5 h-5 text-gray-600"})}),o.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[o.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-lg",children:o.jsx(wn,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),o.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Liderlik Cədvəli"})]})]})}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-end space-y-2 sm:space-y-0 sm:space-x-4",children:[o.jsxs("div",{className:"flex items-center space-x-2 bg-blue-50 px-3 py-2 rounded-lg text-sm",children:[o.jsx(zr,{className:"w-4 h-4 text-blue-600"}),o.jsxs("span",{children:["Sizin yeriniz: ",o.jsxs("strong",{children:["#",P||"N/A"]})]})]}),o.jsxs("div",{className:"flex items-center space-x-2 bg-green-50 px-3 py-2 rounded-lg text-sm",children:[o.jsx(an,{className:"w-4 h-4 text-green-600"}),o.jsxs("span",{children:["Cəmi: ",o.jsx("strong",{children:k.length})]})]})]})]})}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-6 sm:py-8",children:[o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-2 mb-6 sm:mb-8",children:[o.jsxs("div",{className:"flex flex-col sm:hidden space-y-2",children:[o.jsxs("button",{onClick:()=>r("creators"),className:`flex items-center justify-center space-x-2 py-3 px-4 rounded-xl font-semibold transition-all ${n==="creators"?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg":"text-gray-600 hover:bg-gray-50"}`,children:[o.jsx(Ue,{className:"w-4 h-4"}),o.jsx("span",{children:"Ən Çox Yaradan"})]}),o.jsxs("button",{onClick:()=>r("learners"),className:`flex items-center justify-center space-x-2 py-3 px-4 rounded-xl font-semibold transition-all ${n==="learners"?"bg-gradient-to-r from-green-500 to-emerald-600 text-white shadow-lg":"text-gray-600 hover:bg-gray-50"}`,children:[o.jsx(wc,{className:"w-4 h-4"}),o.jsx("span",{children:"Ən Çox Öyrənən"})]}),o.jsxs("button",{onClick:()=>r("exams"),className:`flex items-center justify-center space-x-2 py-3 px-4 rounded-xl font-semibold transition-all ${n==="exams"?"bg-gradient-to-r from-orange-500 to-red-600 text-white shadow-lg":"text-gray-600 hover:bg-gray-50"}`,children:[o.jsx(xn,{className:"w-4 h-4"}),o.jsx("span",{children:"Ən Yaxşı İmtahan"})]})]}),o.jsxs("div",{className:"hidden sm:flex",children:[o.jsxs("button",{onClick:()=>r("creators"),className:`flex-1 flex items-center justify-center space-x-2 py-4 px-6 rounded-xl font-semibold transition-all ${n==="creators"?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg":"text-gray-600 hover:bg-gray-50"}`,children:[o.jsx(Ue,{className:"w-5 h-5"}),o.jsx("span",{children:"Ən Çox Yaradan"})]}),o.jsxs("button",{onClick:()=>r("learners"),className:`flex-1 flex items-center justify-center space-x-2 py-4 px-6 rounded-xl font-semibold transition-all ${n==="learners"?"bg-gradient-to-r from-green-500 to-emerald-600 text-white shadow-lg":"text-gray-600 hover:bg-gray-50"}`,children:[o.jsx(wc,{className:"w-5 h-5"}),o.jsx("span",{children:"Ən Çox Öyrənən"})]}),o.jsxs("button",{onClick:()=>r("exams"),className:`flex-1 flex items-center justify-center space-x-2 py-4 px-6 rounded-xl font-semibold transition-all ${n==="exams"?"bg-gradient-to-r from-orange-500 to-red-600 text-white shadow-lg":"text-gray-600 hover:bg-gray-50"}`,children:[o.jsx(xn,{className:"w-5 h-5"}),o.jsx("span",{children:"Ən Yaxşı İmtahan"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[o.jsx("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-2 sm:p-3 bg-purple-100 rounded-lg",children:o.jsx(an,{className:"w-5 h-5 sm:w-6 sm:h-6 text-purple-600"})}),o.jsxs("div",{className:"ml-3 sm:ml-4",children:[o.jsx("div",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:k.length}),o.jsx("div",{className:"text-sm sm:text-base text-gray-600",children:"İstifadəçi"})]})]})}),o.jsx("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-2 sm:p-3 bg-blue-100 rounded-lg",children:o.jsx(Ue,{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-600"})}),o.jsxs("div",{className:"ml-3 sm:ml-4",children:[o.jsx("div",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:n==="exams"?k.reduce((_,w)=>_+w.totalExams,0).toLocaleString():k.reduce((_,w)=>_+w.totalWords,0).toLocaleString()}),o.jsx("div",{className:"text-sm sm:text-base text-gray-600",children:n==="creators"?"Yaradılan Söz":n==="learners"?"Öyrənilən Söz":"İmtahan Sayı"})]})]})}),o.jsx("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6 sm:col-span-2 lg:col-span-1",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-2 sm:p-3 bg-green-100 rounded-lg",children:o.jsx(_c,{className:"w-5 h-5 sm:w-6 sm:h-6 text-green-600"})}),o.jsxs("div",{className:"ml-3 sm:ml-4",children:[o.jsxs("div",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:[n==="exams"?Math.round(k.reduce((_,w)=>_+w.averageExamScore,0)/Math.max(k.length,1)):k.reduce((_,w)=>_+w.totalCollections,0),n==="exams"&&"%"]}),o.jsx("div",{className:"text-sm sm:text-base text-gray-600",children:n==="exams"?"Ortalama Bal":"Cəmi Kolleksiya"})]})]})})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[o.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-600 px-4 sm:px-8 py-4 sm:py-6",children:[o.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-white flex items-center",children:[o.jsx(wn,{className:"w-5 h-5 sm:w-6 sm:h-6 mr-2 sm:mr-3"}),o.jsx("span",{className:"truncate",children:n==="creators"?"Ən Çox Kolleksiya Yaradanlar":n==="learners"?"Ən Çox Söz Öyrənənlər":"Ən Yaxşı İmtahan Nəticələri"})]}),o.jsx("p",{className:"text-purple-100 mt-2 text-sm sm:text-base",children:n==="creators"?"Ən çox söz və kolleksiya yaradıb community ilə paylaşanlar":n==="learners"?"Ən çox söz öyrənib bilik qazananlar":"Ən yüksək ortalama imtahan nəticəsi əldə edənlər"})]}),k.length===0?o.jsxs("div",{className:"text-center py-12 sm:py-16 px-4",children:[o.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mb-4",children:o.jsx(wn,{className:"w-6 h-6 sm:w-8 sm:h-8 text-gray-400"})}),o.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-600 mb-2",children:"Hələ məlumat yoxdur"}),o.jsx("p",{className:"text-sm sm:text-base text-gray-500 px-4",children:n==="creators"?"İlk public kolleksiyanı yaradın və liderlik cədvəlində yerinizi alın!":n==="learners"?"İlk quiz-lərinizi tamamlayın və liderlik cədvəlində yerinizi alın!":"İlk imtahanınızı verin və liderlik cədvəlində yerinizi alın!"})]}):o.jsx("div",{className:"divide-y divide-gray-100",children:k.map((_,w)=>{const E=_.id===(e==null?void 0:e.id),A=_.rank||w+1;return o.jsxs("div",{className:`px-4 sm:px-8 py-4 sm:py-6 transition-all duration-200 ${E?"bg-gradient-to-r from-blue-50 to-purple-50 border-l-4 border-blue-500":A<=3?`bg-gradient-to-r ${j(A)} border-l-4 border-transparent`:"hover:bg-gray-50"}`,children:[o.jsxs("div",{className:"sm:hidden",children:[o.jsx("div",{className:"flex items-center justify-between mb-3",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"flex items-center justify-center",children:N(A)}),o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-white text-sm ${E?"bg-gradient-to-r from-blue-500 to-purple-600":"bg-gradient-to-r from-gray-400 to-gray-600"}`,children:_.username.charAt(0).toUpperCase()}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("h3",{className:`font-bold ${E?"text-blue-700":"text-gray-800"}`,children:["@",_.username]}),E&&o.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full font-medium",children:"Siz"})]}),A<=3&&o.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${A===1?"bg-yellow-100 text-yellow-800":A===2?"bg-gray-100 text-gray-800":"bg-orange-100 text-orange-800"}`,children:A===1?"Birinci":A===2?"İkinci":"Üçüncü"})]})]})}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center bg-gray-50 rounded-lg p-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-lg font-bold text-gray-800",children:n==="creators"?_.totalWords:n==="learners"?_.learnedWords:`${Math.round(_.averageExamScore)}%`}),o.jsx("div",{className:"text-xs text-gray-600",children:n==="creators"?"Yaradılan":n==="learners"?"Öyrənilən":"Ortalama"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-lg font-semibold text-gray-700",children:n==="exams"?_.totalExams:_.totalCollections}),o.jsx("div",{className:"text-xs text-gray-600",children:n==="exams"?"İmtahan":"Kolleksiya"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-lg font-semibold text-gray-700",children:n==="creators"?_.totalUsage:n==="learners"?_.publicCollections:Math.round(_.averageExamScore*Math.sqrt(Math.max(1,_.totalExams)))}),o.jsx("div",{className:"text-xs text-gray-600",children:n==="creators"?"İstifadə":n==="learners"?"Public":"Çəkili"})]})]})]}),o.jsxs("div",{className:"hidden sm:flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("div",{className:"flex items-center justify-center",children:N(A)}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center font-bold text-white ${E?"bg-gradient-to-r from-blue-500 to-purple-600":"bg-gradient-to-r from-gray-400 to-gray-600"}`,children:_.username.charAt(0).toUpperCase()}),o.jsx("div",{children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("h3",{className:`text-lg font-bold ${E?"text-blue-700":"text-gray-800"}`,children:["@",_.username]}),E&&o.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full font-medium",children:"Siz"}),A<=3&&o.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${A===1?"bg-yellow-100 text-yellow-800":A===2?"bg-gray-100 text-gray-800":"bg-orange-100 text-orange-800"}`,children:A===1?"Birinci":A===2?"İkinci":"Üçüncü"})]})})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-8 text-center",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-2xl font-bold text-gray-800",children:n==="creators"?_.totalWords:n==="learners"?_.learnedWords:`${Math.round(_.averageExamScore)}%`}),o.jsx("div",{className:"text-sm text-gray-600",children:n==="creators"?"Yaradılan Söz":n==="learners"?"Öyrənilən Söz":"Ortalama Bal"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xl font-semibold text-gray-700",children:n==="exams"?_.totalExams:_.totalCollections}),o.jsx("div",{className:"text-sm text-gray-600",children:n==="exams"?"İmtahan Sayı":"Kolleksiya"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xl font-semibold text-gray-700",children:n==="creators"?_.totalUsage:n==="learners"?_.publicCollections:Math.round(_.averageExamScore*Math.sqrt(Math.max(1,_.totalExams)))}),o.jsx("div",{className:"text-sm text-gray-600",children:n==="creators"?"İstifadə":n==="learners"?"Public":"Çəkili Bal"})]})]})]})]},_.id)})})]}),o.jsxs("div",{className:"mt-6 sm:mt-8 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-2xl p-6 sm:p-8 text-center text-white",children:[o.jsx(wn,{className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-4 opacity-80"}),o.jsx("h3",{className:"text-xl sm:text-2xl font-bold mb-4",children:"Səndə liderlərdən olabilərsən!"}),o.jsx("p",{className:"text-base sm:text-lg opacity-90 max-w-2xl mx-auto",children:n==="creators"?"Yeni kolleksiyalar yaradıb community ilə paylaş. Hər söz sayılır!":n==="learners"?"Yeni sözlər öyrən və quiz-ləri 100% nəticə ilə tamamla!":"İmtahanlar ver və yüksək nəticələrlə liderlik cədvəlində yerin qorumağa çalış!"})]})]})]})},by=t=>{const e=[...t];for(let n=e.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[e[n],e[r]]=[e[r],e[n]]}return e},zA=(t,e="english-to-meaning")=>{if(t.length<4)throw new Error("Minimum 4 söz lazımdır quiz üçün");return by(t).map((r,s)=>{let i;if(e==="mixed"){const m=Math.random();m<.4?i="english-to-meaning":m<.8?i="meaning-to-english":i=Math.random()<.5?"english-to-meaning":"meaning-to-english"}else i=e;let a,c;i==="english-to-meaning"?(a=t.filter(m=>m.id!==r.id).map(m=>m.meaning).sort(()=>Math.random()-.5).slice(0,3),c=r.meaning):(a=t.filter(m=>m.id!==r.id).map(m=>m.word||m.english||"").filter(m=>m.trim()!=="").sort(()=>Math.random()-.5).slice(0,3),c=r.word||r.english||"");const u=by([c,...a]),d=u.indexOf(c);return{word:r,options:u,correctIndex:d,mode:i}})},$A=({collection:t,autoAdvance:e,quizMode:n,onBack:r,onFinish:s})=>{const[i,a]=L.useState([]),[c,u]=L.useState(0),[d,m]=L.useState(null),[,p]=L.useState(!1),[g,N]=L.useState(0),[j,k]=L.useState(!1),[P,_]=L.useState(null);L.useEffect(()=>{a(zA(t.words,n))},[t,n]);const w=i[c],E=()=>{if(c<i.length-1)u(y=>y+1),m(null),p(!1),k(!1),_(null);else{const y={correct:g,total:i.length,percentage:Math.round(g/i.length*100)};s(y)}},A=y=>{d===null&&(m(y),k(!0),y===w.correctIndex&&N(x=>x+1),e&&setTimeout(()=>{E()},1500))},D=y=>d===null?"bg-white border-2 border-gray-200 hover:border-blue-300 hover:bg-blue-50 text-gray-800":y===w.correctIndex?"bg-green-500 border-green-500 text-white":y===d?"bg-red-500 border-red-500 text-white":"bg-gray-100 border-gray-200 text-gray-500",V=y=>{if(d!==null){e||_(P===y?null:y);return}A(y)},b=y=>{const x=t.words.find(S=>w.mode==="english-to-meaning"?S.meaning===y:(S.word||S.english)===y);return x?w.mode==="english-to-meaning"?x.word||x.english:x.meaning:null};return w?o.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-8",children:[o.jsxs("button",{onClick:r,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800 transition-colors duration-200",children:[o.jsx(Yt,{className:"w-5 h-5"}),o.jsx("span",{children:"Geri"})]}),o.jsxs("div",{className:"text-sm text-gray-600",children:[c+1," / ",i.length]})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:w.mode==="english-to-meaning"?"Bu sözün mənası nədir?":"Bu mənanın ingilis dilindəki qarşılığı nədir?"}),o.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-8 py-4 rounded-xl inline-block",children:o.jsx("span",{className:"text-3xl font-bold",children:w.mode==="english-to-meaning"?w.word.word||w.word.english:w.word.meaning})})]}),o.jsx("div",{className:"grid gap-4",children:w.options.map((y,x)=>{const S=d!==null&&!e?b(y):null,T=P===x&&S;return o.jsxs("div",{className:"relative",children:[o.jsx("button",{onClick:()=>V(x),disabled:!1,className:`w-full p-4 rounded-xl text-left font-medium transition-all duration-300 transform hover:scale-102 ${D(x)} ${d!==null&&!e?"cursor-pointer":d!==null?"cursor-default":""}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{children:y}),o.jsxs("div",{className:"flex items-center space-x-2",children:[d!==null&&o.jsx("div",{children:x===w.correctIndex?o.jsx(Lt,{className:"w-5 h-5 text-white"}):x===d?o.jsx(AA,{className:"w-5 h-5 text-white"}):null}),d!==null&&!e&&S&&o.jsx("span",{className:"text-xs opacity-70",children:T?"↑":"↓"})]})]})}),T&&o.jsxs("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm text-blue-800",children:[o.jsxs("div",{className:"font-medium",children:["Tərcümə: ",S]}),(()=>{const C=t.words.find(I=>w.mode==="english-to-meaning"?I.meaning===y:(I.word||I.english)===y);return(C==null?void 0:C.exampleSentence)&&o.jsxs("div",{className:"mt-1 text-blue-600 italic",children:['Nümunə: "',C.exampleSentence,'"']})})()]})]},x)})}),!e&&j&&o.jsx("div",{className:"mt-6 flex justify-center",children:o.jsxs("button",{onClick:E,className:"flex items-center space-x-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-md hover:shadow-lg",children:[o.jsx("span",{children:c<i.length-1?"Növbəti sual":"Nəticəni gör"}),o.jsx(V1,{className:"w-4 h-4"})]})}),o.jsx("div",{className:"mt-8",children:o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full transition-all duration-500",style:{width:`${(c+1)/i.length*100}%`}})})})]})]}):o.jsx("div",{children:"Yüklənir..."})},BA=({result:t,collection:e,onPlayAgain:n,onBackHome:r,onMarkAsLearned:s})=>{const[i,a]=L.useState(!1),c=()=>t.percentage>=90?{text:"Əla nəticə!",icon:wn,color:"from-yellow-400 to-orange-500"}:t.percentage>=75?{text:"Çox yaxşı!",icon:M1,color:"from-green-400 to-emerald-500"}:t.percentage>=60?{text:"Yaxşı!",icon:Mh,color:"from-blue-400 to-cyan-500"}:{text:"Daha çox məşq lazım",icon:Mh,color:"from-gray-400 to-gray-500"},{text:u,icon:d,color:m}=c(),p=async()=>{if(s&&!i){a(!0);try{await s(e.id),r()}catch(g){console.error("Failed to mark as learned:",g),a(!1)}}};return o.jsx("div",{className:"max-w-2xl mx-auto p-6",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("div",{className:`w-20 h-20 mx-auto bg-gradient-to-br ${m} rounded-full flex items-center justify-center mb-4`,children:o.jsx(d,{className:"w-10 h-10 text-white"})}),o.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:u}),o.jsxs("p",{className:"text-gray-600",children:['"',e.name,'" kolleksiyasını bitirdiniz']})]}),o.jsx("div",{className:"bg-gray-50 rounded-xl p-6 mb-8",children:o.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.correct}),o.jsx("div",{className:"text-sm text-gray-600",children:"Doğru"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-2xl font-bold text-red-600",children:t.total-t.correct}),o.jsx("div",{className:"text-sm text-gray-600",children:"Yanlış"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[t.percentage,"%"]}),o.jsx("div",{className:"text-sm text-gray-600",children:"Nəticə"})]})]})}),o.jsxs("div",{className:"space-y-4",children:[t.percentage===100&&s&&!e.isLearned&&o.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-6",children:[o.jsx("div",{className:"flex items-center justify-center mb-4",children:o.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:o.jsx(wn,{className:"w-8 h-8 text-green-600"})})}),o.jsx("h3",{className:"text-lg font-bold text-green-800 mb-2",children:"Mükəmməl Nəticə! 🎉"}),o.jsx("p",{className:"text-green-700 mb-4",children:"100% nəticə əldə etdiniz! Bu kolleksiyanı tamamilə öyrəndiniz."}),o.jsxs("button",{onClick:p,disabled:i,className:"flex items-center justify-center space-x-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-green-600 hover:to-emerald-700 transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50",children:[o.jsx(Lt,{className:"w-5 h-5"}),o.jsx("span",{children:i?"Saxlanır...":"Öyrəndim! ✨"})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[o.jsxs("button",{onClick:n,className:"flex items-center justify-center space-x-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-md hover:shadow-lg",children:[o.jsx(Cf,{className:"w-4 h-4"}),o.jsx("span",{children:"Yenidən oyna"})]}),o.jsxs("button",{onClick:r,className:"flex items-center justify-center space-x-2 bg-white border-2 border-gray-300 text-gray-700 px-6 py-3 rounded-lg font-medium hover:bg-gray-50 transition-all duration-200",children:[o.jsx(O1,{className:"w-4 h-4"}),o.jsx("span",{children:"Ana səhifə"})]})]})]})]})})},qA=({settings:t,onUpdateSettings:e,onBack:n})=>{const{currentUser:r,updateUserProfile:s,updateUserPassword:i}=Xt(),[a,c]=L.useState(!1),[u,d]=L.useState(!1),[m,p]=L.useState((r==null?void 0:r.username)||""),[g,N]=L.useState(""),[j,k]=L.useState(""),[P,_]=L.useState(!1),[w,E]=L.useState(!1),[A,D]=L.useState(!1),[V,b]=L.useState(""),[y,x]=L.useState(""),S=I=>{e({...t,autoAdvance:I})},T=async()=>{if(m===(r==null?void 0:r.username)){c(!1);return}if(m.length<3){b("Username ən azı 3 simvol olmalıdır");return}D(!0),b(""),x("");try{await s({username:m}),x("Username uğurla yeniləndi"),c(!1)}catch(I){b(I.message||"Username yenilənə bilmədi")}finally{D(!1)}},C=async()=>{if(g.length<6){b("Parol ən azı 6 simvol olmalıdır");return}if(g!==j){b("Parollar uyğun gəlmir");return}D(!0),b(""),x("");try{await i(g),x("Parol uğurla yeniləndi"),d(!1),N(""),k("")}catch(I){b(I.message||"Parol yenilənə bilmədi")}finally{D(!1)}};return o.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200 mr-4",children:o.jsx(Yt,{className:"w-5 h-5 text-gray-600"})}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg",children:o.jsx(Af,{className:"w-6 h-6 text-white"})}),o.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Tənzimləmələr"})]})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[V&&o.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg mb-4 text-sm",children:V}),y&&o.jsx("div",{className:"bg-green-50 text-green-600 p-3 rounded-lg mb-4 text-sm",children:y}),o.jsxs("div",{className:"mb-8",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-6",children:"İstifadəçi Profili"}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"border border-gray-200 rounded-xl p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"font-medium text-gray-800",children:"İstifadəçi adı"}),!a&&o.jsx("button",{onClick:()=>c(!0),className:"text-blue-600 hover:text-blue-700 text-sm",children:"Dəyişdir"})]}),a?o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{children:o.jsx("input",{type:"text",value:m,onChange:I=>p(I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Yeni username",disabled:A})}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("button",{onClick:T,disabled:A,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:A?"Saxlanır...":"Saxla"}),o.jsx("button",{onClick:()=>{c(!1),p((r==null?void 0:r.username)||""),b("")},className:"text-gray-600 hover:text-gray-800",disabled:A,children:"Ləğv et"})]})]}):o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:o.jsx(Pf,{className:"w-5 h-5 text-blue-600"})}),o.jsx("span",{className:"text-gray-800",children:r==null?void 0:r.username})]})]}),o.jsxs("div",{className:"border border-gray-200 rounded-xl p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"font-medium text-gray-800",children:"Parol"}),!u&&o.jsx("button",{onClick:()=>d(!0),className:"text-blue-600 hover:text-blue-700 text-sm",children:"Dəyişdir"})]}),u?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Yeni Parol"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:P?"text":"password",value:g,onChange:I=>N(I.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Yeni parol",disabled:A}),o.jsx("button",{type:"button",onClick:()=>_(!P),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",disabled:A,children:P?o.jsx(Ni,{className:"w-4 h-4"}):o.jsx(Fr,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parolu təkrarla"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:w?"text":"password",value:j,onChange:I=>k(I.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Parolu təkrarla",disabled:A}),o.jsx("button",{type:"button",onClick:()=>E(!w),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",disabled:A,children:w?o.jsx(Ni,{className:"w-4 h-4"}):o.jsx(Fr,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("button",{onClick:C,disabled:A,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:A?"Saxlanır...":"Saxla"}),o.jsx("button",{onClick:()=>{d(!1),N(""),k(""),b("")},className:"text-gray-600 hover:text-gray-800",disabled:A,children:"Ləğv et"})]})]}):o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:o.jsx(vA,{className:"w-5 h-5 text-purple-600"})}),o.jsx("span",{className:"text-gray-500",children:"••••••••"})]})]})]})]}),o.jsxs("div",{className:"mb-8",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-6",children:"Quiz Ayarları"}),o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"border border-gray-200 rounded-xl p-6",children:[o.jsx("h3",{className:"font-medium text-gray-800 mb-4",children:"Sual Keçid Rejimi"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("label",{className:"flex items-center space-x-4 cursor-pointer group",children:[o.jsx("input",{type:"radio",name:"advanceMode",checked:t.autoAdvance,onChange:()=>S(!0),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),o.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[o.jsx("div",{className:"p-2 bg-blue-100 rounded-lg group-hover:bg-blue-200 transition-colors duration-200",children:o.jsx(Lh,{className:"w-5 h-5 text-blue-600"})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-800",children:"Avtomatik keçid"}),o.jsx("div",{className:"text-sm text-gray-600",children:"Cavab verdikdən sonra avtomatik növbəti suala keç"})]})]})]}),o.jsxs("label",{className:"flex items-center space-x-4 cursor-pointer group",children:[o.jsx("input",{type:"radio",name:"advanceMode",checked:!t.autoAdvance,onChange:()=>S(!1),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),o.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[o.jsx("div",{className:"p-2 bg-purple-100 rounded-lg group-hover:bg-purple-200 transition-colors duration-200",children:o.jsx(yA,{className:"w-5 h-5 text-purple-600"})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-800",children:"Manual keçid"}),o.jsx("div",{className:"text-sm text-gray-600",children:'"Növbəti" düyməsinə basaraq özünüz keçid edin'})]})]})]})]})]})})]}),o.jsx("div",{className:"border-t border-gray-200 pt-6",children:o.jsx("p",{className:"text-sm text-gray-500 text-center",children:"Ayarlar avtomatik saxlanılır"})})]})]})};class WA{async callGemini(e){return this.getMockResponse(e)}getMockResponse(e){const n=["Hello! I'm your AI English teacher. Let's practice together! Can you tell me about your day?","That's great! I noticed you used some words we've been learning. Let me help you with pronunciation and usage.","Excellent! Let's try using the word 'beautiful' in a sentence. Can you describe something beautiful you saw today?","Perfect! You're making great progress. Let me suggest a new word: 'magnificent' - it means very beautiful or impressive.","Well done! I can see you're understanding these concepts well. Would you like to practice with some new vocabulary?"];return n[Math.floor(Math.random()*n.length)]}generateSystemPrompt(e){const{userLevel:n,learnedWords:r,focusWords:s,conversationGoals:i}=e,a=r.slice(0,20).map(d=>d.english||d.word).join(", "),c=s.slice(0,10).join(", "),u=i.length>0?i.join(", "):"general English practice";return`You are an AI English teacher helping a ${n} level student improve their English.

STUDENT CONTEXT:
- Level: ${n}
- Recently learned words: ${a}
- Focus on using these words: ${c}
- Learning goals: ${u}

TEACHING INSTRUCTIONS:
1. Use simple, clear language appropriate for ${n} level
2. Frequently use the words the student has learned: ${a}
3. Emphasize these focus words in conversations: ${c}
4. Gently correct mistakes and explain why
5. Ask engaging questions to keep the conversation flowing
6. Suggest 1-2 new words per message when appropriate
7. Be encouraging and supportive
8. Make learning fun and interactive

CONVERSATION STYLE:
- Be friendly and patient
- Use examples and context for new words
- Ask follow-up questions
- Praise good usage
- Keep responses concise (2-4 sentences max)

Remember: Your goal is to help the student practice English naturally while reinforcing their learned vocabulary.`}async generateResponse(e,n){const r=this.generateSystemPrompt(n),s=e.slice(-6).map(g=>`${g.sender==="user"?"Student":"Teacher"}: ${g.content}`).join(`
`),i=`${r}

CONVERSATION HISTORY:
${s}

Please respond as the AI teacher. After your response, on new lines, add:
USED_WORDS: [list the learned words you used in your response]
SUGGESTED_WORDS: [list 1-2 new words with meanings, if any]
DIFFICULTY: [rate 1-10 how complex your response was]`,a=await this.callGemini(i),c=a.split(`
`);let u="",d=[],m=[],p=3;for(let g=0;g<c.length;g++){const N=c[g].trim();if(N.startsWith("USED_WORDS:"))d=N.replace("USED_WORDS:","").trim().split(",").map(k=>k.trim()).filter(k=>k);else if(N.startsWith("SUGGESTED_WORDS:"))m=N.replace("SUGGESTED_WORDS:","").trim().split(",").map(P=>{const[_,w]=P.split(":").map(E=>E.trim());return _&&w?{id:`suggested_${Date.now()}_${Math.random()}`,english:_,meaning:w}:null}).filter(Boolean);else if(N.startsWith("DIFFICULTY:")){const j=N.replace("DIFFICULTY:","").trim(),k=parseInt(j);!isNaN(k)&&k>=1&&k<=10&&(p=k)}else!N.startsWith("USED_WORDS:")&&!N.startsWith("SUGGESTED_WORDS:")&&!N.startsWith("DIFFICULTY:")&&(u+=N+`
`)}return{content:u.trim()||a,usedWords:d,suggestedWords:m,difficulty:p}}async generateConversationTitle(e){if(e.length===0)return"New Conversation";const r=`Based on this conversation start: "${e.slice(0,3).map(i=>i.content).join(" ")}"
    
Generate a short, descriptive title (3-5 words) for this English learning conversation.
Examples: "Daily Routine Practice", "Food Vocabulary Chat", "Travel Experience Discussion"
    
Title:`;return(await this.callGemini(r)).trim().replace(/^Title:\s*/,"")||"English Practice"}}const gd=new WA,HA=({onBack:t,userCollections:e,learnedWords:n})=>{const{currentUser:r}=Xt(),[s,i]=L.useState([]),[a,c]=L.useState(null),[u,d]=L.useState(""),[m,p]=L.useState(!1),[g,N]=L.useState("intermediate"),[j,k]=L.useState(["general practice"]),P=L.useRef(null),_=()=>{var x;(x=P.current)==null||x.scrollIntoView({behavior:"smooth"})};L.useEffect(()=>{_()},[a==null?void 0:a.messages]);const w=()=>{const x=e.slice(0,3).flatMap(S=>S.words).map(S=>S.english||S.word||"").filter(Boolean);return{userLevel:g,learnedWords:n.slice(0,50),recentCollections:e.slice(0,3),focusWords:x.slice(0,15),avoidWords:g==="beginner"?["sophisticated","magnificent","extraordinary"]:[],conversationGoals:j}},E=async()=>{const x={id:Qs(),userId:(r==null?void 0:r.id)||"",title:"New Conversation",messages:[],createdAt:new Date,updatedAt:new Date,userLevel:g};c(x),i(T=>[x,...T]);const S=w();p(!0);try{const T=await gd.generateResponse([],S),C={id:Qs(),content:T.content,sender:"ai",timestamp:new Date,usedWords:T.usedWords,suggestedWords:T.suggestedWords,difficulty:T.difficulty},I={...x,messages:[C],title:await gd.generateConversationTitle([C])};c(I),i(ee=>ee.map(H=>H.id===x.id?I:H))}catch(T){console.error("Error starting conversation:",T)}finally{p(!1)}},A=async()=>{if(!u.trim()||!a||m)return;const x={id:Qs(),content:u.trim(),sender:"user",timestamp:new Date},S=[...a.messages,x],T={...a,messages:S,updatedAt:new Date};c(T),i(C=>C.map(I=>I.id===a.id?T:I)),d(""),p(!0);try{const C=w(),I=await gd.generateResponse(S,C),ee={id:Qs(),content:I.content,sender:"ai",timestamp:new Date,usedWords:I.usedWords,suggestedWords:I.suggestedWords,difficulty:I.difficulty},H={...T,messages:[...S,ee]};c(H),i(F=>F.map(xe=>xe.id===a.id?H:xe))}catch(C){console.error("Error sending message:",C)}finally{p(!1)}},D=x=>{x.key==="Enter"&&!x.shiftKey&&(x.preventDefault(),A())},V=x=>{if("speechSynthesis"in window){const S=new SpeechSynthesisUtterance(x);S.lang="en-US",S.rate=.8,speechSynthesis.speak(S)}},b=x=>x<=3?"text-green-600 bg-green-100":x<=6?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100",y=()=>{switch(g){case"beginner":return o.jsx(Lh,{className:"w-4 h-4 text-green-600"});case"intermediate":return o.jsx(wc,{className:"w-4 h-4 text-blue-600"});case"advanced":return o.jsx(zr,{className:"w-4 h-4 text-purple-600"})}};return a?o.jsxs("div",{className:"max-w-4xl mx-auto p-6 h-screen flex flex-col",children:[o.jsx("div",{className:"flex items-center justify-between mb-6 bg-white rounded-xl shadow-lg p-4",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("button",{onClick:()=>c(null),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200 mr-4",children:o.jsx(Yt,{className:"w-5 h-5 text-gray-600"})}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-blue-600 rounded-lg",children:o.jsx(po,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold text-gray-800",children:a.title}),o.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[y(),o.jsx("span",{className:"capitalize",children:g}),o.jsx("span",{children:"•"}),o.jsxs("span",{children:[a.messages.length," mesaj"]})]})]})]})]})}),o.jsx("div",{className:"flex-1 bg-white rounded-xl shadow-lg p-6 overflow-y-auto mb-4",children:o.jsxs("div",{className:"space-y-4",children:[a.messages.map(x=>o.jsx("div",{className:`flex ${x.sender==="user"?"justify-end":"justify-start"}`,children:o.jsx("div",{className:`max-w-3xl ${x.sender==="user"?"order-2":"order-1"}`,children:o.jsxs("div",{className:`flex items-start space-x-3 ${x.sender==="user"?"flex-row-reverse space-x-reverse":""}`,children:[o.jsx("div",{className:`p-2 rounded-full ${x.sender==="user"?"bg-blue-500":"bg-gradient-to-br from-purple-500 to-blue-600"}`,children:x.sender==="user"?o.jsx(Pf,{className:"w-4 h-4 text-white"}):o.jsx(po,{className:"w-4 h-4 text-white"})}),o.jsxs("div",{className:`rounded-2xl p-4 ${x.sender==="user"?"bg-blue-500 text-white":"bg-gray-100 text-gray-800"}`,children:[o.jsx("p",{className:"whitespace-pre-wrap",children:x.content}),x.sender==="ai"&&o.jsxs("div",{className:"mt-3 space-y-2",children:[x.usedWords&&x.usedWords.length>0&&o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Ue,{className:"w-4 h-4 text-purple-600"}),o.jsx("span",{className:"text-sm text-gray-600",children:"Öyrəndiyiniz sözlər:"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:x.usedWords.map((S,T)=>o.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 text-xs rounded-full",children:S},T))})]}),x.suggestedWords&&x.suggestedWords.length>0&&o.jsxs("div",{className:"flex items-start space-x-2",children:[o.jsx(wy,{className:"w-4 h-4 text-yellow-500 mt-1"}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Yeni sözlər:"}),o.jsx("div",{className:"mt-1 space-y-1",children:x.suggestedWords.map((S,T)=>o.jsxs("div",{className:"text-sm bg-yellow-50 border border-yellow-200 rounded p-2",children:[o.jsx("span",{className:"font-medium text-yellow-800",children:S.english}),o.jsxs("span",{className:"text-yellow-600",children:[" - ",S.meaning]})]},T))})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[x.difficulty&&o.jsxs("span",{className:`px-2 py-1 rounded-full text-xs ${b(x.difficulty)}`,children:["Çətinlik: ",x.difficulty,"/10"]}),o.jsx("button",{onClick:()=>V(x.content),className:"p-1 hover:bg-gray-200 rounded transition-colors duration-200",title:"Dinlə",children:o.jsx(CA,{className:"w-4 h-4 text-gray-600"})})]})]}),o.jsx("div",{className:"text-xs opacity-70 mt-2",children:x.timestamp.toLocaleTimeString("az-AZ",{hour:"2-digit",minute:"2-digit"})})]})]})})},x.id)),m&&o.jsx("div",{className:"flex justify-start",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-blue-600 rounded-full",children:o.jsx(po,{className:"w-4 h-4 text-white"})}),o.jsx("div",{className:"bg-gray-100 rounded-2xl p-4",children:o.jsxs("div",{className:"flex space-x-1",children:[o.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),o.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),o.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})}),o.jsx("div",{ref:P})]})}),o.jsx("div",{className:"bg-white rounded-xl shadow-lg p-4",children:o.jsxs("div",{className:"flex items-end space-x-3",children:[o.jsx("div",{className:"flex-1",children:o.jsx("textarea",{value:u,onChange:x=>d(x.target.value),onKeyPress:D,placeholder:"Mesajınızı yazın... (Enter - göndər, Shift+Enter - yeni sətr)",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors duration-200 resize-none",rows:1,style:{minHeight:"48px",maxHeight:"120px"},disabled:m})}),o.jsx("button",{onClick:A,disabled:!u.trim()||m,className:"p-3 bg-gradient-to-r from-purple-500 to-blue-600 text-white rounded-lg hover:from-purple-600 hover:to-blue-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-lg",children:o.jsx(IA,{className:"w-5 h-5"})})]})})]}):o.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200 mr-4",children:o.jsx(Yt,{className:"w-5 h-5 text-gray-600"})}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-blue-600 rounded-lg",children:o.jsx(po,{className:"w-6 h-6 text-white"})}),o.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"AI Müəllim"})]})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Səviyyənizi seçin"}),o.jsx("div",{className:"grid grid-cols-3 gap-4 mb-6",children:["beginner","intermediate","advanced"].map(x=>o.jsxs("button",{onClick:()=>N(x),className:`p-4 rounded-xl border-2 transition-all duration-200 ${g===x?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 hover:border-gray-300 text-gray-600"}`,children:[o.jsxs("div",{className:"flex items-center justify-center mb-2",children:[x==="beginner"&&o.jsx(Lh,{className:"w-6 h-6 text-green-600"}),x==="intermediate"&&o.jsx(wc,{className:"w-6 h-6 text-blue-600"}),x==="advanced"&&o.jsx(zr,{className:"w-6 h-6 text-purple-600"})]}),o.jsxs("div",{className:"font-medium",children:[x==="beginner"&&"Başlayıcı",x==="intermediate"&&"Orta səviyyə",x==="advanced"&&"İrəliləmiş"]}),o.jsxs("div",{className:"text-sm opacity-70 mt-1",children:[x==="beginner"&&"Sadə sözlər və cümlələr",x==="intermediate"&&"Orta mürəkkəblik",x==="advanced"&&"Mürəkkəb mətnlər"]})]},x))})]}),o.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[o.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-6",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[o.jsx(Ue,{className:"w-6 h-6 text-blue-600"}),o.jsx("h4",{className:"font-semibold text-blue-800",children:"Öyrəndiyiniz sözlər"})]}),o.jsx("p",{className:"text-2xl font-bold text-blue-900",children:n.length}),o.jsx("p",{className:"text-sm text-blue-600",children:"AI müəllim bunları xatırlayacaq"})]}),o.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-6",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[o.jsx(wy,{className:"w-6 h-6 text-green-600"}),o.jsx("h4",{className:"font-semibold text-green-800",children:"Kolleksiyalar"})]}),o.jsx("p",{className:"text-2xl font-bold text-green-900",children:e.length}),o.jsx("p",{className:"text-sm text-green-600",children:"Məşq üçün istifadə olunacaq"})]}),o.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-6",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[o.jsx(NA,{className:"w-6 h-6 text-purple-600"}),o.jsx("h4",{className:"font-semibold text-purple-800",children:"Söhbətlər"})]}),o.jsx("p",{className:"text-2xl font-bold text-purple-900",children:s.length}),o.jsx("p",{className:"text-sm text-purple-600",children:"Keçmiş söhbətləriniz"})]})]}),s.length>0&&o.jsxs("div",{className:"mb-8",children:[o.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Keçmiş Söhbətlər"}),o.jsx("div",{className:"space-y-3",children:s.slice(0,3).map(x=>o.jsxs("button",{onClick:()=>c(x),className:"w-full text-left p-4 rounded-lg border border-gray-200 hover:border-purple-300 hover:bg-purple-50 transition-all duration-200",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h4",{className:"font-medium text-gray-800",children:x.title}),o.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[y(),o.jsxs("span",{children:[x.messages.length," mesaj"]})]})]}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:x.updatedAt.toLocaleDateString("az-AZ")})]},x.id))})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("button",{onClick:E,className:"bg-gradient-to-r from-purple-500 to-blue-600 text-white px-8 py-4 rounded-xl font-semibold text-lg hover:from-purple-600 hover:to-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl flex items-center space-x-3 mx-auto",children:[o.jsx(U1,{className:"w-6 h-6"}),o.jsx("span",{children:"Yeni Söhbət Başla"})]}),o.jsx("p",{className:"text-gray-600 mt-3",children:"AI müəlliminizla ingilis dili məşq etməyə başlayın!"})]})]})]})},GA=({onSwitchToRegister:t})=>{const[e,n]=L.useState(""),[r,s]=L.useState(""),[i,a]=L.useState(!1),[c,u]=L.useState(!1),[d,m]=L.useState(""),{login:p}=Xt(),g=async N=>{if(N.preventDefault(),!e||!r){m("Bütün sahələri doldurun");return}u(!0),m("");try{await p(e,r)}catch(j){m(j.message||"Giriş zamanı xəta baş verdi")}finally{u(!1)}};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-8 w-full max-w-md",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(_A,{className:"w-8 h-8 text-white"})}),o.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Daxil ol"}),o.jsx("p",{className:"text-gray-600",children:"Hesabınıza daxil olun"})]}),d&&o.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg mb-4 text-sm",children:d}),o.jsxs("form",{onSubmit:g,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"emailOrUsername",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email və ya Username"}),o.jsx("input",{type:"text",id:"emailOrUsername",value:e,onChange:N=>n(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Email və ya username daxil edin",disabled:c})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Parol"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:i?"text":"password",id:"password",value:r,onChange:N=>s(N.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Parolu daxil edin",disabled:c}),o.jsx("button",{type:"button",onClick:()=>a(!i),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",disabled:c,children:i?o.jsx(Ni,{className:"w-4 h-4"}):o.jsx(Fr,{className:"w-4 h-4"})})]})]}),o.jsx("button",{type:"submit",disabled:c,className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-2 px-4 rounded-lg hover:from-blue-600 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:c?"Daxil olunur...":"Daxil ol"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs("p",{className:"text-gray-600",children:["Hesabınız yoxdur?"," ",o.jsx("button",{onClick:t,className:"text-blue-600 hover:text-blue-700 font-medium",disabled:c,children:"Qeydiyyatdan keçin"})]})})]})})},KA=({onSwitchToLogin:t})=>{const[e,n]=L.useState(""),[r,s]=L.useState(""),[i,a]=L.useState(""),[c,u]=L.useState(""),[d,m]=L.useState(!1),[p,g]=L.useState(!1),[N,j]=L.useState(!1),[k,P]=L.useState(""),{register:_}=Xt(),w=async E=>{if(E.preventDefault(),!e||!r||!i||!c){P("Bütün sahələri doldurun");return}if(!e.includes("@")){P("Düzgün email adresi daxil edin");return}if(r.length<3){P("Username ən azı 3 simvol olmalıdır");return}if(i.length<6){P("Parol ən azı 6 simvol olmalıdır");return}if(i!==c){P("Parollar uyğun gəlmir");return}j(!0),P("");try{await _(e,r,i)}catch(A){P(A.message||"Qeydiyyat zamanı xəta baş verdi")}finally{j(!1)}};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-8 w-full max-w-md",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-green-500 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(jA,{className:"w-8 h-8 text-white"})}),o.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Qeydiyyat"}),o.jsx("p",{className:"text-gray-600",children:"Yeni hesab yaradın"})]}),k&&o.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg mb-4 text-sm",children:k}),o.jsxs("form",{onSubmit:w,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),o.jsx("input",{type:"email",id:"email",value:e,onChange:E=>n(E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Email adresinizi daxil edin",disabled:N})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),o.jsx("input",{type:"text",id:"username",value:r,onChange:E=>s(E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Username daxil edin",disabled:N})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Parol"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:d?"text":"password",id:"password",value:i,onChange:E=>a(E.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Parolu daxil edin",disabled:N}),o.jsx("button",{type:"button",onClick:()=>m(!d),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",disabled:N,children:d?o.jsx(Ni,{className:"w-4 h-4"}):o.jsx(Fr,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Parolu təkrarla"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:p?"text":"password",id:"confirmPassword",value:c,onChange:E=>u(E.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Parolu yenidən daxil edin",disabled:N}),o.jsx("button",{type:"button",onClick:()=>g(!p),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",disabled:N,children:p?o.jsx(Ni,{className:"w-4 h-4"}):o.jsx(Fr,{className:"w-4 h-4"})})]})]}),o.jsx("button",{type:"submit",disabled:N,className:"w-full bg-gradient-to-r from-green-500 to-blue-600 text-white py-2 px-4 rounded-lg hover:from-green-600 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:N?"Qeydiyyat edilir...":"Qeydiyyatdan keç"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs("p",{className:"text-gray-600",children:["Artıq hesabınız var?"," ",o.jsx("button",{onClick:t,className:"text-blue-600 hover:text-blue-700 font-medium",disabled:N,children:"Daxil olun"})]})})]})})},QA=({collections:t,onBack:e,onStartExam:n})=>{const[r,s]=L.useState([]),[i,a]=L.useState(4),[c,u]=L.useState(20),[d,m]=L.useState(10),[p,g]=L.useState(!1),[N,j]=L.useState(""),[k,P]=L.useState(""),_=b=>{s(y=>y.includes(b)?y.filter(x=>x!==b):[...y,b])},w=()=>{r.length===t.length?s([]):s(t.map(b=>b.id))},E=()=>t.filter(b=>r.includes(b.id)).reduce((b,y)=>{var x;return b+(((x=y.words)==null?void 0:x.length)||0)},0),A=()=>{if(r.length===0)return;const b=p&&!N.trim()?`İmtahan ${new Date().toLocaleString("az-AZ")}`:N;n({selectedCollections:r,variantCount:i,wordCount:c,timeLimit:d,isPublic:p,name:p?b:void 0,description:p?k:void 0})},D=E(),V=Math.min(D,100);return o.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200 mr-4",children:o.jsx(Yt,{className:"w-5 h-5 text-gray-600"})}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"p-2 bg-gradient-to-br from-green-500 to-teal-600 rounded-lg",children:o.jsx(xn,{className:"w-6 h-6 text-white"})}),o.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Peşəkar İmtahan Ayarları"})]})]}),o.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center space-x-2",children:[o.jsx(an,{className:"w-5 h-5 text-blue-600"}),o.jsx("span",{children:"Kolleksiyalar"})]}),o.jsx("button",{onClick:w,className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:r.length===t.length?"Hamısını ləğv et":"Hamısını seç"})]}),o.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:t.map(b=>{var x;const y=r.includes(b.id);return o.jsxs("div",{className:`flex items-center space-x-4 p-4 border-2 rounded-xl cursor-pointer transition-all duration-200 ${y?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,onClick:()=>_(b.id),children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("div",{className:`w-5 h-5 rounded-md border-2 flex items-center justify-center transition-colors ${y?"bg-blue-500 border-blue-500":"border-gray-300 bg-white"}`,children:y&&o.jsx(Lt,{className:"w-3 h-3 text-white"})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:`font-medium truncate ${y?"text-blue-800":"text-gray-800"}`,children:b.name}),o.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[o.jsx(Ue,{className:"w-3 h-3"}),o.jsxs("span",{children:[((x=b.words)==null?void 0:x.length)||0," söz"]}),b.visibility==="public"&&o.jsx("span",{className:"text-green-600 text-xs",children:"• Public"})]})]}),y&&o.jsx("div",{className:"flex-shrink-0",children:o.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})})]},b.id)})}),o.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:o.jsxs("p",{className:"text-sm text-blue-800",children:[o.jsx("span",{className:"font-medium",children:r.length})," kolleksiya seçildi",D>0&&o.jsxs("span",{children:[" • Cəmi ",o.jsx("span",{className:"font-medium",children:D})," söz"]})]})})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[o.jsxs("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center space-x-2",children:[o.jsx(Af,{className:"w-5 h-5 text-purple-600"}),o.jsx("span",{children:"İmtahan Ayarları"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Variant sayı"}),o.jsxs("select",{value:i,onChange:b=>a(Number(b.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:3,children:"3 variant"}),o.jsx("option",{value:4,children:"4 variant"}),o.jsx("option",{value:5,children:"5 variant"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sual sayı"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("input",{type:"range",min:"5",max:V,step:"1",value:Math.min(c,V),onChange:b=>u(Number(b.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),o.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[o.jsx("span",{children:"5"}),o.jsx("span",{className:"font-medium text-blue-600",children:Math.min(c,V)}),o.jsx("span",{children:V})]})]}),D<c&&D>0&&o.jsxs("p",{className:"text-sm text-orange-600 mt-1",children:["Maksimum ",D," sual edə bilərsiniz"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vaxt limiti (dəqiqə)"}),o.jsxs("select",{value:d,onChange:b=>m(Number(b.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:5,children:"5 dəqiqə"}),o.jsx("option",{value:10,children:"10 dəqiqə"}),o.jsx("option",{value:15,children:"15 dəqiqə"}),o.jsx("option",{value:20,children:"20 dəqiqə"}),o.jsx("option",{value:30,children:"30 dəqiqə"}),o.jsx("option",{value:45,children:"45 dəqiqə"}),o.jsx("option",{value:60,children:"1 saat"})]})]}),o.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[o.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:p,onChange:b=>g(b.target.checked),className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-800",children:"Public İmtahan"}),o.jsx("div",{className:"text-sm text-gray-600",children:"İmtahanınızı digər istifadəçilər də görsün"})]})]}),p&&o.jsxs("div",{className:"mt-4 space-y-4 p-4 bg-purple-50 rounded-lg border border-purple-200",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-1",children:"İmtahan Adı *"}),o.jsx("input",{type:"text",value:N,onChange:b=>j(b.target.value),placeholder:"Məsələn: İngilis dili - Orta səviyyə",className:"w-full px-3 py-2 border border-purple-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-1",children:"Təsvir (seçimlik)"}),o.jsx("textarea",{value:k,onChange:b=>P(b.target.value),placeholder:"İmtahan haqqında qısa məlumat...",className:"w-full px-3 py-2 border border-purple-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",rows:3})]})]})]})]}),o.jsxs("div",{className:"mt-6 p-4 bg-gradient-to-r from-green-50 to-teal-50 rounded-lg border border-green-200",children:[o.jsxs("h3",{className:"font-medium text-green-800 mb-2 flex items-center space-x-2",children:[o.jsx(gA,{className:"w-4 h-4"}),o.jsx("span",{children:"İmtahan Xülasəsi"})]}),o.jsxs("div",{className:"space-y-1 text-sm text-green-700",children:[o.jsxs("p",{children:["• ",r.length," kolleksiya"]}),o.jsxs("p",{children:["• ",Math.min(c,V)," sual"]}),o.jsxs("p",{children:["• ",i," variant"]}),o.jsxs("p",{className:"flex items-center space-x-1",children:[o.jsx(bi,{className:"w-3 h-3"}),o.jsxs("span",{children:[d," dəqiqə"]})]})]})]})]})]}),o.jsx("div",{className:"mt-8 flex justify-center",children:o.jsxs("button",{onClick:A,disabled:r.length===0||p&&!N.trim(),className:"flex items-center space-x-3 bg-gradient-to-r from-green-500 to-teal-600 text-white px-8 py-4 rounded-xl font-semibold text-lg hover:from-green-600 hover:to-teal-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:transform-none",children:[o.jsx(xn,{className:"w-5 h-5"}),o.jsx("span",{children:"İmtahana Başla"})]})}),(r.length===0||p&&!N.trim())&&o.jsx("div",{className:"mt-4 text-center",children:o.jsx("p",{className:"text-sm text-gray-500",children:r.length===0?"İmtahana başlamaq üçün ən azı bir kolleksiya seçin":"Public imtahan üçün ad məcburidir"})})]})},YA=({isOpen:t,onClose:e,onConfirm:n,title:r,message:s,bestScore:i,totalAttempts:a,recentResults:c=[]})=>t?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"relative bg-gradient-to-r from-blue-500 to-purple-600 rounded-t-2xl p-6 text-white",children:[o.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition-all",children:o.jsx(PA,{className:"w-5 h-5"})}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"bg-white bg-opacity-20 rounded-full p-3",children:o.jsx(wn,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold",children:r}),o.jsx("p",{className:"text-blue-100 opacity-90",children:"Əvvəlki nəticələriniz"})]})]})]}),o.jsxs("div",{className:"p-6",children:[o.jsx("p",{className:"text-gray-600 mb-4",children:s}),i!==void 0&&a!==void 0&&o.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-4 mb-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"bg-green-500 rounded-full p-2",children:o.jsx(Lt,{className:"w-4 h-4 text-white"})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-green-800",children:"Ən yaxşı nəticə"}),o.jsxs("p",{className:"text-sm text-green-600",children:[a," cəhddən"]})]})]}),o.jsx("div",{className:"text-right",children:o.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[i,"%"]})})]})}),c.length>0&&o.jsxs("div",{className:"space-y-3 mb-6",children:[o.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center space-x-2",children:[o.jsx(Cf,{className:"w-4 h-4"}),o.jsx("span",{children:"Son nəticələr"})]}),o.jsx("div",{className:"space-y-2",children:c.slice(0,3).map((u,d)=>{const m=new Date(u.participatedAt).toLocaleDateString("az-AZ",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"}),p=u.scorePercentage>=80?"text-green-600":u.scorePercentage>=60?"text-yellow-600":"text-red-600";return o.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("span",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center text-sm font-medium",children:d+1}),o.jsxs("div",{children:[o.jsxs("p",{className:`font-semibold ${p}`,children:[u.scorePercentage.toFixed(1),"%"]}),o.jsxs("p",{className:"text-xs text-gray-500",children:[u.score,"/",u.totalQuestions," doğru"]})]})]}),o.jsx("p",{className:"text-sm text-gray-500",children:m})]},d)})})]})]}),o.jsxs("div",{className:"flex space-x-3 p-6 pt-0",children:[o.jsx("button",{onClick:e,className:"flex-1 px-4 py-3 bg-gray-200 text-gray-800 rounded-xl font-semibold hover:bg-gray-300 transition-all duration-200",children:"Ləğv et"}),o.jsx("button",{onClick:n,className:"flex-1 px-4 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl font-semibold hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-lg",children:"Yenidən cəhd et"})]})]})}):null,XA=({isOpen:t,onClose:e,onSelectMode:n,currentMode:r})=>{if(!t)return null;const s=[{id:"english-to-meaning",title:"İngilis → Azərbaycan",description:"İngilis sözü göstərilir, Azərbaycan mənasını seç",icon:o.jsx(V1,{className:"w-6 h-6"}),color:"from-blue-500 to-cyan-600",example:"apple → alma"},{id:"meaning-to-english",title:"Azərbaycan → İngilis",description:"Azərbaycan mənası göstərilir, İngilis sözünü seç",icon:o.jsx(Yt,{className:"w-6 h-6"}),color:"from-green-500 to-emerald-600",example:"alma → apple"},{id:"mixed",title:"Qarışıq Rejim",description:"Həm ingilis → azərbaycan, həm də azərbaycan → ingilis",icon:o.jsx(SA,{className:"w-6 h-6"}),color:"from-purple-500 to-pink-600",example:"Random seçim"}];return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4",children:o.jsxs("div",{className:"bg-white  rounded-2xl shadow-2xl max-w-lg w-full max-h-[95vh] sm:max-h-[90vh] overflow-y-auto mx-2 sm:mx-0",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-t-2xl p-4 sm:p-6 text-white",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"bg-white bg-opacity-20 rounded-full p-2 sm:p-3",children:o.jsx(wA,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg sm:text-xl font-bold",children:"Quiz Rejimini Seç"}),o.jsx("p",{className:"text-blue-100 opacity-90 text-sm sm:text-base",children:"Hansı istiqamətdə test etmək istəyirsiniz?"})]})]})}),o.jsxs("div",{className:"p-4 sm:p-6",children:[o.jsx("div",{className:"space-y-3 sm:space-y-4",children:s.map(i=>o.jsx("button",{onClick:()=>n(i.id),className:`w-full text-left p-3 sm:p-4 rounded-xl border-2 transition-all duration-200 ${r===i.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:o.jsxs("div",{className:"flex items-start space-x-3 sm:space-x-4",children:[o.jsx("div",{className:`bg-gradient-to-r ${i.color} rounded-lg p-2 text-white flex-shrink-0`,children:o.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6",children:i.icon})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-semibold text-gray-800  text-base sm:text-lg mb-1",children:i.title}),o.jsx("p",{className:"text-gray-600  text-xs sm:text-sm mb-2 leading-relaxed",children:i.description}),o.jsx("div",{className:"text-xs text-gray-500  font-mono bg-gray-100  rounded px-2 py-1 inline-block",children:i.example})]}),r===i.id&&o.jsx("div",{className:"text-blue-500 flex-shrink-0",children:o.jsx(Ue,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]})},i.id))}),o.jsxs("div",{className:"mt-4 sm:mt-6 bg-blue-50   rounded-lg p-3 sm:p-4",children:[o.jsx("h4",{className:"font-semibold text-blue-800  mb-2 text-sm sm:text-base",children:"💡 Məsləhət:"}),o.jsx("p",{className:"text-xs sm:text-sm text-blue-700  leading-relaxed",children:"Qarışıq rejim sözləri daha yaxşı yadda saxlamağa kömək edir. Həm oxumaq, həm də yazmaq bacarığınızı inkişaf etdirir."})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3 p-4 sm:p-6 sm:pt-0",children:[o.jsx("button",{onClick:e,className:"flex-1 px-4 py-3 bg-gray-200  text-gray-800  rounded-xl font-semibold hover:bg-gray-300  transition-all duration-200 text-sm sm:text-base",children:"Ləğv et"}),o.jsx("button",{onClick:()=>n(r),className:"flex-1 px-4 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl font-semibold hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-lg text-sm sm:text-base",children:"Başla"})]})]})})},JA=({collections:t,examSettings:e,publicExam:n,onFinish:r,onBack:s})=>{const[i,a]=L.useState([]),[c,u]=L.useState(0),[d,m]=L.useState({}),[p,g]=L.useState(e.timeLimit*60),[N,j]=L.useState(!1),[k,P]=L.useState(!1),[_,w]=L.useState(!0),[E,A]=L.useState(null);L.useEffect(()=>{const I=(()=>{w(!0),A(null);let ee=[];if(n&&n.embeddedWords&&n.embeddedWords.length>0)console.log("🌐 Using public exam embedded words:",n.embeddedWords.length,"words"),console.log("🔍 Sample embedded words:",n.embeddedWords.slice(0,3)),ee=n.embeddedWords;else if(n){if(console.log("⚠️ Legacy public exam detected without embedded words"),console.log("🔄 Falling back to collection-based approach for public exam"),!t.length||!e.selectedCollections.length)return A("Köhnə imtahan formatı - kolleksiya məlumatları tapılmadı"),w(!1),[];const ie=t.filter(G=>e.selectedCollections.includes(G.id));if(!ie.length)return A("Seçilmiş kolleksiya tapılmadı - köhnə imtahan formatı"),w(!1),[];const $=new Map;ie.forEach(G=>{G.words&&Array.isArray(G.words)&&G.words.forEach(te=>{const oe=te.id||te.word||te.english||"";oe&&$.set(oe,te)})}),ee=Array.from($.values())}else{if(console.log("👤 Using own collections:",t.length,"available collections"),!t.length||!e.selectedCollections.length)return A("Heç bir kolleksiya seçilməyib"),w(!1),[];const ie=t.filter(G=>e.selectedCollections.includes(G.id));if(!ie.length)return A("Seçilmiş kolleksiya tapılmadı"),w(!1),[];console.log("✅ Final selected collections:",ie.length,"collections"),ie.forEach((G,te)=>{console.log(`   ${te+1}. ${G.name} (${G.words.length} words)`)});const $=new Map;ie.forEach(G=>{G.words&&Array.isArray(G.words)&&G.words.forEach(te=>{const oe=te.id||te.word||te.english||"";oe&&$.set(oe,te)})}),ee=Array.from($.values())}if(ee.length===0)return A("Seçilmiş kolleksiyalarda söz tapılmadı"),w(!1),[];ee.length<e.wordCount&&(console.warn("Not enough unique words for exam. Available:",ee.length,"Required:",e.wordCount),console.log(`Using ${ee.length} words instead of ${e.wordCount}`));const H=ie=>{const $=[...ie];for(let G=$.length-1;G>0;G--){const te=Math.floor(Math.random()*(G+1));[$[G],$[te]]=[$[te],$[G]]}return $},F=H(ee),xe=Math.min(e.wordCount,ee.length),B=F.slice(0,xe),Y=ee.map(ie=>ie.meaning),X=B.map(ie=>{const $=Y.filter(Me=>Me!==ie.meaning),te=H($).slice(0,e.variantCount-1),oe=H([ie.meaning,...te]),we=oe.indexOf(ie.meaning);return{word:ie,options:oe,correctIndex:we}});return w(!1),X})();a(I)},[t,e,n]),L.useEffect(()=>{if(p>0&&!N){const C=setTimeout(()=>{g(I=>I-1)},1e3);return()=>clearTimeout(C)}else p===0&&!N&&V(!0)},[p,N]);const D=(C,I)=>{m(ee=>({...ee,[C]:I}))},V=L.useCallback((C=!1)=>{if(N)return;j(!0);const I=i.filter((H,F)=>d[F]===H.correctIndex).length,ee=e.timeLimit*60-p;r(I,i.length,Math.floor(ee/60))},[i,d,p,e.timeLimit,r,N]),b=()=>{P(!1),V()},y=()=>{T()>0?P(!0):V()},x=C=>{const I=Math.floor(C/60),ee=C%60;return`${I}:${ee.toString().padStart(2,"0")}`},S=()=>Object.keys(d).length,T=()=>i.length-S();return _?o.jsx("div",{className:"max-w-4xl mx-auto p-6 flex justify-center items-center min-h-96",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"İmtahan yüklənir..."})]})}):E?o.jsx("div",{className:"max-w-4xl mx-auto p-6 flex justify-center items-center min-h-96",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 mx-auto bg-red-100 rounded-full flex items-center justify-center mb-4",children:o.jsx(ro,{className:"w-8 h-8 text-red-600"})}),o.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"İmtahan başladıla bilmədi"}),o.jsx("p",{className:"text-gray-600 mb-6",children:E}),o.jsx("button",{onClick:s,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Geri qayıt"})]})}):i.length===0?o.jsx("div",{className:"max-w-4xl mx-auto p-6 flex justify-center items-center min-h-96",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 mx-auto bg-yellow-100 rounded-full flex items-center justify-center mb-4",children:o.jsx(ro,{className:"w-8 h-8 text-yellow-600"})}),o.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Sual tapılmadı"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"Seçilmiş kolleksiyalarda kifayət qədər söz yoxdur."}),o.jsx("button",{onClick:s,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Geri qayıt"})]})}):i.length===0||!i[c]?o.jsx("div",{className:"max-w-4xl mx-auto p-6 flex justify-center items-center min-h-96",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"İmtahan hazırlanır..."})]})}):o.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6",children:[o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6 mb-4 sm:mb-6",children:[o.jsxs("div",{className:"sm:hidden",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center space-x-2 text-blue-600",children:[o.jsx(vy,{className:"w-4 h-4"}),o.jsxs("span",{className:"font-semibold text-sm",children:["Sual ",c+1,"/",i.length]})]}),o.jsxs("div",{className:`flex items-center space-x-2 ${p<300?"text-red-600":"text-blue-600"}`,children:[o.jsx(bi,{className:"w-4 h-4"}),o.jsx("span",{className:"font-mono text-lg font-bold",children:x(p)})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2 text-green-600",children:[o.jsx(Lt,{className:"w-4 h-4"}),o.jsxs("span",{className:"font-semibold text-sm",children:[S()," cavab"]})]}),o.jsx("button",{onClick:s,className:"px-3 py-1 text-sm text-gray-600 hover:text-gray-800 font-medium",children:"Çıx"})]})]}),o.jsxs("div",{className:"hidden sm:flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("div",{className:"flex items-center space-x-2 text-blue-600",children:[o.jsx(vy,{className:"w-5 h-5"}),o.jsxs("span",{className:"font-semibold",children:["Sual ",c+1," / ",i.length]})]}),o.jsxs("div",{className:"flex items-center space-x-2 text-green-600",children:[o.jsx(Lt,{className:"w-5 h-5"}),o.jsxs("span",{className:"font-semibold",children:["Cavablanmış: ",S()]})]})]}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("div",{className:`flex items-center space-x-2 ${p<300?"text-red-600":"text-blue-600"}`,children:[o.jsx(bi,{className:"w-5 h-5"}),o.jsx("span",{className:"font-mono text-lg font-bold",children:x(p)})]}),o.jsx("button",{onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800 font-medium",children:"Çıx"})]})]})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6 mb-4 sm:mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"İrəliləmə"}),o.jsxs("span",{className:"text-sm text-gray-600",children:[Math.round((c+1)/i.length*100),"%"]})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:o.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-3 rounded-full transition-all duration-300",style:{width:`${(c+1)/i.length*100}%`}})})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-6",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:i[c].word.word||i[c].word.english}),o.jsx("p",{className:"text-lg text-gray-600",children:"Bu sözün mənası nədir?"})]}),o.jsx("div",{className:"grid gap-4",children:i[c].options.map((C,I)=>o.jsx("button",{onClick:()=>D(c,I),className:`p-4 text-left rounded-lg border-2 transition-all duration-200 ${d[c]===I?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"}`,children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:`w-6 h-6 rounded-full border-2 mr-4 flex items-center justify-center ${d[c]===I?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:d[c]===I&&o.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),o.jsx("span",{className:"text-lg",children:C})]})},I))})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6",children:[o.jsxs("div",{className:"sm:hidden space-y-4",children:[T()>0&&o.jsxs("div",{className:"flex items-center justify-center space-x-2 text-orange-600 bg-orange-50 p-3 rounded-lg",children:[o.jsx(ro,{className:"w-4 h-4"}),o.jsxs("span",{className:"text-sm font-medium",children:[T()," cavabsız sual"]})]}),o.jsx("button",{onClick:y,className:"w-full py-3 bg-gradient-to-r from-green-500 to-blue-600 text-white rounded-lg font-semibold hover:from-green-600 hover:to-blue-700 transition-all duration-200 shadow-lg",children:"İmtahanı Bitir"}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsx("button",{onClick:()=>u(Math.max(0,c-1)),disabled:c===0,className:`py-3 rounded-lg font-medium ${c===0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"← Əvvəlki"}),o.jsx("button",{onClick:()=>u(Math.min(i.length-1,c+1)),disabled:c===i.length-1,className:`py-3 rounded-lg font-medium ${c===i.length-1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Növbəti →"})]})]}),o.jsxs("div",{className:"hidden sm:flex items-center justify-between",children:[o.jsx("button",{onClick:()=>u(Math.max(0,c-1)),disabled:c===0,className:`px-6 py-2 rounded-lg font-medium ${c===0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Əvvəlki"}),o.jsxs("div",{className:"flex items-center space-x-4",children:[T()>0&&o.jsxs("div",{className:"flex items-center space-x-2 text-orange-600",children:[o.jsx(ro,{className:"w-4 h-4"}),o.jsxs("span",{className:"text-sm font-medium",children:[T()," cavabsız sual"]})]}),o.jsx("button",{onClick:y,className:"px-8 py-3 bg-gradient-to-r from-green-500 to-blue-600 text-white rounded-lg font-semibold hover:from-green-600 hover:to-blue-700 transition-all duration-200",children:"İmtahanı Bitir"})]}),o.jsx("button",{onClick:()=>u(Math.min(i.length-1,c+1)),disabled:c===i.length-1,className:`px-6 py-2 rounded-lg font-medium ${c===i.length-1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Növbəti"})]})]}),o.jsxs("div",{className:"mt-4 sm:mt-6 bg-white rounded-xl shadow-lg p-4 sm:p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Suallar"}),o.jsx("div",{className:"grid grid-cols-5 sm:grid-cols-8 md:grid-cols-10 gap-2",children:i.map((C,I)=>o.jsx("button",{onClick:()=>u(I),className:`aspect-square rounded-lg font-medium text-sm transition-all duration-200 ${I===c?"bg-blue-600 text-white":d[I]!==void 0?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:I+1},I))})]}),k&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-xl p-8 max-w-md mx-4",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center mr-4",children:o.jsx(ro,{className:"w-6 h-6 text-orange-600"})}),o.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"İmtahanı bitirmək istəyirsiniz?"})]}),o.jsxs("p",{className:"text-gray-600 mb-6",children:[T()," sual cavabsız qalıb. İmtahanı indi bitirməyə əminsizmi?"]}),o.jsxs("div",{className:"flex space-x-4",children:[o.jsx("button",{onClick:()=>P(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Davam et"}),o.jsx("button",{onClick:b,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Bitir"})]})]})})]})},ZA=({score:t,totalQuestions:e,timeSpent:n,timeLimit:r,onRetakeExam:s,onBackToHome:i})=>{const a=Math.round(t/e*100),c=p=>{const g=Math.floor(p/60),N=p%60;return`${g}:${N.toString().padStart(2,"0")}`},d=a>=90?{grade:"Əla",color:"text-green-600",bg:"bg-green-50",icon:wn}:a>=80?{grade:"Yaxşı",color:"text-blue-600",bg:"bg-blue-50",icon:Lt}:a>=70?{grade:"Orta",color:"text-yellow-600",bg:"bg-yellow-50",icon:zr}:a>=60?{grade:"Kəmçalı",color:"text-orange-600",bg:"bg-orange-50",icon:yy}:{grade:"Zəif",color:"text-red-600",bg:"bg-red-50",icon:yy},m=d.icon;return o.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"flex items-center justify-center mb-4",children:o.jsx("div",{className:`p-4 ${d.bg} rounded-full`,children:o.jsx(m,{className:`w-12 h-12 ${d.color}`})})}),o.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"İmtahan Nəticəsi"}),o.jsx("p",{className:"text-gray-600 text-lg",children:"Peşəkar imtahanınız tamamlandı!"})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsxs("div",{className:`inline-flex items-center space-x-3 px-6 py-3 ${d.bg} rounded-full mb-4`,children:[o.jsx(m,{className:`w-6 h-6 ${d.color}`}),o.jsx("span",{className:`text-2xl font-bold ${d.color}`,children:d.grade})]}),o.jsxs("div",{className:"mb-6",children:[o.jsxs("div",{className:"text-6xl font-bold text-gray-800 mb-2",children:[a,"%"]}),o.jsxs("p",{className:"text-xl text-gray-600",children:[t," / ",e," doğru cavab"]})]}),o.jsxs("div",{className:"relative w-32 h-32 mx-auto mb-6",children:[o.jsxs("svg",{className:"transform -rotate-90 w-32 h-32",viewBox:"0 0 36 36",children:[o.jsx("path",{d:"m18,2.0845 a 15.9155,15.9155 0 0,1 0,31.831 a 15.9155,15.9155 0 0,1 0,-31.831",fill:"none",stroke:"#e5e7eb",strokeWidth:"2"}),o.jsx("path",{d:"m18,2.0845 a 15.9155,15.9155 0 0,1 0,31.831 a 15.9155,15.9155 0 0,1 0,-31.831",fill:"none",stroke:a>=80?"#10b981":a>=60?"#f59e0b":"#ef4444",strokeWidth:"2",strokeDasharray:`${a}, 100`,strokeLinecap:"round"})]}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsxs("span",{className:"text-xl font-bold text-gray-800",children:[a,"%"]})})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 text-center",children:[o.jsx(Mh,{className:"w-8 h-8 text-blue-600 mx-auto mb-3"}),o.jsx("h3",{className:"font-semibold text-gray-800 mb-1",children:"Doğruluq"}),o.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[a,"%"]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-6 text-center",children:[o.jsx(bi,{className:"w-8 h-8 text-purple-600 mx-auto mb-3"}),o.jsx("h3",{className:"font-semibold text-gray-800 mb-1",children:"Vaxt"}),o.jsx("p",{className:"text-2xl font-bold text-purple-600",children:c(n)}),o.jsxs("p",{className:"text-sm text-gray-600",children:["/ ",r," dəqiqə"]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-6 text-center",children:[o.jsx(Lt,{className:"w-8 h-8 text-green-600 mx-auto mb-3"}),o.jsx("h3",{className:"font-semibold text-gray-800 mb-1",children:"Cavablar"}),o.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[t," / ",e]})]})]}),o.jsxs("div",{className:`${d.bg} rounded-xl p-6 text-center mb-8`,children:[o.jsxs("h3",{className:`text-lg font-semibold ${d.color} mb-2`,children:[a>=90&&"Əla nəticə! Mükəmməl performans göstərdiniz!",a>=80&&a<90&&"Çox yaxşı! Bilikləriniz kifayət qədər yaxşıdır.",a>=70&&a<80&&"Yaxşı nəticə, lakin daha da yaxşılaşdıra bilərsiniz.",a>=60&&a<70&&"Orta nəticə. Daha çox məşq etməlisiniz.",a<60&&"Daha çox öyrənməyə ehtiyacınız var. Məşq etməyə davam edin!"]}),o.jsx("p",{className:`${d.color} opacity-80`,children:a>=80?"Biliklərinizlə fəxr edə bilərsiniz!":"Təkmilləşdirmək üçün daha çox məşq edin."})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[o.jsxs("button",{onClick:s,className:"flex items-center justify-center space-x-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white px-8 py-4 rounded-xl font-semibold text-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105",children:[o.jsx(Cf,{className:"w-5 h-5"}),o.jsx("span",{children:"Yenidən Cəhd Et"})]}),o.jsxs("button",{onClick:i,className:"flex items-center justify-center space-x-3 bg-gradient-to-r from-gray-500 to-gray-600 text-white px-8 py-4 rounded-xl font-semibold text-lg hover:from-gray-600 hover:to-gray-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105",children:[o.jsx(O1,{className:"w-5 h-5"}),o.jsx("span",{children:"Ana Səhifə"})]})]})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Təkmilləşdirmək üçün məsləhətlər:"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mt-0.5",children:o.jsx("span",{className:"text-blue-600 text-sm font-semibold",children:"1"})}),o.jsx("p",{className:"text-gray-600",children:"Səhv etdiyiniz sözləri bir daha məşq edin"})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mt-0.5",children:o.jsx("span",{className:"text-blue-600 text-sm font-semibold",children:"2"})}),o.jsx("p",{className:"text-gray-600",children:"Yeni söz kolleksiyaları yaradın"})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mt-0.5",children:o.jsx("span",{className:"text-blue-600 text-sm font-semibold",children:"3"})}),o.jsx("p",{className:"text-gray-600",children:"Mütəmadi olaraq təkrar edin"})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mt-0.5",children:o.jsx("span",{className:"text-blue-600 text-sm font-semibold",children:"4"})}),o.jsx("p",{className:"text-gray-600",children:"Müxtəlif kolleksiyalardan imtahan verin"})]})]})]})]})},eP=()=>{const{currentUser:t}=Xt(),[e,n]=L.useState("login");return t?o.jsx(tP,{}):e==="login"?o.jsx(GA,{onSwitchToRegister:()=>n("register")}):o.jsx(KA,{onSwitchToLogin:()=>n("login")})},tP=()=>{const{currentUser:t}=Xt(),[e,n]=L.useState([]),[r,s]=L.useState([]),[i,a]=L.useState({autoAdvance:!0,quizMode:"english-to-meaning"}),[c,u]=L.useState("home"),[d,m]=L.useState(null),[p,g]=L.useState(!1),[N,j]=L.useState(null),[k,P]=L.useState(null),[_,w]=L.useState(null),[E,A]=L.useState(null),[D,V]=L.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}});L.useEffect(()=>{b(),a(j1())},[t]);const b=async()=>{if(t){const{loadUserCollections:$,getLearnedCollections:G}=await mn(async()=>{const{loadUserCollections:oe,getLearnedCollections:we}=await Promise.resolve().then(()=>fn);return{loadUserCollections:oe,getLearnedCollections:we}},void 0),te=await $(t.id);n(te);try{const we=(await G(t.id)).flatMap(Me=>Me.embeddedData?Me.embeddedData.words:[]);s(we)}catch(oe){console.log("No learned words yet:",oe),s([])}}},y=$=>{a($),k1($)},x=async $=>{if(t){const{saveCollection:G}=await mn(async()=>{const{saveCollection:oe}=await Promise.resolve().then(()=>fn);return{saveCollection:oe}},void 0),te=await G(t.id,t.username,$);n(oe=>[te,...oe]),u("collections")}},S=$=>{m($),g(!0)},T=$=>{a(G=>({...G,quizMode:$})),g(!1),u("quiz")},C=$=>{j($),u("result")},I=()=>{u("quiz")},ee=()=>{u("home"),m(null),j(null),P(null),w(null),A(null)},H=async $=>{var oe;let G=null;if(t)try{const{savePublicExam:we}=await mn(async()=>{const{savePublicExam:tr}=await Promise.resolve().then(()=>fn);return{savePublicExam:tr}},void 0),Me=$.name||`İmtahan ${new Date().toLocaleString("az-AZ")}`,Zn={...$,name:Me},er=await we(t.id,t.username,Zn,e);G=er.id,console.log("✅ Exam saved to database:",er.id,$.isPublic?"(Public)":"(Private)"),console.log("🔍 DEBUG: Saved exam details:",{savedExamId:er.id,embeddedWords:((oe=er.embeddedWords)==null?void 0:oe.length)||0,collectionsUsed:e.length})}catch(we){console.error("❌ Error saving exam:",we)}const te={...$,publicExamId:G};P(te),u("exam-active")},F=async($,G,te)=>{if(t)try{const{saveExamResult:we,trackExamParticipation:Me}=await mn(async()=>{const{saveExamResult:er,trackExamParticipation:tr}=await Promise.resolve().then(()=>fn);return{saveExamResult:er,trackExamParticipation:tr}},void 0);await we(t.id,$,G,te,k),console.log("✅ Exam result saved for user:",t.id);const Zn=(k==null?void 0:k.publicExamId)||(_==null?void 0:_.id);console.log("🔍 DEBUG: Tracking participation:",{publicExamId:k==null?void 0:k.publicExamId,currentPublicExamId:_==null?void 0:_.id,examIdToTrack:Zn,userId:t.id}),Zn?(await Me(t.id,Zn,$,G,te),console.log("✅ Exam participation tracked for exam:",Zn)):console.log("⚠️ No exam ID to track participation for!")}catch(we){console.error("❌ Error saving exam result:",we)}const oe=(k==null?void 0:k.publicExamId)||(_==null?void 0:_.id);if(oe)try{const{updateExamStats:we}=await mn(async()=>{const{updateExamStats:Me}=await Promise.resolve().then(()=>fn);return{updateExamStats:Me}},void 0);await we(oe,$,G),console.log("✅ Public exam stats updated:",oe)}catch(we){console.error("❌ Error updating exam stats:",we)}A({score:$,total:G,timeSpent:te,timeLimit:(k==null?void 0:k.timeLimit)||10}),u("exam-result")},xe=()=>{A(null),k!=null&&k.publicExamId||k!=null&&k.isPublic?(console.log("🔄 Retaking exam with same settings"),u("exam-active")):(console.log("🔄 Going back to exam setup"),u("exam"))},B=async $=>{if(t){const{markCollectionAsLearned:G}=await mn(async()=>{const{markCollectionAsLearned:te}=await Promise.resolve().then(()=>fn);return{markCollectionAsLearned:te}},void 0);await G(t.id,$),b()}},Y=async()=>{if(t){const{loadUserCollections:$}=await mn(async()=>{const{loadUserCollections:te}=await Promise.resolve().then(()=>fn);return{loadUserCollections:te}},void 0),G=await $(t.id);n(G)}u("exam")},X=async $=>{if(t)try{const{getUserExamResults:G}=await mn(async()=>{const{getUserExamResults:oe}=await Promise.resolve().then(()=>fn);return{getUserExamResults:oe}},void 0),te=await G(t.id,$.id);if(te.length>0){V({isOpen:!0,title:"Bu imtahanda əvvəllər iştirak etmisiniz!",message:"Yenidən cəhd etmək istəyirsiniz?",bestScore:te[0].scorePercentage,totalAttempts:te.length,recentResults:te.slice(0,3).map(oe=>({scorePercentage:oe.scorePercentage,participatedAt:oe.participatedAt,score:oe.score,totalQuestions:oe.totalQuestions})),onConfirm:()=>{V(oe=>({...oe,isOpen:!1})),ie($)}});return}}catch(G){console.error("❌ Error checking previous results:",G)}ie($)},ie=async $=>{var te;const G={...$.settings,isPublic:!1,publicExamId:$.id};if(t){const{loadUserCollections:oe}=await mn(async()=>{const{loadUserCollections:Me}=await Promise.resolve().then(()=>fn);return{loadUserCollections:Me}},void 0),we=await oe(t.id);n(we)}console.log("🚀 Starting public exam:",$.name,"ID:",$.id),console.log("🔍 DEBUG: Taking public exam:",{examId:$.id,examName:$.name,hasEmbeddedWords:!!$.embeddedWords,embeddedWordsCount:((te=$.embeddedWords)==null?void 0:te.length)||0,examSettingsPublicExamId:G.publicExamId}),P(G),w($),u("exam-active")};return o.jsxs("div",{className:"min-h-screen",children:[c==="home"&&o.jsx(DA,{onNavigateToCollections:()=>u("collections"),onNavigateToAllCollections:()=>u("all-collections"),onNavigateToLeaderboard:()=>u("leaderboard"),onNavigateToExam:Y,onNavigateToAllExams:()=>u("all-exams"),onNavigateToMyExams:()=>u("my-exams"),onNavigateToSettings:()=>u("settings"),onNavigateToAITeacher:()=>u("ai-teacher"),onTakeExam:X,onPlayQuiz:S}),c==="collections"&&o.jsx(MA,{onBack:ee,onNavigateToAllCollections:()=>u("all-collections"),onPlayQuiz:S,onSaveCollection:x}),c==="all-collections"&&o.jsx(LA,{onBack:ee,onPlayQuiz:S}),c==="all-exams"&&o.jsx(OA,{onBack:()=>u("my-exams"),onTakeExam:X}),c==="my-exams"&&o.jsx(UA,{onBack:ee,onTakeExam:X,onNavigateToAllExams:()=>u("all-exams"),onNavigateToCreateExam:Y}),c==="leaderboard"&&o.jsx(FA,{onBack:ee}),c==="quiz"&&d&&o.jsx($A,{collection:d,autoAdvance:i.autoAdvance,quizMode:i.quizMode,onBack:()=>u("collections"),onFinish:C}),c==="result"&&N&&d&&o.jsx(BA,{result:N,collection:d,onPlayAgain:I,onBackHome:ee,onMarkAsLearned:B}),c==="settings"&&o.jsx(qA,{settings:i,onUpdateSettings:y,onBack:ee}),c==="ai-teacher"&&o.jsx(HA,{onBack:ee,userCollections:e,learnedWords:r}),c==="exam"&&o.jsx(QA,{collections:e,onBack:ee,onStartExam:H}),c==="exam-active"&&k&&o.jsx(JA,{collections:e,examSettings:k,publicExam:_,onFinish:F,onBack:()=>u("exam")}),c==="exam-result"&&E&&o.jsx(ZA,{score:E.score,totalQuestions:E.total,timeSpent:E.timeSpent,timeLimit:E.timeLimit,onRetakeExam:xe,onBackToHome:ee}),o.jsx(YA,{isOpen:D.isOpen,onClose:()=>V($=>({...$,isOpen:!1})),onConfirm:D.onConfirm,title:D.title,message:D.message,bestScore:D.bestScore,totalAttempts:D.totalAttempts,recentResults:D.recentResults}),o.jsx(XA,{isOpen:p,onClose:()=>g(!1),onSelectMode:T,currentMode:i.quizMode})]})};function nP(){return o.jsx(RA,{children:o.jsx(eP,{})})}Mv(document.getElementById("root")).render(o.jsx(L.StrictMode,{children:o.jsx(nP,{})}));
