(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var oy={exports:{}},mc={},ay={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yo=Symbol.for("react.element"),X1=Symbol.for("react.portal"),J1=Symbol.for("react.fragment"),Z1=Symbol.for("react.strict_mode"),eE=Symbol.for("react.profiler"),tE=Symbol.for("react.provider"),nE=Symbol.for("react.context"),rE=Symbol.for("react.forward_ref"),sE=Symbol.for("react.suspense"),iE=Symbol.for("react.memo"),oE=Symbol.for("react.lazy"),gp=Symbol.iterator;function aE(t){return t===null||typeof t!="object"?null:(t=gp&&t[gp]||t["@@iterator"],typeof t=="function"?t:null)}var ly={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cy=Object.assign,uy={};function vi(t,e,n){this.props=t,this.context=e,this.refs=uy,this.updater=n||ly}vi.prototype.isReactComponent={};vi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};vi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function dy(){}dy.prototype=vi.prototype;function Nh(t,e,n){this.props=t,this.context=e,this.refs=uy,this.updater=n||ly}var Sh=Nh.prototype=new dy;Sh.constructor=Nh;cy(Sh,vi.prototype);Sh.isPureReactComponent=!0;var yp=Array.isArray,hy=Object.prototype.hasOwnProperty,bh={current:null},fy={key:!0,ref:!0,__self:!0,__source:!0};function my(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)hy.call(e,r)&&!fy.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:Yo,type:t,key:i,ref:o,props:s,_owner:bh.current}}function lE(t,e){return{$$typeof:Yo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ch(t){return typeof t=="object"&&t!==null&&t.$$typeof===Yo}function cE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var vp=/\/+/g;function Tu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?cE(""+t.key):e.toString(36)}function rl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Yo:case X1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Tu(o,0):r,yp(s)?(n="",t!=null&&(n=t.replace(vp,"$&/")+"/"),rl(s,e,n,"",function(d){return d})):s!=null&&(Ch(s)&&(s=lE(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(vp,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",yp(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+Tu(i,c);o+=rl(i,e,n,u,s)}else if(u=aE(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+Tu(i,c++),o+=rl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ja(t,e,n){if(t==null)return t;var r=[],s=0;return rl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function uE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var yt={current:null},sl={transition:null},dE={ReactCurrentDispatcher:yt,ReactCurrentBatchConfig:sl,ReactCurrentOwner:bh};function py(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:ja,forEach:function(t,e,n){ja(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ja(t,function(){e++}),e},toArray:function(t){return ja(t,function(e){return e})||[]},only:function(t){if(!Ch(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Component=vi;re.Fragment=J1;re.Profiler=eE;re.PureComponent=Nh;re.StrictMode=Z1;re.Suspense=sE;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dE;re.act=py;re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=cy({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=bh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)hy.call(e,u)&&!fy.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:Yo,type:t.type,key:s,ref:i,props:r,_owner:o}};re.createContext=function(t){return t={$$typeof:nE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:tE,_context:t},t.Consumer=t};re.createElement=my;re.createFactory=function(t){var e=my.bind(null,t);return e.type=t,e};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:rE,render:t}};re.isValidElement=Ch;re.lazy=function(t){return{$$typeof:oE,_payload:{_status:-1,_result:t},_init:uE}};re.memo=function(t,e){return{$$typeof:iE,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=sl.transition;sl.transition={};try{t()}finally{sl.transition=e}};re.unstable_act=py;re.useCallback=function(t,e){return yt.current.useCallback(t,e)};re.useContext=function(t){return yt.current.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t){return yt.current.useDeferredValue(t)};re.useEffect=function(t,e){return yt.current.useEffect(t,e)};re.useId=function(){return yt.current.useId()};re.useImperativeHandle=function(t,e,n){return yt.current.useImperativeHandle(t,e,n)};re.useInsertionEffect=function(t,e){return yt.current.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return yt.current.useLayoutEffect(t,e)};re.useMemo=function(t,e){return yt.current.useMemo(t,e)};re.useReducer=function(t,e,n){return yt.current.useReducer(t,e,n)};re.useRef=function(t){return yt.current.useRef(t)};re.useState=function(t){return yt.current.useState(t)};re.useSyncExternalStore=function(t,e,n){return yt.current.useSyncExternalStore(t,e,n)};re.useTransition=function(){return yt.current.useTransition()};re.version="18.3.1";ay.exports=re;var F=ay.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hE=F,fE=Symbol.for("react.element"),mE=Symbol.for("react.fragment"),pE=Object.prototype.hasOwnProperty,gE=hE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yE={key:!0,ref:!0,__self:!0,__source:!0};function gy(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)pE.call(e,r)&&!yE.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:fE,type:t,key:i,ref:o,props:s,_owner:gE.current}}mc.Fragment=mE;mc.jsx=gy;mc.jsxs=gy;oy.exports=mc;var l=oy.exports,yy={exports:{}},jt={},vy={exports:{}},xy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,K){var Q=B.length;B.push(K);e:for(;0<Q;){var fe=Q-1>>>1,ue=B[fe];if(0<s(ue,K))B[fe]=K,B[Q]=ue,Q=fe;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var K=B[0],Q=B.pop();if(Q!==K){B[0]=Q;e:for(var fe=0,ue=B.length,Ie=ue>>>1;fe<Ie;){var Vt=2*(fe+1)-1,Lt=B[Vt],Wt=Vt+1,_n=B[Wt];if(0>s(Lt,Q))Wt<ue&&0>s(_n,Lt)?(B[fe]=_n,B[Wt]=Q,fe=Wt):(B[fe]=Lt,B[Vt]=Q,fe=Vt);else if(Wt<ue&&0>s(_n,Q))B[fe]=_n,B[Wt]=Q,fe=Wt;else break e}}return K}function s(B,K){var Q=B.sortIndex-K.sortIndex;return Q!==0?Q:B.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],m=1,p=null,g=3,I=!1,S=!1,P=!1,j=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(B){for(var K=n(d);K!==null;){if(K.callback===null)r(d);else if(K.startTime<=B)r(d),K.sortIndex=K.expirationTime,e(u,K);else break;K=n(d)}}function A(B){if(P=!1,E(B),!S)if(n(u)!==null)S=!0,z(D);else{var K=n(d);K!==null&&ae(A,K.startTime-B)}}function D(B,K){S=!1,P&&(P=!1,T(x),x=-1),I=!0;var Q=g;try{for(E(K),p=n(u);p!==null&&(!(p.expirationTime>K)||B&&!b());){var fe=p.callback;if(typeof fe=="function"){p.callback=null,g=p.priorityLevel;var ue=fe(p.expirationTime<=K);K=t.unstable_now(),typeof ue=="function"?p.callback=ue:p===n(u)&&r(u),E(K)}else r(u);p=n(u)}if(p!==null)var Ie=!0;else{var Vt=n(d);Vt!==null&&ae(A,Vt.startTime-K),Ie=!1}return Ie}finally{p=null,g=Q,I=!1}}var L=!1,_=null,x=-1,y=5,k=-1;function b(){return!(t.unstable_now()-k<y)}function C(){if(_!==null){var B=t.unstable_now();k=B;var K=!0;try{K=_(!0,B)}finally{K?N():(L=!1,_=null)}}else L=!1}var N;if(typeof w=="function")N=function(){w(C)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,he=J.port2;J.port1.onmessage=C,N=function(){he.postMessage(null)}}else N=function(){j(C,0)};function z(B){_=B,L||(L=!0,N())}function ae(B,K){x=j(function(){B(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){S||I||(S=!0,z(D))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(g){case 1:case 2:case 3:var K=3;break;default:K=g}var Q=g;g=K;try{return B()}finally{g=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,K){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Q=g;g=B;try{return K()}finally{g=Q}},t.unstable_scheduleCallback=function(B,K,Q){var fe=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?fe+Q:fe):Q=fe,B){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=Q+ue,B={id:m++,callback:K,priorityLevel:B,startTime:Q,expirationTime:ue,sortIndex:-1},Q>fe?(B.sortIndex=Q,e(d,B),n(u)===null&&B===n(d)&&(P?(T(x),x=-1):P=!0,ae(A,Q-fe))):(B.sortIndex=ue,e(u,B),S||I||(S=!0,z(D))),B},t.unstable_shouldYield=b,t.unstable_wrapCallback=function(B){var K=g;return function(){var Q=g;g=K;try{return B.apply(this,arguments)}finally{g=Q}}}})(xy);vy.exports=xy;var vE=vy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xE=F,Rt=vE;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _y=new Set,To={};function fs(t,e){Js(t,e),Js(t+"Capture",e)}function Js(t,e){for(To[t]=e,t=0;t<e.length;t++)_y.add(e[t])}var Dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ad=Object.prototype.hasOwnProperty,_E=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xp={},_p={};function wE(t){return ad.call(_p,t)?!0:ad.call(xp,t)?!1:_E.test(t)?_p[t]=!0:(xp[t]=!0,!1)}function EE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function TE(t,e,n,r){if(e===null||typeof e>"u"||EE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function vt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){et[t]=new vt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];et[e]=new vt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){et[t]=new vt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){et[t]=new vt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){et[t]=new vt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){et[t]=new vt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){et[t]=new vt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){et[t]=new vt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){et[t]=new vt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ah=/[\-:]([a-z])/g;function Ph(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ah,Ph);et[e]=new vt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ah,Ph);et[e]=new vt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ah,Ph);et[e]=new vt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){et[t]=new vt(t,1,!1,t.toLowerCase(),null,!1,!1)});et.xlinkHref=new vt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){et[t]=new vt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Rh(t,e,n,r){var s=et.hasOwnProperty(e)?et[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(TE(e,n,s,r)&&(n=null),r||s===null?wE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Bn=xE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Da=Symbol.for("react.element"),bs=Symbol.for("react.portal"),Cs=Symbol.for("react.fragment"),jh=Symbol.for("react.strict_mode"),ld=Symbol.for("react.profiler"),wy=Symbol.for("react.provider"),Ey=Symbol.for("react.context"),Dh=Symbol.for("react.forward_ref"),cd=Symbol.for("react.suspense"),ud=Symbol.for("react.suspense_list"),Vh=Symbol.for("react.memo"),Zn=Symbol.for("react.lazy"),Ty=Symbol.for("react.offscreen"),wp=Symbol.iterator;function Bi(t){return t===null||typeof t!="object"?null:(t=wp&&t[wp]||t["@@iterator"],typeof t=="function"?t:null)}var be=Object.assign,Iu;function Yi(t){if(Iu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Iu=e&&e[1]||""}return`
`+Iu+t}var ku=!1;function Nu(t,e){if(!t||ku)return"";ku=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,c=i.length-1;1<=o&&0<=c&&s[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==i[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{ku=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Yi(t):""}function IE(t){switch(t.tag){case 5:return Yi(t.type);case 16:return Yi("Lazy");case 13:return Yi("Suspense");case 19:return Yi("SuspenseList");case 0:case 2:case 15:return t=Nu(t.type,!1),t;case 11:return t=Nu(t.type.render,!1),t;case 1:return t=Nu(t.type,!0),t;default:return""}}function dd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Cs:return"Fragment";case bs:return"Portal";case ld:return"Profiler";case jh:return"StrictMode";case cd:return"Suspense";case ud:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ey:return(t.displayName||"Context")+".Consumer";case wy:return(t._context.displayName||"Context")+".Provider";case Dh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Vh:return e=t.displayName||null,e!==null?e:dd(t.type)||"Memo";case Zn:e=t._payload,t=t._init;try{return dd(t(e))}catch{}}return null}function kE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dd(e);case 8:return e===jh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Tr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Iy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function NE(t){var e=Iy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Va(t){t._valueTracker||(t._valueTracker=NE(t))}function ky(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Iy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function kl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function hd(t,e){var n=e.checked;return be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ep(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Tr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ny(t,e){e=e.checked,e!=null&&Rh(t,"checked",e,!1)}function fd(t,e){Ny(t,e);var n=Tr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?md(t,e.type,n):e.hasOwnProperty("defaultValue")&&md(t,e.type,Tr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Tp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function md(t,e,n){(e!=="number"||kl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Xi=Array.isArray;function zs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Tr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function pd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ip(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Xi(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Tr(n)}}function Sy(t,e){var n=Tr(e.value),r=Tr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function kp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function by(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?by(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var La,Cy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(La=La||document.createElement("div"),La.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=La.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Io(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var oo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},SE=["Webkit","ms","Moz","O"];Object.keys(oo).forEach(function(t){SE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),oo[e]=oo[t]})});function Ay(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||oo.hasOwnProperty(t)&&oo[t]?(""+e).trim():e+"px"}function Py(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Ay(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var bE=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yd(t,e){if(e){if(bE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function vd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xd=null;function Lh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _d=null,Bs=null,$s=null;function Np(t){if(t=Zo(t)){if(typeof _d!="function")throw Error(U(280));var e=t.stateNode;e&&(e=xc(e),_d(t.stateNode,t.type,e))}}function Ry(t){Bs?$s?$s.push(t):$s=[t]:Bs=t}function jy(){if(Bs){var t=Bs,e=$s;if($s=Bs=null,Np(t),e)for(t=0;t<e.length;t++)Np(e[t])}}function Dy(t,e){return t(e)}function Vy(){}var Su=!1;function Ly(t,e,n){if(Su)return t(e,n);Su=!0;try{return Dy(t,e,n)}finally{Su=!1,(Bs!==null||$s!==null)&&(Vy(),jy())}}function ko(t,e){var n=t.stateNode;if(n===null)return null;var r=xc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var wd=!1;if(Dn)try{var $i={};Object.defineProperty($i,"passive",{get:function(){wd=!0}}),window.addEventListener("test",$i,$i),window.removeEventListener("test",$i,$i)}catch{wd=!1}function CE(t,e,n,r,s,i,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(m){this.onError(m)}}var ao=!1,Nl=null,Sl=!1,Ed=null,AE={onError:function(t){ao=!0,Nl=t}};function PE(t,e,n,r,s,i,o,c,u){ao=!1,Nl=null,CE.apply(AE,arguments)}function RE(t,e,n,r,s,i,o,c,u){if(PE.apply(this,arguments),ao){if(ao){var d=Nl;ao=!1,Nl=null}else throw Error(U(198));Sl||(Sl=!0,Ed=d)}}function ms(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Oy(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Sp(t){if(ms(t)!==t)throw Error(U(188))}function jE(t){var e=t.alternate;if(!e){if(e=ms(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Sp(s),t;if(i===r)return Sp(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function My(t){return t=jE(t),t!==null?Fy(t):null}function Fy(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Fy(t);if(e!==null)return e;t=t.sibling}return null}var Uy=Rt.unstable_scheduleCallback,bp=Rt.unstable_cancelCallback,DE=Rt.unstable_shouldYield,VE=Rt.unstable_requestPaint,je=Rt.unstable_now,LE=Rt.unstable_getCurrentPriorityLevel,Oh=Rt.unstable_ImmediatePriority,zy=Rt.unstable_UserBlockingPriority,bl=Rt.unstable_NormalPriority,OE=Rt.unstable_LowPriority,By=Rt.unstable_IdlePriority,pc=null,dn=null;function ME(t){if(dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(pc,t,void 0,(t.current.flags&128)===128)}catch{}}var en=Math.clz32?Math.clz32:zE,FE=Math.log,UE=Math.LN2;function zE(t){return t>>>=0,t===0?32:31-(FE(t)/UE|0)|0}var Oa=64,Ma=4194304;function Ji(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Cl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=Ji(c):(i&=o,i!==0&&(r=Ji(i)))}else o=n&~s,o!==0?r=Ji(o):i!==0&&(r=Ji(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-en(e),s=1<<n,r|=t[n],e&=~s;return r}function BE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $E(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-en(i),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=BE(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function Td(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $y(){var t=Oa;return Oa<<=1,!(Oa&4194240)&&(Oa=64),t}function bu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Xo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-en(e),t[e]=n}function qE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-en(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Mh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-en(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var pe=0;function qy(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Hy,Fh,Wy,Ky,Gy,Id=!1,Fa=[],ur=null,dr=null,hr=null,No=new Map,So=new Map,tr=[],HE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cp(t,e){switch(t){case"focusin":case"focusout":ur=null;break;case"dragenter":case"dragleave":dr=null;break;case"mouseover":case"mouseout":hr=null;break;case"pointerover":case"pointerout":No.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":So.delete(e.pointerId)}}function qi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Zo(e),e!==null&&Fh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function WE(t,e,n,r,s){switch(e){case"focusin":return ur=qi(ur,t,e,n,r,s),!0;case"dragenter":return dr=qi(dr,t,e,n,r,s),!0;case"mouseover":return hr=qi(hr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return No.set(i,qi(No.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,So.set(i,qi(So.get(i)||null,t,e,n,r,s)),!0}return!1}function Qy(t){var e=Wr(t.target);if(e!==null){var n=ms(e);if(n!==null){if(e=n.tag,e===13){if(e=Oy(n),e!==null){t.blockedOn=e,Gy(t.priority,function(){Wy(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function il(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=kd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);xd=r,n.target.dispatchEvent(r),xd=null}else return e=Zo(n),e!==null&&Fh(e),t.blockedOn=n,!1;e.shift()}return!0}function Ap(t,e,n){il(t)&&n.delete(e)}function KE(){Id=!1,ur!==null&&il(ur)&&(ur=null),dr!==null&&il(dr)&&(dr=null),hr!==null&&il(hr)&&(hr=null),No.forEach(Ap),So.forEach(Ap)}function Hi(t,e){t.blockedOn===e&&(t.blockedOn=null,Id||(Id=!0,Rt.unstable_scheduleCallback(Rt.unstable_NormalPriority,KE)))}function bo(t){function e(s){return Hi(s,t)}if(0<Fa.length){Hi(Fa[0],t);for(var n=1;n<Fa.length;n++){var r=Fa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ur!==null&&Hi(ur,t),dr!==null&&Hi(dr,t),hr!==null&&Hi(hr,t),No.forEach(e),So.forEach(e),n=0;n<tr.length;n++)r=tr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<tr.length&&(n=tr[0],n.blockedOn===null);)Qy(n),n.blockedOn===null&&tr.shift()}var qs=Bn.ReactCurrentBatchConfig,Al=!0;function GE(t,e,n,r){var s=pe,i=qs.transition;qs.transition=null;try{pe=1,Uh(t,e,n,r)}finally{pe=s,qs.transition=i}}function QE(t,e,n,r){var s=pe,i=qs.transition;qs.transition=null;try{pe=4,Uh(t,e,n,r)}finally{pe=s,qs.transition=i}}function Uh(t,e,n,r){if(Al){var s=kd(t,e,n,r);if(s===null)Mu(t,e,r,Pl,n),Cp(t,r);else if(WE(s,t,e,n,r))r.stopPropagation();else if(Cp(t,r),e&4&&-1<HE.indexOf(t)){for(;s!==null;){var i=Zo(s);if(i!==null&&Hy(i),i=kd(t,e,n,r),i===null&&Mu(t,e,r,Pl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Mu(t,e,r,null,n)}}var Pl=null;function kd(t,e,n,r){if(Pl=null,t=Lh(r),t=Wr(t),t!==null)if(e=ms(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Oy(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Pl=t,null}function Yy(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(LE()){case Oh:return 1;case zy:return 4;case bl:case OE:return 16;case By:return 536870912;default:return 16}default:return 16}}var ar=null,zh=null,ol=null;function Xy(){if(ol)return ol;var t,e=zh,n=e.length,r,s="value"in ar?ar.value:ar.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ol=s.slice(t,1<r?1-r:void 0)}function al(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ua(){return!0}function Pp(){return!1}function Dt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ua:Pp,this.isPropagationStopped=Pp,this}return be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ua)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ua)},persist:function(){},isPersistent:Ua}),e}var xi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bh=Dt(xi),Jo=be({},xi,{view:0,detail:0}),YE=Dt(Jo),Cu,Au,Wi,gc=be({},Jo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$h,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Wi&&(Wi&&t.type==="mousemove"?(Cu=t.screenX-Wi.screenX,Au=t.screenY-Wi.screenY):Au=Cu=0,Wi=t),Cu)},movementY:function(t){return"movementY"in t?t.movementY:Au}}),Rp=Dt(gc),XE=be({},gc,{dataTransfer:0}),JE=Dt(XE),ZE=be({},Jo,{relatedTarget:0}),Pu=Dt(ZE),eT=be({},xi,{animationName:0,elapsedTime:0,pseudoElement:0}),tT=Dt(eT),nT=be({},xi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),rT=Dt(nT),sT=be({},xi,{data:0}),jp=Dt(sT),iT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=aT[t])?!!e[t]:!1}function $h(){return lT}var cT=be({},Jo,{key:function(t){if(t.key){var e=iT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=al(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?oT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$h,charCode:function(t){return t.type==="keypress"?al(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?al(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),uT=Dt(cT),dT=be({},gc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dp=Dt(dT),hT=be({},Jo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$h}),fT=Dt(hT),mT=be({},xi,{propertyName:0,elapsedTime:0,pseudoElement:0}),pT=Dt(mT),gT=be({},gc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),yT=Dt(gT),vT=[9,13,27,32],qh=Dn&&"CompositionEvent"in window,lo=null;Dn&&"documentMode"in document&&(lo=document.documentMode);var xT=Dn&&"TextEvent"in window&&!lo,Jy=Dn&&(!qh||lo&&8<lo&&11>=lo),Vp=" ",Lp=!1;function Zy(t,e){switch(t){case"keyup":return vT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ev(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var As=!1;function _T(t,e){switch(t){case"compositionend":return ev(e);case"keypress":return e.which!==32?null:(Lp=!0,Vp);case"textInput":return t=e.data,t===Vp&&Lp?null:t;default:return null}}function wT(t,e){if(As)return t==="compositionend"||!qh&&Zy(t,e)?(t=Xy(),ol=zh=ar=null,As=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Jy&&e.locale!=="ko"?null:e.data;default:return null}}var ET={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Op(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ET[t.type]:e==="textarea"}function tv(t,e,n,r){Ry(r),e=Rl(e,"onChange"),0<e.length&&(n=new Bh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var co=null,Co=null;function TT(t){hv(t,0)}function yc(t){var e=js(t);if(ky(e))return t}function IT(t,e){if(t==="change")return e}var nv=!1;if(Dn){var Ru;if(Dn){var ju="oninput"in document;if(!ju){var Mp=document.createElement("div");Mp.setAttribute("oninput","return;"),ju=typeof Mp.oninput=="function"}Ru=ju}else Ru=!1;nv=Ru&&(!document.documentMode||9<document.documentMode)}function Fp(){co&&(co.detachEvent("onpropertychange",rv),Co=co=null)}function rv(t){if(t.propertyName==="value"&&yc(Co)){var e=[];tv(e,Co,t,Lh(t)),Ly(TT,e)}}function kT(t,e,n){t==="focusin"?(Fp(),co=e,Co=n,co.attachEvent("onpropertychange",rv)):t==="focusout"&&Fp()}function NT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yc(Co)}function ST(t,e){if(t==="click")return yc(e)}function bT(t,e){if(t==="input"||t==="change")return yc(e)}function CT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nn=typeof Object.is=="function"?Object.is:CT;function Ao(t,e){if(nn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ad.call(e,s)||!nn(t[s],e[s]))return!1}return!0}function Up(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zp(t,e){var n=Up(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Up(n)}}function sv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?sv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function iv(){for(var t=window,e=kl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=kl(t.document)}return e}function Hh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function AT(t){var e=iv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&sv(n.ownerDocument.documentElement,n)){if(r!==null&&Hh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=zp(n,i);var o=zp(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var PT=Dn&&"documentMode"in document&&11>=document.documentMode,Ps=null,Nd=null,uo=null,Sd=!1;function Bp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Sd||Ps==null||Ps!==kl(r)||(r=Ps,"selectionStart"in r&&Hh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),uo&&Ao(uo,r)||(uo=r,r=Rl(Nd,"onSelect"),0<r.length&&(e=new Bh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ps)))}function za(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Rs={animationend:za("Animation","AnimationEnd"),animationiteration:za("Animation","AnimationIteration"),animationstart:za("Animation","AnimationStart"),transitionend:za("Transition","TransitionEnd")},Du={},ov={};Dn&&(ov=document.createElement("div").style,"AnimationEvent"in window||(delete Rs.animationend.animation,delete Rs.animationiteration.animation,delete Rs.animationstart.animation),"TransitionEvent"in window||delete Rs.transitionend.transition);function vc(t){if(Du[t])return Du[t];if(!Rs[t])return t;var e=Rs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ov)return Du[t]=e[n];return t}var av=vc("animationend"),lv=vc("animationiteration"),cv=vc("animationstart"),uv=vc("transitionend"),dv=new Map,$p="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(t,e){dv.set(t,e),fs(e,[t])}for(var Vu=0;Vu<$p.length;Vu++){var Lu=$p[Vu],RT=Lu.toLowerCase(),jT=Lu[0].toUpperCase()+Lu.slice(1);Pr(RT,"on"+jT)}Pr(av,"onAnimationEnd");Pr(lv,"onAnimationIteration");Pr(cv,"onAnimationStart");Pr("dblclick","onDoubleClick");Pr("focusin","onFocus");Pr("focusout","onBlur");Pr(uv,"onTransitionEnd");Js("onMouseEnter",["mouseout","mouseover"]);Js("onMouseLeave",["mouseout","mouseover"]);Js("onPointerEnter",["pointerout","pointerover"]);Js("onPointerLeave",["pointerout","pointerover"]);fs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fs("onBeforeInput",["compositionend","keypress","textInput","paste"]);fs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zi));function qp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,RE(r,e,void 0,t),t.currentTarget=null}function hv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;qp(s,c,d),i=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;qp(s,c,d),i=u}}}if(Sl)throw t=Ed,Sl=!1,Ed=null,t}function we(t,e){var n=e[Rd];n===void 0&&(n=e[Rd]=new Set);var r=t+"__bubble";n.has(r)||(fv(e,t,2,!1),n.add(r))}function Ou(t,e,n){var r=0;e&&(r|=4),fv(n,t,r,e)}var Ba="_reactListening"+Math.random().toString(36).slice(2);function Po(t){if(!t[Ba]){t[Ba]=!0,_y.forEach(function(n){n!=="selectionchange"&&(DT.has(n)||Ou(n,!1,t),Ou(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ba]||(e[Ba]=!0,Ou("selectionchange",!1,e))}}function fv(t,e,n,r){switch(Yy(e)){case 1:var s=GE;break;case 4:s=QE;break;default:s=Uh}n=s.bind(null,e,n,t),s=void 0,!wd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Mu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=Wr(c),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}c=c.parentNode}}r=r.return}Ly(function(){var d=i,m=Lh(n),p=[];e:{var g=dv.get(t);if(g!==void 0){var I=Bh,S=t;switch(t){case"keypress":if(al(n)===0)break e;case"keydown":case"keyup":I=uT;break;case"focusin":S="focus",I=Pu;break;case"focusout":S="blur",I=Pu;break;case"beforeblur":case"afterblur":I=Pu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=Rp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=JE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=fT;break;case av:case lv:case cv:I=tT;break;case uv:I=pT;break;case"scroll":I=YE;break;case"wheel":I=yT;break;case"copy":case"cut":case"paste":I=rT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=Dp}var P=(e&4)!==0,j=!P&&t==="scroll",T=P?g!==null?g+"Capture":null:g;P=[];for(var w=d,E;w!==null;){E=w;var A=E.stateNode;if(E.tag===5&&A!==null&&(E=A,T!==null&&(A=ko(w,T),A!=null&&P.push(Ro(w,A,E)))),j)break;w=w.return}0<P.length&&(g=new I(g,S,null,n,m),p.push({event:g,listeners:P}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",g&&n!==xd&&(S=n.relatedTarget||n.fromElement)&&(Wr(S)||S[Vn]))break e;if((I||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,I?(S=n.relatedTarget||n.toElement,I=d,S=S?Wr(S):null,S!==null&&(j=ms(S),S!==j||S.tag!==5&&S.tag!==6)&&(S=null)):(I=null,S=d),I!==S)){if(P=Rp,A="onMouseLeave",T="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(P=Dp,A="onPointerLeave",T="onPointerEnter",w="pointer"),j=I==null?g:js(I),E=S==null?g:js(S),g=new P(A,w+"leave",I,n,m),g.target=j,g.relatedTarget=E,A=null,Wr(m)===d&&(P=new P(T,w+"enter",S,n,m),P.target=E,P.relatedTarget=j,A=P),j=A,I&&S)t:{for(P=I,T=S,w=0,E=P;E;E=Ts(E))w++;for(E=0,A=T;A;A=Ts(A))E++;for(;0<w-E;)P=Ts(P),w--;for(;0<E-w;)T=Ts(T),E--;for(;w--;){if(P===T||T!==null&&P===T.alternate)break t;P=Ts(P),T=Ts(T)}P=null}else P=null;I!==null&&Hp(p,g,I,P,!1),S!==null&&j!==null&&Hp(p,j,S,P,!0)}}e:{if(g=d?js(d):window,I=g.nodeName&&g.nodeName.toLowerCase(),I==="select"||I==="input"&&g.type==="file")var D=IT;else if(Op(g))if(nv)D=bT;else{D=NT;var L=kT}else(I=g.nodeName)&&I.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(D=ST);if(D&&(D=D(t,d))){tv(p,D,n,m);break e}L&&L(t,g,d),t==="focusout"&&(L=g._wrapperState)&&L.controlled&&g.type==="number"&&md(g,"number",g.value)}switch(L=d?js(d):window,t){case"focusin":(Op(L)||L.contentEditable==="true")&&(Ps=L,Nd=d,uo=null);break;case"focusout":uo=Nd=Ps=null;break;case"mousedown":Sd=!0;break;case"contextmenu":case"mouseup":case"dragend":Sd=!1,Bp(p,n,m);break;case"selectionchange":if(PT)break;case"keydown":case"keyup":Bp(p,n,m)}var _;if(qh)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else As?Zy(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(Jy&&n.locale!=="ko"&&(As||x!=="onCompositionStart"?x==="onCompositionEnd"&&As&&(_=Xy()):(ar=m,zh="value"in ar?ar.value:ar.textContent,As=!0)),L=Rl(d,x),0<L.length&&(x=new jp(x,t,null,n,m),p.push({event:x,listeners:L}),_?x.data=_:(_=ev(n),_!==null&&(x.data=_)))),(_=xT?_T(t,n):wT(t,n))&&(d=Rl(d,"onBeforeInput"),0<d.length&&(m=new jp("onBeforeInput","beforeinput",null,n,m),p.push({event:m,listeners:d}),m.data=_))}hv(p,e)})}function Ro(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Rl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ko(t,n),i!=null&&r.unshift(Ro(t,i,s)),i=ko(t,e),i!=null&&r.push(Ro(t,i,s))),t=t.return}return r}function Ts(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Hp(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=ko(n,i),u!=null&&o.unshift(Ro(n,u,c))):s||(u=ko(n,i),u!=null&&o.push(Ro(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var VT=/\r\n?/g,LT=/\u0000|\uFFFD/g;function Wp(t){return(typeof t=="string"?t:""+t).replace(VT,`
`).replace(LT,"")}function $a(t,e,n){if(e=Wp(e),Wp(t)!==e&&n)throw Error(U(425))}function jl(){}var bd=null,Cd=null;function Ad(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Pd=typeof setTimeout=="function"?setTimeout:void 0,OT=typeof clearTimeout=="function"?clearTimeout:void 0,Kp=typeof Promise=="function"?Promise:void 0,MT=typeof queueMicrotask=="function"?queueMicrotask:typeof Kp<"u"?function(t){return Kp.resolve(null).then(t).catch(FT)}:Pd;function FT(t){setTimeout(function(){throw t})}function Fu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),bo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);bo(e)}function fr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Gp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var _i=Math.random().toString(36).slice(2),un="__reactFiber$"+_i,jo="__reactProps$"+_i,Vn="__reactContainer$"+_i,Rd="__reactEvents$"+_i,UT="__reactListeners$"+_i,zT="__reactHandles$"+_i;function Wr(t){var e=t[un];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Vn]||n[un]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Gp(t);t!==null;){if(n=t[un])return n;t=Gp(t)}return e}t=n,n=t.parentNode}return null}function Zo(t){return t=t[un]||t[Vn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function js(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function xc(t){return t[jo]||null}var jd=[],Ds=-1;function Rr(t){return{current:t}}function Te(t){0>Ds||(t.current=jd[Ds],jd[Ds]=null,Ds--)}function xe(t,e){Ds++,jd[Ds]=t.current,t.current=e}var Ir={},dt=Rr(Ir),It=Rr(!1),es=Ir;function Zs(t,e){var n=t.type.contextTypes;if(!n)return Ir;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function kt(t){return t=t.childContextTypes,t!=null}function Dl(){Te(It),Te(dt)}function Qp(t,e,n){if(dt.current!==Ir)throw Error(U(168));xe(dt,e),xe(It,n)}function mv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,kE(t)||"Unknown",s));return be({},n,r)}function Vl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ir,es=dt.current,xe(dt,t),xe(It,It.current),!0}function Yp(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=mv(t,e,es),r.__reactInternalMemoizedMergedChildContext=t,Te(It),Te(dt),xe(dt,t)):Te(It),xe(It,n)}var In=null,_c=!1,Uu=!1;function pv(t){In===null?In=[t]:In.push(t)}function BT(t){_c=!0,pv(t)}function jr(){if(!Uu&&In!==null){Uu=!0;var t=0,e=pe;try{var n=In;for(pe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}In=null,_c=!1}catch(s){throw In!==null&&(In=In.slice(t+1)),Uy(Oh,jr),s}finally{pe=e,Uu=!1}}return null}var Vs=[],Ls=0,Ll=null,Ol=0,Ot=[],Mt=0,ts=null,kn=1,Nn="";function $r(t,e){Vs[Ls++]=Ol,Vs[Ls++]=Ll,Ll=t,Ol=e}function gv(t,e,n){Ot[Mt++]=kn,Ot[Mt++]=Nn,Ot[Mt++]=ts,ts=t;var r=kn;t=Nn;var s=32-en(r)-1;r&=~(1<<s),n+=1;var i=32-en(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,kn=1<<32-en(e)+s|n<<s|r,Nn=i+t}else kn=1<<i|n<<s|r,Nn=t}function Wh(t){t.return!==null&&($r(t,1),gv(t,1,0))}function Kh(t){for(;t===Ll;)Ll=Vs[--Ls],Vs[Ls]=null,Ol=Vs[--Ls],Vs[Ls]=null;for(;t===ts;)ts=Ot[--Mt],Ot[Mt]=null,Nn=Ot[--Mt],Ot[Mt]=null,kn=Ot[--Mt],Ot[Mt]=null}var Pt=null,Ct=null,ke=!1,Xt=null;function yv(t,e){var n=zt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Xp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Pt=t,Ct=fr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Pt=t,Ct=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ts!==null?{id:kn,overflow:Nn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=zt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Pt=t,Ct=null,!0):!1;default:return!1}}function Dd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Vd(t){if(ke){var e=Ct;if(e){var n=e;if(!Xp(t,e)){if(Dd(t))throw Error(U(418));e=fr(n.nextSibling);var r=Pt;e&&Xp(t,e)?yv(r,n):(t.flags=t.flags&-4097|2,ke=!1,Pt=t)}}else{if(Dd(t))throw Error(U(418));t.flags=t.flags&-4097|2,ke=!1,Pt=t}}}function Jp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pt=t}function qa(t){if(t!==Pt)return!1;if(!ke)return Jp(t),ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ad(t.type,t.memoizedProps)),e&&(e=Ct)){if(Dd(t))throw vv(),Error(U(418));for(;e;)yv(t,e),e=fr(e.nextSibling)}if(Jp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ct=fr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ct=null}}else Ct=Pt?fr(t.stateNode.nextSibling):null;return!0}function vv(){for(var t=Ct;t;)t=fr(t.nextSibling)}function ei(){Ct=Pt=null,ke=!1}function Gh(t){Xt===null?Xt=[t]:Xt.push(t)}var $T=Bn.ReactCurrentBatchConfig;function Ki(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var c=s.refs;o===null?delete c[i]:c[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Ha(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Zp(t){var e=t._init;return e(t._payload)}function xv(t){function e(T,w){if(t){var E=T.deletions;E===null?(T.deletions=[w],T.flags|=16):E.push(w)}}function n(T,w){if(!t)return null;for(;w!==null;)e(T,w),w=w.sibling;return null}function r(T,w){for(T=new Map;w!==null;)w.key!==null?T.set(w.key,w):T.set(w.index,w),w=w.sibling;return T}function s(T,w){return T=yr(T,w),T.index=0,T.sibling=null,T}function i(T,w,E){return T.index=E,t?(E=T.alternate,E!==null?(E=E.index,E<w?(T.flags|=2,w):E):(T.flags|=2,w)):(T.flags|=1048576,w)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function c(T,w,E,A){return w===null||w.tag!==6?(w=Ku(E,T.mode,A),w.return=T,w):(w=s(w,E),w.return=T,w)}function u(T,w,E,A){var D=E.type;return D===Cs?m(T,w,E.props.children,A,E.key):w!==null&&(w.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Zn&&Zp(D)===w.type)?(A=s(w,E.props),A.ref=Ki(T,w,E),A.return=T,A):(A=ml(E.type,E.key,E.props,null,T.mode,A),A.ref=Ki(T,w,E),A.return=T,A)}function d(T,w,E,A){return w===null||w.tag!==4||w.stateNode.containerInfo!==E.containerInfo||w.stateNode.implementation!==E.implementation?(w=Gu(E,T.mode,A),w.return=T,w):(w=s(w,E.children||[]),w.return=T,w)}function m(T,w,E,A,D){return w===null||w.tag!==7?(w=Jr(E,T.mode,A,D),w.return=T,w):(w=s(w,E),w.return=T,w)}function p(T,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Ku(""+w,T.mode,E),w.return=T,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Da:return E=ml(w.type,w.key,w.props,null,T.mode,E),E.ref=Ki(T,null,w),E.return=T,E;case bs:return w=Gu(w,T.mode,E),w.return=T,w;case Zn:var A=w._init;return p(T,A(w._payload),E)}if(Xi(w)||Bi(w))return w=Jr(w,T.mode,E,null),w.return=T,w;Ha(T,w)}return null}function g(T,w,E,A){var D=w!==null?w.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return D!==null?null:c(T,w,""+E,A);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Da:return E.key===D?u(T,w,E,A):null;case bs:return E.key===D?d(T,w,E,A):null;case Zn:return D=E._init,g(T,w,D(E._payload),A)}if(Xi(E)||Bi(E))return D!==null?null:m(T,w,E,A,null);Ha(T,E)}return null}function I(T,w,E,A,D){if(typeof A=="string"&&A!==""||typeof A=="number")return T=T.get(E)||null,c(w,T,""+A,D);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Da:return T=T.get(A.key===null?E:A.key)||null,u(w,T,A,D);case bs:return T=T.get(A.key===null?E:A.key)||null,d(w,T,A,D);case Zn:var L=A._init;return I(T,w,E,L(A._payload),D)}if(Xi(A)||Bi(A))return T=T.get(E)||null,m(w,T,A,D,null);Ha(w,A)}return null}function S(T,w,E,A){for(var D=null,L=null,_=w,x=w=0,y=null;_!==null&&x<E.length;x++){_.index>x?(y=_,_=null):y=_.sibling;var k=g(T,_,E[x],A);if(k===null){_===null&&(_=y);break}t&&_&&k.alternate===null&&e(T,_),w=i(k,w,x),L===null?D=k:L.sibling=k,L=k,_=y}if(x===E.length)return n(T,_),ke&&$r(T,x),D;if(_===null){for(;x<E.length;x++)_=p(T,E[x],A),_!==null&&(w=i(_,w,x),L===null?D=_:L.sibling=_,L=_);return ke&&$r(T,x),D}for(_=r(T,_);x<E.length;x++)y=I(_,T,x,E[x],A),y!==null&&(t&&y.alternate!==null&&_.delete(y.key===null?x:y.key),w=i(y,w,x),L===null?D=y:L.sibling=y,L=y);return t&&_.forEach(function(b){return e(T,b)}),ke&&$r(T,x),D}function P(T,w,E,A){var D=Bi(E);if(typeof D!="function")throw Error(U(150));if(E=D.call(E),E==null)throw Error(U(151));for(var L=D=null,_=w,x=w=0,y=null,k=E.next();_!==null&&!k.done;x++,k=E.next()){_.index>x?(y=_,_=null):y=_.sibling;var b=g(T,_,k.value,A);if(b===null){_===null&&(_=y);break}t&&_&&b.alternate===null&&e(T,_),w=i(b,w,x),L===null?D=b:L.sibling=b,L=b,_=y}if(k.done)return n(T,_),ke&&$r(T,x),D;if(_===null){for(;!k.done;x++,k=E.next())k=p(T,k.value,A),k!==null&&(w=i(k,w,x),L===null?D=k:L.sibling=k,L=k);return ke&&$r(T,x),D}for(_=r(T,_);!k.done;x++,k=E.next())k=I(_,T,x,k.value,A),k!==null&&(t&&k.alternate!==null&&_.delete(k.key===null?x:k.key),w=i(k,w,x),L===null?D=k:L.sibling=k,L=k);return t&&_.forEach(function(C){return e(T,C)}),ke&&$r(T,x),D}function j(T,w,E,A){if(typeof E=="object"&&E!==null&&E.type===Cs&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Da:e:{for(var D=E.key,L=w;L!==null;){if(L.key===D){if(D=E.type,D===Cs){if(L.tag===7){n(T,L.sibling),w=s(L,E.props.children),w.return=T,T=w;break e}}else if(L.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Zn&&Zp(D)===L.type){n(T,L.sibling),w=s(L,E.props),w.ref=Ki(T,L,E),w.return=T,T=w;break e}n(T,L);break}else e(T,L);L=L.sibling}E.type===Cs?(w=Jr(E.props.children,T.mode,A,E.key),w.return=T,T=w):(A=ml(E.type,E.key,E.props,null,T.mode,A),A.ref=Ki(T,w,E),A.return=T,T=A)}return o(T);case bs:e:{for(L=E.key;w!==null;){if(w.key===L)if(w.tag===4&&w.stateNode.containerInfo===E.containerInfo&&w.stateNode.implementation===E.implementation){n(T,w.sibling),w=s(w,E.children||[]),w.return=T,T=w;break e}else{n(T,w);break}else e(T,w);w=w.sibling}w=Gu(E,T.mode,A),w.return=T,T=w}return o(T);case Zn:return L=E._init,j(T,w,L(E._payload),A)}if(Xi(E))return S(T,w,E,A);if(Bi(E))return P(T,w,E,A);Ha(T,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,w!==null&&w.tag===6?(n(T,w.sibling),w=s(w,E),w.return=T,T=w):(n(T,w),w=Ku(E,T.mode,A),w.return=T,T=w),o(T)):n(T,w)}return j}var ti=xv(!0),_v=xv(!1),Ml=Rr(null),Fl=null,Os=null,Qh=null;function Yh(){Qh=Os=Fl=null}function Xh(t){var e=Ml.current;Te(Ml),t._currentValue=e}function Ld(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Hs(t,e){Fl=t,Qh=Os=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Et=!0),t.firstContext=null)}function qt(t){var e=t._currentValue;if(Qh!==t)if(t={context:t,memoizedValue:e,next:null},Os===null){if(Fl===null)throw Error(U(308));Os=t,Fl.dependencies={lanes:0,firstContext:t}}else Os=Os.next=t;return e}var Kr=null;function Jh(t){Kr===null?Kr=[t]:Kr.push(t)}function wv(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Jh(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ln(t,r)}function Ln(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var er=!1;function Zh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ev(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function An(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function mr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ce&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ln(t,n)}return s=r.interleaved,s===null?(e.next=e,Jh(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ln(t,n)}function ll(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Mh(t,n)}}function eg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ul(t,e,n,r){var s=t.updateQueue;er=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var m=t.alternate;m!==null&&(m=m.updateQueue,c=m.lastBaseUpdate,c!==o&&(c===null?m.firstBaseUpdate=d:c.next=d,m.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,m=d=u=null,c=i;do{var g=c.lane,I=c.eventTime;if((r&g)===g){m!==null&&(m=m.next={eventTime:I,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var S=t,P=c;switch(g=e,I=n,P.tag){case 1:if(S=P.payload,typeof S=="function"){p=S.call(I,p,g);break e}p=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=P.payload,g=typeof S=="function"?S.call(I,p,g):S,g==null)break e;p=be({},p,g);break e;case 2:er=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[c]:g.push(c))}else I={eventTime:I,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},m===null?(d=m=I,u=p):m=m.next=I,o|=g;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;g=c,c=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(m===null&&(u=p),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);rs|=o,t.lanes=o,t.memoizedState=p}}function tg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var ea={},hn=Rr(ea),Do=Rr(ea),Vo=Rr(ea);function Gr(t){if(t===ea)throw Error(U(174));return t}function ef(t,e){switch(xe(Vo,e),xe(Do,t),xe(hn,ea),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:gd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=gd(e,t)}Te(hn),xe(hn,e)}function ni(){Te(hn),Te(Do),Te(Vo)}function Tv(t){Gr(Vo.current);var e=Gr(hn.current),n=gd(e,t.type);e!==n&&(xe(Do,t),xe(hn,n))}function tf(t){Do.current===t&&(Te(hn),Te(Do))}var Ne=Rr(0);function zl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zu=[];function nf(){for(var t=0;t<zu.length;t++)zu[t]._workInProgressVersionPrimary=null;zu.length=0}var cl=Bn.ReactCurrentDispatcher,Bu=Bn.ReactCurrentBatchConfig,ns=0,Se=null,ze=null,Ke=null,Bl=!1,ho=!1,Lo=0,qT=0;function it(){throw Error(U(321))}function rf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!nn(t[n],e[n]))return!1;return!0}function sf(t,e,n,r,s,i){if(ns=i,Se=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,cl.current=t===null||t.memoizedState===null?GT:QT,t=n(r,s),ho){i=0;do{if(ho=!1,Lo=0,25<=i)throw Error(U(301));i+=1,Ke=ze=null,e.updateQueue=null,cl.current=YT,t=n(r,s)}while(ho)}if(cl.current=$l,e=ze!==null&&ze.next!==null,ns=0,Ke=ze=Se=null,Bl=!1,e)throw Error(U(300));return t}function of(){var t=Lo!==0;return Lo=0,t}function ln(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?Se.memoizedState=Ke=t:Ke=Ke.next=t,Ke}function Ht(){if(ze===null){var t=Se.alternate;t=t!==null?t.memoizedState:null}else t=ze.next;var e=Ke===null?Se.memoizedState:Ke.next;if(e!==null)Ke=e,ze=t;else{if(t===null)throw Error(U(310));ze=t,t={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},Ke===null?Se.memoizedState=Ke=t:Ke=Ke.next=t}return Ke}function Oo(t,e){return typeof e=="function"?e(t):e}function $u(t){var e=Ht(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=ze,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=o=null,u=null,d=i;do{var m=d.lane;if((ns&m)===m)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=p,o=r):u=u.next=p,Se.lanes|=m,rs|=m}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=c,nn(r,e.memoizedState)||(Et=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Se.lanes|=i,rs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function qu(t){var e=Ht(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);nn(i,e.memoizedState)||(Et=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Iv(){}function kv(t,e){var n=Se,r=Ht(),s=e(),i=!nn(r.memoizedState,s);if(i&&(r.memoizedState=s,Et=!0),r=r.queue,af(bv.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ke!==null&&Ke.memoizedState.tag&1){if(n.flags|=2048,Mo(9,Sv.bind(null,n,r,s,e),void 0,null),Ge===null)throw Error(U(349));ns&30||Nv(n,e,s)}return s}function Nv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Sv(t,e,n,r){e.value=n,e.getSnapshot=r,Cv(e)&&Av(t)}function bv(t,e,n){return n(function(){Cv(e)&&Av(t)})}function Cv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!nn(t,n)}catch{return!0}}function Av(t){var e=Ln(t,1);e!==null&&tn(e,t,1,-1)}function ng(t){var e=ln();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oo,lastRenderedState:t},e.queue=t,t=t.dispatch=KT.bind(null,Se,t),[e.memoizedState,t]}function Mo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Pv(){return Ht().memoizedState}function ul(t,e,n,r){var s=ln();Se.flags|=t,s.memoizedState=Mo(1|e,n,void 0,r===void 0?null:r)}function wc(t,e,n,r){var s=Ht();r=r===void 0?null:r;var i=void 0;if(ze!==null){var o=ze.memoizedState;if(i=o.destroy,r!==null&&rf(r,o.deps)){s.memoizedState=Mo(e,n,i,r);return}}Se.flags|=t,s.memoizedState=Mo(1|e,n,i,r)}function rg(t,e){return ul(8390656,8,t,e)}function af(t,e){return wc(2048,8,t,e)}function Rv(t,e){return wc(4,2,t,e)}function jv(t,e){return wc(4,4,t,e)}function Dv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Vv(t,e,n){return n=n!=null?n.concat([t]):null,wc(4,4,Dv.bind(null,e,t),n)}function lf(){}function Lv(t,e){var n=Ht();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ov(t,e){var n=Ht();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Mv(t,e,n){return ns&21?(nn(n,e)||(n=$y(),Se.lanes|=n,rs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Et=!0),t.memoizedState=n)}function HT(t,e){var n=pe;pe=n!==0&&4>n?n:4,t(!0);var r=Bu.transition;Bu.transition={};try{t(!1),e()}finally{pe=n,Bu.transition=r}}function Fv(){return Ht().memoizedState}function WT(t,e,n){var r=gr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Uv(t))zv(e,n);else if(n=wv(t,e,n,r),n!==null){var s=gt();tn(n,t,r,s),Bv(n,e,r)}}function KT(t,e,n){var r=gr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Uv(t))zv(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,c=i(o,n);if(s.hasEagerState=!0,s.eagerState=c,nn(c,o)){var u=e.interleaved;u===null?(s.next=s,Jh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=wv(t,e,s,r),n!==null&&(s=gt(),tn(n,t,r,s),Bv(n,e,r))}}function Uv(t){var e=t.alternate;return t===Se||e!==null&&e===Se}function zv(t,e){ho=Bl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Bv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Mh(t,n)}}var $l={readContext:qt,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useInsertionEffect:it,useLayoutEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useMutableSource:it,useSyncExternalStore:it,useId:it,unstable_isNewReconciler:!1},GT={readContext:qt,useCallback:function(t,e){return ln().memoizedState=[t,e===void 0?null:e],t},useContext:qt,useEffect:rg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ul(4194308,4,Dv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ul(4194308,4,t,e)},useInsertionEffect:function(t,e){return ul(4,2,t,e)},useMemo:function(t,e){var n=ln();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ln();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=WT.bind(null,Se,t),[r.memoizedState,t]},useRef:function(t){var e=ln();return t={current:t},e.memoizedState=t},useState:ng,useDebugValue:lf,useDeferredValue:function(t){return ln().memoizedState=t},useTransition:function(){var t=ng(!1),e=t[0];return t=HT.bind(null,t[1]),ln().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Se,s=ln();if(ke){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Ge===null)throw Error(U(349));ns&30||Nv(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,rg(bv.bind(null,r,i,t),[t]),r.flags|=2048,Mo(9,Sv.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=ln(),e=Ge.identifierPrefix;if(ke){var n=Nn,r=kn;n=(r&~(1<<32-en(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Lo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=qT++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},QT={readContext:qt,useCallback:Lv,useContext:qt,useEffect:af,useImperativeHandle:Vv,useInsertionEffect:Rv,useLayoutEffect:jv,useMemo:Ov,useReducer:$u,useRef:Pv,useState:function(){return $u(Oo)},useDebugValue:lf,useDeferredValue:function(t){var e=Ht();return Mv(e,ze.memoizedState,t)},useTransition:function(){var t=$u(Oo)[0],e=Ht().memoizedState;return[t,e]},useMutableSource:Iv,useSyncExternalStore:kv,useId:Fv,unstable_isNewReconciler:!1},YT={readContext:qt,useCallback:Lv,useContext:qt,useEffect:af,useImperativeHandle:Vv,useInsertionEffect:Rv,useLayoutEffect:jv,useMemo:Ov,useReducer:qu,useRef:Pv,useState:function(){return qu(Oo)},useDebugValue:lf,useDeferredValue:function(t){var e=Ht();return ze===null?e.memoizedState=t:Mv(e,ze.memoizedState,t)},useTransition:function(){var t=qu(Oo)[0],e=Ht().memoizedState;return[t,e]},useMutableSource:Iv,useSyncExternalStore:kv,useId:Fv,unstable_isNewReconciler:!1};function Qt(t,e){if(t&&t.defaultProps){e=be({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Od(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ec={isMounted:function(t){return(t=t._reactInternals)?ms(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=gt(),s=gr(t),i=An(r,s);i.payload=e,n!=null&&(i.callback=n),e=mr(t,i,s),e!==null&&(tn(e,t,s,r),ll(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=gt(),s=gr(t),i=An(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=mr(t,i,s),e!==null&&(tn(e,t,s,r),ll(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=gt(),r=gr(t),s=An(n,r);s.tag=2,e!=null&&(s.callback=e),e=mr(t,s,r),e!==null&&(tn(e,t,r,n),ll(e,t,r))}};function sg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ao(n,r)||!Ao(s,i):!0}function $v(t,e,n){var r=!1,s=Ir,i=e.contextType;return typeof i=="object"&&i!==null?i=qt(i):(s=kt(e)?es:dt.current,r=e.contextTypes,i=(r=r!=null)?Zs(t,s):Ir),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ec,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function ig(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ec.enqueueReplaceState(e,e.state,null)}function Md(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Zh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=qt(i):(i=kt(e)?es:dt.current,s.context=Zs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Od(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Ec.enqueueReplaceState(s,s.state,null),Ul(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ri(t,e){try{var n="",r=e;do n+=IE(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Hu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Fd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var XT=typeof WeakMap=="function"?WeakMap:Map;function qv(t,e,n){n=An(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Hl||(Hl=!0,Qd=r),Fd(t,e)},n}function Hv(t,e,n){n=An(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Fd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Fd(t,e),typeof r!="function"&&(pr===null?pr=new Set([this]):pr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function og(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new XT;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=dI.bind(null,t,e,n),e.then(t,t))}function ag(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function lg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=An(-1,1),e.tag=2,mr(n,e,1))),n.lanes|=1),t)}var JT=Bn.ReactCurrentOwner,Et=!1;function pt(t,e,n,r){e.child=t===null?_v(e,null,n,r):ti(e,t.child,n,r)}function cg(t,e,n,r,s){n=n.render;var i=e.ref;return Hs(e,s),r=sf(t,e,n,r,i,s),n=of(),t!==null&&!Et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,On(t,e,s)):(ke&&n&&Wh(e),e.flags|=1,pt(t,e,r,s),e.child)}function ug(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!gf(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Wv(t,e,i,r,s)):(t=ml(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ao,n(o,r)&&t.ref===e.ref)return On(t,e,s)}return e.flags|=1,t=yr(i,r),t.ref=e.ref,t.return=e,e.child=t}function Wv(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ao(i,r)&&t.ref===e.ref)if(Et=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Et=!0);else return e.lanes=t.lanes,On(t,e,s)}return Ud(t,e,n,r,s)}function Kv(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},xe(Fs,bt),bt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,xe(Fs,bt),bt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,xe(Fs,bt),bt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,xe(Fs,bt),bt|=r;return pt(t,e,s,n),e.child}function Gv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ud(t,e,n,r,s){var i=kt(n)?es:dt.current;return i=Zs(e,i),Hs(e,s),n=sf(t,e,n,r,i,s),r=of(),t!==null&&!Et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,On(t,e,s)):(ke&&r&&Wh(e),e.flags|=1,pt(t,e,n,s),e.child)}function dg(t,e,n,r,s){if(kt(n)){var i=!0;Vl(e)}else i=!1;if(Hs(e,s),e.stateNode===null)dl(t,e),$v(e,n,r),Md(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=qt(d):(d=kt(n)?es:dt.current,d=Zs(e,d));var m=n.getDerivedStateFromProps,p=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&ig(e,o,r,d),er=!1;var g=e.memoizedState;o.state=g,Ul(e,r,o,s),u=e.memoizedState,c!==r||g!==u||It.current||er?(typeof m=="function"&&(Od(e,n,m,r),u=e.memoizedState),(c=er||sg(e,n,c,r,g,u,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Ev(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:Qt(e.type,c),o.props=d,p=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=qt(u):(u=kt(n)?es:dt.current,u=Zs(e,u));var I=n.getDerivedStateFromProps;(m=typeof I=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==p||g!==u)&&ig(e,o,r,u),er=!1,g=e.memoizedState,o.state=g,Ul(e,r,o,s);var S=e.memoizedState;c!==p||g!==S||It.current||er?(typeof I=="function"&&(Od(e,n,I,r),S=e.memoizedState),(d=er||sg(e,n,d,r,g,S,u)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,S,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,S,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=S),o.props=r,o.state=S,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return zd(t,e,n,r,i,s)}function zd(t,e,n,r,s,i){Gv(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Yp(e,n,!1),On(t,e,i);r=e.stateNode,JT.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ti(e,t.child,null,i),e.child=ti(e,null,c,i)):pt(t,e,c,i),e.memoizedState=r.state,s&&Yp(e,n,!0),e.child}function Qv(t){var e=t.stateNode;e.pendingContext?Qp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Qp(t,e.context,!1),ef(t,e.containerInfo)}function hg(t,e,n,r,s){return ei(),Gh(s),e.flags|=256,pt(t,e,n,r),e.child}var Bd={dehydrated:null,treeContext:null,retryLane:0};function $d(t){return{baseLanes:t,cachePool:null,transitions:null}}function Yv(t,e,n){var r=e.pendingProps,s=Ne.current,i=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),xe(Ne,s&1),t===null)return Vd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=kc(o,r,0,null),t=Jr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=$d(n),e.memoizedState=Bd,t):cf(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return ZT(t,e,o,r,c,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=yr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=yr(c,i):(i=Jr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?$d(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Bd,r}return i=t.child,t=i.sibling,r=yr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function cf(t,e){return e=kc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Wa(t,e,n,r){return r!==null&&Gh(r),ti(e,t.child,null,n),t=cf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ZT(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Hu(Error(U(422))),Wa(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=kc({mode:"visible",children:r.children},s,0,null),i=Jr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ti(e,t.child,null,o),e.child.memoizedState=$d(o),e.memoizedState=Bd,i);if(!(e.mode&1))return Wa(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(U(419)),r=Hu(i,r,void 0),Wa(t,e,o,r)}if(c=(o&t.childLanes)!==0,Et||c){if(r=Ge,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ln(t,s),tn(r,t,s,-1))}return pf(),r=Hu(Error(U(421))),Wa(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=hI.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ct=fr(s.nextSibling),Pt=e,ke=!0,Xt=null,t!==null&&(Ot[Mt++]=kn,Ot[Mt++]=Nn,Ot[Mt++]=ts,kn=t.id,Nn=t.overflow,ts=e),e=cf(e,r.children),e.flags|=4096,e)}function fg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ld(t.return,e,n)}function Wu(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Xv(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(pt(t,e,r.children,n),r=Ne.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fg(t,n,e);else if(t.tag===19)fg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(xe(Ne,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&zl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Wu(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&zl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Wu(e,!0,n,null,i);break;case"together":Wu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function dl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function On(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),rs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=yr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=yr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function eI(t,e,n){switch(e.tag){case 3:Qv(e),ei();break;case 5:Tv(e);break;case 1:kt(e.type)&&Vl(e);break;case 4:ef(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;xe(Ml,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(xe(Ne,Ne.current&1),e.flags|=128,null):n&e.child.childLanes?Yv(t,e,n):(xe(Ne,Ne.current&1),t=On(t,e,n),t!==null?t.sibling:null);xe(Ne,Ne.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Xv(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),xe(Ne,Ne.current),r)break;return null;case 22:case 23:return e.lanes=0,Kv(t,e,n)}return On(t,e,n)}var Jv,qd,Zv,ex;Jv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};qd=function(){};Zv=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Gr(hn.current);var i=null;switch(n){case"input":s=hd(t,s),r=hd(t,r),i=[];break;case"select":s=be({},s,{value:void 0}),r=be({},r,{value:void 0}),i=[];break;case"textarea":s=pd(t,s),r=pd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=jl)}yd(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(To.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(To.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&we("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};ex=function(t,e,n,r){n!==r&&(e.flags|=4)};function Gi(t,e){if(!ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function tI(t,e,n){var r=e.pendingProps;switch(Kh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(e),null;case 1:return kt(e.type)&&Dl(),ot(e),null;case 3:return r=e.stateNode,ni(),Te(It),Te(dt),nf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(qa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xt!==null&&(Jd(Xt),Xt=null))),qd(t,e),ot(e),null;case 5:tf(e);var s=Gr(Vo.current);if(n=e.type,t!==null&&e.stateNode!=null)Zv(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return ot(e),null}if(t=Gr(hn.current),qa(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[un]=e,r[jo]=i,t=(e.mode&1)!==0,n){case"dialog":we("cancel",r),we("close",r);break;case"iframe":case"object":case"embed":we("load",r);break;case"video":case"audio":for(s=0;s<Zi.length;s++)we(Zi[s],r);break;case"source":we("error",r);break;case"img":case"image":case"link":we("error",r),we("load",r);break;case"details":we("toggle",r);break;case"input":Ep(r,i),we("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},we("invalid",r);break;case"textarea":Ip(r,i),we("invalid",r)}yd(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&$a(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&$a(r.textContent,c,t),s=["children",""+c]):To.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&we("scroll",r)}switch(n){case"input":Va(r),Tp(r,i,!0);break;case"textarea":Va(r),kp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=jl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=by(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[un]=e,t[jo]=r,Jv(t,e,!1,!1),e.stateNode=t;e:{switch(o=vd(n,r),n){case"dialog":we("cancel",t),we("close",t),s=r;break;case"iframe":case"object":case"embed":we("load",t),s=r;break;case"video":case"audio":for(s=0;s<Zi.length;s++)we(Zi[s],t);s=r;break;case"source":we("error",t),s=r;break;case"img":case"image":case"link":we("error",t),we("load",t),s=r;break;case"details":we("toggle",t),s=r;break;case"input":Ep(t,r),s=hd(t,r),we("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=be({},r,{value:void 0}),we("invalid",t);break;case"textarea":Ip(t,r),s=pd(t,r),we("invalid",t);break;default:s=r}yd(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?Py(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Cy(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Io(t,u):typeof u=="number"&&Io(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(To.hasOwnProperty(i)?u!=null&&i==="onScroll"&&we("scroll",t):u!=null&&Rh(t,i,u,o))}switch(n){case"input":Va(t),Tp(t,r,!1);break;case"textarea":Va(t),kp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Tr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?zs(t,!!r.multiple,i,!1):r.defaultValue!=null&&zs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=jl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ot(e),null;case 6:if(t&&e.stateNode!=null)ex(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=Gr(Vo.current),Gr(hn.current),qa(e)){if(r=e.stateNode,n=e.memoizedProps,r[un]=e,(i=r.nodeValue!==n)&&(t=Pt,t!==null))switch(t.tag){case 3:$a(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$a(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[un]=e,e.stateNode=r}return ot(e),null;case 13:if(Te(Ne),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ke&&Ct!==null&&e.mode&1&&!(e.flags&128))vv(),ei(),e.flags|=98560,i=!1;else if(i=qa(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[un]=e}else ei(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ot(e),i=!1}else Xt!==null&&(Jd(Xt),Xt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ne.current&1?Be===0&&(Be=3):pf())),e.updateQueue!==null&&(e.flags|=4),ot(e),null);case 4:return ni(),qd(t,e),t===null&&Po(e.stateNode.containerInfo),ot(e),null;case 10:return Xh(e.type._context),ot(e),null;case 17:return kt(e.type)&&Dl(),ot(e),null;case 19:if(Te(Ne),i=e.memoizedState,i===null)return ot(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Gi(i,!1);else{if(Be!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=zl(t),o!==null){for(e.flags|=128,Gi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return xe(Ne,Ne.current&1|2),e.child}t=t.sibling}i.tail!==null&&je()>si&&(e.flags|=128,r=!0,Gi(i,!1),e.lanes=4194304)}else{if(!r)if(t=zl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Gi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ke)return ot(e),null}else 2*je()-i.renderingStartTime>si&&n!==1073741824&&(e.flags|=128,r=!0,Gi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=je(),e.sibling=null,n=Ne.current,xe(Ne,r?n&1|2:n&1),e):(ot(e),null);case 22:case 23:return mf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?bt&1073741824&&(ot(e),e.subtreeFlags&6&&(e.flags|=8192)):ot(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function nI(t,e){switch(Kh(e),e.tag){case 1:return kt(e.type)&&Dl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ni(),Te(It),Te(dt),nf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return tf(e),null;case 13:if(Te(Ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));ei()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Te(Ne),null;case 4:return ni(),null;case 10:return Xh(e.type._context),null;case 22:case 23:return mf(),null;case 24:return null;default:return null}}var Ka=!1,ct=!1,rI=typeof WeakSet=="function"?WeakSet:Set,W=null;function Ms(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pe(t,e,r)}else n.current=null}function Hd(t,e,n){try{n()}catch(r){Pe(t,e,r)}}var mg=!1;function sI(t,e){if(bd=Al,t=iv(),Hh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,m=0,p=t,g=null;t:for(;;){for(var I;p!==n||s!==0&&p.nodeType!==3||(c=o+s),p!==i||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(I=p.firstChild)!==null;)g=p,p=I;for(;;){if(p===t)break t;if(g===n&&++d===s&&(c=o),g===i&&++m===r&&(u=o),(I=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=I}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cd={focusedElem:t,selectionRange:n},Al=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var P=S.memoizedProps,j=S.memoizedState,T=e.stateNode,w=T.getSnapshotBeforeUpdate(e.elementType===e.type?P:Qt(e.type,P),j);T.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(A){Pe(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return S=mg,mg=!1,S}function fo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Hd(e,n,i)}s=s.next}while(s!==r)}}function Tc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Wd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function tx(t){var e=t.alternate;e!==null&&(t.alternate=null,tx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[un],delete e[jo],delete e[Rd],delete e[UT],delete e[zT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function nx(t){return t.tag===5||t.tag===3||t.tag===4}function pg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||nx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Kd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=jl));else if(r!==4&&(t=t.child,t!==null))for(Kd(t,e,n),t=t.sibling;t!==null;)Kd(t,e,n),t=t.sibling}function Gd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Gd(t,e,n),t=t.sibling;t!==null;)Gd(t,e,n),t=t.sibling}var Ye=null,Yt=!1;function Qn(t,e,n){for(n=n.child;n!==null;)rx(t,e,n),n=n.sibling}function rx(t,e,n){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(pc,n)}catch{}switch(n.tag){case 5:ct||Ms(n,e);case 6:var r=Ye,s=Yt;Ye=null,Qn(t,e,n),Ye=r,Yt=s,Ye!==null&&(Yt?(t=Ye,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ye.removeChild(n.stateNode));break;case 18:Ye!==null&&(Yt?(t=Ye,n=n.stateNode,t.nodeType===8?Fu(t.parentNode,n):t.nodeType===1&&Fu(t,n),bo(t)):Fu(Ye,n.stateNode));break;case 4:r=Ye,s=Yt,Ye=n.stateNode.containerInfo,Yt=!0,Qn(t,e,n),Ye=r,Yt=s;break;case 0:case 11:case 14:case 15:if(!ct&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Hd(n,e,o),s=s.next}while(s!==r)}Qn(t,e,n);break;case 1:if(!ct&&(Ms(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Pe(n,e,c)}Qn(t,e,n);break;case 21:Qn(t,e,n);break;case 22:n.mode&1?(ct=(r=ct)||n.memoizedState!==null,Qn(t,e,n),ct=r):Qn(t,e,n);break;default:Qn(t,e,n)}}function gg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new rI),e.forEach(function(r){var s=fI.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Gt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:Ye=c.stateNode,Yt=!1;break e;case 3:Ye=c.stateNode.containerInfo,Yt=!0;break e;case 4:Ye=c.stateNode.containerInfo,Yt=!0;break e}c=c.return}if(Ye===null)throw Error(U(160));rx(i,o,s),Ye=null,Yt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Pe(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)sx(e,t),e=e.sibling}function sx(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Gt(e,t),an(t),r&4){try{fo(3,t,t.return),Tc(3,t)}catch(P){Pe(t,t.return,P)}try{fo(5,t,t.return)}catch(P){Pe(t,t.return,P)}}break;case 1:Gt(e,t),an(t),r&512&&n!==null&&Ms(n,n.return);break;case 5:if(Gt(e,t),an(t),r&512&&n!==null&&Ms(n,n.return),t.flags&32){var s=t.stateNode;try{Io(s,"")}catch(P){Pe(t,t.return,P)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&Ny(s,i),vd(c,o);var d=vd(c,i);for(o=0;o<u.length;o+=2){var m=u[o],p=u[o+1];m==="style"?Py(s,p):m==="dangerouslySetInnerHTML"?Cy(s,p):m==="children"?Io(s,p):Rh(s,m,p,d)}switch(c){case"input":fd(s,i);break;case"textarea":Sy(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var I=i.value;I!=null?zs(s,!!i.multiple,I,!1):g!==!!i.multiple&&(i.defaultValue!=null?zs(s,!!i.multiple,i.defaultValue,!0):zs(s,!!i.multiple,i.multiple?[]:"",!1))}s[jo]=i}catch(P){Pe(t,t.return,P)}}break;case 6:if(Gt(e,t),an(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(P){Pe(t,t.return,P)}}break;case 3:if(Gt(e,t),an(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{bo(e.containerInfo)}catch(P){Pe(t,t.return,P)}break;case 4:Gt(e,t),an(t);break;case 13:Gt(e,t),an(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(hf=je())),r&4&&gg(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(ct=(d=ct)||m,Gt(e,t),ct=d):Gt(e,t),an(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!m&&t.mode&1)for(W=t,m=t.child;m!==null;){for(p=W=m;W!==null;){switch(g=W,I=g.child,g.tag){case 0:case 11:case 14:case 15:fo(4,g,g.return);break;case 1:Ms(g,g.return);var S=g.stateNode;if(typeof S.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(P){Pe(r,n,P)}}break;case 5:Ms(g,g.return);break;case 22:if(g.memoizedState!==null){vg(p);continue}}I!==null?(I.return=g,W=I):vg(p)}m=m.sibling}e:for(m=null,p=t;;){if(p.tag===5){if(m===null){m=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=Ay("display",o))}catch(P){Pe(t,t.return,P)}}}else if(p.tag===6){if(m===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(P){Pe(t,t.return,P)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;m===p&&(m=null),p=p.return}m===p&&(m=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Gt(e,t),an(t),r&4&&gg(t);break;case 21:break;default:Gt(e,t),an(t)}}function an(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(nx(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Io(s,""),r.flags&=-33);var i=pg(t);Gd(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=pg(t);Kd(t,c,o);break;default:throw Error(U(161))}}catch(u){Pe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function iI(t,e,n){W=t,ix(t)}function ix(t,e,n){for(var r=(t.mode&1)!==0;W!==null;){var s=W,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ka;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||ct;c=Ka;var d=ct;if(Ka=o,(ct=u)&&!d)for(W=s;W!==null;)o=W,u=o.child,o.tag===22&&o.memoizedState!==null?xg(s):u!==null?(u.return=o,W=u):xg(s);for(;i!==null;)W=i,ix(i),i=i.sibling;W=s,Ka=c,ct=d}yg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,W=i):yg(t)}}function yg(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ct||Tc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ct)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Qt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&tg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}tg(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var p=m.dehydrated;p!==null&&bo(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}ct||e.flags&512&&Wd(e)}catch(g){Pe(e,e.return,g)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function vg(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function xg(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Tc(4,e)}catch(u){Pe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Pe(e,s,u)}}var i=e.return;try{Wd(e)}catch(u){Pe(e,i,u)}break;case 5:var o=e.return;try{Wd(e)}catch(u){Pe(e,o,u)}}}catch(u){Pe(e,e.return,u)}if(e===t){W=null;break}var c=e.sibling;if(c!==null){c.return=e.return,W=c;break}W=e.return}}var oI=Math.ceil,ql=Bn.ReactCurrentDispatcher,uf=Bn.ReactCurrentOwner,Bt=Bn.ReactCurrentBatchConfig,ce=0,Ge=null,Me=null,Ze=0,bt=0,Fs=Rr(0),Be=0,Fo=null,rs=0,Ic=0,df=0,mo=null,_t=null,hf=0,si=1/0,Tn=null,Hl=!1,Qd=null,pr=null,Ga=!1,lr=null,Wl=0,po=0,Yd=null,hl=-1,fl=0;function gt(){return ce&6?je():hl!==-1?hl:hl=je()}function gr(t){return t.mode&1?ce&2&&Ze!==0?Ze&-Ze:$T.transition!==null?(fl===0&&(fl=$y()),fl):(t=pe,t!==0||(t=window.event,t=t===void 0?16:Yy(t.type)),t):1}function tn(t,e,n,r){if(50<po)throw po=0,Yd=null,Error(U(185));Xo(t,n,r),(!(ce&2)||t!==Ge)&&(t===Ge&&(!(ce&2)&&(Ic|=n),Be===4&&nr(t,Ze)),Nt(t,r),n===1&&ce===0&&!(e.mode&1)&&(si=je()+500,_c&&jr()))}function Nt(t,e){var n=t.callbackNode;$E(t,e);var r=Cl(t,t===Ge?Ze:0);if(r===0)n!==null&&bp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&bp(n),e===1)t.tag===0?BT(_g.bind(null,t)):pv(_g.bind(null,t)),MT(function(){!(ce&6)&&jr()}),n=null;else{switch(qy(r)){case 1:n=Oh;break;case 4:n=zy;break;case 16:n=bl;break;case 536870912:n=By;break;default:n=bl}n=fx(n,ox.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ox(t,e){if(hl=-1,fl=0,ce&6)throw Error(U(327));var n=t.callbackNode;if(Ws()&&t.callbackNode!==n)return null;var r=Cl(t,t===Ge?Ze:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Kl(t,r);else{e=r;var s=ce;ce|=2;var i=lx();(Ge!==t||Ze!==e)&&(Tn=null,si=je()+500,Xr(t,e));do try{cI();break}catch(c){ax(t,c)}while(!0);Yh(),ql.current=i,ce=s,Me!==null?e=0:(Ge=null,Ze=0,e=Be)}if(e!==0){if(e===2&&(s=Td(t),s!==0&&(r=s,e=Xd(t,s))),e===1)throw n=Fo,Xr(t,0),nr(t,r),Nt(t,je()),n;if(e===6)nr(t,r);else{if(s=t.current.alternate,!(r&30)&&!aI(s)&&(e=Kl(t,r),e===2&&(i=Td(t),i!==0&&(r=i,e=Xd(t,i))),e===1))throw n=Fo,Xr(t,0),nr(t,r),Nt(t,je()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:qr(t,_t,Tn);break;case 3:if(nr(t,r),(r&130023424)===r&&(e=hf+500-je(),10<e)){if(Cl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){gt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Pd(qr.bind(null,t,_t,Tn),e);break}qr(t,_t,Tn);break;case 4:if(nr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-en(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*oI(r/1960))-r,10<r){t.timeoutHandle=Pd(qr.bind(null,t,_t,Tn),r);break}qr(t,_t,Tn);break;case 5:qr(t,_t,Tn);break;default:throw Error(U(329))}}}return Nt(t,je()),t.callbackNode===n?ox.bind(null,t):null}function Xd(t,e){var n=mo;return t.current.memoizedState.isDehydrated&&(Xr(t,e).flags|=256),t=Kl(t,e),t!==2&&(e=_t,_t=n,e!==null&&Jd(e)),t}function Jd(t){_t===null?_t=t:_t.push.apply(_t,t)}function aI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!nn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function nr(t,e){for(e&=~df,e&=~Ic,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-en(e),r=1<<n;t[n]=-1,e&=~r}}function _g(t){if(ce&6)throw Error(U(327));Ws();var e=Cl(t,0);if(!(e&1))return Nt(t,je()),null;var n=Kl(t,e);if(t.tag!==0&&n===2){var r=Td(t);r!==0&&(e=r,n=Xd(t,r))}if(n===1)throw n=Fo,Xr(t,0),nr(t,e),Nt(t,je()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,qr(t,_t,Tn),Nt(t,je()),null}function ff(t,e){var n=ce;ce|=1;try{return t(e)}finally{ce=n,ce===0&&(si=je()+500,_c&&jr())}}function ss(t){lr!==null&&lr.tag===0&&!(ce&6)&&Ws();var e=ce;ce|=1;var n=Bt.transition,r=pe;try{if(Bt.transition=null,pe=1,t)return t()}finally{pe=r,Bt.transition=n,ce=e,!(ce&6)&&jr()}}function mf(){bt=Fs.current,Te(Fs)}function Xr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,OT(n)),Me!==null)for(n=Me.return;n!==null;){var r=n;switch(Kh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Dl();break;case 3:ni(),Te(It),Te(dt),nf();break;case 5:tf(r);break;case 4:ni();break;case 13:Te(Ne);break;case 19:Te(Ne);break;case 10:Xh(r.type._context);break;case 22:case 23:mf()}n=n.return}if(Ge=t,Me=t=yr(t.current,null),Ze=bt=e,Be=0,Fo=null,df=Ic=rs=0,_t=mo=null,Kr!==null){for(e=0;e<Kr.length;e++)if(n=Kr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Kr=null}return t}function ax(t,e){do{var n=Me;try{if(Yh(),cl.current=$l,Bl){for(var r=Se.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Bl=!1}if(ns=0,Ke=ze=Se=null,ho=!1,Lo=0,uf.current=null,n===null||n.return===null){Be=1,Fo=e,Me=null;break}e:{var i=t,o=n.return,c=n,u=e;if(e=Ze,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,m=c,p=m.tag;if(!(m.mode&1)&&(p===0||p===11||p===15)){var g=m.alternate;g?(m.updateQueue=g.updateQueue,m.memoizedState=g.memoizedState,m.lanes=g.lanes):(m.updateQueue=null,m.memoizedState=null)}var I=ag(o);if(I!==null){I.flags&=-257,lg(I,o,c,i,e),I.mode&1&&og(i,d,e),e=I,u=d;var S=e.updateQueue;if(S===null){var P=new Set;P.add(u),e.updateQueue=P}else S.add(u);break e}else{if(!(e&1)){og(i,d,e),pf();break e}u=Error(U(426))}}else if(ke&&c.mode&1){var j=ag(o);if(j!==null){!(j.flags&65536)&&(j.flags|=256),lg(j,o,c,i,e),Gh(ri(u,c));break e}}i=u=ri(u,c),Be!==4&&(Be=2),mo===null?mo=[i]:mo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var T=qv(i,u,e);eg(i,T);break e;case 1:c=u;var w=i.type,E=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(pr===null||!pr.has(E)))){i.flags|=65536,e&=-e,i.lanes|=e;var A=Hv(i,c,e);eg(i,A);break e}}i=i.return}while(i!==null)}ux(n)}catch(D){e=D,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(!0)}function lx(){var t=ql.current;return ql.current=$l,t===null?$l:t}function pf(){(Be===0||Be===3||Be===2)&&(Be=4),Ge===null||!(rs&268435455)&&!(Ic&268435455)||nr(Ge,Ze)}function Kl(t,e){var n=ce;ce|=2;var r=lx();(Ge!==t||Ze!==e)&&(Tn=null,Xr(t,e));do try{lI();break}catch(s){ax(t,s)}while(!0);if(Yh(),ce=n,ql.current=r,Me!==null)throw Error(U(261));return Ge=null,Ze=0,Be}function lI(){for(;Me!==null;)cx(Me)}function cI(){for(;Me!==null&&!DE();)cx(Me)}function cx(t){var e=hx(t.alternate,t,bt);t.memoizedProps=t.pendingProps,e===null?ux(t):Me=e,uf.current=null}function ux(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=nI(n,e),n!==null){n.flags&=32767,Me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Be=6,Me=null;return}}else if(n=tI(n,e,bt),n!==null){Me=n;return}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);Be===0&&(Be=5)}function qr(t,e,n){var r=pe,s=Bt.transition;try{Bt.transition=null,pe=1,uI(t,e,n,r)}finally{Bt.transition=s,pe=r}return null}function uI(t,e,n,r){do Ws();while(lr!==null);if(ce&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(qE(t,i),t===Ge&&(Me=Ge=null,Ze=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ga||(Ga=!0,fx(bl,function(){return Ws(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Bt.transition,Bt.transition=null;var o=pe;pe=1;var c=ce;ce|=4,uf.current=null,sI(t,n),sx(n,t),AT(Cd),Al=!!bd,Cd=bd=null,t.current=n,iI(n),VE(),ce=c,pe=o,Bt.transition=i}else t.current=n;if(Ga&&(Ga=!1,lr=t,Wl=s),i=t.pendingLanes,i===0&&(pr=null),ME(n.stateNode),Nt(t,je()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Hl)throw Hl=!1,t=Qd,Qd=null,t;return Wl&1&&t.tag!==0&&Ws(),i=t.pendingLanes,i&1?t===Yd?po++:(po=0,Yd=t):po=0,jr(),null}function Ws(){if(lr!==null){var t=qy(Wl),e=Bt.transition,n=pe;try{if(Bt.transition=null,pe=16>t?16:t,lr===null)var r=!1;else{if(t=lr,lr=null,Wl=0,ce&6)throw Error(U(331));var s=ce;for(ce|=4,W=t.current;W!==null;){var i=W,o=i.child;if(W.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(W=d;W!==null;){var m=W;switch(m.tag){case 0:case 11:case 15:fo(8,m,i)}var p=m.child;if(p!==null)p.return=m,W=p;else for(;W!==null;){m=W;var g=m.sibling,I=m.return;if(tx(m),m===d){W=null;break}if(g!==null){g.return=I,W=g;break}W=I}}}var S=i.alternate;if(S!==null){var P=S.child;if(P!==null){S.child=null;do{var j=P.sibling;P.sibling=null,P=j}while(P!==null)}}W=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,W=o;else e:for(;W!==null;){if(i=W,i.flags&2048)switch(i.tag){case 0:case 11:case 15:fo(9,i,i.return)}var T=i.sibling;if(T!==null){T.return=i.return,W=T;break e}W=i.return}}var w=t.current;for(W=w;W!==null;){o=W;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,W=E;else e:for(o=w;W!==null;){if(c=W,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Tc(9,c)}}catch(D){Pe(c,c.return,D)}if(c===o){W=null;break e}var A=c.sibling;if(A!==null){A.return=c.return,W=A;break e}W=c.return}}if(ce=s,jr(),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(pc,t)}catch{}r=!0}return r}finally{pe=n,Bt.transition=e}}return!1}function wg(t,e,n){e=ri(n,e),e=qv(t,e,1),t=mr(t,e,1),e=gt(),t!==null&&(Xo(t,1,e),Nt(t,e))}function Pe(t,e,n){if(t.tag===3)wg(t,t,n);else for(;e!==null;){if(e.tag===3){wg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pr===null||!pr.has(r))){t=ri(n,t),t=Hv(e,t,1),e=mr(e,t,1),t=gt(),e!==null&&(Xo(e,1,t),Nt(e,t));break}}e=e.return}}function dI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=gt(),t.pingedLanes|=t.suspendedLanes&n,Ge===t&&(Ze&n)===n&&(Be===4||Be===3&&(Ze&130023424)===Ze&&500>je()-hf?Xr(t,0):df|=n),Nt(t,e)}function dx(t,e){e===0&&(t.mode&1?(e=Ma,Ma<<=1,!(Ma&130023424)&&(Ma=4194304)):e=1);var n=gt();t=Ln(t,e),t!==null&&(Xo(t,e,n),Nt(t,n))}function hI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),dx(t,n)}function fI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),dx(t,n)}var hx;hx=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||It.current)Et=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Et=!1,eI(t,e,n);Et=!!(t.flags&131072)}else Et=!1,ke&&e.flags&1048576&&gv(e,Ol,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;dl(t,e),t=e.pendingProps;var s=Zs(e,dt.current);Hs(e,n),s=sf(null,e,r,t,s,n);var i=of();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,kt(r)?(i=!0,Vl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Zh(e),s.updater=Ec,e.stateNode=s,s._reactInternals=e,Md(e,r,t,n),e=zd(null,e,r,!0,i,n)):(e.tag=0,ke&&i&&Wh(e),pt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(dl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=pI(r),t=Qt(r,t),s){case 0:e=Ud(null,e,r,t,n);break e;case 1:e=dg(null,e,r,t,n);break e;case 11:e=cg(null,e,r,t,n);break e;case 14:e=ug(null,e,r,Qt(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qt(r,s),Ud(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qt(r,s),dg(t,e,r,s,n);case 3:e:{if(Qv(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Ev(t,e),Ul(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ri(Error(U(423)),e),e=hg(t,e,r,n,s);break e}else if(r!==s){s=ri(Error(U(424)),e),e=hg(t,e,r,n,s);break e}else for(Ct=fr(e.stateNode.containerInfo.firstChild),Pt=e,ke=!0,Xt=null,n=_v(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ei(),r===s){e=On(t,e,n);break e}pt(t,e,r,n)}e=e.child}return e;case 5:return Tv(e),t===null&&Vd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ad(r,s)?o=null:i!==null&&Ad(r,i)&&(e.flags|=32),Gv(t,e),pt(t,e,o,n),e.child;case 6:return t===null&&Vd(e),null;case 13:return Yv(t,e,n);case 4:return ef(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ti(e,null,r,n):pt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qt(r,s),cg(t,e,r,s,n);case 7:return pt(t,e,e.pendingProps,n),e.child;case 8:return pt(t,e,e.pendingProps.children,n),e.child;case 12:return pt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,xe(Ml,r._currentValue),r._currentValue=o,i!==null)if(nn(i.value,o)){if(i.children===s.children&&!It.current){e=On(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=An(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?u.next=u:(u.next=m.next,m.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Ld(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Ld(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}pt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Hs(e,n),s=qt(s),r=r(s),e.flags|=1,pt(t,e,r,n),e.child;case 14:return r=e.type,s=Qt(r,e.pendingProps),s=Qt(r.type,s),ug(t,e,r,s,n);case 15:return Wv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qt(r,s),dl(t,e),e.tag=1,kt(r)?(t=!0,Vl(e)):t=!1,Hs(e,n),$v(e,r,s),Md(e,r,s,n),zd(null,e,r,!0,t,n);case 19:return Xv(t,e,n);case 22:return Kv(t,e,n)}throw Error(U(156,e.tag))};function fx(t,e){return Uy(t,e)}function mI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zt(t,e,n,r){return new mI(t,e,n,r)}function gf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function pI(t){if(typeof t=="function")return gf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Dh)return 11;if(t===Vh)return 14}return 2}function yr(t,e){var n=t.alternate;return n===null?(n=zt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ml(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")gf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Cs:return Jr(n.children,s,i,e);case jh:o=8,s|=8;break;case ld:return t=zt(12,n,e,s|2),t.elementType=ld,t.lanes=i,t;case cd:return t=zt(13,n,e,s),t.elementType=cd,t.lanes=i,t;case ud:return t=zt(19,n,e,s),t.elementType=ud,t.lanes=i,t;case Ty:return kc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case wy:o=10;break e;case Ey:o=9;break e;case Dh:o=11;break e;case Vh:o=14;break e;case Zn:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=zt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Jr(t,e,n,r){return t=zt(7,t,r,e),t.lanes=n,t}function kc(t,e,n,r){return t=zt(22,t,r,e),t.elementType=Ty,t.lanes=n,t.stateNode={isHidden:!1},t}function Ku(t,e,n){return t=zt(6,t,null,e),t.lanes=n,t}function Gu(t,e,n){return e=zt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function gI(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bu(0),this.expirationTimes=bu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function yf(t,e,n,r,s,i,o,c,u){return t=new gI(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=zt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zh(i),t}function yI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function mx(t){if(!t)return Ir;t=t._reactInternals;e:{if(ms(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(kt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(kt(n))return mv(t,n,e)}return e}function px(t,e,n,r,s,i,o,c,u){return t=yf(n,r,!0,t,s,i,o,c,u),t.context=mx(null),n=t.current,r=gt(),s=gr(n),i=An(r,s),i.callback=e??null,mr(n,i,s),t.current.lanes=s,Xo(t,s,r),Nt(t,r),t}function Nc(t,e,n,r){var s=e.current,i=gt(),o=gr(s);return n=mx(n),e.context===null?e.context=n:e.pendingContext=n,e=An(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=mr(s,e,o),t!==null&&(tn(t,s,o,i),ll(t,s,o)),o}function Gl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Eg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function vf(t,e){Eg(t,e),(t=t.alternate)&&Eg(t,e)}function vI(){return null}var gx=typeof reportError=="function"?reportError:function(t){console.error(t)};function xf(t){this._internalRoot=t}Sc.prototype.render=xf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Nc(t,e,null,null)};Sc.prototype.unmount=xf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ss(function(){Nc(null,t,null,null)}),e[Vn]=null}};function Sc(t){this._internalRoot=t}Sc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ky();t={blockedOn:null,target:t,priority:e};for(var n=0;n<tr.length&&e!==0&&e<tr[n].priority;n++);tr.splice(n,0,t),n===0&&Qy(t)}};function _f(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function bc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Tg(){}function xI(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Gl(o);i.call(d)}}var o=px(e,r,t,0,null,!1,!1,"",Tg);return t._reactRootContainer=o,t[Vn]=o.current,Po(t.nodeType===8?t.parentNode:t),ss(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=Gl(u);c.call(d)}}var u=yf(t,0,!1,null,null,!1,!1,"",Tg);return t._reactRootContainer=u,t[Vn]=u.current,Po(t.nodeType===8?t.parentNode:t),ss(function(){Nc(e,u,n,r)}),u}function Cc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var c=s;s=function(){var u=Gl(o);c.call(u)}}Nc(e,o,t,s)}else o=xI(n,e,t,s,r);return Gl(o)}Hy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ji(e.pendingLanes);n!==0&&(Mh(e,n|1),Nt(e,je()),!(ce&6)&&(si=je()+500,jr()))}break;case 13:ss(function(){var r=Ln(t,1);if(r!==null){var s=gt();tn(r,t,1,s)}}),vf(t,1)}};Fh=function(t){if(t.tag===13){var e=Ln(t,134217728);if(e!==null){var n=gt();tn(e,t,134217728,n)}vf(t,134217728)}};Wy=function(t){if(t.tag===13){var e=gr(t),n=Ln(t,e);if(n!==null){var r=gt();tn(n,t,e,r)}vf(t,e)}};Ky=function(){return pe};Gy=function(t,e){var n=pe;try{return pe=t,e()}finally{pe=n}};_d=function(t,e,n){switch(e){case"input":if(fd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=xc(r);if(!s)throw Error(U(90));ky(r),fd(r,s)}}}break;case"textarea":Sy(t,n);break;case"select":e=n.value,e!=null&&zs(t,!!n.multiple,e,!1)}};Dy=ff;Vy=ss;var _I={usingClientEntryPoint:!1,Events:[Zo,js,xc,Ry,jy,ff]},Qi={findFiberByHostInstance:Wr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wI={bundleType:Qi.bundleType,version:Qi.version,rendererPackageName:Qi.rendererPackageName,rendererConfig:Qi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=My(t),t===null?null:t.stateNode},findFiberByHostInstance:Qi.findFiberByHostInstance||vI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qa.isDisabled&&Qa.supportsFiber)try{pc=Qa.inject(wI),dn=Qa}catch{}}jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_I;jt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_f(e))throw Error(U(200));return yI(t,e,null,n)};jt.createRoot=function(t,e){if(!_f(t))throw Error(U(299));var n=!1,r="",s=gx;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=yf(t,1,!1,null,null,n,!1,r,s),t[Vn]=e.current,Po(t.nodeType===8?t.parentNode:t),new xf(e)};jt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=My(e),t=t===null?null:t.stateNode,t};jt.flushSync=function(t){return ss(t)};jt.hydrate=function(t,e,n){if(!bc(e))throw Error(U(200));return Cc(null,t,e,!0,n)};jt.hydrateRoot=function(t,e,n){if(!_f(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=gx;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=px(e,null,t,1,n??null,s,!1,i,o),t[Vn]=e.current,Po(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Sc(e)};jt.render=function(t,e,n){if(!bc(e))throw Error(U(200));return Cc(null,t,e,!1,n)};jt.unmountComponentAtNode=function(t){if(!bc(t))throw Error(U(40));return t._reactRootContainer?(ss(function(){Cc(null,null,t,!1,function(){t._reactRootContainer=null,t[Vn]=null})}),!0):!1};jt.unstable_batchedUpdates=ff;jt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!bc(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Cc(t,e,n,!1,r)};jt.version="18.3.1-next-f1338f8080-20240426";function yx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yx)}catch(t){console.error(t)}}yx(),yy.exports=jt;var EI=yy.exports,vx,Ig=EI;vx=Ig.createRoot,Ig.hydrateRoot;const TI="modulepreload",II=function(t){return"/"+t},kg={},Yn=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=II(u),u in kg)return;kg[u]=!0;const d=u.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${m}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":TI,d||(p.as="script"),p.crossOrigin="",p.href=u,c&&p.setAttribute("nonce",c),document.head.appendChild(p),d)return new Promise((g,I)=>{p.addEventListener("load",g),p.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return s.then(o=>{for(const c of o||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})},kI=()=>{};var Ng={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},NI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},_x={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,m=i>>2,p=(i&3)<<4|c>>4;let g=(c&15)<<2|d>>6,I=d&63;u||(I=64,o||(g=64)),r.push(n[m],n[p],n[g],n[I])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(xx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):NI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||p==null)throw new SI;const g=i<<2|c>>4;if(r.push(g),d!==64){const I=c<<4&240|d>>2;if(r.push(I),p!==64){const S=d<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class SI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bI=function(t){const e=xx(t);return _x.encodeByteArray(e,!0)},Ql=function(t){return bI(t).replace(/\./g,"")},wx=function(t){try{return _x.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI=()=>CI().__FIREBASE_DEFAULTS__,PI=()=>{if(typeof process>"u"||typeof Ng>"u")return;const t=Ng.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},RI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&wx(t[1]);return e&&JSON.parse(e)},Ac=()=>{try{return kI()||AI()||PI()||RI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ex=t=>{var e,n;return(n=(e=Ac())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},jI=t=>{const e=Ex(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Tx=()=>{var t;return(t=Ac())==null?void 0:t.config},Ix=t=>{var e;return(e=Ac())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function kx(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Ql(JSON.stringify(n)),Ql(JSON.stringify(o)),""].join(".")}const go={};function LI(){const t={prod:[],emulator:[]};for(const e of Object.keys(go))go[e]?t.emulator.push(e):t.prod.push(e);return t}function OI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Sg=!1;function Nx(t,e){if(typeof window>"u"||typeof document>"u"||!wi(window.location.host)||go[t]===e||go[t]||Sg)return;go[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=LI().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,I){g.setAttribute("width","24"),g.setAttribute("id",I),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Sg=!0,o()},g}function m(g,I){g.setAttribute("id",I),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=OI(r),I=n("text"),S=document.getElementById(I)||document.createElement("span"),P=n("learnmore"),j=document.getElementById(P)||document.createElement("a"),T=n("preprendIcon"),w=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const E=g.element;c(E),m(j,P);const A=d();u(w,T),E.append(w,S,j,A),document.body.appendChild(E)}i?(S.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ht())}function FI(){var e;const t=(e=Ac())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function UI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function BI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $I(){const t=ht();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function qI(){return!FI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function HI(){try{return typeof indexedDB=="object"}catch{return!1}}function WI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI="FirebaseError";class $n extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=KI,Object.setPrototypeOf(this,$n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ta.prototype.create)}}class ta{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?GI(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new $n(s,c,r)}}function GI(t,e){return t.replace(QI,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const QI=/\{\$([^}]+)}/g;function YI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function is(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(bg(i)&&bg(o)){if(!is(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function bg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function eo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function to(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function XI(t,e){const n=new JI(t,e);return n.subscribe.bind(n)}class JI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ZI(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Qu),s.error===void 0&&(s.error=Qu),s.complete===void 0&&(s.complete=Qu);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ZI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Qu(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(t){return t&&t._delegate?t._delegate:t}class os{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new DI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nk(e))try{this.getOrInitializeService({instanceIdentifier:Hr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Hr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Hr){return this.instances.has(e)}getOptions(e=Hr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:tk(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Hr){return this.component?this.component.multipleInstances?e:Hr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tk(t){return t===Hr?void 0:t}function nk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ek(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(se||(se={}));const sk={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},ik=se.INFO,ok={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},ak=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=ok[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wf{constructor(e){this.name=e,this._logLevel=ik,this._logHandler=ak,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...e),this._logHandler(this,se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...e),this._logHandler(this,se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,se.INFO,...e),this._logHandler(this,se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,se.WARN,...e),this._logHandler(this,se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...e),this._logHandler(this,se.ERROR,...e)}}const lk=(t,e)=>e.some(n=>t instanceof n);let Cg,Ag;function ck(){return Cg||(Cg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uk(){return Ag||(Ag=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Sx=new WeakMap,Zd=new WeakMap,bx=new WeakMap,Yu=new WeakMap,Ef=new WeakMap;function dk(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(vr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Sx.set(n,t)}).catch(()=>{}),Ef.set(e,t),e}function hk(t){if(Zd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Zd.set(t,e)}let eh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Zd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||bx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function fk(t){eh=t(eh)}function mk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Xu(this),e,...n);return bx.set(r,e.sort?e.sort():[e]),vr(r)}:uk().includes(t)?function(...e){return t.apply(Xu(this),e),vr(Sx.get(this))}:function(...e){return vr(t.apply(Xu(this),e))}}function pk(t){return typeof t=="function"?mk(t):(t instanceof IDBTransaction&&hk(t),lk(t,ck())?new Proxy(t,eh):t)}function vr(t){if(t instanceof IDBRequest)return dk(t);if(Yu.has(t))return Yu.get(t);const e=pk(t);return e!==t&&(Yu.set(t,e),Ef.set(e,t)),e}const Xu=t=>Ef.get(t);function gk(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=vr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(vr(o.result),u.oldVersion,u.newVersion,vr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const yk=["get","getKey","getAll","getAllKeys","count"],vk=["put","add","delete","clear"],Ju=new Map;function Pg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ju.get(e))return Ju.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=vk.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||yk.includes(n)))return;const i=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return Ju.set(e,i),i}fk(t=>({...t,get:(e,n,r)=>Pg(e,n)||t.get(e,n,r),has:(e,n)=>!!Pg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_k(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function _k(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const th="@firebase/app",Rg="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mn=new wf("@firebase/app"),wk="@firebase/app-compat",Ek="@firebase/analytics-compat",Tk="@firebase/analytics",Ik="@firebase/app-check-compat",kk="@firebase/app-check",Nk="@firebase/auth",Sk="@firebase/auth-compat",bk="@firebase/database",Ck="@firebase/data-connect",Ak="@firebase/database-compat",Pk="@firebase/functions",Rk="@firebase/functions-compat",jk="@firebase/installations",Dk="@firebase/installations-compat",Vk="@firebase/messaging",Lk="@firebase/messaging-compat",Ok="@firebase/performance",Mk="@firebase/performance-compat",Fk="@firebase/remote-config",Uk="@firebase/remote-config-compat",zk="@firebase/storage",Bk="@firebase/storage-compat",$k="@firebase/firestore",qk="@firebase/ai",Hk="@firebase/firestore-compat",Wk="firebase",Kk="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nh="[DEFAULT]",Gk={[th]:"fire-core",[wk]:"fire-core-compat",[Tk]:"fire-analytics",[Ek]:"fire-analytics-compat",[kk]:"fire-app-check",[Ik]:"fire-app-check-compat",[Nk]:"fire-auth",[Sk]:"fire-auth-compat",[bk]:"fire-rtdb",[Ck]:"fire-data-connect",[Ak]:"fire-rtdb-compat",[Pk]:"fire-fn",[Rk]:"fire-fn-compat",[jk]:"fire-iid",[Dk]:"fire-iid-compat",[Vk]:"fire-fcm",[Lk]:"fire-fcm-compat",[Ok]:"fire-perf",[Mk]:"fire-perf-compat",[Fk]:"fire-rc",[Uk]:"fire-rc-compat",[zk]:"fire-gcs",[Bk]:"fire-gcs-compat",[$k]:"fire-fst",[Hk]:"fire-fst-compat",[qk]:"fire-vertex","fire-js":"fire-js",[Wk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl=new Map,Qk=new Map,rh=new Map;function jg(t,e){try{t.container.addComponent(e)}catch(n){Mn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ii(t){const e=t.name;if(rh.has(e))return Mn.debug(`There were multiple attempts to register component ${e}.`),!1;rh.set(e,t);for(const n of Yl.values())jg(n,t);for(const n of Qk.values())jg(n,t);return!0}function Tf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ft(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xr=new ta("app","Firebase",Yk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new os("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei=Kk;function Cx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:nh,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw xr.create("bad-app-name",{appName:String(s)});if(n||(n=Tx()),!n)throw xr.create("no-options");const i=Yl.get(s);if(i){if(is(n,i.options)&&is(r,i.config))return i;throw xr.create("duplicate-app",{appName:s})}const o=new rk(s);for(const u of rh.values())o.addComponent(u);const c=new Xk(n,r,o);return Yl.set(s,c),c}function Ax(t=nh){const e=Yl.get(t);if(!e&&t===nh&&Tx())return Cx();if(!e)throw xr.create("no-app",{appName:t});return e}function _r(t,e,n){let r=Gk[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mn.warn(o.join(" "));return}ii(new os(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk="firebase-heartbeat-database",Zk=1,Uo="firebase-heartbeat-store";let Zu=null;function Px(){return Zu||(Zu=gk(Jk,Zk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Uo)}catch(n){console.warn(n)}}}}).catch(t=>{throw xr.create("idb-open",{originalErrorMessage:t.message})})),Zu}async function eN(t){try{const n=(await Px()).transaction(Uo),r=await n.objectStore(Uo).get(Rx(t));return await n.done,r}catch(e){if(e instanceof $n)Mn.warn(e.message);else{const n=xr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Mn.warn(n.message)}}}async function Dg(t,e){try{const r=(await Px()).transaction(Uo,"readwrite");await r.objectStore(Uo).put(e,Rx(t)),await r.done}catch(n){if(n instanceof $n)Mn.warn(n.message);else{const r=xr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Mn.warn(r.message)}}}function Rx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=1024,nN=30;class rN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new iN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Vg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>nN){const o=oN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Mn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Vg(),{heartbeatsToSend:r,unsentEntries:s}=sN(this._heartbeatsCache.heartbeats),i=Ql(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Mn.warn(n),""}}}function Vg(){return new Date().toISOString().substring(0,10)}function sN(t,e=tN){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Lg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Lg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class iN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return HI()?WI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await eN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Dg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Dg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Lg(t){return Ql(JSON.stringify({version:2,heartbeats:t})).length}function oN(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(t){ii(new os("platform-logger",e=>new xk(e),"PRIVATE")),ii(new os("heartbeat",e=>new rN(e),"PRIVATE")),_r(th,Rg,t),_r(th,Rg,"esm2020"),_r("fire-js","")}aN("");var Og=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wr,jx;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,x){function y(){}y.prototype=x.prototype,_.D=x.prototype,_.prototype=new y,_.prototype.constructor=_,_.C=function(k,b,C){for(var N=Array(arguments.length-2),J=2;J<arguments.length;J++)N[J-2]=arguments[J];return x.prototype[b].apply(k,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(_,x,y){y||(y=0);var k=Array(16);if(typeof x=="string")for(var b=0;16>b;++b)k[b]=x.charCodeAt(y++)|x.charCodeAt(y++)<<8|x.charCodeAt(y++)<<16|x.charCodeAt(y++)<<24;else for(b=0;16>b;++b)k[b]=x[y++]|x[y++]<<8|x[y++]<<16|x[y++]<<24;x=_.g[0],y=_.g[1],b=_.g[2];var C=_.g[3],N=x+(C^y&(b^C))+k[0]+3614090360&4294967295;x=y+(N<<7&4294967295|N>>>25),N=C+(b^x&(y^b))+k[1]+3905402710&4294967295,C=x+(N<<12&4294967295|N>>>20),N=b+(y^C&(x^y))+k[2]+606105819&4294967295,b=C+(N<<17&4294967295|N>>>15),N=y+(x^b&(C^x))+k[3]+3250441966&4294967295,y=b+(N<<22&4294967295|N>>>10),N=x+(C^y&(b^C))+k[4]+4118548399&4294967295,x=y+(N<<7&4294967295|N>>>25),N=C+(b^x&(y^b))+k[5]+1200080426&4294967295,C=x+(N<<12&4294967295|N>>>20),N=b+(y^C&(x^y))+k[6]+2821735955&4294967295,b=C+(N<<17&4294967295|N>>>15),N=y+(x^b&(C^x))+k[7]+4249261313&4294967295,y=b+(N<<22&4294967295|N>>>10),N=x+(C^y&(b^C))+k[8]+1770035416&4294967295,x=y+(N<<7&4294967295|N>>>25),N=C+(b^x&(y^b))+k[9]+2336552879&4294967295,C=x+(N<<12&4294967295|N>>>20),N=b+(y^C&(x^y))+k[10]+4294925233&4294967295,b=C+(N<<17&4294967295|N>>>15),N=y+(x^b&(C^x))+k[11]+2304563134&4294967295,y=b+(N<<22&4294967295|N>>>10),N=x+(C^y&(b^C))+k[12]+1804603682&4294967295,x=y+(N<<7&4294967295|N>>>25),N=C+(b^x&(y^b))+k[13]+4254626195&4294967295,C=x+(N<<12&4294967295|N>>>20),N=b+(y^C&(x^y))+k[14]+2792965006&4294967295,b=C+(N<<17&4294967295|N>>>15),N=y+(x^b&(C^x))+k[15]+1236535329&4294967295,y=b+(N<<22&4294967295|N>>>10),N=x+(b^C&(y^b))+k[1]+4129170786&4294967295,x=y+(N<<5&4294967295|N>>>27),N=C+(y^b&(x^y))+k[6]+3225465664&4294967295,C=x+(N<<9&4294967295|N>>>23),N=b+(x^y&(C^x))+k[11]+643717713&4294967295,b=C+(N<<14&4294967295|N>>>18),N=y+(C^x&(b^C))+k[0]+3921069994&4294967295,y=b+(N<<20&4294967295|N>>>12),N=x+(b^C&(y^b))+k[5]+3593408605&4294967295,x=y+(N<<5&4294967295|N>>>27),N=C+(y^b&(x^y))+k[10]+38016083&4294967295,C=x+(N<<9&4294967295|N>>>23),N=b+(x^y&(C^x))+k[15]+3634488961&4294967295,b=C+(N<<14&4294967295|N>>>18),N=y+(C^x&(b^C))+k[4]+3889429448&4294967295,y=b+(N<<20&4294967295|N>>>12),N=x+(b^C&(y^b))+k[9]+568446438&4294967295,x=y+(N<<5&4294967295|N>>>27),N=C+(y^b&(x^y))+k[14]+3275163606&4294967295,C=x+(N<<9&4294967295|N>>>23),N=b+(x^y&(C^x))+k[3]+4107603335&4294967295,b=C+(N<<14&4294967295|N>>>18),N=y+(C^x&(b^C))+k[8]+1163531501&4294967295,y=b+(N<<20&4294967295|N>>>12),N=x+(b^C&(y^b))+k[13]+2850285829&4294967295,x=y+(N<<5&4294967295|N>>>27),N=C+(y^b&(x^y))+k[2]+4243563512&4294967295,C=x+(N<<9&4294967295|N>>>23),N=b+(x^y&(C^x))+k[7]+1735328473&4294967295,b=C+(N<<14&4294967295|N>>>18),N=y+(C^x&(b^C))+k[12]+2368359562&4294967295,y=b+(N<<20&4294967295|N>>>12),N=x+(y^b^C)+k[5]+4294588738&4294967295,x=y+(N<<4&4294967295|N>>>28),N=C+(x^y^b)+k[8]+2272392833&4294967295,C=x+(N<<11&4294967295|N>>>21),N=b+(C^x^y)+k[11]+1839030562&4294967295,b=C+(N<<16&4294967295|N>>>16),N=y+(b^C^x)+k[14]+4259657740&4294967295,y=b+(N<<23&4294967295|N>>>9),N=x+(y^b^C)+k[1]+2763975236&4294967295,x=y+(N<<4&4294967295|N>>>28),N=C+(x^y^b)+k[4]+1272893353&4294967295,C=x+(N<<11&4294967295|N>>>21),N=b+(C^x^y)+k[7]+4139469664&4294967295,b=C+(N<<16&4294967295|N>>>16),N=y+(b^C^x)+k[10]+3200236656&4294967295,y=b+(N<<23&4294967295|N>>>9),N=x+(y^b^C)+k[13]+681279174&4294967295,x=y+(N<<4&4294967295|N>>>28),N=C+(x^y^b)+k[0]+3936430074&4294967295,C=x+(N<<11&4294967295|N>>>21),N=b+(C^x^y)+k[3]+3572445317&4294967295,b=C+(N<<16&4294967295|N>>>16),N=y+(b^C^x)+k[6]+76029189&4294967295,y=b+(N<<23&4294967295|N>>>9),N=x+(y^b^C)+k[9]+3654602809&4294967295,x=y+(N<<4&4294967295|N>>>28),N=C+(x^y^b)+k[12]+3873151461&4294967295,C=x+(N<<11&4294967295|N>>>21),N=b+(C^x^y)+k[15]+530742520&4294967295,b=C+(N<<16&4294967295|N>>>16),N=y+(b^C^x)+k[2]+3299628645&4294967295,y=b+(N<<23&4294967295|N>>>9),N=x+(b^(y|~C))+k[0]+4096336452&4294967295,x=y+(N<<6&4294967295|N>>>26),N=C+(y^(x|~b))+k[7]+1126891415&4294967295,C=x+(N<<10&4294967295|N>>>22),N=b+(x^(C|~y))+k[14]+2878612391&4294967295,b=C+(N<<15&4294967295|N>>>17),N=y+(C^(b|~x))+k[5]+4237533241&4294967295,y=b+(N<<21&4294967295|N>>>11),N=x+(b^(y|~C))+k[12]+1700485571&4294967295,x=y+(N<<6&4294967295|N>>>26),N=C+(y^(x|~b))+k[3]+2399980690&4294967295,C=x+(N<<10&4294967295|N>>>22),N=b+(x^(C|~y))+k[10]+4293915773&4294967295,b=C+(N<<15&4294967295|N>>>17),N=y+(C^(b|~x))+k[1]+2240044497&4294967295,y=b+(N<<21&4294967295|N>>>11),N=x+(b^(y|~C))+k[8]+1873313359&4294967295,x=y+(N<<6&4294967295|N>>>26),N=C+(y^(x|~b))+k[15]+4264355552&4294967295,C=x+(N<<10&4294967295|N>>>22),N=b+(x^(C|~y))+k[6]+2734768916&4294967295,b=C+(N<<15&4294967295|N>>>17),N=y+(C^(b|~x))+k[13]+1309151649&4294967295,y=b+(N<<21&4294967295|N>>>11),N=x+(b^(y|~C))+k[4]+4149444226&4294967295,x=y+(N<<6&4294967295|N>>>26),N=C+(y^(x|~b))+k[11]+3174756917&4294967295,C=x+(N<<10&4294967295|N>>>22),N=b+(x^(C|~y))+k[2]+718787259&4294967295,b=C+(N<<15&4294967295|N>>>17),N=y+(C^(b|~x))+k[9]+3951481745&4294967295,_.g[0]=_.g[0]+x&4294967295,_.g[1]=_.g[1]+(b+(N<<21&4294967295|N>>>11))&4294967295,_.g[2]=_.g[2]+b&4294967295,_.g[3]=_.g[3]+C&4294967295}r.prototype.u=function(_,x){x===void 0&&(x=_.length);for(var y=x-this.blockSize,k=this.B,b=this.h,C=0;C<x;){if(b==0)for(;C<=y;)s(this,_,C),C+=this.blockSize;if(typeof _=="string"){for(;C<x;)if(k[b++]=_.charCodeAt(C++),b==this.blockSize){s(this,k),b=0;break}}else for(;C<x;)if(k[b++]=_[C++],b==this.blockSize){s(this,k),b=0;break}}this.h=b,this.o+=x},r.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var x=1;x<_.length-8;++x)_[x]=0;var y=8*this.o;for(x=_.length-8;x<_.length;++x)_[x]=y&255,y/=256;for(this.u(_),_=Array(16),x=y=0;4>x;++x)for(var k=0;32>k;k+=8)_[y++]=this.g[x]>>>k&255;return _};function i(_,x){var y=c;return Object.prototype.hasOwnProperty.call(y,_)?y[_]:y[_]=x(_)}function o(_,x){this.h=x;for(var y=[],k=!0,b=_.length-1;0<=b;b--){var C=_[b]|0;k&&C==x||(y[b]=C,k=!1)}this.g=y}var c={};function u(_){return-128<=_&&128>_?i(_,function(x){return new o([x|0],0>x?-1:0)}):new o([_|0],0>_?-1:0)}function d(_){if(isNaN(_)||!isFinite(_))return p;if(0>_)return j(d(-_));for(var x=[],y=1,k=0;_>=y;k++)x[k]=_/y|0,y*=4294967296;return new o(x,0)}function m(_,x){if(_.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(_.charAt(0)=="-")return j(m(_.substring(1),x));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=d(Math.pow(x,8)),k=p,b=0;b<_.length;b+=8){var C=Math.min(8,_.length-b),N=parseInt(_.substring(b,b+C),x);8>C?(C=d(Math.pow(x,C)),k=k.j(C).add(d(N))):(k=k.j(y),k=k.add(d(N)))}return k}var p=u(0),g=u(1),I=u(16777216);t=o.prototype,t.m=function(){if(P(this))return-j(this).m();for(var _=0,x=1,y=0;y<this.g.length;y++){var k=this.i(y);_+=(0<=k?k:4294967296+k)*x,x*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(S(this))return"0";if(P(this))return"-"+j(this).toString(_);for(var x=d(Math.pow(_,6)),y=this,k="";;){var b=A(y,x).g;y=T(y,b.j(x));var C=((0<y.g.length?y.g[0]:y.h)>>>0).toString(_);if(y=b,S(y))return C+k;for(;6>C.length;)C="0"+C;k=C+k}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function S(_){if(_.h!=0)return!1;for(var x=0;x<_.g.length;x++)if(_.g[x]!=0)return!1;return!0}function P(_){return _.h==-1}t.l=function(_){return _=T(this,_),P(_)?-1:S(_)?0:1};function j(_){for(var x=_.g.length,y=[],k=0;k<x;k++)y[k]=~_.g[k];return new o(y,~_.h).add(g)}t.abs=function(){return P(this)?j(this):this},t.add=function(_){for(var x=Math.max(this.g.length,_.g.length),y=[],k=0,b=0;b<=x;b++){var C=k+(this.i(b)&65535)+(_.i(b)&65535),N=(C>>>16)+(this.i(b)>>>16)+(_.i(b)>>>16);k=N>>>16,C&=65535,N&=65535,y[b]=N<<16|C}return new o(y,y[y.length-1]&-2147483648?-1:0)};function T(_,x){return _.add(j(x))}t.j=function(_){if(S(this)||S(_))return p;if(P(this))return P(_)?j(this).j(j(_)):j(j(this).j(_));if(P(_))return j(this.j(j(_)));if(0>this.l(I)&&0>_.l(I))return d(this.m()*_.m());for(var x=this.g.length+_.g.length,y=[],k=0;k<2*x;k++)y[k]=0;for(k=0;k<this.g.length;k++)for(var b=0;b<_.g.length;b++){var C=this.i(k)>>>16,N=this.i(k)&65535,J=_.i(b)>>>16,he=_.i(b)&65535;y[2*k+2*b]+=N*he,w(y,2*k+2*b),y[2*k+2*b+1]+=C*he,w(y,2*k+2*b+1),y[2*k+2*b+1]+=N*J,w(y,2*k+2*b+1),y[2*k+2*b+2]+=C*J,w(y,2*k+2*b+2)}for(k=0;k<x;k++)y[k]=y[2*k+1]<<16|y[2*k];for(k=x;k<2*x;k++)y[k]=0;return new o(y,0)};function w(_,x){for(;(_[x]&65535)!=_[x];)_[x+1]+=_[x]>>>16,_[x]&=65535,x++}function E(_,x){this.g=_,this.h=x}function A(_,x){if(S(x))throw Error("division by zero");if(S(_))return new E(p,p);if(P(_))return x=A(j(_),x),new E(j(x.g),j(x.h));if(P(x))return x=A(_,j(x)),new E(j(x.g),x.h);if(30<_.g.length){if(P(_)||P(x))throw Error("slowDivide_ only works with positive integers.");for(var y=g,k=x;0>=k.l(_);)y=D(y),k=D(k);var b=L(y,1),C=L(k,1);for(k=L(k,2),y=L(y,2);!S(k);){var N=C.add(k);0>=N.l(_)&&(b=b.add(y),C=N),k=L(k,1),y=L(y,1)}return x=T(_,b.j(x)),new E(b,x)}for(b=p;0<=_.l(x);){for(y=Math.max(1,Math.floor(_.m()/x.m())),k=Math.ceil(Math.log(y)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),C=d(y),N=C.j(x);P(N)||0<N.l(_);)y-=k,C=d(y),N=C.j(x);S(C)&&(C=g),b=b.add(C),_=T(_,N)}return new E(b,_)}t.A=function(_){return A(this,_).h},t.and=function(_){for(var x=Math.max(this.g.length,_.g.length),y=[],k=0;k<x;k++)y[k]=this.i(k)&_.i(k);return new o(y,this.h&_.h)},t.or=function(_){for(var x=Math.max(this.g.length,_.g.length),y=[],k=0;k<x;k++)y[k]=this.i(k)|_.i(k);return new o(y,this.h|_.h)},t.xor=function(_){for(var x=Math.max(this.g.length,_.g.length),y=[],k=0;k<x;k++)y[k]=this.i(k)^_.i(k);return new o(y,this.h^_.h)};function D(_){for(var x=_.g.length+1,y=[],k=0;k<x;k++)y[k]=_.i(k)<<1|_.i(k-1)>>>31;return new o(y,_.h)}function L(_,x){var y=x>>5;x%=32;for(var k=_.g.length-y,b=[],C=0;C<k;C++)b[C]=0<x?_.i(C+y)>>>x|_.i(C+y+1)<<32-x:_.i(C+y);return new o(b,_.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,jx=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=m,wr=o}).apply(typeof Og<"u"?Og:typeof self<"u"?self:typeof window<"u"?window:{});var Ya=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Dx,no,Vx,pl,sh,Lx,Ox,Mx;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,f){return a==Array.prototype||a==Object.prototype||(a[h]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ya=="object"&&Ya];for(var h=0;h<a.length;++h){var f=a[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var f=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var R=a[v];if(!(R in f))break e;f=f[R]}a=a[a.length-1],v=f[a],h=h(v),h!=v&&h!=null&&e(f,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var f=0,v=!1,R={next:function(){if(!v&&f<a.length){var V=f++;return{value:h(V,a[V]),done:!1}}return v=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function m(a,h,f){return a.call.apply(a.bind,arguments)}function p(a,h,f){if(!a)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var R=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(R,v),a.apply(h,R)}}return function(){return a.apply(h,arguments)}}function g(a,h,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:p,g.apply(null,arguments)}function I(a,h){var f=Array.prototype.slice.call(arguments,1);return function(){var v=f.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function S(a,h){function f(){}f.prototype=h.prototype,a.aa=h.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(v,R,V){for(var $=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)$[ge-2]=arguments[ge];return h.prototype[R].apply(v,$)}}function P(a){const h=a.length;if(0<h){const f=Array(h);for(let v=0;v<h;v++)f[v]=a[v];return f}return[]}function j(a,h){for(let f=1;f<arguments.length;f++){const v=arguments[f];if(u(v)){const R=a.length||0,V=v.length||0;a.length=R+V;for(let $=0;$<V;$++)a[R+$]=v[$]}else a.push(v)}}class T{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function w(a){return/^[\s\xa0]*$/.test(a)}function E(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function A(a){return A[" "](a),a}A[" "]=function(){};var D=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function L(a,h,f){for(const v in a)h.call(f,a[v],v,a)}function _(a,h){for(const f in a)h.call(void 0,a[f],f,a)}function x(a){const h={};for(const f in a)h[f]=a[f];return h}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(a,h){let f,v;for(let R=1;R<arguments.length;R++){v=arguments[R];for(f in v)a[f]=v[f];for(let V=0;V<y.length;V++)f=y[V],Object.prototype.hasOwnProperty.call(v,f)&&(a[f]=v[f])}}function b(a){var h=1;a=a.split(":");const f=[];for(;0<h&&a.length;)f.push(a.shift()),h--;return a.length&&f.push(a.join(":")),f}function C(a){c.setTimeout(()=>{throw a},0)}function N(){var a=K;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class J{constructor(){this.h=this.g=null}add(h,f){const v=he.get();v.set(h,f),this.h?this.h.next=v:this.g=v,this.h=v}}var he=new T(()=>new z,a=>a.reset());class z{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,B=!1,K=new J,Q=()=>{const a=c.Promise.resolve(void 0);ae=()=>{a.then(fe)}};var fe=()=>{for(var a;a=N();){try{a.h.call(a.g)}catch(f){C(f)}var h=he;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}B=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ie(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}Ie.prototype.h=function(){this.defaultPrevented=!0};var Vt=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};c.addEventListener("test",f,h),c.removeEventListener("test",f,h)}catch{}return a}();function Lt(a,h){if(Ie.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(D){e:{try{A(h.nodeName);var R=!0;break e}catch{}R=!1}R||(h=null)}}else f=="mouseover"?h=a.fromElement:f=="mouseout"&&(h=a.toElement);this.relatedTarget=h,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Wt[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Lt.aa.h.call(this)}}S(Lt,Ie);var Wt={2:"touch",3:"pen",4:"mouse"};Lt.prototype.h=function(){Lt.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var _n="closure_listenable_"+(1e6*Math.random()|0),_1=0;function w1(a,h,f,v,R){this.listener=a,this.proxy=null,this.src=h,this.type=f,this.capture=!!v,this.ha=R,this.key=++_1,this.da=this.fa=!1}function pa(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function ga(a){this.src=a,this.g={},this.h=0}ga.prototype.add=function(a,h,f,v,R){var V=a.toString();a=this.g[V],a||(a=this.g[V]=[],this.h++);var $=tu(a,h,v,R);return-1<$?(h=a[$],f||(h.fa=!1)):(h=new w1(h,this.src,V,!!v,R),h.fa=f,a.push(h)),h};function eu(a,h){var f=h.type;if(f in a.g){var v=a.g[f],R=Array.prototype.indexOf.call(v,h,void 0),V;(V=0<=R)&&Array.prototype.splice.call(v,R,1),V&&(pa(h),a.g[f].length==0&&(delete a.g[f],a.h--))}}function tu(a,h,f,v){for(var R=0;R<a.length;++R){var V=a[R];if(!V.da&&V.listener==h&&V.capture==!!f&&V.ha==v)return R}return-1}var nu="closure_lm_"+(1e6*Math.random()|0),ru={};function ym(a,h,f,v,R){if(Array.isArray(h)){for(var V=0;V<h.length;V++)ym(a,h[V],f,v,R);return null}return f=_m(f),a&&a[_n]?a.K(h,f,d(v)?!!v.capture:!!v,R):E1(a,h,f,!1,v,R)}function E1(a,h,f,v,R,V){if(!h)throw Error("Invalid event type");var $=d(R)?!!R.capture:!!R,ge=iu(a);if(ge||(a[nu]=ge=new ga(a)),f=ge.add(h,f,v,$,V),f.proxy)return f;if(v=T1(),f.proxy=v,v.src=a,v.listener=f,a.addEventListener)Vt||(R=$),R===void 0&&(R=!1),a.addEventListener(h.toString(),v,R);else if(a.attachEvent)a.attachEvent(xm(h.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return f}function T1(){function a(f){return h.call(a.src,a.listener,f)}const h=I1;return a}function vm(a,h,f,v,R){if(Array.isArray(h))for(var V=0;V<h.length;V++)vm(a,h[V],f,v,R);else v=d(v)?!!v.capture:!!v,f=_m(f),a&&a[_n]?(a=a.i,h=String(h).toString(),h in a.g&&(V=a.g[h],f=tu(V,f,v,R),-1<f&&(pa(V[f]),Array.prototype.splice.call(V,f,1),V.length==0&&(delete a.g[h],a.h--)))):a&&(a=iu(a))&&(h=a.g[h.toString()],a=-1,h&&(a=tu(h,f,v,R)),(f=-1<a?h[a]:null)&&su(f))}function su(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[_n])eu(h.i,a);else{var f=a.type,v=a.proxy;h.removeEventListener?h.removeEventListener(f,v,a.capture):h.detachEvent?h.detachEvent(xm(f),v):h.addListener&&h.removeListener&&h.removeListener(v),(f=iu(h))?(eu(f,a),f.h==0&&(f.src=null,h[nu]=null)):pa(a)}}}function xm(a){return a in ru?ru[a]:ru[a]="on"+a}function I1(a,h){if(a.da)a=!0;else{h=new Lt(h,this);var f=a.listener,v=a.ha||a.src;a.fa&&su(a),a=f.call(v,h)}return a}function iu(a){return a=a[nu],a instanceof ga?a:null}var ou="__closure_events_fn_"+(1e9*Math.random()>>>0);function _m(a){return typeof a=="function"?a:(a[ou]||(a[ou]=function(h){return a.handleEvent(h)}),a[ou])}function nt(){ue.call(this),this.i=new ga(this),this.M=this,this.F=null}S(nt,ue),nt.prototype[_n]=!0,nt.prototype.removeEventListener=function(a,h,f,v){vm(this,a,h,f,v)};function ft(a,h){var f,v=a.F;if(v)for(f=[];v;v=v.F)f.push(v);if(a=a.M,v=h.type||h,typeof h=="string")h=new Ie(h,a);else if(h instanceof Ie)h.target=h.target||a;else{var R=h;h=new Ie(v,a),k(h,R)}if(R=!0,f)for(var V=f.length-1;0<=V;V--){var $=h.g=f[V];R=ya($,v,!0,h)&&R}if($=h.g=a,R=ya($,v,!0,h)&&R,R=ya($,v,!1,h)&&R,f)for(V=0;V<f.length;V++)$=h.g=f[V],R=ya($,v,!1,h)&&R}nt.prototype.N=function(){if(nt.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var f=a.g[h],v=0;v<f.length;v++)pa(f[v]);delete a.g[h],a.h--}}this.F=null},nt.prototype.K=function(a,h,f,v){return this.i.add(String(a),h,!1,f,v)},nt.prototype.L=function(a,h,f,v){return this.i.add(String(a),h,!0,f,v)};function ya(a,h,f,v){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var R=!0,V=0;V<h.length;++V){var $=h[V];if($&&!$.da&&$.capture==f){var ge=$.listener,Qe=$.ha||$.src;$.fa&&eu(a.i,$),R=ge.call(Qe,v)!==!1&&R}}return R&&!v.defaultPrevented}function wm(a,h,f){if(typeof a=="function")f&&(a=g(a,f));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(a,h||0)}function Em(a){a.g=wm(()=>{a.g=null,a.i&&(a.i=!1,Em(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class k1 extends ue{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Em(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ci(a){ue.call(this),this.h=a,this.g={}}S(Ci,ue);var Tm=[];function Im(a){L(a.g,function(h,f){this.g.hasOwnProperty(f)&&su(h)},a),a.g={}}Ci.prototype.N=function(){Ci.aa.N.call(this),Im(this)},Ci.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var au=c.JSON.stringify,N1=c.JSON.parse,S1=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function lu(){}lu.prototype.h=null;function km(a){return a.h||(a.h=a.i())}function Nm(){}var Ai={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function cu(){Ie.call(this,"d")}S(cu,Ie);function uu(){Ie.call(this,"c")}S(uu,Ie);var Fr={},Sm=null;function va(){return Sm=Sm||new nt}Fr.La="serverreachability";function bm(a){Ie.call(this,Fr.La,a)}S(bm,Ie);function Pi(a){const h=va();ft(h,new bm(h))}Fr.STAT_EVENT="statevent";function Cm(a,h){Ie.call(this,Fr.STAT_EVENT,a),this.stat=h}S(Cm,Ie);function mt(a){const h=va();ft(h,new Cm(h,a))}Fr.Ma="timingevent";function Am(a,h){Ie.call(this,Fr.Ma,a),this.size=h}S(Am,Ie);function Ri(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},h)}function ji(){this.g=!0}ji.prototype.xa=function(){this.g=!1};function b1(a,h,f,v,R,V){a.info(function(){if(a.g)if(V)for(var $="",ge=V.split("&"),Qe=0;Qe<ge.length;Qe++){var de=ge[Qe].split("=");if(1<de.length){var rt=de[0];de=de[1];var st=rt.split("_");$=2<=st.length&&st[1]=="type"?$+(rt+"="+de+"&"):$+(rt+"=redacted&")}}else $=null;else $=V;return"XMLHTTP REQ ("+v+") [attempt "+R+"]: "+h+`
`+f+`
`+$})}function C1(a,h,f,v,R,V,$){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+R+"]: "+h+`
`+f+`
`+V+" "+$})}function xs(a,h,f,v){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+P1(a,f)+(v?" "+v:"")})}function A1(a,h){a.info(function(){return"TIMEOUT: "+h})}ji.prototype.info=function(){};function P1(a,h){if(!a.g)return h;if(!h)return null;try{var f=JSON.parse(h);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var v=f[a];if(!(2>v.length)){var R=v[1];if(Array.isArray(R)&&!(1>R.length)){var V=R[0];if(V!="noop"&&V!="stop"&&V!="close")for(var $=1;$<R.length;$++)R[$]=""}}}}return au(f)}catch{return h}}var xa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},du;function _a(){}S(_a,lu),_a.prototype.g=function(){return new XMLHttpRequest},_a.prototype.i=function(){return{}},du=new _a;function Wn(a,h,f,v){this.j=a,this.i=h,this.l=f,this.R=v||1,this.U=new Ci(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Rm}function Rm(){this.i=null,this.g="",this.h=!1}var jm={},hu={};function fu(a,h,f){a.L=1,a.v=Ia(wn(h)),a.m=f,a.P=!0,Dm(a,null)}function Dm(a,h){a.F=Date.now(),wa(a),a.A=wn(a.v);var f=a.A,v=a.R;Array.isArray(v)||(v=[String(v)]),Gm(f.i,"t",v),a.C=0,f=a.j.J,a.h=new Rm,a.g=hp(a.j,f?h:null,!a.m),0<a.O&&(a.M=new k1(g(a.Y,a,a.g),a.O)),h=a.U,f=a.g,v=a.ca;var R="readystatechange";Array.isArray(R)||(R&&(Tm[0]=R.toString()),R=Tm);for(var V=0;V<R.length;V++){var $=ym(f,R[V],v||h.handleEvent,!1,h.h||h);if(!$)break;h.g[$.key]=$}h=a.H?x(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),Pi(),b1(a.i,a.u,a.A,a.l,a.R,a.m)}Wn.prototype.ca=function(a){a=a.target;const h=this.M;h&&En(a)==3?h.j():this.Y(a)},Wn.prototype.Y=function(a){try{if(a==this.g)e:{const st=En(this.g);var h=this.g.Ba();const Es=this.g.Z();if(!(3>st)&&(st!=3||this.g&&(this.h.h||this.g.oa()||tp(this.g)))){this.J||st!=4||h==7||(h==8||0>=Es?Pi(3):Pi(2)),mu(this);var f=this.g.Z();this.X=f;t:if(Vm(this)){var v=tp(this.g);a="";var R=v.length,V=En(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ur(this),Di(this);var $="";break t}this.h.i=new c.TextDecoder}for(h=0;h<R;h++)this.h.h=!0,a+=this.h.i.decode(v[h],{stream:!(V&&h==R-1)});v.length=0,this.h.g+=a,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=f==200,C1(this.i,this.u,this.A,this.l,this.R,st,f),this.o){if(this.T&&!this.K){t:{if(this.g){var ge,Qe=this.g;if((ge=Qe.g?Qe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(ge)){var de=ge;break t}}de=null}if(f=de)xs(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pu(this,f);else{this.o=!1,this.s=3,mt(12),Ur(this),Di(this);break e}}if(this.P){f=!0;let Kt;for(;!this.J&&this.C<$.length;)if(Kt=R1(this,$),Kt==hu){st==4&&(this.s=4,mt(14),f=!1),xs(this.i,this.l,null,"[Incomplete Response]");break}else if(Kt==jm){this.s=4,mt(15),xs(this.i,this.l,$,"[Invalid Chunk]"),f=!1;break}else xs(this.i,this.l,Kt,null),pu(this,Kt);if(Vm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),st!=4||$.length!=0||this.h.h||(this.s=1,mt(16),f=!1),this.o=this.o&&f,!f)xs(this.i,this.l,$,"[Invalid Chunked Response]"),Ur(this),Di(this);else if(0<$.length&&!this.W){this.W=!0;var rt=this.j;rt.g==this&&rt.ba&&!rt.M&&(rt.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),wu(rt),rt.M=!0,mt(11))}}else xs(this.i,this.l,$,null),pu(this,$);st==4&&Ur(this),this.o&&!this.J&&(st==4?lp(this.j,this):(this.o=!1,wa(this)))}else Q1(this.g),f==400&&0<$.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),Ur(this),Di(this)}}}catch{}finally{}};function Vm(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function R1(a,h){var f=a.C,v=h.indexOf(`
`,f);return v==-1?hu:(f=Number(h.substring(f,v)),isNaN(f)?jm:(v+=1,v+f>h.length?hu:(h=h.slice(v,v+f),a.C=v+f,h)))}Wn.prototype.cancel=function(){this.J=!0,Ur(this)};function wa(a){a.S=Date.now()+a.I,Lm(a,a.I)}function Lm(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Ri(g(a.ba,a),h)}function mu(a){a.B&&(c.clearTimeout(a.B),a.B=null)}Wn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(A1(this.i,this.A),this.L!=2&&(Pi(),mt(17)),Ur(this),this.s=2,Di(this)):Lm(this,this.S-a)};function Di(a){a.j.G==0||a.J||lp(a.j,a)}function Ur(a){mu(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,Im(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function pu(a,h){try{var f=a.j;if(f.G!=0&&(f.g==a||gu(f.h,a))){if(!a.K&&gu(f.h,a)&&f.G==3){try{var v=f.Da.g.parse(h)}catch{v=null}if(Array.isArray(v)&&v.length==3){var R=v;if(R[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)Aa(f),ba(f);else break e;_u(f),mt(18)}}else f.za=R[1],0<f.za-f.T&&37500>R[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ri(g(f.Za,f),6e3));if(1>=Fm(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Br(f,11)}else if((a.K||f.g==a)&&Aa(f),!w(h))for(R=f.Da.g.parse(h),h=0;h<R.length;h++){let de=R[h];if(f.T=de[0],de=de[1],f.G==2)if(de[0]=="c"){f.K=de[1],f.ia=de[2];const rt=de[3];rt!=null&&(f.la=rt,f.j.info("VER="+f.la));const st=de[4];st!=null&&(f.Aa=st,f.j.info("SVER="+f.Aa));const Es=de[5];Es!=null&&typeof Es=="number"&&0<Es&&(v=1.5*Es,f.L=v,f.j.info("backChannelRequestTimeoutMs_="+v)),v=f;const Kt=a.g;if(Kt){const Ra=Kt.g?Kt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ra){var V=v.h;V.g||Ra.indexOf("spdy")==-1&&Ra.indexOf("quic")==-1&&Ra.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(yu(V,V.h),V.h=null))}if(v.D){const Eu=Kt.g?Kt.g.getResponseHeader("X-HTTP-Session-Id"):null;Eu&&(v.ya=Eu,_e(v.I,v.D,Eu))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),v=f;var $=a;if(v.qa=dp(v,v.J?v.ia:null,v.W),$.K){Um(v.h,$);var ge=$,Qe=v.L;Qe&&(ge.I=Qe),ge.B&&(mu(ge),wa(ge)),v.g=$}else op(v);0<f.i.length&&Ca(f)}else de[0]!="stop"&&de[0]!="close"||Br(f,7);else f.G==3&&(de[0]=="stop"||de[0]=="close"?de[0]=="stop"?Br(f,7):xu(f):de[0]!="noop"&&f.l&&f.l.ta(de),f.v=0)}}Pi(4)}catch{}}var j1=class{constructor(a,h){this.g=a,this.map=h}};function Om(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mm(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Fm(a){return a.h?1:a.g?a.g.size:0}function gu(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function yu(a,h){a.g?a.g.add(h):a.h=h}function Um(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}Om.prototype.cancel=function(){if(this.i=zm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function zm(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const f of a.g.values())h=h.concat(f.D);return h}return P(a.i)}function D1(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var h=[],f=a.length,v=0;v<f;v++)h.push(a[v]);return h}h=[],f=0;for(v in a)h[f++]=a[v];return h}function V1(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var h=[];a=a.length;for(var f=0;f<a;f++)h.push(f);return h}h=[],f=0;for(const v in a)h[f++]=v;return h}}}function Bm(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var f=V1(a),v=D1(a),R=v.length,V=0;V<R;V++)h.call(void 0,v[V],f&&f[V],a)}var $m=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function L1(a,h){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var v=a[f].indexOf("="),R=null;if(0<=v){var V=a[f].substring(0,v);R=a[f].substring(v+1)}else V=a[f];h(V,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function zr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof zr){this.h=a.h,Ea(this,a.j),this.o=a.o,this.g=a.g,Ta(this,a.s),this.l=a.l;var h=a.i,f=new Oi;f.i=h.i,h.g&&(f.g=new Map(h.g),f.h=h.h),qm(this,f),this.m=a.m}else a&&(h=String(a).match($m))?(this.h=!1,Ea(this,h[1]||"",!0),this.o=Vi(h[2]||""),this.g=Vi(h[3]||"",!0),Ta(this,h[4]),this.l=Vi(h[5]||"",!0),qm(this,h[6]||"",!0),this.m=Vi(h[7]||"")):(this.h=!1,this.i=new Oi(null,this.h))}zr.prototype.toString=function(){var a=[],h=this.j;h&&a.push(Li(h,Hm,!0),":");var f=this.g;return(f||h=="file")&&(a.push("//"),(h=this.o)&&a.push(Li(h,Hm,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Li(f,f.charAt(0)=="/"?F1:M1,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Li(f,z1)),a.join("")};function wn(a){return new zr(a)}function Ea(a,h,f){a.j=f?Vi(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function Ta(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function qm(a,h,f){h instanceof Oi?(a.i=h,B1(a.i,a.h)):(f||(h=Li(h,U1)),a.i=new Oi(h,a.h))}function _e(a,h,f){a.i.set(h,f)}function Ia(a){return _e(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Vi(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Li(a,h,f){return typeof a=="string"?(a=encodeURI(a).replace(h,O1),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function O1(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Hm=/[#\/\?@]/g,M1=/[#\?:]/g,F1=/[#\?]/g,U1=/[#\?@]/g,z1=/#/g;function Oi(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Kn(a){a.g||(a.g=new Map,a.h=0,a.i&&L1(a.i,function(h,f){a.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}t=Oi.prototype,t.add=function(a,h){Kn(this),this.i=null,a=_s(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(h),this.h+=1,this};function Wm(a,h){Kn(a),h=_s(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Km(a,h){return Kn(a),h=_s(a,h),a.g.has(h)}t.forEach=function(a,h){Kn(this),this.g.forEach(function(f,v){f.forEach(function(R){a.call(h,R,v,this)},this)},this)},t.na=function(){Kn(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),f=[];for(let v=0;v<h.length;v++){const R=a[v];for(let V=0;V<R.length;V++)f.push(h[v])}return f},t.V=function(a){Kn(this);let h=[];if(typeof a=="string")Km(this,a)&&(h=h.concat(this.g.get(_s(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)h=h.concat(a[f])}return h},t.set=function(a,h){return Kn(this),this.i=null,a=_s(this,a),Km(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function Gm(a,h,f){Wm(a,h),0<f.length&&(a.i=null,a.g.set(_s(a,h),P(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var f=0;f<h.length;f++){var v=h[f];const V=encodeURIComponent(String(v)),$=this.V(v);for(v=0;v<$.length;v++){var R=V;$[v]!==""&&(R+="="+encodeURIComponent(String($[v]))),a.push(R)}}return this.i=a.join("&")};function _s(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function B1(a,h){h&&!a.j&&(Kn(a),a.i=null,a.g.forEach(function(f,v){var R=v.toLowerCase();v!=R&&(Wm(this,v),Gm(this,R,f))},a)),a.j=h}function $1(a,h){const f=new ji;if(c.Image){const v=new Image;v.onload=I(Gn,f,"TestLoadImage: loaded",!0,h,v),v.onerror=I(Gn,f,"TestLoadImage: error",!1,h,v),v.onabort=I(Gn,f,"TestLoadImage: abort",!1,h,v),v.ontimeout=I(Gn,f,"TestLoadImage: timeout",!1,h,v),c.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else h(!1)}function q1(a,h){const f=new ji,v=new AbortController,R=setTimeout(()=>{v.abort(),Gn(f,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:v.signal}).then(V=>{clearTimeout(R),V.ok?Gn(f,"TestPingServer: ok",!0,h):Gn(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(R),Gn(f,"TestPingServer: error",!1,h)})}function Gn(a,h,f,v,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),v(f)}catch{}}function H1(){this.g=new S1}function W1(a,h,f){const v=f||"";try{Bm(a,function(R,V){let $=R;d(R)&&($=au(R)),h.push(v+V+"="+encodeURIComponent($))})}catch(R){throw h.push(v+"type="+encodeURIComponent("_badmap")),R}}function ka(a){this.l=a.Ub||null,this.j=a.eb||!1}S(ka,lu),ka.prototype.g=function(){return new Na(this.l,this.j)},ka.prototype.i=function(a){return function(){return a}}({});function Na(a,h){nt.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Na,nt),t=Na.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,Fi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mi(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Fi(this)),this.g&&(this.readyState=3,Fi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Qm(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Qm(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Mi(this):Fi(this),this.readyState==3&&Qm(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Mi(this))},t.Qa=function(a){this.g&&(this.response=a,Mi(this))},t.ga=function(){this.g&&Mi(this)};function Mi(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Fi(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=h.next();return a.join(`\r
`)};function Fi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Na.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Ym(a){let h="";return L(a,function(f,v){h+=v,h+=":",h+=f,h+=`\r
`}),h}function vu(a,h,f){e:{for(v in f){var v=!1;break e}v=!0}v||(f=Ym(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):_e(a,h,f))}function Ae(a){nt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Ae,nt);var K1=/^https?$/i,G1=["POST","PUT"];t=Ae.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,f,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():du.g(),this.v=this.o?km(this.o):km(du),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(V){Xm(this,V);return}if(a=f||"",f=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var R in v)f.set(R,v[R]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const V of v.keys())f.set(V,v.get(V));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(f.keys()).find(V=>V.toLowerCase()=="content-type"),R=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(G1,h,void 0))||v||R||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,$]of f)this.g.setRequestHeader(V,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ep(this),this.u=!0,this.g.send(a),this.u=!1}catch(V){Xm(this,V)}};function Xm(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,Jm(a),Sa(a)}function Jm(a){a.A||(a.A=!0,ft(a,"complete"),ft(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ft(this,"complete"),ft(this,"abort"),Sa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sa(this,!0)),Ae.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Zm(this):this.bb())},t.bb=function(){Zm(this)};function Zm(a){if(a.h&&typeof o<"u"&&(!a.v[1]||En(a)!=4||a.Z()!=2)){if(a.u&&En(a)==4)wm(a.Ea,0,a);else if(ft(a,"readystatechange"),En(a)==4){a.h=!1;try{const $=a.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var v;if(v=$===0){var R=String(a.D).match($m)[1]||null;!R&&c.self&&c.self.location&&(R=c.self.location.protocol.slice(0,-1)),v=!K1.test(R?R.toLowerCase():"")}f=v}if(f)ft(a,"complete"),ft(a,"success");else{a.m=6;try{var V=2<En(a)?a.g.statusText:""}catch{V=""}a.l=V+" ["+a.Z()+"]",Jm(a)}}finally{Sa(a)}}}}function Sa(a,h){if(a.g){ep(a);const f=a.g,v=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||ft(a,"ready");try{f.onreadystatechange=v}catch{}}}function ep(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function En(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<En(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),N1(h)}};function tp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Q1(a){const h={};a=(a.g&&2<=En(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(w(a[v]))continue;var f=b(a[v]);const R=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const V=h[R]||[];h[R]=V,V.push(f)}_(h,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ui(a,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||h}function np(a){this.Aa=0,this.i=[],this.j=new ji,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ui("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ui("baseRetryDelayMs",5e3,a),this.cb=Ui("retryDelaySeedMs",1e4,a),this.Wa=Ui("forwardChannelMaxRetries",2,a),this.wa=Ui("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Om(a&&a.concurrentRequestLimit),this.Da=new H1,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=np.prototype,t.la=8,t.G=1,t.connect=function(a,h,f,v){mt(0),this.W=a,this.H=h||{},f&&v!==void 0&&(this.H.OSID=f,this.H.OAID=v),this.F=this.X,this.I=dp(this,null,this.W),Ca(this)};function xu(a){if(rp(a),a.G==3){var h=a.U++,f=wn(a.I);if(_e(f,"SID",a.K),_e(f,"RID",h),_e(f,"TYPE","terminate"),zi(a,f),h=new Wn(a,a.j,h),h.L=2,h.v=Ia(wn(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=h.v,f=!0),f||(h.g=hp(h.j,null),h.g.ea(h.v)),h.F=Date.now(),wa(h)}up(a)}function ba(a){a.g&&(wu(a),a.g.cancel(),a.g=null)}function rp(a){ba(a),a.u&&(c.clearTimeout(a.u),a.u=null),Aa(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Ca(a){if(!Mm(a.h)&&!a.s){a.s=!0;var h=a.Ga;ae||Q(),B||(ae(),B=!0),K.add(h,a),a.B=0}}function Y1(a,h){return Fm(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Ri(g(a.Ga,a,h),cp(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const R=new Wn(this,this.j,a);let V=this.o;if(this.S&&(V?(V=x(V),k(V,this.S)):V=this.S),this.m!==null||this.O||(R.H=V,V=null),this.P)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var v=this.i[f];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(h+=v,4096<h){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=ip(this,R,h),f=wn(this.I),_e(f,"RID",a),_e(f,"CVER",22),this.D&&_e(f,"X-HTTP-Session-Id",this.D),zi(this,f),V&&(this.O?h="headers="+encodeURIComponent(String(Ym(V)))+"&"+h:this.m&&vu(f,this.m,V)),yu(this.h,R),this.Ua&&_e(f,"TYPE","init"),this.P?(_e(f,"$req",h),_e(f,"SID","null"),R.T=!0,fu(R,f,null)):fu(R,f,h),this.G=2}}else this.G==3&&(a?sp(this,a):this.i.length==0||Mm(this.h)||sp(this))};function sp(a,h){var f;h?f=h.l:f=a.U++;const v=wn(a.I);_e(v,"SID",a.K),_e(v,"RID",f),_e(v,"AID",a.T),zi(a,v),a.m&&a.o&&vu(v,a.m,a.o),f=new Wn(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),h&&(a.i=h.D.concat(a.i)),h=ip(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),yu(a.h,f),fu(f,v,h)}function zi(a,h){a.H&&L(a.H,function(f,v){_e(h,v,f)}),a.l&&Bm({},function(f,v){_e(h,v,f)})}function ip(a,h,f){f=Math.min(a.i.length,f);var v=a.l?g(a.l.Na,a.l,a):null;e:{var R=a.i;let V=-1;for(;;){const $=["count="+f];V==-1?0<f?(V=R[0].g,$.push("ofs="+V)):V=0:$.push("ofs="+V);let ge=!0;for(let Qe=0;Qe<f;Qe++){let de=R[Qe].g;const rt=R[Qe].map;if(de-=V,0>de)V=Math.max(0,R[Qe].g-100),ge=!1;else try{W1(rt,$,"req"+de+"_")}catch{v&&v(rt)}}if(ge){v=$.join("&");break e}}}return a=a.i.splice(0,f),h.D=a,v}function op(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;ae||Q(),B||(ae(),B=!0),K.add(h,a),a.v=0}}function _u(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Ri(g(a.Fa,a),cp(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,ap(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Ri(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),ba(this),ap(this))};function wu(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function ap(a){a.g=new Wn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=wn(a.qa);_e(h,"RID","rpc"),_e(h,"SID",a.K),_e(h,"AID",a.T),_e(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&_e(h,"TO",a.ja),_e(h,"TYPE","xmlhttp"),zi(a,h),a.m&&a.o&&vu(h,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=Ia(wn(h)),f.m=null,f.P=!0,Dm(f,a)}t.Za=function(){this.C!=null&&(this.C=null,ba(this),_u(this),mt(19))};function Aa(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function lp(a,h){var f=null;if(a.g==h){Aa(a),wu(a),a.g=null;var v=2}else if(gu(a.h,h))f=h.D,Um(a.h,h),v=1;else return;if(a.G!=0){if(h.o)if(v==1){f=h.m?h.m.length:0,h=Date.now()-h.F;var R=a.B;v=va(),ft(v,new Am(v,f)),Ca(a)}else op(a);else if(R=h.s,R==3||R==0&&0<h.X||!(v==1&&Y1(a,h)||v==2&&_u(a)))switch(f&&0<f.length&&(h=a.h,h.i=h.i.concat(f)),R){case 1:Br(a,5);break;case 4:Br(a,10);break;case 3:Br(a,6);break;default:Br(a,2)}}}function cp(a,h){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*h}function Br(a,h){if(a.j.info("Error code "+h),h==2){var f=g(a.fb,a),v=a.Xa;const R=!v;v=new zr(v||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ea(v,"https"),Ia(v),R?$1(v.toString(),f):q1(v.toString(),f)}else mt(2);a.G=0,a.l&&a.l.sa(h),up(a),rp(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function up(a){if(a.G=0,a.ka=[],a.l){const h=zm(a.h);(h.length!=0||a.i.length!=0)&&(j(a.ka,h),j(a.ka,a.i),a.h.i.length=0,P(a.i),a.i.length=0),a.l.ra()}}function dp(a,h,f){var v=f instanceof zr?wn(f):new zr(f);if(v.g!="")h&&(v.g=h+"."+v.g),Ta(v,v.s);else{var R=c.location;v=R.protocol,h=h?h+"."+R.hostname:R.hostname,R=+R.port;var V=new zr(null);v&&Ea(V,v),h&&(V.g=h),R&&Ta(V,R),f&&(V.l=f),v=V}return f=a.D,h=a.ya,f&&h&&_e(v,f,h),_e(v,"VER",a.la),zi(a,v),v}function hp(a,h,f){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new Ae(new ka({eb:f})):new Ae(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function fp(){}t=fp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Pa(){}Pa.prototype.g=function(a,h){return new St(a,h)};function St(a,h){nt.call(this),this.g=new np(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!w(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!w(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new ws(this)}S(St,nt),St.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},St.prototype.close=function(){xu(this.g)},St.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=au(a),a=f);h.i.push(new j1(h.Ya++,a)),h.G==3&&Ca(h)},St.prototype.N=function(){this.g.l=null,delete this.j,xu(this.g),delete this.g,St.aa.N.call(this)};function mp(a){cu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const f in h){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}S(mp,cu);function pp(){uu.call(this),this.status=1}S(pp,uu);function ws(a){this.g=a}S(ws,fp),ws.prototype.ua=function(){ft(this.g,"a")},ws.prototype.ta=function(a){ft(this.g,new mp(a))},ws.prototype.sa=function(a){ft(this.g,new pp)},ws.prototype.ra=function(){ft(this.g,"b")},Pa.prototype.createWebChannel=Pa.prototype.g,St.prototype.send=St.prototype.o,St.prototype.open=St.prototype.m,St.prototype.close=St.prototype.close,Mx=function(){return new Pa},Ox=function(){return va()},Lx=Fr,sh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},xa.NO_ERROR=0,xa.TIMEOUT=8,xa.HTTP_ERROR=6,pl=xa,Pm.COMPLETE="complete",Vx=Pm,Nm.EventType=Ai,Ai.OPEN="a",Ai.CLOSE="b",Ai.ERROR="c",Ai.MESSAGE="d",nt.prototype.listen=nt.prototype.K,no=Nm,Ae.prototype.listenOnce=Ae.prototype.L,Ae.prototype.getLastError=Ae.prototype.Ka,Ae.prototype.getLastErrorCode=Ae.prototype.Ba,Ae.prototype.getStatus=Ae.prototype.Z,Ae.prototype.getResponseJson=Ae.prototype.Oa,Ae.prototype.getResponseText=Ae.prototype.oa,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Ha,Dx=Ae}).apply(typeof Ya<"u"?Ya:typeof self<"u"?self:typeof window<"u"?window:{});const Mg="@firebase/firestore",Fg="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};lt.UNAUTHENTICATED=new lt(null),lt.GOOGLE_CREDENTIALS=new lt("google-credentials-uid"),lt.FIRST_PARTY=new lt("first-party-uid"),lt.MOCK_USER=new lt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ti="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as=new wf("@firebase/firestore");function Is(){return as.logLevel}function H(t,...e){if(as.logLevel<=se.DEBUG){const n=e.map(If);as.debug(`Firestore (${Ti}): ${t}`,...n)}}function Fn(t,...e){if(as.logLevel<=se.ERROR){const n=e.map(If);as.error(`Firestore (${Ti}): ${t}`,...n)}}function oi(t,...e){if(as.logLevel<=se.WARN){const n=e.map(If);as.warn(`Firestore (${Ti}): ${t}`,...n)}}function If(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Fx(t,r,n)}function Fx(t,e,n){let r=`FIRESTORE (${Ti}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Fn(r),new Error(r)}function me(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Fx(e,s,r)}function ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends $n{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(lt.UNAUTHENTICATED))}shutdown(){}}class cN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class uN{constructor(e){this.t=e,this.currentUser=lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){me(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Pn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Pn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Pn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(me(typeof r.accessToken=="string",31837,{l:r}),new Ux(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string",2055,{h:e}),new lt(e)}}class dN{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=lt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class hN{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new dN(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ug{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fN{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ft(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){me(this.o===void 0,3512);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ug(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(me(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Ug(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=mN(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ie(t,e){return t<e?-1:t>e?1:0}function ih(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return ed(s)===ed(i)?ie(s,i):ed(s)?1:-1}return ie(t.length,e.length)}const pN=55296,gN=57343;function ed(t){const e=t.charCodeAt(0);return e>=pN&&e<=gN}function ai(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zg="__name__";class cn{constructor(e,n,r){n===void 0?n=0:n>e.length&&X(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&X(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return cn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof cn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=cn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ie(e.length,n.length)}static compareSegments(e,n){const r=cn.isNumericId(e),s=cn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?cn.extractNumericId(e).compare(cn.extractNumericId(n)):ih(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wr.fromString(e.substring(4,e.length-2))}}class ve extends cn{construct(e,n,r){return new ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ve(n)}static emptyPath(){return new ve([])}}const yN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Je extends cn{construct(e,n,r){return new Je(e,n,r)}static isValidIdentifier(e){return yN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Je.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===zg}static keyField(){return new Je([zg])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new q(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new q(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new q(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new q(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Je(n)}static emptyPath(){return new Je([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(ve.fromString(e))}static fromName(e){return new G(ve.fromString(e).popFirst(5))}static empty(){return new G(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new ve(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(t,e,n){if(!n)throw new q(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function vN(t,e,n,r){if(e===!0&&r===!0)throw new q(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Bg(t){if(!G.isDocumentKey(t))throw new q(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function $g(t){if(G.isDocumentKey(t))throw new q(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Bx(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Pc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X(12329,{type:typeof t})}function rn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Pc(t);throw new q(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function xN(t,e){if(e<=0)throw new q(O.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(t,e){const n={typeString:t};return e&&(n.value=e),n}function ra(t,e){if(!Bx(t))throw new q(O.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new q(O.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg=-62135596800,Hg=1e6;class Ee{static now(){return Ee.fromMillis(Date.now())}static fromDate(e){return Ee.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Hg);return new Ee(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<qg)throw new q(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Hg}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ee._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ra(e,Ee._jsonSchema))return new Ee(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-qg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ee._jsonSchemaVersion="firestore/timestamp/1.0",Ee._jsonSchema={type:Ue("string",Ee._jsonSchemaVersion),seconds:Ue("number"),nanoseconds:Ue("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{static fromTimestamp(e){return new Z(e)}static min(){return new Z(new Ee(0,0))}static max(){return new Z(new Ee(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo=-1;function _N(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Z.fromTimestamp(r===1e9?new Ee(n+1,0):new Ee(n,r));return new kr(s,G.empty(),e)}function wN(t){return new kr(t.readTime,t.key,zo)}class kr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new kr(Z.min(),G.empty(),zo)}static max(){return new kr(Z.max(),G.empty(),zo)}}function EN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:ie(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class IN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ii(t){if(t.code!==O.FAILED_PRECONDITION||t.message!==TN)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let s=0,i=0,o=!1;e.forEach(c=>{++s,c.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(s=>s?M.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new M((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(m=>{o[d]=m,++c,c===i&&r(o)},m=>s(m))}})}static doWhile(e,n){return new M((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function kN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ki(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Rc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf=-1;function jc(t){return t==null}function Xl(t){return t===0&&1/t==-1/0}function NN(t){return typeof t=="number"&&Number.isInteger(t)&&!Xl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x="";function SN(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Wg(e)),e=bN(t.get(n),e);return Wg(e)}function bN(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case $x:n+="";break;default:n+=i}}return n}function Wg(t){return t+$x+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Dr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function qx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e,n){this.comparator=e,this.root=n||Xe.EMPTY}insert(e,n){return new Ce(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xe.BLACK,null,null))}remove(e){return new Ce(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xe.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xa(this.root,e,this.comparator,!0)}}class Xa{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xe{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Xe.RED,this.left=s??Xe.EMPTY,this.right=i??Xe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Xe(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Xe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Xe.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw X(43730,{key:this.key,value:this.value});if(this.right.isRed())throw X(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw X(27949);return e+(this.isRed()?0:1)}}Xe.EMPTY=null,Xe.RED=!0,Xe.BLACK=!1;Xe.EMPTY=new class{constructor(){this.size=0}get key(){throw X(57766)}get value(){throw X(16141)}get color(){throw X(16727)}get left(){throw X(29726)}get right(){throw X(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Xe(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e){this.comparator=e,this.data=new Ce(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Gg(this.data.getIterator())}getIteratorFrom(e){return new Gg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof qe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new qe(this.comparator);return n.data=e,n}}class Gg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.fields=e,e.sort(Je.comparator)}static empty(){return new At([])}unionWith(e){let n=new qe(Je.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new At(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ai(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Hx("Invalid base64 string: "+i):i}}(e);return new tt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new tt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tt.EMPTY_BYTE_STRING=new tt("");const CN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nr(t){if(me(!!t,39018),typeof t=="string"){let e=0;const n=CN.exec(t);if(me(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Re(t.seconds),nanos:Re(t.nanos)}}function Re(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Sr(t){return typeof t=="string"?tt.fromBase64String(t):tt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx="server_timestamp",Kx="__type__",Gx="__previous_value__",Qx="__local_write_time__";function Sf(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Kx])==null?void 0:r.stringValue)===Wx}function Dc(t){const e=t.mapValue.fields[Gx];return Sf(e)?Dc(e):e}function Bo(t){const e=Nr(t.mapValue.fields[Qx].timestampValue);return new Ee(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e,n,r,s,i,o,c,u,d,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=m}}const Jl="(default)";class $o{constructor(e,n){this.projectId=e,this.database=n||Jl}static empty(){return new $o("","")}get isDefaultDatabase(){return this.database===Jl}isEqual(e){return e instanceof $o&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="__type__",Xx="__max__",Ja={mapValue:{fields:{__type__:{stringValue:Xx}}}},Jx="__vector__",Zl="value";function br(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Sf(t)?4:RN(t)?9007199254740991:PN(t)?10:11:X(28295,{value:t})}function xn(t,e){if(t===e)return!0;const n=br(t);if(n!==br(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Bo(t).isEqual(Bo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Nr(s.timestampValue),c=Nr(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Sr(s.bytesValue).isEqual(Sr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Re(s.geoPointValue.latitude)===Re(i.geoPointValue.latitude)&&Re(s.geoPointValue.longitude)===Re(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Re(s.integerValue)===Re(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Re(s.doubleValue),c=Re(i.doubleValue);return o===c?Xl(o)===Xl(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return ai(t.arrayValue.values||[],e.arrayValue.values||[],xn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(Kg(o)!==Kg(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!xn(o[u],c[u])))return!1;return!0}(t,e);default:return X(52216,{left:t})}}function qo(t,e){return(t.values||[]).find(n=>xn(n,e))!==void 0}function li(t,e){if(t===e)return 0;const n=br(t),r=br(e);if(n!==r)return ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ie(t.booleanValue,e.booleanValue);case 2:return function(i,o){const c=Re(i.integerValue||i.doubleValue),u=Re(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return Qg(t.timestampValue,e.timestampValue);case 4:return Qg(Bo(t),Bo(e));case 5:return ih(t.stringValue,e.stringValue);case 6:return function(i,o){const c=Sr(i),u=Sr(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const c=i.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const m=ie(c[d],u[d]);if(m!==0)return m}return ie(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const c=ie(Re(i.latitude),Re(o.latitude));return c!==0?c:ie(Re(i.longitude),Re(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Yg(t.arrayValue,e.arrayValue);case 10:return function(i,o){var g,I,S,P;const c=i.fields||{},u=o.fields||{},d=(g=c[Zl])==null?void 0:g.arrayValue,m=(I=u[Zl])==null?void 0:I.arrayValue,p=ie(((S=d==null?void 0:d.values)==null?void 0:S.length)||0,((P=m==null?void 0:m.values)==null?void 0:P.length)||0);return p!==0?p:Yg(d,m)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ja.mapValue&&o===Ja.mapValue)return 0;if(i===Ja.mapValue)return 1;if(o===Ja.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),d=o.fields||{},m=Object.keys(d);u.sort(),m.sort();for(let p=0;p<u.length&&p<m.length;++p){const g=ih(u[p],m[p]);if(g!==0)return g;const I=li(c[u[p]],d[m[p]]);if(I!==0)return I}return ie(u.length,m.length)}(t.mapValue,e.mapValue);default:throw X(23264,{he:n})}}function Qg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ie(t,e);const n=Nr(t),r=Nr(e),s=ie(n.seconds,r.seconds);return s!==0?s:ie(n.nanos,r.nanos)}function Yg(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=li(n[s],r[s]);if(i)return i}return ie(n.length,r.length)}function ci(t){return oh(t)}function oh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Nr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Sr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=oh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${oh(n.fields[o])}`;return s+"}"}(t.mapValue):X(61005,{value:t})}function gl(t){switch(br(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Dc(t);return e?16+gl(e):16;case 5:return 2*t.stringValue.length;case 6:return Sr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+gl(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Dr(r.fields,(i,o)=>{s+=i.length+gl(o)}),s}(t.mapValue);default:throw X(13486,{value:t})}}function Xg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ah(t){return!!t&&"integerValue"in t}function bf(t){return!!t&&"arrayValue"in t}function Jg(t){return!!t&&"nullValue"in t}function Zg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function yl(t){return!!t&&"mapValue"in t}function PN(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Yx])==null?void 0:r.stringValue)===Jx}function yo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Dr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=yo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=yo(t.arrayValue.values[n]);return e}return{...t}}function RN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Xx}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.value=e}static empty(){return new wt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!yl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=yo(n)}setAll(e){let n=Je.emptyPath(),r={},s=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=yo(o):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());yl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return xn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];yl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Dr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new wt(yo(this.value))}}function Zx(t){const e=[];return Dr(t.fields,(n,r)=>{const s=new Je([n]);if(yl(r)){const i=Zx(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new At(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new ut(e,0,Z.min(),Z.min(),Z.min(),wt.empty(),0)}static newFoundDocument(e,n,r,s){return new ut(e,1,n,Z.min(),r,s,0)}static newNoDocument(e,n){return new ut(e,2,n,Z.min(),Z.min(),wt.empty(),0)}static newUnknownDocument(e,n){return new ut(e,3,n,Z.min(),Z.min(),wt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,n){this.position=e,this.inclusive=n}}function e0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=G.comparator(G.fromName(o.referenceValue),n.key):r=li(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function t0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!xn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,n="asc"){this.field=e,this.dir=n}}function jN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{}class Fe extends e_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new VN(e,n,r):n==="array-contains"?new MN(e,r):n==="in"?new FN(e,r):n==="not-in"?new UN(e,r):n==="array-contains-any"?new zN(e,r):new Fe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new LN(e,r):new ON(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(li(n,this.value)):n!==null&&br(this.value)===br(n)&&this.matchesComparison(li(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sn extends e_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new sn(e,n)}matches(e){return t_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function t_(t){return t.op==="and"}function n_(t){return DN(t)&&t_(t)}function DN(t){for(const e of t.filters)if(e instanceof sn)return!1;return!0}function lh(t){if(t instanceof Fe)return t.field.canonicalString()+t.op.toString()+ci(t.value);if(n_(t))return t.filters.map(e=>lh(e)).join(",");{const e=t.filters.map(n=>lh(n)).join(",");return`${t.op}(${e})`}}function r_(t,e){return t instanceof Fe?function(r,s){return s instanceof Fe&&r.op===s.op&&r.field.isEqual(s.field)&&xn(r.value,s.value)}(t,e):t instanceof sn?function(r,s){return s instanceof sn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,c)=>i&&r_(o,s.filters[c]),!0):!1}(t,e):void X(19439)}function s_(t){return t instanceof Fe?function(n){return`${n.field.canonicalString()} ${n.op} ${ci(n.value)}`}(t):t instanceof sn?function(n){return n.op.toString()+" {"+n.getFilters().map(s_).join(" ,")+"}"}(t):"Filter"}class VN extends Fe{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class LN extends Fe{constructor(e,n){super(e,"in",n),this.keys=i_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class ON extends Fe{constructor(e,n){super(e,"not-in",n),this.keys=i_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function i_(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}class MN extends Fe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return bf(n)&&qo(n.arrayValue,this.value)}}class FN extends Fe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&qo(this.value.arrayValue,n)}}class UN extends Fe{constructor(e,n){super(e,"not-in",n)}matches(e){if(qo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!qo(this.value.arrayValue,n)}}class zN extends Fe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!bf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>qo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.Te=null}}function n0(t,e=null,n=[],r=[],s=null,i=null,o=null){return new BN(t,e,n,r,s,i,o)}function Cf(t){const e=ee(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>lh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),jc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ci(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ci(r)).join(",")),e.Te=n}return e.Te}function Af(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!jN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!r_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!t0(t.startAt,e.startAt)&&t0(t.endAt,e.endAt)}function ch(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function $N(t,e,n,r,s,i,o,c){return new Ni(t,e,n,r,s,i,o,c)}function Pf(t){return new Ni(t)}function r0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function o_(t){return t.collectionGroup!==null}function vo(t){const e=ee(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new qe(Je.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Ho(i,r))}),n.has(Je.keyField().canonicalString())||e.Ie.push(new Ho(Je.keyField(),r))}return e.Ie}function fn(t){const e=ee(t);return e.Ee||(e.Ee=qN(e,vo(t))),e.Ee}function qN(t,e){if(t.limitType==="F")return n0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ho(s.field,i)});const n=t.endAt?new ec(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ec(t.startAt.position,t.startAt.inclusive):null;return n0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function uh(t,e){const n=t.filters.concat([e]);return new Ni(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function tc(t,e,n){return new Ni(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Vc(t,e){return Af(fn(t),fn(e))&&t.limitType===e.limitType}function a_(t){return`${Cf(fn(t))}|lt:${t.limitType}`}function ks(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>s_(s)).join(", ")}]`),jc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ci(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ci(s)).join(",")),`Target(${r})`}(fn(t))}; limitType=${t.limitType})`}function Lc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):G.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of vo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,c,u){const d=e0(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,vo(r),s)||r.endAt&&!function(o,c,u){const d=e0(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,vo(r),s))}(t,e)}function HN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function l_(t){return(e,n)=>{let r=!1;for(const s of vo(t)){const i=WN(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function WN(t,e,n){const r=t.field.isKeyField()?G.comparator(e.key,n.key):function(i,o,c){const u=o.data.field(i),d=c.data.field(i);return u!==null&&d!==null?li(u,d):X(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return X(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Dr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return qx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=new Ce(G.comparator);function Un(){return KN}const c_=new Ce(G.comparator);function ro(...t){let e=c_;for(const n of t)e=e.insert(n.key,n);return e}function u_(t){let e=c_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Qr(){return xo()}function d_(){return xo()}function xo(){return new ps(t=>t.toString(),(t,e)=>t.isEqual(e))}const GN=new Ce(G.comparator),QN=new qe(G.comparator);function oe(...t){let e=QN;for(const n of t)e=e.add(n);return e}const YN=new qe(ie);function XN(){return YN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xl(e)?"-0":e}}function h_(t){return{integerValue:""+t}}function f_(t,e){return NN(e)?h_(e):Rf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(){this._=void 0}}function JN(t,e,n){return t instanceof nc?function(s,i){const o={fields:{[Kx]:{stringValue:Wx},[Qx]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Sf(i)&&(i=Dc(i)),i&&(o.fields[Gx]=i),{mapValue:o}}(n,e):t instanceof Wo?p_(t,e):t instanceof Ko?g_(t,e):function(s,i){const o=m_(s,i),c=s0(o)+s0(s.Ae);return ah(o)&&ah(s.Ae)?h_(c):Rf(s.serializer,c)}(t,e)}function ZN(t,e,n){return t instanceof Wo?p_(t,e):t instanceof Ko?g_(t,e):n}function m_(t,e){return t instanceof Go?function(r){return ah(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class nc extends Oc{}class Wo extends Oc{constructor(e){super(),this.elements=e}}function p_(t,e){const n=y_(e);for(const r of t.elements)n.some(s=>xn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ko extends Oc{constructor(e){super(),this.elements=e}}function g_(t,e){let n=y_(e);for(const r of t.elements)n=n.filter(s=>!xn(s,r));return{arrayValue:{values:n}}}class Go extends Oc{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function s0(t){return Re(t.integerValue||t.doubleValue)}function y_(t){return bf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,n){this.field=e,this.transform=n}}function tS(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Wo&&s instanceof Wo||r instanceof Ko&&s instanceof Ko?ai(r.elements,s.elements,xn):r instanceof Go&&s instanceof Go?xn(r.Ae,s.Ae):r instanceof nc&&s instanceof nc}(t.transform,e.transform)}class nS{constructor(e,n){this.version=e,this.transformResults=n}}class $t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new $t}static exists(e){return new $t(void 0,e)}static updateTime(e){return new $t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Mc{}function v_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new jf(t.key,$t.none()):new sa(t.key,t.data,$t.none());{const n=t.data,r=wt.empty();let s=new qe(Je.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Vr(t.key,r,new At(s.toArray()),$t.none())}}function rS(t,e,n){t instanceof sa?function(s,i,o){const c=s.value.clone(),u=o0(s.fieldTransforms,i,o.transformResults);c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Vr?function(s,i,o){if(!vl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=o0(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(x_(s)),u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function _o(t,e,n,r){return t instanceof sa?function(i,o,c,u){if(!vl(i.precondition,o))return c;const d=i.value.clone(),m=a0(i.fieldTransforms,u,o);return d.setAll(m),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Vr?function(i,o,c,u){if(!vl(i.precondition,o))return c;const d=a0(i.fieldTransforms,u,o),m=o.data;return m.setAll(x_(i)),m.setAll(d),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,c){return vl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function sS(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=m_(r.transform,s||null);i!=null&&(n===null&&(n=wt.empty()),n.set(r.field,i))}return n||null}function i0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ai(r,s,(i,o)=>tS(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class sa extends Mc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Vr extends Mc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function x_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function o0(t,e,n){const r=new Map;me(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,ZN(o,c,n[s]))}return r}function a0(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,JN(i,o,e))}return r}class jf extends Mc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iS extends Mc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&rS(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=_o(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=_o(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=d_();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const u=v_(o,c);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(Z.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),oe())}isEqual(e){return this.batchId===e.batchId&&ai(this.mutations,e.mutations,(n,r)=>i0(n,r))&&ai(this.baseMutations,e.baseMutations,(n,r)=>i0(n,r))}}class Df{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){me(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return GN}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Df(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe,le;function cS(t){switch(t){case O.OK:return X(64938);case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return X(15467,{code:t})}}function __(t){if(t===void 0)return Fn("GRPC error has no .code"),O.UNKNOWN;switch(t){case Oe.OK:return O.OK;case Oe.CANCELLED:return O.CANCELLED;case Oe.UNKNOWN:return O.UNKNOWN;case Oe.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Oe.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Oe.INTERNAL:return O.INTERNAL;case Oe.UNAVAILABLE:return O.UNAVAILABLE;case Oe.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Oe.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Oe.NOT_FOUND:return O.NOT_FOUND;case Oe.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Oe.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Oe.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Oe.ABORTED:return O.ABORTED;case Oe.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Oe.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Oe.DATA_LOSS:return O.DATA_LOSS;default:return X(39323,{code:t})}}(le=Oe||(Oe={}))[le.OK=0]="OK",le[le.CANCELLED=1]="CANCELLED",le[le.UNKNOWN=2]="UNKNOWN",le[le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",le[le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",le[le.NOT_FOUND=5]="NOT_FOUND",le[le.ALREADY_EXISTS=6]="ALREADY_EXISTS",le[le.PERMISSION_DENIED=7]="PERMISSION_DENIED",le[le.UNAUTHENTICATED=16]="UNAUTHENTICATED",le[le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",le[le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",le[le.ABORTED=10]="ABORTED",le[le.OUT_OF_RANGE=11]="OUT_OF_RANGE",le[le.UNIMPLEMENTED=12]="UNIMPLEMENTED",le[le.INTERNAL=13]="INTERNAL",le[le.UNAVAILABLE=14]="UNAVAILABLE",le[le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=new wr([4294967295,4294967295],0);function l0(t){const e=uS().encode(t),n=new jx;return n.update(e),new Uint8Array(n.digest())}function c0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new wr([n,r],0),new wr([s,i],0)]}class Vf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new so(`Invalid padding: ${n}`);if(r<0)throw new so(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new so(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new so(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=wr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(wr.fromNumber(r)));return s.compare(dS)===1&&(s=new wr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=l0(e),[r,s]=c0(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Vf(i,s,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.ge===0)return;const n=l0(e),[r,s]=c0(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class so extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ia.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Fc(Z.min(),s,new Ce(ie),Un(),oe())}}class ia{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ia(r,n,oe(),oe(),oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class w_{constructor(e,n){this.targetId=e,this.Ce=n}}class E_{constructor(e,n,r=tt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class u0{constructor(){this.ve=0,this.Fe=d0(),this.Me=tt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=oe(),n=oe(),r=oe();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:X(38017,{changeType:i})}}),new ia(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=d0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,me(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class hS{constructor(e){this.Ge=e,this.ze=new Map,this.je=Un(),this.Je=Za(),this.He=Za(),this.Ye=new Ce(ie)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:X(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(ch(i))if(r===0){const o=new G(i.path);this.et(n,o,ut.newNoDocument(o,Z.min()))}else me(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const c=this.ut(e),u=c?this.ct(c,e,o):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=Sr(r).toUint8Array()}catch(u){if(u instanceof Hx)return oi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Vf(o,s,i)}catch(u){return oi(u instanceof so?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const c=this.ot(o);if(c){if(i.current&&ch(c.target)){const u=new G(c.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,ut.newNoDocument(u,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=oe();this.He.forEach((i,o)=>{let c=!0;o.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Fc(e,n,this.Ye,this.je,r);return this.je=Un(),this.Je=Za(),this.He=Za(),this.Ye=new Ce(ie),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new u0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new qe(ie),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new qe(ie),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new u0),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Za(){return new Ce(G.comparator)}function d0(){return new Ce(G.comparator)}const fS={asc:"ASCENDING",desc:"DESCENDING"},mS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pS={and:"AND",or:"OR"};class gS{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function dh(t,e){return t.useProto3Json||jc(e)?e:{value:e}}function rc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function T_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function yS(t,e){return rc(t,e.toTimestamp())}function mn(t){return me(!!t,49232),Z.fromTimestamp(function(n){const r=Nr(n);return new Ee(r.seconds,r.nanos)}(t))}function Lf(t,e){return hh(t,e).canonicalString()}function hh(t,e){const n=function(s){return new ve(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function I_(t){const e=ve.fromString(t);return me(C_(e),10190,{key:e.toString()}),e}function fh(t,e){return Lf(t.databaseId,e.path)}function td(t,e){const n=I_(e);if(n.get(1)!==t.databaseId.projectId)throw new q(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(N_(n))}function k_(t,e){return Lf(t.databaseId,e)}function vS(t){const e=I_(t);return e.length===4?ve.emptyPath():N_(e)}function mh(t){return new ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function N_(t){return me(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function h0(t,e,n){return{name:fh(t,e),fields:n.value.mapValue.fields}}function xS(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:X(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,m){return d.useProto3Json?(me(m===void 0||typeof m=="string",58123),tt.fromBase64String(m||"")):(me(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),tt.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const m=d.code===void 0?O.UNKNOWN:__(d.code);return new q(m,d.message||"")}(o);n=new E_(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=td(t,r.document.name),i=mn(r.document.updateTime),o=r.document.createTime?mn(r.document.createTime):Z.min(),c=new wt({mapValue:{fields:r.document.fields}}),u=ut.newFoundDocument(s,i,o,c),d=r.targetIds||[],m=r.removedTargetIds||[];n=new xl(d,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=td(t,r.document),i=r.readTime?mn(r.readTime):Z.min(),o=ut.newNoDocument(s,i),c=r.removedTargetIds||[];n=new xl([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=td(t,r.document),i=r.removedTargetIds||[];n=new xl([],i,s,null)}else{if(!("filter"in e))return X(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new lS(s,i),c=r.targetId;n=new w_(c,o)}}return n}function _S(t,e){let n;if(e instanceof sa)n={update:h0(t,e.key,e.value)};else if(e instanceof jf)n={delete:fh(t,e.key)};else if(e instanceof Vr)n={update:h0(t,e.key,e.data),updateMask:CS(e.fieldMask)};else{if(!(e instanceof iS))return X(16599,{Vt:e.type});n={verify:fh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const c=o.transform;if(c instanceof nc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Wo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ko)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Go)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw X(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:yS(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:X(27497)}(t,e.precondition)),n}function wS(t,e){return t&&t.length>0?(me(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?mn(s.updateTime):mn(i);return o.isEqual(Z.min())&&(o=mn(i)),new nS(o,s.transformResults||[])}(n,e))):[]}function ES(t,e){return{documents:[k_(t,e.path)]}}function TS(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=k_(t,s);const i=function(d){if(d.length!==0)return b_(sn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(m=>function(g){return{field:Ns(g.field),direction:NS(g.dir)}}(m))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=dh(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function IS(t){let e=vS(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){me(r===1,65062);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let i=[];n.where&&(i=function(p){const g=S_(p);return g instanceof sn&&n_(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(S){return new Ho(Ss(S.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(p){let g;return g=typeof p=="object"?p.value:p,jc(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,I=p.values||[];return new ec(I,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,I=p.values||[];return new ec(I,g)}(n.endAt)),$N(e,s,o,i,c,"F",u,d)}function kS(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function S_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ss(n.unaryFilter.field);return Fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ss(n.unaryFilter.field);return Fe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ss(n.unaryFilter.field);return Fe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ss(n.unaryFilter.field);return Fe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return X(61313);default:return X(60726)}}(t):t.fieldFilter!==void 0?function(n){return Fe.create(Ss(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return X(58110);default:return X(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return sn.create(n.compositeFilter.filters.map(r=>S_(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return X(1026)}}(n.compositeFilter.op))}(t):X(30097,{filter:t})}function NS(t){return fS[t]}function SS(t){return mS[t]}function bS(t){return pS[t]}function Ns(t){return{fieldPath:t.canonicalString()}}function Ss(t){return Je.fromServerFormat(t.fieldPath)}function b_(t){return t instanceof Fe?function(n){if(n.op==="=="){if(Zg(n.value))return{unaryFilter:{field:Ns(n.field),op:"IS_NAN"}};if(Jg(n.value))return{unaryFilter:{field:Ns(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Zg(n.value))return{unaryFilter:{field:Ns(n.field),op:"IS_NOT_NAN"}};if(Jg(n.value))return{unaryFilter:{field:Ns(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ns(n.field),op:SS(n.op),value:n.value}}}(t):t instanceof sn?function(n){const r=n.getFilters().map(s=>b_(s));return r.length===1?r[0]:{compositeFilter:{op:bS(n.op),filters:r}}}(t):X(54877,{filter:t})}function CS(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function C_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e,n,r,s,i=Z.min(),o=Z.min(),c=tt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new cr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e){this.yt=e}}function PS(t){const e=IS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?tc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(){this.Cn=new jS}addToCollectionParentIndex(e,n){return this.Cn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(kr.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(kr.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class jS{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new qe(ve.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new qe(ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},A_=41943040;class xt{static withCacheSize(e){return new xt(e,xt.DEFAULT_COLLECTION_PERCENTILE,xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xt.DEFAULT_COLLECTION_PERCENTILE=10,xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xt.DEFAULT=new xt(A_,xt.DEFAULT_COLLECTION_PERCENTILE,xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xt.DISABLED=new xt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ui(0)}static cr(){return new ui(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0="LruGarbageCollector",DS=1048576;function p0([t,e],[n,r]){const s=ie(t,n);return s===0?ie(e,r):s}class VS{constructor(e){this.Ir=e,this.buffer=new qe(p0),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();p0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class LS{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){H(m0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ki(n)?H(m0,"Ignoring IndexedDB error during garbage collection: ",n):await Ii(n)}await this.Vr(3e5)})}}class OS{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(Rc.ce);const r=new VS(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(f0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),f0):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,c,u,d;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,n))).next(p=>(i=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),Is()<=se.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-m}ms
	Determined least recently used ${s} in `+(c-o)+`ms
	Removed ${i} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(d-u)+`ms
Total Duration: ${d-m}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function MS(t,e){return new OS(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(){this.changes=new ps(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&_o(r.mutation,s,At.empty(),Ee.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,oe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=oe()){const s=Qr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=ro();return i.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Qr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,oe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,s){let i=Un();const o=xo(),c=function(){return xo()}();return n.forEach((u,d)=>{const m=r.get(d.key);s.has(d.key)&&(m===void 0||m.mutation instanceof Vr)?i=i.insert(d.key,d):m!==void 0?(o.set(d.key,m.mutation.getFieldMask()),_o(m.mutation,d,m.mutation.getFieldMask(),Ee.now())):o.set(d.key,At.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,m)=>o.set(d,m)),n.forEach((d,m)=>c.set(d,new US(m,o.get(d)??null))),c))}recalculateAndSaveOverlays(e,n){const r=xo();let s=new Ce((o,c)=>o-c),i=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let m=r.get(u)||At.empty();m=c.applyToLocalView(d,m),r.set(u,m);const p=(s.get(c.batchId)||oe()).add(u);s=s.insert(c.batchId,p)})}).next(()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,m=u.value,p=d_();m.forEach(g=>{if(!i.has(g)){const I=v_(n.get(g),r.get(g));I!==null&&p.set(g,I),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return G.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):o_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):M.resolve(Qr());let c=zo,u=i;return o.next(d=>M.forEach(d,(m,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),i.get(m)?M.resolve():this.remoteDocumentCache.getEntry(e,m).next(g=>{u=u.insert(m,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,oe())).next(m=>({batchId:c,changes:u_(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let s=ro();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=ro();return this.indexManager.getCollectionParents(e,i).next(c=>M.forEach(c,u=>{const d=function(p,g){return new Ni(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(m=>{m.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const m=d.getKey();o.get(m)===null&&(o=o.insert(m,ut.newInvalidDocument(m)))});let c=ro();return o.forEach((u,d)=>{const m=i.get(u);m!==void 0&&_o(m.mutation,d,At.empty(),Ee.now()),Lc(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return M.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:mn(s.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:PS(s.bundledQuery),readTime:mn(s.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(){this.overlays=new Ce(G.comparator),this.qr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Qr();return M.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const s=Qr(),i=n.length+1,o=new G(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return M.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ce((d,m)=>d-m);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let m=i.get(d.largestBatchId);m===null&&(m=Qr(),i=i.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const c=Qr(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,m)=>c.set(d,m)),!(c.size()>=s)););return M.resolve(c)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new aS(n,r));let i=this.qr.get(n);i===void 0&&(i=oe(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(){this.sessionToken=tt.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(){this.Qr=new qe(We.$r),this.Ur=new qe(We.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new We(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new We(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new G(new ve([])),r=new We(n,e),s=new We(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new G(new ve([])),r=new We(n,e),s=new We(n,e+1);let i=oe();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new We(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class We{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return G.comparator(e.key,n.key)||ie(e.Yr,n.Yr)}static Kr(e,n){return ie(e.Yr,n.Yr)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new qe(We.$r)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new oS(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.Zr=this.Zr.add(new We(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return M.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?Nf:this.tr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new We(n,0),s=new We(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const c=this.Xr(o.Yr);i.push(c)}),M.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new qe(ie);return n.forEach(s=>{const i=new We(s,0),o=new We(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],c=>{r=r.add(c.Yr)})}),M.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;G.isDocumentKey(i)||(i=i.child(""));const o=new We(new G(i),0);let c=new qe(ie);return this.Zr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.Yr)),!0)},o),M.resolve(this.ti(c))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){me(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return M.forEach(n.mutations,s=>{const i=new We(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new We(n,0),s=this.Zr.firstAfterOrEqual(r);return M.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e){this.ri=e,this.docs=function(){return new Ce(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():ut.newInvalidDocument(n))}getEntries(e,n){let r=Un();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ut.newInvalidDocument(s))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Un();const o=n.path,c=new G(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:m}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||EN(wN(m),r)<=0||(s.has(m.key)||Lc(n,m))&&(i=i.insert(m.key,m.mutableCopy()))}return M.resolve(i)}getAllFromCollectionGroup(e,n,r,s){X(9500)}ii(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new KS(this)}getSize(e){return M.resolve(this.size)}}class KS extends FS{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e){this.persistence=e,this.si=new ps(n=>Cf(n),Af),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.oi=0,this._i=new Of,this.targetCount=0,this.ai=ui.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),M.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ui(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Pr(n),M.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),M.waitFor(i).next(()=>s)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),M.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e,n){this.ui={},this.overlays={},this.ci=new Rc(0),this.li=!1,this.li=!0,this.hi=new qS,this.referenceDelegate=e(this),this.Pi=new GS(this),this.indexManager=new RS,this.remoteDocumentCache=function(s){return new WS(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new AS(n),this.Ii=new BS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $S,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new HS(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new QS(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return M.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class QS extends IN{constructor(e){super(),this.currentSequenceNumber=e}}class Mf{constructor(e){this.persistence=e,this.Ri=new Of,this.Vi=null}static mi(e){return new Mf(e)}get fi(){if(this.Vi)return this.Vi;throw X(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),M.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.fi,r=>{const s=G.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,Z.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return M.or([()=>M.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class sc{constructor(e,n){this.persistence=e,this.pi=new ps(r=>SN(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=MS(this,n)}static mi(e,n){return new sc(e,n)}Ei(){}di(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return M.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?M.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(c=>{c||(r++,i.removeEntry(o,Z.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=gl(e.data.value)),n}br(e,n,r){return M.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return M.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=oe(),s=oe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Ff(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return qI()?8:kN(ht())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new YS;return this.Ss(e,n,o).next(c=>{if(i.result=c,this.Vs)return this.bs(e,n,o,c.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Is()<=se.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",ks(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),M.resolve()):(Is()<=se.DEBUG&&H("QueryEngine","Query:",ks(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Is()<=se.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",ks(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fn(n))):M.resolve())}ys(e,n){if(r0(n))return M.resolve(null);let r=fn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=tc(n,null,"F"),r=fn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=oe(...i);return this.ps.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Ds(n,c);return this.Cs(n,d,o,u.readTime)?this.ys(e,tc(n,null,"F")):this.vs(e,d,n,u)}))})))}ws(e,n,r,s){return r0(n)||s.isEqual(Z.min())?M.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?M.resolve(null):(Is()<=se.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ks(n)),this.vs(e,o,n,_N(s,zo)).next(c=>c))})}Ds(e,n){let r=new qe(l_(e));return n.forEach((s,i)=>{Lc(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Is()<=se.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",ks(n)),this.ps.getDocumentsMatchingQuery(e,n,kr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf="LocalStore",JS=3e8;class ZS{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ce(ie),this.xs=new ps(i=>Cf(i),Af),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function e2(t,e,n,r){return new ZS(t,e,n,r)}async function R_(t,e){const n=ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],c=[];let u=oe();for(const d of s){o.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}for(const d of i){c.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:c}))})})}function t2(t,e){const n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(c,u,d,m){const p=d.batch,g=p.keys();let I=M.resolve();return g.forEach(S=>{I=I.next(()=>m.getEntry(u,S)).next(P=>{const j=d.docVersions.get(S);me(j!==null,48541),P.version.compareTo(j)<0&&(p.applyToRemoteDocument(P,d),P.isValidDocument()&&(P.setReadTime(d.commitVersion),m.addEntry(P)))})}),I.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=oe();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function j_(t){const e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function n2(t,e){const n=ee(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const c=[];e.targetChanges.forEach((m,p)=>{const g=s.get(p);if(!g)return;c.push(n.Pi.removeMatchingKeys(i,m.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(i,m.addedDocuments,p)));let I=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?I=I.withResumeToken(tt.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):m.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(m.resumeToken,r)),s=s.insert(p,I),function(P,j,T){return P.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=JS?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(g,I,m)&&c.push(n.Pi.updateTargetData(i,I))});let u=Un(),d=oe();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,m))}),c.push(r2(i,o,e.documentUpdates).next(m=>{u=m.ks,d=m.qs})),!r.isEqual(Z.min())){const m=n.Pi.getLastRemoteSnapshotVersion(i).next(p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(m)}return M.waitFor(c).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.Ms=s,i))}function r2(t,e,n){let r=oe(),s=oe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Un();return n.forEach((c,u)=>{const d=i.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(Z.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):H(Uf,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{ks:o,qs:s}})}function s2(t,e){const n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Nf),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function i2(t,e){const n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,M.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new cr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function ph(t,e,n){const r=ee(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ki(o))throw o;H(Uf,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function g0(t,e,n){const r=ee(t);let s=Z.min(),i=oe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,m){const p=ee(u),g=p.xs.get(m);return g!==void 0?M.resolve(p.Ms.get(g)):p.Pi.getTargetData(d,m)}(r,o,fn(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next(u=>{i=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:Z.min(),n?i:oe())).next(c=>(o2(r,HN(e),c),{documents:c,Qs:i})))}function o2(t,e,n){let r=t.Os.get(e)||Z.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class y0{constructor(){this.activeTargetIds=XN()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class a2{constructor(){this.Mo=new y0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new y0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0="ConnectivityMonitor";class x0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(v0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){H(v0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let el=null;function gh(){return el===null?el=function(){return 268435456+Math.round(2147483648*Math.random())}():el++,"0x"+el.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nd="RestConnection",c2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class u2{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Jl?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=gh(),c=this.zo(e,n.toUriEncodedString());H(nd,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,i);const{host:d}=new URL(c),m=wi(d);return this.Jo(e,c,u,r,m).then(p=>(H(nd,`Received RPC '${e}' ${o}: `,p),p),p=>{throw oi(nd,`RPC '${e}' ${o} failed with error: `,p,"url: ",c,"request:",r),p})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ti}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=c2[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const at="WebChannelConnection";class h2 extends u2{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=gh();return new Promise((c,u)=>{const d=new Dx;d.setWithCredentials(!0),d.listenOnce(Vx.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case pl.NO_ERROR:const p=d.getResponseJson();H(at,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),c(p);break;case pl.TIMEOUT:H(at,`RPC '${e}' ${o} timed out`),u(new q(O.DEADLINE_EXCEEDED,"Request time out"));break;case pl.HTTP_ERROR:const g=d.getStatus();if(H(at,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let I=d.getResponseJson();Array.isArray(I)&&(I=I[0]);const S=I==null?void 0:I.error;if(S&&S.status&&S.message){const P=function(T){const w=T.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(w)>=0?w:O.UNKNOWN}(S.status);u(new q(P,S.message))}else u(new q(O.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new q(O.UNAVAILABLE,"Connection failed."));break;default:X(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{H(at,`RPC '${e}' ${o} completed.`)}});const m=JSON.stringify(s);H(at,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",m,r,15)})}T_(e,n,r){const s=gh(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Mx(),c=Ox(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const m=i.join("");H(at,`Creating RPC '${e}' stream ${s}: ${m}`,u);const p=o.createWebChannel(m,u);this.I_(p);let g=!1,I=!1;const S=new d2({Yo:j=>{I?H(at,`Not sending because RPC '${e}' stream ${s} is closed:`,j):(g||(H(at,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),H(at,`RPC '${e}' stream ${s} sending:`,j),p.send(j))},Zo:()=>p.close()}),P=(j,T,w)=>{j.listen(T,E=>{try{w(E)}catch(A){setTimeout(()=>{throw A},0)}})};return P(p,no.EventType.OPEN,()=>{I||(H(at,`RPC '${e}' stream ${s} transport opened.`),S.o_())}),P(p,no.EventType.CLOSE,()=>{I||(I=!0,H(at,`RPC '${e}' stream ${s} transport closed`),S.a_(),this.E_(p))}),P(p,no.EventType.ERROR,j=>{I||(I=!0,oi(at,`RPC '${e}' stream ${s} transport errored. Name:`,j.name,"Message:",j.message),S.a_(new q(O.UNAVAILABLE,"The operation could not be completed")))}),P(p,no.EventType.MESSAGE,j=>{var T;if(!I){const w=j.data[0];me(!!w,16349);const E=w,A=(E==null?void 0:E.error)||((T=E[0])==null?void 0:T.error);if(A){H(at,`RPC '${e}' stream ${s} received error:`,A);const D=A.status;let L=function(y){const k=Oe[y];if(k!==void 0)return __(k)}(D),_=A.message;L===void 0&&(L=O.INTERNAL,_="Unknown error status: "+D+" with message "+A.message),I=!0,S.a_(new q(L,_)),p.close()}else H(at,`RPC '${e}' stream ${s} received:`,w),S.u_(w)}}),P(c,Lx.STAT_EVENT,j=>{j.stat===sh.PROXY?H(at,`RPC '${e}' stream ${s} detected buffering proxy`):j.stat===sh.NOPROXY&&H(at,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{S.__()},0),S}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function rd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(t){return new gS(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0="PersistentStream";class V_{constructor(e,n,r,s,i,o,c,u){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new D_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(Fn(n.toString()),Fn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new q(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return H(_0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(H(_0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class f2 extends V_{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=xS(this.serializer,e),r=function(i){if(!("targetChange"in i))return Z.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Z.min():o.readTime?mn(o.readTime):Z.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=mh(this.serializer),n.addTarget=function(i,o){let c;const u=o.target;if(c=ch(u)?{documents:ES(i,u)}:{query:TS(i,u).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=T_(i,o.resumeToken);const d=dh(i,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(Z.min())>0){c.readTime=rc(i,o.snapshotVersion.toTimestamp());const d=dh(i,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=kS(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=mh(this.serializer),n.removeTarget=e,this.q_(n)}}class m2 extends V_{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return me(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,me(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){me(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=wS(e.writeResults,e.commitTime),r=mn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=mh(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>_S(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{}class g2 extends p2{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new q(O.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,hh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new q(O.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Ho(e,hh(n,r),s,o,c,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(O.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class y2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Fn(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls="RemoteStore";class v2{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{gs(this)&&(H(ls,"Restarting streams for network reachability change."),await async function(u){const d=ee(u);d.Ea.add(4),await oa(d),d.Ra.set("Unknown"),d.Ea.delete(4),await zc(d)}(this))})}),this.Ra=new y2(r,s)}}async function zc(t){if(gs(t))for(const e of t.da)await e(!0)}async function oa(t){for(const e of t.da)await e(!1)}function L_(t,e){const n=ee(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),qf(n)?$f(n):Si(n).O_()&&Bf(n,e))}function zf(t,e){const n=ee(t),r=Si(n);n.Ia.delete(e),r.O_()&&O_(n,e),n.Ia.size===0&&(r.O_()?r.L_():gs(n)&&n.Ra.set("Unknown"))}function Bf(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Si(t).Y_(e)}function O_(t,e){t.Va.Ue(e),Si(t).Z_(e)}function $f(t){t.Va=new hS({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Si(t).start(),t.Ra.ua()}function qf(t){return gs(t)&&!Si(t).x_()&&t.Ia.size>0}function gs(t){return ee(t).Ea.size===0}function M_(t){t.Va=void 0}async function x2(t){t.Ra.set("Online")}async function _2(t){t.Ia.forEach((e,n)=>{Bf(t,e)})}async function w2(t,e){M_(t),qf(t)?(t.Ra.ha(e),$f(t)):t.Ra.set("Unknown")}async function E2(t,e,n){if(t.Ra.set("Online"),e instanceof E_&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const c of i.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.Ia.delete(c),s.Va.removeTarget(c))}(t,e)}catch(r){H(ls,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ic(t,r)}else if(e instanceof xl?t.Va.Ze(e):e instanceof w_?t.Va.st(e):t.Va.tt(e),!n.isEqual(Z.min()))try{const r=await j_(t.localStore);n.compareTo(r)>=0&&await function(i,o){const c=i.Va.Tt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const m=i.Ia.get(d);m&&i.Ia.set(d,m.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const m=i.Ia.get(u);if(!m)return;i.Ia.set(u,m.withResumeToken(tt.EMPTY_BYTE_STRING,m.snapshotVersion)),O_(i,u);const p=new cr(m.target,u,d,m.sequenceNumber);Bf(i,p)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){H(ls,"Failed to raise snapshot:",r),await ic(t,r)}}async function ic(t,e,n){if(!ki(e))throw e;t.Ea.add(1),await oa(t),t.Ra.set("Offline"),n||(n=()=>j_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H(ls,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await zc(t)})}function F_(t,e){return e().catch(n=>ic(t,n,e))}async function Bc(t){const e=ee(t),n=Cr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Nf;for(;T2(e);)try{const s=await s2(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,I2(e,s)}catch(s){await ic(e,s)}U_(e)&&z_(e)}function T2(t){return gs(t)&&t.Ta.length<10}function I2(t,e){t.Ta.push(e);const n=Cr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function U_(t){return gs(t)&&!Cr(t).x_()&&t.Ta.length>0}function z_(t){Cr(t).start()}async function k2(t){Cr(t).ra()}async function N2(t){const e=Cr(t);for(const n of t.Ta)e.ea(n.mutations)}async function S2(t,e,n){const r=t.Ta.shift(),s=Df.from(r,e,n);await F_(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Bc(t)}async function b2(t,e){e&&Cr(t).X_&&await async function(r,s){if(function(o){return cS(o)&&o!==O.ABORTED}(s.code)){const i=r.Ta.shift();Cr(r).B_(),await F_(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Bc(r)}}(t,e),U_(t)&&z_(t)}async function w0(t,e){const n=ee(t);n.asyncQueue.verifyOperationInProgress(),H(ls,"RemoteStore received new credentials");const r=gs(n);n.Ea.add(3),await oa(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await zc(n)}async function C2(t,e){const n=ee(t);e?(n.Ea.delete(2),await zc(n)):e||(n.Ea.add(2),await oa(n),n.Ra.set("Unknown"))}function Si(t){return t.ma||(t.ma=function(n,r,s){const i=ee(n);return i.sa(),new f2(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:x2.bind(null,t),t_:_2.bind(null,t),r_:w2.bind(null,t),H_:E2.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),qf(t)?$f(t):t.Ra.set("Unknown")):(await t.ma.stop(),M_(t))})),t.ma}function Cr(t){return t.fa||(t.fa=function(n,r,s){const i=ee(n);return i.sa(),new m2(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:k2.bind(null,t),r_:b2.bind(null,t),ta:N2.bind(null,t),na:S2.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Bc(t)):(await t.fa.stop(),t.Ta.length>0&&(H(ls,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Pn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new Hf(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wf(t,e){if(Fn("AsyncQueue",`${e}: ${t}`),ki(t))return new q(O.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{static emptySet(e){return new Ks(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=ro(),this.sortedSet=new Ce(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ks)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ks;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(){this.ga=new Ce(G.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):X(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class di{constructor(e,n,r,s,i,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new di(e,n,Ks.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class P2{constructor(){this.queries=T0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ee(n),i=s.queries;s.queries=T0(),i.forEach((o,c)=>{for(const u of c.Sa)u.onError(r)})})(this,new q(O.ABORTED,"Firestore shutting down"))}}function T0(){return new ps(t=>a_(t),Vc)}async function B_(t,e){const n=ee(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new A2,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=Wf(o,`Initialization of query '${ks(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Kf(n)}async function $_(t,e){const n=ee(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function R2(t,e){const n=ee(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.Sa)c.Fa(s)&&(r=!0);o.wa=s}}r&&Kf(n)}function j2(t,e,n){const r=ee(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Kf(t){t.Ca.forEach(e=>{e.next()})}var yh,I0;(I0=yh||(yh={})).Ma="default",I0.Cache="cache";class q_{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new di(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=di.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==yh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(e){this.key=e}}class W_{constructor(e){this.key=e}}class D2{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=oe(),this.mutatedKeys=oe(),this.eu=l_(e),this.tu=new Ks(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new E0,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,p)=>{const g=s.get(m),I=Lc(this.query,p)?p:null,S=!!g&&this.mutatedKeys.has(g.key),P=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let j=!1;g&&I?g.data.isEqual(I.data)?S!==P&&(r.track({type:3,doc:I}),j=!0):this.su(g,I)||(r.track({type:2,doc:I}),j=!0,(u&&this.eu(I,u)>0||d&&this.eu(I,d)<0)&&(c=!0)):!g&&I?(r.track({type:0,doc:I}),j=!0):g&&!I&&(r.track({type:1,doc:g}),j=!0,(u||d)&&(c=!0)),j&&(I?(o=o.add(I),i=P?i.add(m):i.delete(m)):(o=o.delete(m),i=i.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),i=i.delete(m.key),r.track({type:1,doc:m})}return{tu:o,iu:r,Cs:c,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((m,p)=>function(I,S){const P=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X(20277,{Rt:j})}};return P(I)-P(S)}(m.type,p.type)||this.eu(m.doc,p.doc)),this.ou(r),s=s??!1;const c=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,d=u!==this.Za;return this.Za=u,o.length!==0||d?{snapshot:new di(this.query,e.tu,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new E0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=oe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new W_(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new H_(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=oe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return di.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Gf="SyncEngine";class V2{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class L2{constructor(e){this.key=e,this.hu=!1}}class O2{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ps(c=>a_(c),Vc),this.Iu=new Map,this.Eu=new Set,this.du=new Ce(G.comparator),this.Au=new Map,this.Ru=new Of,this.Vu={},this.mu=new Map,this.fu=ui.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function M2(t,e,n=!0){const r=J_(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await K_(r,e,n,!0),s}async function F2(t,e){const n=J_(t);await K_(n,e,!0,!1)}async function K_(t,e,n,r){const s=await i2(t.localStore,fn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await U2(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&L_(t.remoteStore,s),c}async function U2(t,e,n,r,s){t.pu=(p,g,I)=>async function(P,j,T,w){let E=j.view.ru(T);E.Cs&&(E=await g0(P.localStore,j.query,!1).then(({documents:_})=>j.view.ru(_,E)));const A=w&&w.targetChanges.get(j.targetId),D=w&&w.targetMismatches.get(j.targetId)!=null,L=j.view.applyChanges(E,P.isPrimaryClient,A,D);return N0(P,j.targetId,L.au),L.snapshot}(t,p,g,I);const i=await g0(t.localStore,e,!0),o=new D2(e,i.Qs),c=o.ru(i.documents),u=ia.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(c,t.isPrimaryClient,u);N0(t,n,d.au);const m=new V2(e,n,o);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function z2(t,e,n){const r=ee(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Vc(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ph(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&zf(r.remoteStore,s.targetId),vh(r,s.targetId)}).catch(Ii)):(vh(r,s.targetId),await ph(r.localStore,s.targetId,!0))}async function B2(t,e){const n=ee(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),zf(n.remoteStore,r.targetId))}async function $2(t,e,n){const r=Y2(t);try{const s=await function(o,c){const u=ee(o),d=Ee.now(),m=c.reduce((I,S)=>I.add(S.key),oe());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",I=>{let S=Un(),P=oe();return u.Ns.getEntries(I,m).next(j=>{S=j,S.forEach((T,w)=>{w.isValidDocument()||(P=P.add(T))})}).next(()=>u.localDocuments.getOverlayedDocuments(I,S)).next(j=>{p=j;const T=[];for(const w of c){const E=sS(w,p.get(w.key).overlayedDocument);E!=null&&T.push(new Vr(w.key,E,Zx(E.value.mapValue),$t.exists(!0)))}return u.mutationQueue.addMutationBatch(I,d,T,c)}).next(j=>{g=j;const T=j.applyToLocalDocumentSet(p,P);return u.documentOverlayCache.saveOverlays(I,j.batchId,T)})}).then(()=>({batchId:g.batchId,changes:u_(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,c,u){let d=o.Vu[o.currentUser.toKey()];d||(d=new Ce(ie)),d=d.insert(c,u),o.Vu[o.currentUser.toKey()]=d}(r,s.batchId,n),await aa(r,s.changes),await Bc(r.remoteStore)}catch(s){const i=Wf(s,"Failed to persist write");n.reject(i)}}async function G_(t,e){const n=ee(t);try{const r=await n2(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(me(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?me(o.hu,14607):s.removedDocuments.size>0&&(me(o.hu,42227),o.hu=!1))}),await aa(n,r,e)}catch(r){await Ii(r)}}function k0(t,e,n){const r=ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const c=o.view.va(e);c.snapshot&&s.push(c.snapshot)}),function(o,c){const u=ee(o);u.onlineState=c;let d=!1;u.queries.forEach((m,p)=>{for(const g of p.Sa)g.va(c)&&(d=!0)}),d&&Kf(u)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function q2(t,e,n){const r=ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Ce(G.comparator);o=o.insert(i,ut.newNoDocument(i,Z.min()));const c=oe().add(i),u=new Fc(Z.min(),new Map,new Ce(ie),o,c);await G_(r,u),r.du=r.du.remove(i),r.Au.delete(e),Qf(r)}else await ph(r.localStore,e,!1).then(()=>vh(r,e,n)).catch(Ii)}async function H2(t,e){const n=ee(t),r=e.batch.batchId;try{const s=await t2(n.localStore,e);Y_(n,r,null),Q_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await aa(n,s)}catch(s){await Ii(s)}}async function W2(t,e,n){const r=ee(t);try{const s=await function(o,c){const u=ee(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let m;return u.mutationQueue.lookupMutationBatch(d,c).next(p=>(me(p!==null,37113),m=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,m,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m)).next(()=>u.localDocuments.getDocuments(d,m))})}(r.localStore,e);Y_(r,e,n),Q_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await aa(r,s)}catch(s){await Ii(s)}}function Q_(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Y_(t,e,n){const r=ee(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function vh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||X_(t,r)})}function X_(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(zf(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Qf(t))}function N0(t,e,n){for(const r of n)r instanceof H_?(t.Ru.addReference(r.key,e),K2(t,r)):r instanceof W_?(H(Gf,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||X_(t,r.key)):X(19791,{wu:r})}function K2(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(H(Gf,"New document in limbo: "+n),t.Eu.add(r),Qf(t))}function Qf(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new G(ve.fromString(e)),r=t.fu.next();t.Au.set(r,new L2(n)),t.du=t.du.insert(n,r),L_(t.remoteStore,new cr(fn(Pf(n.path)),r,"TargetPurposeLimboResolution",Rc.ce))}}async function aa(t,e,n){const r=ee(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{o.push(r.pu(u,e,n).then(d=>{var m;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(m=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:m.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){s.push(d);const p=Ff.As(u.targetId,d);i.push(p)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(u,d){const m=ee(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>M.forEach(d,g=>M.forEach(g.Es,I=>m.persistence.referenceDelegate.addReference(p,g.targetId,I)).next(()=>M.forEach(g.ds,I=>m.persistence.referenceDelegate.removeReference(p,g.targetId,I)))))}catch(p){if(!ki(p))throw p;H(Uf,"Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const I=m.Ms.get(g),S=I.snapshotVersion,P=I.withLastLimboFreeSnapshotVersion(S);m.Ms=m.Ms.insert(g,P)}}}(r.localStore,i))}async function G2(t,e){const n=ee(t);if(!n.currentUser.isEqual(e)){H(Gf,"User change. New user:",e.toKey());const r=await R_(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(c=>{c.forEach(u=>{u.reject(new q(O.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await aa(n,r.Ls)}}function Q2(t,e){const n=ee(t),r=n.Au.get(e);if(r&&r.hu)return oe().add(r.key);{let s=oe();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const c=n.Tu.get(o);s=s.unionWith(c.view.nu)}return s}}function J_(t){const e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=G_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Q2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=q2.bind(null,e),e.Pu.H_=R2.bind(null,e.eventManager),e.Pu.yu=j2.bind(null,e.eventManager),e}function Y2(t){const e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=H2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=W2.bind(null,e),e}class oc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Uc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return e2(this.persistence,new XS,e.initialUser,this.serializer)}Cu(e){return new P_(Mf.mi,this.serializer)}Du(e){return new a2}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}oc.provider={build:()=>new oc};class X2 extends oc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){me(this.persistence.referenceDelegate instanceof sc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new LS(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?xt.withCacheSize(this.cacheSizeBytes):xt.DEFAULT;return new P_(r=>sc.mi(r,n),this.serializer)}}class xh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>k0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=G2.bind(null,this.syncEngine),await C2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new P2}()}createDatastore(e){const n=Uc(e.databaseInfo.databaseId),r=function(i){return new h2(i)}(e.databaseInfo);return function(i,o,c,u){return new g2(i,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,c){return new v2(r,s,i,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>k0(this.syncEngine,n,0),function(){return x0.v()?new x0:new l2}())}createSyncEngine(e,n){return function(s,i,o,c,u,d,m){const p=new O2(s,i,o,c,u,d);return m&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ee(s);H(ls,"RemoteStore shutting down."),i.Ea.add(5),await oa(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}xh.provider={build:()=>new xh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Fn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar="FirestoreClient";class J2{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=lt.UNAUTHENTICATED,this.clientId=kf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{H(Ar,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H(Ar,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Wf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function sd(t,e){t.asyncQueue.verifyOperationInProgress(),H(Ar,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await R_(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function S0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Z2(t);H(Ar,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>w0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>w0(e.remoteStore,s)),t._onlineComponents=e}async function Z2(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H(Ar,"Using user provided OfflineComponentProvider");try{await sd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===O.FAILED_PRECONDITION||s.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;oi("Error using user provided cache. Falling back to memory cache: "+n),await sd(t,new oc)}}else H(Ar,"Using default OfflineComponentProvider"),await sd(t,new X2(void 0));return t._offlineComponents}async function ew(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H(Ar,"Using user provided OnlineComponentProvider"),await S0(t,t._uninitializedComponentsProvider._online)):(H(Ar,"Using default OnlineComponentProvider"),await S0(t,new xh))),t._onlineComponents}function eb(t){return ew(t).then(e=>e.syncEngine)}async function tw(t){const e=await ew(t),n=e.eventManager;return n.onListen=M2.bind(null,e.syncEngine),n.onUnlisten=z2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=F2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=B2.bind(null,e.syncEngine),n}function tb(t,e,n={}){const r=new Pn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,d){const m=new Z_({next:g=>{m.Nu(),o.enqueueAndForget(()=>$_(i,p));const I=g.docs.has(c);!I&&g.fromCache?d.reject(new q(O.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&g.fromCache&&u&&u.source==="server"?d.reject(new q(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new q_(Pf(c.path),m,{includeMetadataChanges:!0,qa:!0});return B_(i,p)}(await tw(t),t.asyncQueue,e,n,r)),r.promise}function nb(t,e,n={}){const r=new Pn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,d){const m=new Z_({next:g=>{m.Nu(),o.enqueueAndForget(()=>$_(i,p)),g.fromCache&&u.source==="server"?d.reject(new q(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new q_(c,m,{includeMetadataChanges:!0,qa:!0});return B_(i,p)}(await tw(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw="firestore.googleapis.com",C0=!0;class A0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new q(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=rw,this.ssl=C0}else this.host=e.host,this.ssl=e.ssl??C0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=A_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<DS)throw new q(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nw(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new q(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new q(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new q(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $c{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new A0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new A0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new lN;switch(r.type){case"firstParty":return new hN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=b0.get(n);r&&(H("ComponentProvider","Removing Datastore"),b0.delete(n),r.terminate())}(this),Promise.resolve()}}function rb(t,e,n,r={}){var d;t=rn(t,$c);const s=wi(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(kx(`https://${c}`),Nx("Firestore",!0)),i.host!==rw&&i.host!==c&&oi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:c,ssl:s,emulatorOptions:r};if(!is(u,o)&&(t._setSettings(u),r.mockUserToken)){let m,p;if(typeof r.mockUserToken=="string")m=r.mockUserToken,p=lt.MOCK_USER;else{m=VI(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new q(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new lt(g)}t._authCredentials=new cN(new Ux(m,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Lr(this.firestore,e,this._query)}}class Le{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Er(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Le(this.firestore,e,this._key)}toJSON(){return{type:Le._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ra(n,Le._jsonSchema))return new Le(e,r||null,new G(ve.fromString(n.referencePath)))}}Le._jsonSchemaVersion="firestore/documentReference/1.0",Le._jsonSchema={type:Ue("string",Le._jsonSchemaVersion),referencePath:Ue("string")};class Er extends Lr{constructor(e,n,r){super(e,n,Pf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Le(this.firestore,null,new G(e))}withConverter(e){return new Er(this.firestore,e,this._path)}}function ye(t,e,...n){if(t=He(t),zx("collection","path",e),t instanceof $c){const r=ve.fromString(e,...n);return $g(r),new Er(t,null,r)}{if(!(t instanceof Le||t instanceof Er))throw new q(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return $g(r),new Er(t.firestore,null,r)}}function Jt(t,e,...n){if(t=He(t),arguments.length===1&&(e=kf.newId()),zx("doc","path",e),t instanceof $c){const r=ve.fromString(e,...n);return Bg(r),new Le(t,null,new G(r))}{if(!(t instanceof Le||t instanceof Er))throw new q(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return Bg(r),new Le(t.firestore,t instanceof Er?t.converter:null,new G(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0="AsyncQueue";class R0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new D_(this,"async_queue_retry"),this._c=()=>{const r=rd();r&&H(P0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=rd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=rd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Pn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ki(e))throw e;H(P0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Fn("INTERNAL UNHANDLED ERROR: ",j0(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Hf.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&X(47125,{Pc:j0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function j0(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class ys extends $c{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new R0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new R0(e),this._firestoreClient=void 0,await e}}}function sb(t,e){const n=typeof t=="object"?t:Ax(),r=typeof t=="string"?t:Jl,s=Tf(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=jI("firestore");i&&rb(s,...i)}return s}function Yf(t){if(t._terminated)throw new q(O.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||ib(t),t._firestoreClient}function ib(t){var r,s,i;const e=t._freezeSettings(),n=function(c,u,d,m){return new AN(c,u,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,nw(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new J2(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ut(tt.fromBase64String(e))}catch(n){throw new q(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ut(tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ut._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ra(e,Ut._jsonSchema))return Ut.fromBase64String(e.bytes)}}Ut._jsonSchemaVersion="firestore/bytes/1.0",Ut._jsonSchema={type:Ue("string",Ut._jsonSchemaVersion),bytes:Ue("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Je(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:pn._jsonSchemaVersion}}static fromJSON(e){if(ra(e,pn._jsonSchema))return new pn(e.latitude,e.longitude)}}pn._jsonSchemaVersion="firestore/geoPoint/1.0",pn._jsonSchema={type:Ue("string",pn._jsonSchemaVersion),latitude:Ue("number"),longitude:Ue("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:gn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ra(e,gn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new gn(e.vectorValues);throw new q(O.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}gn._jsonSchemaVersion="firestore/vectorValue/1.0",gn._jsonSchema={type:Ue("string",gn._jsonSchemaVersion),vectorValues:Ue("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob=/^__.*__$/;class ab{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Vr(e,this.data,this.fieldMask,n,this.fieldTransforms):new sa(e,this.data,n,this.fieldTransforms)}}class sw{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Vr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function iw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X(40011,{Ac:t})}}class Xf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Xf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ac(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(iw(this.Ac)&&ob.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class lb{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Uc(e)}Cc(e,n,r,s=!1){return new Xf({Ac:e,methodName:n,Dc:r,path:Je.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wc(t){const e=t._freezeSettings(),n=Uc(t._databaseId);return new lb(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ow(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);Zf("Data must be an object, but it was:",o,r);const c=aw(r,o);let u,d;if(i.merge)u=new At(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const m=[];for(const p of i.mergeFields){const g=_h(e,p,n);if(!o.contains(g))throw new q(O.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);cw(m,g)||m.push(g)}u=new At(m),d=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=o.fieldTransforms;return new ab(new wt(c),u,d)}class Kc extends Hc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kc}}class Jf extends Hc{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new Go(e.serializer,f_(e.serializer,this.Fc));return new eS(e.path,n)}isEqual(e){return e instanceof Jf&&this.Fc===e.Fc}}function cb(t,e,n,r){const s=t.Cc(1,e,n);Zf("Data must be an object, but it was:",s,r);const i=[],o=wt.empty();Dr(r,(u,d)=>{const m=em(e,u,n);d=He(d);const p=s.yc(m);if(d instanceof Kc)i.push(m);else{const g=la(d,p);g!=null&&(i.push(m),o.set(m,g))}});const c=new At(i);return new sw(o,c,s.fieldTransforms)}function ub(t,e,n,r,s,i){const o=t.Cc(1,e,n),c=[_h(e,r,n)],u=[s];if(i.length%2!=0)throw new q(O.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)c.push(_h(e,i[g])),u.push(i[g+1]);const d=[],m=wt.empty();for(let g=c.length-1;g>=0;--g)if(!cw(d,c[g])){const I=c[g];let S=u[g];S=He(S);const P=o.yc(I);if(S instanceof Kc)d.push(I);else{const j=la(S,P);j!=null&&(d.push(I),m.set(I,j))}}const p=new At(d);return new sw(m,p,o.fieldTransforms)}function db(t,e,n,r=!1){return la(n,t.Cc(r?4:3,e))}function la(t,e){if(lw(t=He(t)))return Zf("Unsupported field value:",e,t),aw(t,e);if(t instanceof Hc)return function(r,s){if(!iw(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const c of r){let u=la(c,s.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=He(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return f_(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ee.fromDate(r);return{timestampValue:rc(s.serializer,i)}}if(r instanceof Ee){const i=new Ee(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:rc(s.serializer,i)}}if(r instanceof pn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ut)return{bytesValue:T_(s.serializer,r._byteString)};if(r instanceof Le){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Lf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof gn)return function(o,c){return{mapValue:{fields:{[Yx]:{stringValue:Jx},[Zl]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return Rf(c.serializer,d)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Pc(r)}`)}(t,e)}function aw(t,e){const n={};return qx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Dr(t,(r,s)=>{const i=la(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function lw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ee||t instanceof pn||t instanceof Ut||t instanceof Le||t instanceof Hc||t instanceof gn)}function Zf(t,e,n){if(!lw(n)||!Bx(n)){const r=Pc(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function _h(t,e,n){if((e=He(e))instanceof qc)return e._internalPath;if(typeof e=="string")return em(t,e);throw ac("Field path arguments must be of type string or ",t,!1,void 0,n)}const hb=new RegExp("[~\\*/\\[\\]]");function em(t,e,n){if(e.search(hb)>=0)throw ac(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new qc(...e.split("."))._internalPath}catch{throw ac(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ac(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new q(O.INVALID_ARGUMENT,c+t+u)}function cw(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Le(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new fb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Gc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class fb extends uw{data(){return super.data()}}function Gc(t,e){return typeof e=="string"?em(t,e):e instanceof qc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mb(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tm{}class nm extends tm{}function De(t,e,...n){let r=[];e instanceof tm&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof rm).length,c=i.filter(u=>u instanceof Qc).length;if(o>1||o>0&&c>0)throw new q(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Qc extends nm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Qc(e,n,r)}_apply(e){const n=this._parse(e);return dw(e._query,n),new Lr(e.firestore,e.converter,uh(e._query,n))}_parse(e){const n=Wc(e.firestore);return function(i,o,c,u,d,m,p){let g;if(d.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new q(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){L0(p,m);const S=[];for(const P of p)S.push(V0(u,i,P));g={arrayValue:{values:S}}}else g=V0(u,i,p)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||L0(p,m),g=db(c,o,p,m==="in"||m==="not-in");return Fe.create(d,m,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function $e(t,e,n){const r=e,s=Gc("where",t);return Qc._create(s,r,n)}class rm extends tm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new rm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:sn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const c=i.getFlattenedFilters();for(const u of c)dw(o,u),o=uh(o,u)}(e._query,n),new Lr(e.firestore,e.converter,uh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class sm extends nm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new sm(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new q(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new q(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ho(i,o)}(e._query,this._field,this._direction);return new Lr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Ni(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function pb(t,e="asc"){const n=e,r=Gc("orderBy",t);return sm._create(r,n)}class im extends nm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new im(e,n,r)}_apply(e){return new Lr(e.firestore,e.converter,tc(e._query,this._limit,this._limitType))}}function D0(t){return xN("limit",t),im._create("limit",t,"F")}function V0(t,e,n){if(typeof(n=He(n))=="string"){if(n==="")throw new q(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!o_(e)&&n.indexOf("/")!==-1)throw new q(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ve.fromString(n));if(!G.isDocumentKey(r))throw new q(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Xg(t,new G(r))}if(n instanceof Le)return Xg(t,n._key);throw new q(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pc(n)}.`)}function L0(t,e){if(!Array.isArray(t)||t.length===0)throw new q(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function dw(t,e){const n=function(s,i){for(const o of s)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class gb{convertValue(e,n="none"){switch(br(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Re(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Sr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Dr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Zl].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Re(o.doubleValue));return new gn(n)}convertGeoPoint(e){return new pn(Re(e.latitude),Re(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Dc(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Bo(e));default:return null}}convertTimestamp(e){const n=Nr(e);return new Ee(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ve.fromString(e);me(C_(r),9688,{name:e});const s=new $o(r.get(1),r.get(3)),i=new G(r.popFirst(5));return s.isEqual(n)||Fn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class io{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zr extends uw{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new _l(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Gc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new q(O.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Zr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Zr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Zr._jsonSchema={type:Ue("string",Zr._jsonSchemaVersion),bundleSource:Ue("string","DocumentSnapshot"),bundleName:Ue("string"),bundle:Ue("string")};class _l extends Zr{data(e={}){return super.data(e)}}class Gs{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new io(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new _l(this._firestore,this._userDataWriter,r.key,r,new io(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const u=new _l(s._firestore,s._userDataWriter,c.doc.key,c.doc,new io(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new _l(s._firestore,s._userDataWriter,c.doc.key,c.doc,new io(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,m=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),m=o.indexOf(c.doc.key)),{type:yb(c.type),doc:u,oldIndex:d,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new q(O.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Gs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=kf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function yb(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0(t){t=rn(t,Le);const e=rn(t.firestore,ys);return tb(Yf(e),t._key).then(n=>xb(e,t,n))}Gs._jsonSchemaVersion="firestore/querySnapshot/1.0",Gs._jsonSchema={type:Ue("string",Gs._jsonSchemaVersion),bundleSource:Ue("string","QuerySnapshot"),bundleName:Ue("string"),bundle:Ue("string")};class fw extends gb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ut(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Le(this.firestore,null,n)}}function Ve(t){t=rn(t,Lr);const e=rn(t.firestore,ys),n=Yf(e),r=new fw(e);return mb(t._query),nb(n,t._query).then(s=>new Gs(e,r,t,s))}function vb(t,e,n){t=rn(t,Le);const r=rn(t.firestore,ys),s=hw(t.converter,e);return Yc(r,[ow(Wc(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,$t.none())])}function cs(t,e,n,...r){t=rn(t,Le);const s=rn(t.firestore,ys),i=Wc(s);let o;return o=typeof(e=He(e))=="string"||e instanceof qc?ub(i,"updateDoc",t._key,e,n,r):cb(i,"updateDoc",t._key,e),Yc(s,[o.toMutation(t._key,$t.exists(!0))])}function mw(t){return Yc(rn(t.firestore,ys),[new jf(t._key,$t.none())])}function hi(t,e){const n=rn(t.firestore,ys),r=Jt(t),s=hw(t.converter,e);return Yc(n,[ow(Wc(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,$t.exists(!1))]).then(()=>r)}function Yc(t,e){return function(r,s){const i=new Pn;return r.asyncQueue.enqueueAndForget(async()=>$2(await eb(r),s,i)),i.promise}(Yf(t),e)}function xb(t,e,n){const r=n.docs.get(e._key),s=new fw(t);return new Zr(t,s,e._key,r,new io(n.hasPendingWrites,n.fromCache),e.converter)}function fi(t){return new Jf("increment",t)}(function(e,n=!0){(function(s){Ti=s})(Ei),ii(new os("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new ys(new uN(r.getProvider("auth-internal")),new fN(o,r.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new q(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $o(d.options.projectId,m)}(o,s),o);return i={useFetchStreams:n,...i},c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),_r(Mg,Fg,e),_r(Mg,Fg,"esm2020")})();var _b="firebase",wb="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_r(_b,wb,"app");function pw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Eb=pw,gw=new ta("auth","Firebase",pw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lc=new wf("@firebase/auth");function Tb(t,...e){lc.logLevel<=se.WARN&&lc.warn(`Auth (${Ei}): ${t}`,...e)}function wl(t,...e){lc.logLevel<=se.ERROR&&lc.error(`Auth (${Ei}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(t,...e){throw om(t,...e)}function yn(t,...e){return om(t,...e)}function yw(t,e,n){const r={...Eb(),[e]:n};return new ta("auth","Firebase",r).create(e,{appName:t.name})}function Rn(t){return yw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function om(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return gw.create(t,...e)}function Y(t,e,...n){if(!t)throw om(e,...n)}function Sn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw wl(e),new Error(e)}function zn(t,e){t||Sn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function Ib(){return M0()==="http:"||M0()==="https:"}function M0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ib()||zI()||"connection"in navigator)?navigator.onLine:!0}function Nb(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,n){this.shortDelay=e,this.longDelay=n,zn(n>e,"Short delay should be less than long delay!"),this.isMobile=MI()||BI()}get(){return kb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(t,e){zn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Cb=new ca(3e4,6e4);function Or(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function qn(t,e,n,r,s={}){return xw(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=na({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...i};return UI()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&wi(t.emulatorConfig.host)&&(d.credentials="include"),vw.fetch()(await _w(t,t.config.apiHost,n,c),d)})}async function xw(t,e,n){t._canInitEmulator=!1;const r={...Sb,...e};try{const s=new Pb(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw tl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw tl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw tl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw tl(t,"user-disabled",o);const m=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw yw(t,m,d);on(t,m)}}catch(s){if(s instanceof $n)throw s;on(t,"network-request-failed",{message:String(s)})}}async function ua(t,e,n,r,s={}){const i=await qn(t,e,n,r,s);return"mfaPendingCredential"in i&&on(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function _w(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?am(t.config,s):`${t.config.apiScheme}://${s}`;return bb.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function Ab(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Pb{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(yn(this.auth,"network-request-failed")),Cb.get())})}}function tl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=yn(t,e,r);return s.customData._tokenResponse=n,s}function F0(t){return t!==void 0&&t.enterprise!==void 0}class Rb{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Ab(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function jb(t,e){return qn(t,"GET","/v2/recaptchaConfig",Or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Db(t,e){return qn(t,"POST","/v1/accounts:delete",e)}async function cc(t,e){return qn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Vb(t,e=!1){const n=He(t),r=await n.getIdToken(e),s=lm(r);Y(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:wo(id(s.auth_time)),issuedAtTime:wo(id(s.iat)),expirationTime:wo(id(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function id(t){return Number(t)*1e3}function lm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return wl("JWT malformed, contained fewer than 3 sections"),null;try{const s=wx(n);return s?JSON.parse(s):(wl("Failed to decode base64 JWT payload"),null)}catch(s){return wl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function U0(t){const e=lm(t);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof $n&&Lb(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Lb({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=wo(this.lastLoginAt),this.creationTime=wo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uc(t){var p;const e=t.auth,n=await t.getIdToken(),r=await mi(t,cc(e,{idToken:n}));Y(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(p=s.providerUserInfo)!=null&&p.length?ww(s.providerUserInfo):[],o=Fb(t.providerData,i),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),d=c?u:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Eh(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,m)}async function Mb(t){const e=He(t);await uc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Fb(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function ww(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ub(t,e){const n=await xw(t,{},async()=>{const r=na({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await _w(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return t.emulatorConfig&&wi(t.emulatorConfig.host)&&(u.credentials="include"),vw.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function zb(t,e){return qn(t,"POST","/v2/accounts:revokeToken",Or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):U0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Y(e.length!==0,"internal-error");const n=U0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await Ub(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Qs;return r&&(Y(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Y(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Y(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qs,this.toJSON())}_performRefresh(){return Sn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(t,e){Y(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Zt{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new Ob(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Eh(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await mi(this,this.stsTokenManager.getToken(this.auth,e));return Y(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Vb(this,e)}reload(){return Mb(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Zt({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await uc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ft(this.auth.app))return Promise.reject(Rn(this.auth));const e=await this.getIdToken();return await mi(this,Db(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:I,providerData:S,stsTokenManager:P}=n;Y(p&&P,e,"internal-error");const j=Qs.fromJSON(this.name,P);Y(typeof p=="string",e,"internal-error"),Xn(r,e.name),Xn(s,e.name),Y(typeof g=="boolean",e,"internal-error"),Y(typeof I=="boolean",e,"internal-error"),Xn(i,e.name),Xn(o,e.name),Xn(c,e.name),Xn(u,e.name),Xn(d,e.name),Xn(m,e.name);const T=new Zt({uid:p,auth:e,email:s,emailVerified:g,displayName:r,isAnonymous:I,photoURL:o,phoneNumber:i,tenantId:c,stsTokenManager:j,createdAt:d,lastLoginAt:m});return S&&Array.isArray(S)&&(T.providerData=S.map(w=>({...w}))),u&&(T._redirectEventId=u),T}static async _fromIdTokenResponse(e,n,r=!1){const s=new Qs;s.updateFromServerResponse(n);const i=new Zt({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await uc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Y(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?ww(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new Qs;c.updateFromIdToken(r);const u=new Zt({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Eh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0=new Map;function bn(t){zn(t instanceof Function,"Expected a class definition");let e=z0.get(t);return e?(zn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,z0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Ew.type="NONE";const B0=Ew;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(t,e,n){return`firebase:${t}:${e}:${n}`}class Ys{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=El(this.userKey,s.apiKey,i),this.fullPersistenceKey=El("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await cc(this.auth,{idToken:e}).catch(()=>{});return n?Zt._fromGetAccountInfoResponse(this.auth,n,e):null}return Zt._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ys(bn(B0),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||bn(B0);const o=El(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const m=await d._get(o);if(m){let p;if(typeof m=="string"){const g=await cc(e,{idToken:m}).catch(()=>{});if(!g)break;p=await Zt._fromGetAccountInfoResponse(e,g,m)}else p=Zt._fromJSON(e,m);d!==i&&(c=p),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Ys(i,e,r):(i=u[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Ys(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Nw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Tw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bw(e))return"Blackberry";if(Cw(e))return"Webos";if(Iw(e))return"Safari";if((e.includes("chrome/")||kw(e))&&!e.includes("edge/"))return"Chrome";if(Sw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Tw(t=ht()){return/firefox\//i.test(t)}function Iw(t=ht()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kw(t=ht()){return/crios\//i.test(t)}function Nw(t=ht()){return/iemobile/i.test(t)}function Sw(t=ht()){return/android/i.test(t)}function bw(t=ht()){return/blackberry/i.test(t)}function Cw(t=ht()){return/webos/i.test(t)}function cm(t=ht()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Bb(t=ht()){var e;return cm(t)&&!!((e=window.navigator)!=null&&e.standalone)}function $b(){return $I()&&document.documentMode===10}function Aw(t=ht()){return cm(t)||Sw(t)||Cw(t)||bw(t)||/windows phone/i.test(t)||Nw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(t,e=[]){let n;switch(t){case"Browser":n=$0(ht());break;case"Worker":n=`${$0(ht())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ei}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const u=e(i);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hb(t,e={}){return qn(t,"GET","/v2/passwordPolicy",Or(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb=6;class Kb{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Wb,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new q0(this),this.idTokenSubscription=new q0(this),this.beforeStateQueue=new qb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=bn(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Ys.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await cc(this,{idToken:e}),r=await Zt._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Ft(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,c=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await uc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Nb()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ft(this.app))return Promise.reject(Rn(this));const n=e?He(e):null;return n&&Y(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ft(this.app)?Promise.reject(Rn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ft(this.app)?Promise.reject(Rn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(bn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Hb(this),n=new Kb(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ta("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await zb(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&bn(e)||this._popupRedirectResolver;Y(n,this,"argument-error"),this.redirectPersistenceManager=await Ys.create(this,[bn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Pw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Ft(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Tb(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function vs(t){return He(t)}class q0{constructor(e){this.auth=e,this.observer=null,this.addObserver=XI(n=>this.observer=n)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Qb(t){Xc=t}function Rw(t){return Xc.loadJS(t)}function Yb(){return Xc.recaptchaEnterpriseScript}function Xb(){return Xc.gapiScript}function Jb(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Zb{constructor(){this.enterprise=new eC}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class eC{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const tC="recaptcha-enterprise",jw="NO_RECAPTCHA";class nC{constructor(e){this.type=tC,this.auth=vs(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,c)=>{jb(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new Rb(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function s(i,o,c){const u=window.grecaptcha;F0(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(jw)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Zb().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(c=>{if(!n&&F0(window.grecaptcha))s(c,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=Yb();u.length!==0&&(u+=c),Rw(u).then(()=>{s(c,i,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function H0(t,e,n,r=!1,s=!1){const i=new nC(t);let o;if(s)o=jw;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Th(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await H0(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await H0(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(t,e){const n=Tf(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(is(i,e??{}))return s;on(s,"already-initialized")}return n.initialize({options:e})}function sC(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(bn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function iC(t,e,n){const r=vs(t);Y(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=Dw(e),{host:o,port:c}=oC(e),u=c===null?"":`:${c}`,d={url:`${i}//${o}${u}/`},m=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Y(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Y(is(d,r.config.emulator)&&is(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,wi(o)?(kx(`${i}//${o}${u}`),Nx("Auth",!0)):aC()}function Dw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function oC(t){const e=Dw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:W0(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:W0(o)}}}function W0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function aC(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Sn("not implemented")}_getIdTokenResponse(e){return Sn("not implemented")}_linkToIdToken(e,n){return Sn("not implemented")}_getReauthenticationResolver(e){return Sn("not implemented")}}async function lC(t,e){return qn(t,"POST","/v1/accounts:update",e)}async function cC(t,e){return qn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uC(t,e){return ua(t,"POST","/v1/accounts:signInWithPassword",Or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dC(t,e){return ua(t,"POST","/v1/accounts:signInWithEmailLink",Or(t,e))}async function hC(t,e){return ua(t,"POST","/v1/accounts:signInWithEmailLink",Or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo extends um{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Qo(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Qo(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Th(e,n,"signInWithPassword",uC);case"emailLink":return dC(e,{email:this._email,oobCode:this._password});default:on(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Th(e,r,"signUpPassword",cC);case"emailLink":return hC(e,{idToken:n,email:this._email,oobCode:this._password});default:on(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xs(t,e){return ua(t,"POST","/v1/accounts:signInWithIdp",Or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC="http://localhost";class us extends um{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new us(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):on("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new us(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Xs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Xs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Xs(e,n)}buildRequest(){const e={requestUri:fC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=na(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function pC(t){const e=eo(to(t)).link,n=e?eo(to(e)).deep_link_id:null,r=eo(to(t)).deep_link_id;return(r?eo(to(r)).link:null)||r||n||e||t}class dm{constructor(e){const n=eo(to(e)),r=n.apiKey??null,s=n.oobCode??null,i=mC(n.mode??null);Y(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=pC(e);try{return new dm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(){this.providerId=bi.PROVIDER_ID}static credential(e,n){return Qo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=dm.parseLink(n);return Y(r,"argument-error"),Qo._fromEmailAndCode(e,r.code,r.tenantId)}}bi.PROVIDER_ID="password";bi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";bi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da extends Vw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends da{constructor(){super("facebook.com")}static credential(e){return us._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rr.credential(e.oauthAccessToken)}catch{return null}}}rr.FACEBOOK_SIGN_IN_METHOD="facebook.com";rr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends da{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return us._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return sr.credential(n,r)}catch{return null}}}sr.GOOGLE_SIGN_IN_METHOD="google.com";sr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends da{constructor(){super("github.com")}static credential(e){return us._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ir.credential(e.oauthAccessToken)}catch{return null}}}ir.GITHUB_SIGN_IN_METHOD="github.com";ir.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends da{constructor(){super("twitter.com")}static credential(e,n){return us._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return or.credential(n,r)}catch{return null}}}or.TWITTER_SIGN_IN_METHOD="twitter.com";or.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gC(t,e){return ua(t,"POST","/v1/accounts:signUp",Or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Zt._fromIdTokenResponse(e,r,s),o=K0(r);return new ds({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=K0(r);return new ds({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function K0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc extends $n{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,dc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new dc(e,n,r,s)}}function Lw(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?dc._fromErrorAndOperation(t,i,e,r):i})}async function yC(t,e,n=!1){const r=await mi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ds._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vC(t,e,n=!1){const{auth:r}=t;if(Ft(r.app))return Promise.reject(Rn(r));const s="reauthenticate";try{const i=await mi(t,Lw(r,s,e,t),n);Y(i.idToken,r,"internal-error");const o=lm(i.idToken);Y(o,r,"internal-error");const{sub:c}=o;return Y(t.uid===c,r,"user-mismatch"),ds._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&on(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ow(t,e,n=!1){if(Ft(t.app))return Promise.reject(Rn(t));const r="signIn",s=await Lw(t,r,e),i=await ds._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function xC(t,e){return Ow(vs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mw(t){const e=vs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function _C(t,e,n){if(Ft(t.app))return Promise.reject(Rn(t));const r=vs(t),o=await Th(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",gC).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Mw(t),u}),c=await ds._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function wC(t,e,n){return Ft(t.app)?Promise.reject(Rn(t)):xC(He(t),bi.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Mw(t),r})}function EC(t,e){return TC(He(t),null,e)}async function TC(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const o=await mi(t,lC(r,i));await t._updateTokensIfNecessary(o,!0)}function IC(t,e,n,r){return He(t).onIdTokenChanged(e,n,r)}function kC(t,e,n){return He(t).beforeAuthStateChanged(e,n)}function NC(t,e,n,r){return He(t).onAuthStateChanged(e,n,r)}function SC(t){return He(t).signOut()}const hc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(hc,"1"),this.storage.removeItem(hc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC=1e3,CC=10;class Uw extends Fw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Aw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);$b()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,CC):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},bC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Uw.type="LOCAL";const AC=Uw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw extends Fw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}zw.type="SESSION";const Bw=zw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Jc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async d=>d(n.origin,i)),u=await PC(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Jc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,u)=>{const d=hm("",20);s.port1.start();const m=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(m),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(g.data.response);break;default:clearTimeout(m),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(){return window}function jC(t){vn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(){return typeof vn().WorkerGlobalScope<"u"&&typeof vn().importScripts=="function"}async function DC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function VC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function LC(){return $w()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw="firebaseLocalStorageDb",OC=1,fc="firebaseLocalStorage",Hw="fbase_key";class ha{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Zc(t,e){return t.transaction([fc],e?"readwrite":"readonly").objectStore(fc)}function MC(){const t=indexedDB.deleteDatabase(qw);return new ha(t).toPromise()}function Ih(){const t=indexedDB.open(qw,OC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(fc,{keyPath:Hw})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(fc)?e(r):(r.close(),await MC(),e(await Ih()))})})}async function G0(t,e,n){const r=Zc(t,!0).put({[Hw]:e,value:n});return new ha(r).toPromise()}async function FC(t,e){const n=Zc(t,!1).get(e),r=await new ha(n).toPromise();return r===void 0?null:r.value}function Q0(t,e){const n=Zc(t,!0).delete(e);return new ha(n).toPromise()}const UC=800,zC=3;class Ww{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ih(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>zC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $w()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jc._getInstance(LC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await DC(),!this.activeServiceWorker)return;this.sender=new RC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||VC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ih();return await G0(e,hc,"1"),await Q0(e,hc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>G0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>FC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Q0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Zc(s,!1).getAll();return new ha(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),UC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ww.type="LOCAL";const BC=Ww;new ca(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(t,e){return e?bn(e):(Y(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm extends um{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Xs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Xs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function qC(t){return Ow(t.auth,new fm(t),t.bypassAuthState)}function HC(t){const{auth:e,user:n}=t;return Y(n,e,"internal-error"),vC(n,new fm(t),t.bypassAuthState)}async function WC(t){const{auth:e,user:n}=t;return Y(n,e,"internal-error"),yC(n,new fm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qC;case"linkViaPopup":case"linkViaRedirect":return WC;case"reauthViaPopup":case"reauthViaRedirect":return HC;default:on(this.auth,"internal-error")}}resolve(e){zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=new ca(2e3,1e4);class Us extends Kw{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Us.currentPopupAction&&Us.currentPopupAction.cancel(),Us.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Y(e,this.auth,"internal-error"),e}async onExecution(){zn(this.filter.length===1,"Popup operations only handle one event");const e=hm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(yn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Us.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,KC.get())};e()}}Us.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC="pendingRedirect",Tl=new Map;class QC extends Kw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Tl.get(this.auth._key());if(!e){try{const r=await YC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Tl.set(this.auth._key(),e)}return this.bypassAuthState||Tl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function YC(t,e){const n=ZC(e),r=JC(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function XC(t,e){Tl.set(t._key(),e)}function JC(t){return bn(t._redirectPersistence)}function ZC(t){return El(GC,t.config.apiKey,t.name)}async function eA(t,e,n=!1){if(Ft(t.app))return Promise.reject(Rn(t));const r=vs(t),s=$C(r,e),o=await new QC(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA=10*60*1e3;class nA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rA(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Gw(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(yn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tA&&this.cachedEventUids.clear(),this.cachedEventUids.has(Y0(e))}saveEventToCache(e){this.cachedEventUids.add(Y0(e)),this.lastProcessedEventTime=Date.now()}}function Y0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Gw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function rA(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Gw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sA(t,e={}){return qn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oA=/^https?/;async function aA(t){if(t.config.emulator)return;const{authorizedDomains:e}=await sA(t);for(const n of e)try{if(lA(n))return}catch{}on(t,"unauthorized-domain")}function lA(t){const e=wh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!oA.test(n))return!1;if(iA.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA=new ca(3e4,6e4);function X0(){const t=vn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function uA(t){return new Promise((e,n)=>{var s,i,o;function r(){X0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{X0(),n(yn(t,"network-request-failed"))},timeout:cA.get()})}if((i=(s=vn().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=vn().gapi)!=null&&o.load)r();else{const c=Jb("iframefcb");return vn()[c]=()=>{gapi.load?r():n(yn(t,"network-request-failed"))},Rw(`${Xb()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Il=null,e})}let Il=null;function dA(t){return Il=Il||uA(t),Il}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=new ca(5e3,15e3),fA="__/auth/iframe",mA="emulator/auth/iframe",pA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yA(t){const e=t.config;Y(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?am(e,mA):`https://${t.config.authDomain}/${fA}`,r={apiKey:e.apiKey,appName:t.name,v:Ei},s=gA.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${na(r).slice(1)}`}async function vA(t){const e=await dA(t),n=vn().gapi;return Y(n,t,"internal-error"),e.open({where:document.body,url:yA(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pA,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=yn(t,"network-request-failed"),c=vn().setTimeout(()=>{i(o)},hA.get());function u(){vn().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_A=500,wA=600,EA="_blank",TA="http://localhost";class J0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function IA(t,e,n,r=_A,s=wA){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...xA,width:r.toString(),height:s.toString(),top:i,left:o},d=ht().toLowerCase();n&&(c=kw(d)?EA:n),Tw(d)&&(e=e||TA,u.scrollbars="yes");const m=Object.entries(u).reduce((g,[I,S])=>`${g}${I}=${S},`,"");if(Bb(d)&&c!=="_self")return kA(e||"",c),new J0(null);const p=window.open(e||"",c,m);Y(p,t,"popup-blocked");try{p.focus()}catch{}return new J0(p)}function kA(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA="__/auth/handler",SA="emulator/auth/handler",bA=encodeURIComponent("fac");async function Z0(t,e,n,r,s,i){Y(t.config.authDomain,t,"auth-domain-config-required"),Y(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ei,eventId:s};if(e instanceof Vw){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",YI(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,p]of Object.entries({}))o[m]=p}if(e instanceof da){const m=e.getScopes().filter(p=>p!=="");m.length>0&&(o.scopes=m.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const u=await t._getAppCheckToken(),d=u?`#${bA}=${encodeURIComponent(u)}`:"";return`${CA(t)}?${na(c).slice(1)}${d}`}function CA({config:t}){return t.emulator?am(t,SA):`https://${t.authDomain}/${NA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const od="webStorageSupport";class AA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Bw,this._completeRedirectFn=eA,this._overrideRedirectResult=XC}async _openPopup(e,n,r,s){var o;zn((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await Z0(e,n,r,wh(),s);return IA(e,i,hm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Z0(e,n,r,wh(),s);return jC(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(zn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await vA(e),r=new nA(e);return n.register("authEvent",s=>(Y(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(od,{type:od},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[od];i!==void 0&&n(!!i),on(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=aA(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Aw()||Iw()||cm()}}const PA=AA;var ey="@firebase/auth",ty="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function DA(t){ii(new os("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;Y(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Pw(t)},d=new Gb(r,s,i,u);return sC(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ii(new os("auth-internal",e=>{const n=vs(e.getProvider("auth").getImmediate());return(r=>new RA(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_r(ey,ty,jA(t)),_r(ey,ty,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA=5*60,LA=Ix("authIdTokenMaxAge")||VA;let ny=null;const OA=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>LA)return;const s=n==null?void 0:n.token;ny!==s&&(ny=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function MA(t=Ax()){const e=Tf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=rC(t,{popupRedirectResolver:PA,persistence:[BC,AC,Bw]}),r=Ix("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=OA(i.toString());kC(n,o,()=>o(n.currentUser)),IC(n,c=>o(c))}}const s=Ex("auth");return s&&iC(n,`http://${s}`),n}function FA(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}Qb({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=yn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",FA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});DA("Browser");const UA={apiKey:"AIzaSyBTDEFh60Y0Rbgdgz7L5qvTTfwF6tTU4_w",authDomain:"vocabulary-app-7fe34.firebaseapp.com",projectId:"vocabulary-app-7fe34",storageBucket:"vocabulary-app-7fe34.firebasestorage.app",messagingSenderId:"791241143324",appId:"1:791241143324:web:da37f567108608702b9bd9",measurementId:"G-4TMRJZ28JX"},Qw=Cx(UA),nl=MA(Qw),ne=sb(Qw),zA=async(t,e,n)=>{console.log("Saving collection with userId:",t),console.log("Collection data:",n);const r={...n,userId:t,username:e,rating:0,usageCount:0,createdAt:n.createdAt},s=await hi(ye(ne,"collections"),r);return console.log("Collection saved with ID:",s.id),{id:s.id,...r}},Yw=async t=>{console.log("Loading user collections for userId:",t);const e=De(ye(ne,"collections"),$e("userId","==",t)),n=await Ve(e);console.log("Found user collections:",n.docs.length);const r=n.docs.map(s=>({id:s.id,...s.data(),createdAt:s.data().createdAt.toDate()}));return r.sort((s,i)=>i.createdAt.getTime()-s.createdAt.getTime()),console.log("Processed user collections:",r),r},Xw=async t=>{console.log("Loading saved collections for userId:",t);const e=De(ye(ne,"saved_collections"),$e("userId","==",t)),r=(await Ve(e)).docs.map(c=>c.data().collectionId);if(r.length===0)return[];const s=De(ye(ne,"collections")),o=(await Ve(s)).docs.filter(c=>r.includes(c.id)).map(c=>({id:c.id,...c.data(),createdAt:c.data().createdAt.toDate()}));return console.log("Found saved collections:",o.length),o},Jw=async()=>{console.log("Loading public collections");const t=De(ye(ne,"collections"),$e("visibility","==","public")),e=await Ve(t);console.log("Found public collections:",e.docs.length);const n=e.docs.map(r=>({id:r.id,...r.data(),createdAt:r.data().createdAt.toDate()}));return n.sort((r,s)=>s.rating!==r.rating?s.rating-r.rating:s.usageCount-r.usageCount),n},Zw=async(t=10)=>{console.log("Loading top rated collections");try{const e=De(ye(ne,"collections"),$e("visibility","==","public")),r=(await Ve(e)).docs.map(s=>({id:s.id,...s.data(),createdAt:s.data().createdAt.toDate()}));return r.sort((s,i)=>i.rating!==s.rating?i.rating-s.rating:i.usageCount-s.usageCount),r.slice(0,t)}catch(e){return console.error("Error in loadTopRatedCollections:",e),[]}},e1=async t=>{await mw(Jt(ne,"collections",t))},t1=async(t,e)=>{console.log("Updating collection:",t,e),await cs(Jt(ne,"collections",t),e)},BA=async(t,e)=>{const n=De(ye(ne,"learned_collections"),$e("userId","==",t),$e("collectionId","==",e)),r=await Ve(n);if(r.empty)await hi(ye(ne,"learned_collections"),{userId:t,collectionId:e,learnedAt:new Date,perfectScoreCount:1});else{const s=r.docs[0].ref;await cs(s,{perfectScoreCount:fi(1),learnedAt:new Date})}await cs(Jt(ne,"collections",e),{usageCount:fi(1)})},n1=async t=>{const e=De(ye(ne,"learned_collections"),$e("userId","==",t));return(await Ve(e)).docs.map(r=>({id:r.id,...r.data(),learnedAt:r.data().learnedAt.toDate()}))},r1=async(t,e)=>{const n=De(ye(ne,"saved_collections"),$e("userId","==",t),$e("collectionId","==",e));(await Ve(n)).empty&&await hi(ye(ne,"saved_collections"),{userId:t,collectionId:e,savedAt:new Date})},s1=async(t,e)=>{const n=De(ye(ne,"saved_collections"),$e("userId","==",t),$e("collectionId","==",e));(await Ve(n)).docs.forEach(async s=>{await mw(s.ref)})},i1=async(t,e)=>{const n=De(ye(ne,"saved_collections"),$e("userId","==",t),$e("collectionId","==",e));return!(await Ve(n)).empty},o1=async t=>{const e=Jt(ne,"collections",t);await cs(e,{usageCount:fi(1),rating:fi(.1)})},mm=async()=>{var t;try{console.log("Loading leaderboard data...");const e=De(ye(ne,"users")),n=await Ve(e);console.log(`👥 Total users found: ${n.docs.length}`);const r=new Map;n.docs.forEach(u=>{const d=u.data();r.set(u.id,{username:d.username||`user_${u.id.substring(0,8)}`,totalCollections:0,publicCollections:0,totalWords:0,totalUsage:0,totalExams:0,totalExamScore:0,perfectExams:0})});const s=De(ye(ne,"collections")),i=await Ve(s);console.log(`📝 Total collections found: ${i.docs.length}`),i.docs.forEach(u=>{var I;const d=u.data(),m=d.userId;if(!m||!r.has(m)){console.log("⚠️ Skipping collection without valid userId:",{id:u.id,name:d.name,userId:m});return}const p=r.get(m);p.totalCollections++,(d.visibility==="public"||!d.visibility)&&(p.publicCollections++,p.totalWords+=((I=d.words)==null?void 0:I.length)||0,p.totalUsage+=d.usageCount||0)}),console.log("📖 Getting learned collections...");const o=new Map;try{const u=De(ye(ne,"learned_collections")),d=await Ve(u);console.log(`📚 Found ${d.docs.length} learned collections`);for(const m of d.docs){const p=m.data(),g=p.userId,I=p.collectionId,S=await Ve(De(ye(ne,"collections"),$e("__name__","==",I)));if(!S.empty){const j=((t=S.docs[0].data().words)==null?void 0:t.length)||0;o.set(g,(o.get(g)||0)+j)}}}catch(u){console.error("❌ Error getting learned collections (skipping):",u)}try{const u=De(ye(ne,"exam_results")),d=await Ve(u);console.log(`🎓 Found ${d.docs.length} exam results`);for(const m of d.docs){const p=m.data(),g=p.userId;if(r.has(g)){const I=r.get(g);I.totalExams++,I.totalExamScore+=p.scorePercentage||0,p.scorePercentage>=100&&I.perfectExams++}}}catch(u){console.error("❌ Error getting exam results (skipping):",u)}const c=[];return r.forEach((u,d)=>{c.push({id:d,username:u.username,totalCollections:u.publicCollections,publicCollections:u.publicCollections,totalWords:u.totalWords,learnedWords:o.get(d)||0,totalUsage:u.totalUsage,totalExams:u.totalExams,averageExamScore:u.totalExams>0?u.totalExamScore/u.totalExams:0,perfectExams:u.perfectExams,joinedAt:new Date(2024,0,1)})}),console.log("Leaderboard data loaded:",c.length,"total users"),c}catch(e){return console.error("Error loading leaderboard data:",e),[]}},a1=async(t=10)=>{const n=[...await mm()].sort((r,s)=>s.totalCollections!==r.totalCollections?s.totalCollections-r.totalCollections:s.totalWords-r.totalWords);return n.forEach((r,s)=>{r.rank=s+1}),n.slice(0,t)},l1=async(t=10)=>{const n=[...await mm()].sort((r,s)=>s.learnedWords!==r.learnedWords?s.learnedWords-r.learnedWords:s.totalCollections-r.totalCollections);return n.forEach((r,s)=>{r.rank=s+1}),n.slice(0,t)},c1=()=>Math.random().toString(36).substr(2,9),u1="vocabulary_settings",d1=t=>{localStorage.setItem(u1,JSON.stringify(t))},h1=()=>{const t=localStorage.getItem(u1);if(!t)return{autoAdvance:!0,darkMode:!1};try{return{autoAdvance:!0,darkMode:!1,...JSON.parse(t)}}catch{return{autoAdvance:!0,darkMode:!1}}},$A=async(t,e,n)=>{if(!n.name||!n.isPublic)throw new Error("Name is required for public exams");const r={name:n.name,description:n.description||"",userId:t,username:e,settings:{selectedCollections:n.selectedCollections,variantCount:n.variantCount,wordCount:n.wordCount,timeLimit:n.timeLimit,isPublic:n.isPublic,name:n.name,description:n.description},createdAt:new Date,totalAttempts:0,averageScore:0,rating:0};console.log("🔥 Attempting to save public exam:",r);try{console.log("🧪 Testing collection access...");const s=ye(ne,"public_exams");console.log("🧪 Collection reference created successfully");const i=await hi(s,r);return console.log("✅ Public exam saved successfully with ID:",i.id),{id:i.id,...r}}catch(s){console.error("❌ Detailed error in savePublicExam:",{message:s.message,code:s.code,details:s}),console.log("🔄 Trying alternative approach - saving as public collection...");try{const i={...r,isPublicExam:!0,examType:"public"},o=await hi(ye(ne,"collections"),i);return console.log("✅ Alternative save successful:",o.id),{id:o.id,...i}}catch(i){throw console.error("❌ Alternative approach also failed:",i),s}}},f1=async(t=50)=>{try{const e=De(ye(ne,"public_exams"),pb("createdAt","desc"),D0(t)),n=await Ve(e);return console.log("📊 Loaded public exams from public_exams collection:",n.docs.length),n.docs.map(r=>({id:r.id,...r.data(),createdAt:r.data().createdAt.toDate()}))}catch{console.log("⚠️ Failed to load from public_exams, trying collections instead...");const n=De(ye(ne,"collections"),$e("isPublicExam","==",!0),D0(t)),r=await Ve(n);return console.log("📊 Loaded public exams from collections:",r.docs.length),r.docs.map(s=>({id:s.id,...s.data(),createdAt:s.data().createdAt.toDate()}))}},qA=async(t,e,n)=>{try{const r=Jt(ne,"public_exams",t);await cs(r,{totalAttempts:fi(1),averageScore:e/n*100}),console.log("✅ Exam stats updated in public_exams:",t)}catch{console.log("⚠️ Failed to update in public_exams, trying collections...");try{const s=Jt(ne,"collections",t);await cs(s,{totalAttempts:fi(1),averageScore:e/n*100}),console.log("✅ Exam stats updated in collections:",t)}catch(s){console.error("❌ Error updating exam stats in both tables:",s)}}},HA=async(t,e,n,r,s)=>{const i=e/n*100,o={userId:t,score:e,totalQuestions:n,scorePercentage:i,timeSpent:r,examSettings:s||null,completedAt:new Date};await hi(ye(ne,"exam_results"),o)},Jn=Object.freeze(Object.defineProperty({__proto__:null,deleteCollection:e1,generateId:c1,getLeaderboardData:mm,getLearnedCollections:n1,getTopCreators:a1,getTopLearners:l1,isCollectionSaved:i1,loadAllPublicExams:f1,loadPublicCollections:Jw,loadSavedCollections:Xw,loadSettings:h1,loadTopRatedCollections:Zw,loadUserCollections:Yw,markCollectionAsLearned:BA,removeSavedCollection:s1,saveCollection:zA,saveCollectionForUser:r1,saveExamResult:HA,savePublicExam:$A,saveSettings:d1,updateCollection:t1,updateCollectionRating:o1,updateExamStats:qA},Symbol.toStringTag,{value:"Module"}));/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var WA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KA=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),te=(t,e)=>{const n=F.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:c="",children:u,...d},m)=>F.createElement("svg",{ref:m,...WA,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${KA(t)}`,c].join(" "),...d},[...e.map(([p,g])=>F.createElement(p,g)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=te("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GA=te("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=te("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QA=te("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=te("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YA=te("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=te("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XA=te("BookmarkCheck",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p1=te("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=te("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=te("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=te("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=te("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=te("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gi=te("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eP=te("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tP=te("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=te("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nP=te("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0",key:"aigmz7"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2",key:"1n6bmn"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8",key:"a9iiix"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rP=te("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=te("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sP=te("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iP=te("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oP=te("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aP=te("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lP=te("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=te("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=te("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y1=te("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cP=te("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pm=te("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=te("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uP=te("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=te("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gm=te("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=te("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dP=te("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1=te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=te("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hP=te("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fP=te("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),x1=F.createContext({}),Hn=()=>F.useContext(x1),mP=({children:t})=>{const[e,n]=F.useState(null),[r,s]=F.useState(null),[i,o]=F.useState(!0),c=async(I,S,P)=>{try{const T=(await _C(nl,I,P)).user,w=De(ye(ne,"users"),$e("email","==",I));if(!(await Ve(w)).empty)throw await T.delete(),new Error("Bu email artıq istifadə edilir");const A=De(ye(ne,"users"),$e("username","==",S));if(!(await Ve(A)).empty)throw await T.delete(),new Error("Bu username artıq istifadə edilir");const L={id:T.uid,email:I,username:S,createdAt:new Date};return await vb(Jt(ne,"users",T.uid),L),n(L),L}catch(j){throw j}},u=async(I,S)=>{let P=I;if(!I.includes("@")){const A=De(ye(ne,"users"),$e("username","==",I)),D=await Ve(A);if(D.empty)throw new Error("İstifadəçi tapılmadı");P=D.docs[0].data().email}const T=(await wC(nl,P,S)).user,w=await O0(Jt(ne,"users",T.uid));if(!w.exists())throw new Error("İstifadəçi məlumatları tapılmadı");const E={...w.data(),createdAt:w.data().createdAt.toDate()};return n(E),E},d=async()=>{await SC(nl),n(null)},m=async I=>{if(!r||!e)throw new Error("İstifadəçi sistemə daxil olmayıb");if(I.username&&I.username!==e.username){const S=De(ye(ne,"users"),$e("username","==",I.username));if(!(await Ve(S)).empty)throw new Error("Bu username artıq istifadə edilir")}await cs(Jt(ne,"users",r.uid),I),n(S=>S?{...S,...I}:null)},p=async I=>{if(!r)throw new Error("İstifadəçi sistemə daxil olmayıb");await EC(r,I)};F.useEffect(()=>NC(nl,async S=>{if(s(S),S){const P=await O0(Jt(ne,"users",S.uid));if(P.exists()){const j={...P.data(),createdAt:P.data().createdAt.toDate()};n(j)}}else n(null);o(!1)}),[]);const g={currentUser:e,firebaseUser:r,login:u,register:c,logout:d,updateUserProfile:m,updateUserPassword:p,loading:i};return l.jsx(x1.Provider,{value:g,children:!i&&t})},pP=({onNavigateToCollections:t,onNavigateToAllCollections:e,onNavigateToLeaderboard:n,onNavigateToExam:r,onNavigateToAllExams:s,onNavigateToSettings:i})=>{const{currentUser:o,logout:c}=Hn(),[u,d]=F.useState([]),[m,p]=F.useState(!0);F.useEffect(()=>{g()},[]);const g=async()=>{try{p(!0);const S=await Zw(10);d(S)}catch(S){console.error("Error loading top collections:",S)}finally{p(!1)}},I=async()=>{try{await c()}catch(S){console.error("Logout failed:",S)}};return l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:[l.jsx("div",{className:"bg-white shadow-sm border-b dark:bg-gray-800 dark:border-gray-700",children:l.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg",children:l.jsx(Tt,{className:"w-6 h-6 text-white"})}),l.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Vocabulary App"})]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-gray-600 dark:text-gray-300",children:[l.jsx(v1,{className:"w-4 h-4"}),l.jsx("span",{className:"font-medium",children:o==null?void 0:o.username})]}),l.jsx("button",{onClick:i,className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 dark:text-gray-300 dark:hover:text-white dark:hover:bg-gray-700 rounded-lg transition-colors",children:l.jsx(pm,{className:"w-5 h-5"})}),l.jsx("button",{onClick:I,className:"p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors",children:l.jsx(oP,{className:"w-5 h-5"})})]})]})})}),l.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-12",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsxs("h2",{className:"text-4xl font-bold text-gray-800 dark:text-white mb-4",children:["Xoş gəldin, ",o==null?void 0:o.username,"!"]}),l.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:"İngilis dili öyrənmə səfərində sənə kömək edəcək alətlər. Yeni sözlər öyrən, kolleksiyalar yarat və biliklərinizi imtahanlarda sınayın."})]}),l.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:[l.jsxs("div",{onClick:t,className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 p-8 cursor-pointer group transform hover:scale-105",children:[l.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full mb-6 group-hover:from-blue-600 group-hover:to-indigo-700 transition-all",children:l.jsx(Tt,{className:"w-8 h-8 text-white"})}),l.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-3",children:"Kolleksiyalarım"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Söz kolleksiyalarınızı yaradın, idarə edin və öyrənin."}),l.jsxs("div",{className:"flex items-center text-blue-600 font-semibold group-hover:text-blue-700",children:[l.jsx("span",{children:"Kolleksiyalara get"}),l.jsx("svg",{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),l.jsxs("div",{onClick:n,className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 p-8 cursor-pointer group transform hover:scale-105",children:[l.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-gradient-to-r from-yellow-500 to-orange-600 rounded-full mb-6 group-hover:from-yellow-600 group-hover:to-orange-700 transition-all",children:l.jsx(Cn,{className:"w-8 h-8 text-white"})}),l.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-3",children:"Liderlik Cədvəli"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Ən çox yaradan və öyrənən istifadəçiləri görün, rəqabət edin."}),l.jsxs("div",{className:"flex items-center text-yellow-600 font-semibold group-hover:text-yellow-700",children:[l.jsx("span",{children:"Liderlərə bax"}),l.jsx("svg",{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),l.jsxs("div",{onClick:r,className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 p-8 cursor-pointer group transform hover:scale-105",children:[l.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-gradient-to-r from-green-500 to-teal-600 rounded-full mb-6 group-hover:from-green-600 group-hover:to-teal-700 transition-all",children:l.jsx(yi,{className:"w-8 h-8 text-white"})}),l.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-3",children:"Peşəkar İmtahan"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Comprehensive imtahan verin, bilik səviyyənizi ölçün."}),l.jsxs("div",{className:"flex items-center text-green-600 font-semibold group-hover:text-green-700",children:[l.jsx("span",{children:"İmtahan ver"}),l.jsx("svg",{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),l.jsxs("div",{onClick:s,className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 p-8 cursor-pointer group transform hover:scale-105",children:[l.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-600 rounded-full mb-6 group-hover:from-purple-600 group-hover:to-pink-700 transition-all",children:l.jsx(YA,{className:"w-8 h-8 text-white"})}),l.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-3",children:"Bütün İmtahanlar"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Community tərəfindən yaradılan public imtahanlara baxın."}),l.jsxs("div",{className:"flex items-center text-purple-600 font-semibold group-hover:text-purple-700",children:[l.jsx("span",{children:"İmtahanlara bax"}),l.jsx("svg",{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]}),l.jsxs("div",{className:"mt-16 bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"p-2 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-lg",children:l.jsx(gm,{className:"w-6 h-6 text-white"})}),l.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Ən Populyar Kolleksiyalar"})]}),l.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-blue-600 hover:text-blue-700 font-semibold transition-colors",children:[l.jsx("span",{children:"Hamısını gör"}),l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),m?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),l.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Populyar kolleksiyalar yüklənir..."})]}):!u||u.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"w-16 h-16 mx-auto bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mb-4",children:l.jsx(Tt,{className:"w-8 h-8 text-gray-400"})}),l.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Hələ public kolleksiya yoxdur."}),l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"İlk kolleksiyanızı yaradıb community ilə paylaşın!"})]}):l.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:(u||[]).slice(0,6).map((S,P)=>{var j;return l.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-white dark:from-gray-700 dark:to-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-600 hover:shadow-md transition-shadow cursor-pointer",children:[P<3&&l.jsxs("div",{className:"flex items-center mb-3",children:[l.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold text-white ${P===0?"bg-yellow-500":P===1?"bg-gray-400":"bg-orange-600"}`,children:P+1}),l.jsx("span",{className:"ml-2 text-xs font-medium text-gray-500",children:P===0?"Ən Populyar":P===1?"2-ci":"3-cü"})]}),l.jsx("h4",{className:"font-bold text-gray-800 dark:text-white mb-2 line-clamp-2",children:S.name}),l.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 dark:text-gray-300 mb-3",children:[l.jsxs("span",{children:["@",S.username]}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(ma,{className:"w-3 h-3 text-yellow-500 mr-1"}),l.jsx("span",{children:S.rating.toFixed(1)})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(hs,{className:"w-3 h-3 text-blue-500 mr-1"}),l.jsx("span",{children:S.usageCount})]})]})]}),l.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-4",children:[S.words.length," söz • ",(j=S.tags)==null?void 0:j.slice(0,2).map(T=>`#${T}`).join(" ")]}),l.jsxs("button",{className:"w-full flex items-center justify-center space-x-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white py-2 px-4 rounded-lg text-sm font-medium hover:from-blue-600 hover:to-purple-700 transition-all",children:[l.jsx(Yr,{className:"w-3 h-3"}),l.jsx("span",{children:"Quiz Oyna"})]})]},S.id)})}),u&&u.length>6&&l.jsx("div",{className:"text-center mt-6",children:l.jsxs("button",{onClick:e,className:"inline-flex items-center space-x-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-blue-600 hover:to-purple-700 transition-all",children:[l.jsx(Tt,{className:"w-4 h-4"}),l.jsx("span",{children:"Bütün Kolleksiyalara Bax"})]})})]}),l.jsxs("div",{className:"mt-8 bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8",children:[l.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6 text-center",children:"Tez Statistikalar"}),l.jsxs("div",{className:"grid md:grid-cols-3 gap-8 text-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:"0"}),l.jsx("div",{className:"text-gray-600 dark:text-gray-300",children:"Yaradılmış Kolleksiyalar"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:"0"}),l.jsx("div",{className:"text-gray-600 dark:text-gray-300",children:"Öyrənilmiş Sözlər"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:"0"}),l.jsx("div",{className:"text-gray-600 dark:text-gray-300",children:"Tamamlanmış İmtahanlar"})]})]})]})]})]})},gP=({onSave:t,onBack:e})=>{const[n,r]=F.useState(""),[s,i]=F.useState(""),[o,c]=F.useState("private"),[u,d]=F.useState([]),[m,p]=F.useState(""),[g,I]=F.useState([]),[S,P]=F.useState(""),[j,T]=F.useState(""),w=()=>{if(S.trim()&&j.trim()&&g.length<30){const y={id:c1(),english:S.trim(),meaning:j.trim()};I([...g,y]),P(""),T("")}},E=y=>{I(g.filter(k=>k.id!==y))},A=()=>{m.trim()&&!u.includes(m.trim())&&u.length<5&&(d([...u,m.trim()]),p(""))},D=y=>{d(u.filter(k=>k!==y))},[L,_]=F.useState(!1),x=async()=>{if(n.trim()&&g.length>=6&&!L){_(!0);try{const y={name:n.trim(),description:s.trim()||void 0,words:g,visibility:o,tags:u.length>0?u:void 0,createdAt:new Date};await t(y)}catch(y){console.error("Collection save error:",y),alert("Kolleksiya saxlanmadı. Yenidən cəhd edin.")}finally{_(!1)}}};return l.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[l.jsxs("div",{className:"flex items-center mb-6",children:[l.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200 mr-4",children:l.jsx(Mr,{className:"w-5 h-5 text-gray-600"})}),l.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Yeni Kolleksiya Yarat"})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-6",children:[l.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kolleksiya Adı"}),l.jsx("input",{type:"text",value:n,onChange:y=>r(y.target.value),placeholder:"Məsələn: Günlük sözlər",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Təsvir (isteğe bağlı)"}),l.jsx("textarea",{value:s,onChange:y=>i(y.target.value),placeholder:"Bu kolleksiyanın təsviri...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 h-20 resize-none"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Görünmə Ayarı"}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("button",{type:"button",onClick:()=>c("private"),className:`flex items-center justify-center space-x-2 p-3 rounded-lg border transition-all duration-200 ${o==="private"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-600 hover:border-gray-400"}`,children:[l.jsx(pi,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm font-medium",children:"Şəxsi"})]}),l.jsxs("button",{type:"button",onClick:()=>c("public"),className:`flex items-center justify-center space-x-2 p-3 rounded-lg border transition-all duration-200 ${o==="public"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-600 hover:border-gray-400"}`,children:[l.jsx(gi,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm font-medium",children:"Ümumi"})]})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-2",children:o==="private"?"Yalnız sizin üçün görünəcək":"Bütün istifadəçilər görəcək"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Etiketlər (isteğe bağlı)"}),l.jsxs("div",{className:"flex space-x-2 mb-2",children:[l.jsx("input",{type:"text",value:m,onChange:y=>p(y.target.value),placeholder:"etiket",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 text-sm",onKeyPress:y=>y.key==="Enter"&&(y.preventDefault(),A())}),l.jsx("button",{type:"button",onClick:A,disabled:!m.trim()||u.includes(m.trim())||u.length>=5,className:"px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 text-sm",children:l.jsx(rP,{className:"w-4 h-4"})})]}),u.length>0&&l.jsx("div",{className:"flex flex-wrap gap-2",children:u.map((y,k)=>l.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:["#",y,l.jsx("button",{type:"button",onClick:()=>D(y),className:"ml-1 text-blue-600 hover:text-blue-800",children:l.jsx(Eo,{className:"w-3 h-3 rotate-45"})})]},k))}),l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[u.length,"/5 etiket"]})]})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"İngilis dili sözü"}),l.jsx("input",{type:"text",value:S,onChange:y=>P(y.target.value),placeholder:"Hello",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Azərbaycan dilində mənası"}),l.jsx("input",{type:"text",value:j,onChange:y=>T(y.target.value),placeholder:"Salam",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"})]})]}),l.jsxs("button",{onClick:w,disabled:!S.trim()||!j.trim()||g.length>=30,className:"w-full md:w-auto flex items-center justify-center space-x-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-lg",children:[l.jsx(Eo,{className:"w-4 h-4"}),l.jsx("span",{children:"Söz əlavə et"})]})]}),g.length>0&&l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Əlavə edilmiş sözlər (",g.length,"/30)"]}),l.jsx("div",{className:"text-sm text-gray-600",children:g.length>=6?l.jsx("span",{className:"text-green-600 font-medium",children:"✓ Quiz üçün hazır"}):l.jsxs("span",{className:"text-orange-600",children:["Daha ",6-g.length," söz lazım"]})})]}),l.jsx("div",{className:"grid gap-3",children:g.map(y=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors duration-200",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("span",{className:"font-medium text-gray-800",children:y.english}),l.jsx("span",{className:"text-gray-600 mx-3",children:"→"}),l.jsx("span",{className:"text-gray-700",children:y.meaning})]}),l.jsx("button",{onClick:()=>E(y.id),className:"p-1 text-gray-400 hover:text-red-500 transition-colors duration-200",children:l.jsx(Eo,{className:"w-4 h-4 transform rotate-45"})})]},y.id))})]}),l.jsx("div",{className:"flex justify-center",children:l.jsx("button",{onClick:x,disabled:!n.trim()||g.length<6||L,className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white px-8 py-4 rounded-xl font-semibold text-lg hover:from-green-600 hover:to-emerald-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:L?"Saxlanılır...":"Kolleksiyanı Saxla"})})]})},yP=({onBack:t,onNavigateToAllCollections:e,onPlayQuiz:n,onSaveCollection:r})=>{const{currentUser:s}=Hn(),[i,o]=F.useState([]),[c,u]=F.useState([]),[d,m]=F.useState(new Set),[p,g]=F.useState(!0),[I,S]=F.useState(!1),[P,j]=F.useState(null),[T,w]=F.useState({name:"",visibility:"public"});F.useEffect(()=>{E()},[s]);const E=async()=>{if(s){g(!0);try{const[y,k,b]=await Promise.all([Yw(s.id),Xw(s.id),n1(s.id)]);o(y),u(k);const C=new Set(b.map(N=>N.collectionId));m(C)}catch(y){console.error("Error loading collections:",y)}finally{g(!1)}}},A=async y=>{await r(y),S(!1),await E()},D=async y=>{if(window.confirm("Bu kolleksiyanı silmək istədiyinizə əminsiniz?"))try{await e1(y),o(k=>k.filter(b=>b.id!==y))}catch(k){console.error("Error deleting collection:",k),alert("Kolleksiya silinə bilmədi. Yenidən cəhd edin.")}},L=y=>{j(y),w({name:y.name,visibility:y.visibility||"public"})},_=async()=>{if(!(!P||!T.name.trim()))try{await t1(P.id,{name:T.name.trim(),visibility:T.visibility}),o(y=>y.map(k=>k.id===P.id?{...k,name:T.name.trim(),visibility:T.visibility}:k)),j(null),w({name:"",visibility:"public"})}catch(y){console.error("Error updating collection:",y),alert("Kolleksiya yenilənə bilmədi. Yenidən cəhd edin.")}},x=()=>{j(null),w({name:"",visibility:"public"})};return I?l.jsx(gP,{onSave:A,onBack:()=>S(!1)}):l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:[l.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b dark:border-gray-700",children:l.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:l.jsx(Mr,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg",children:l.jsx(Tt,{className:"w-6 h-6 text-white"})}),l.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Kolleksiyalarım"})]})]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("button",{onClick:e,className:"flex items-center space-x-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-green-600 hover:to-emerald-700 transition-all shadow-lg hover:shadow-xl",children:[l.jsx(Tt,{className:"w-4 h-4"}),l.jsx("span",{children:"Bütün Kolleksiyalar"})]}),l.jsxs("button",{onClick:()=>S(!0),className:"flex items-center space-x-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-blue-600 hover:to-purple-700 transition-all shadow-lg hover:shadow-xl",children:[l.jsx(Eo,{className:"w-4 h-4"}),l.jsx("span",{children:"Yeni Kolleksiya"})]})]})]})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8",children:p?l.jsxs("div",{className:"flex justify-center items-center py-20",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),l.jsx("span",{className:"ml-4 text-gray-600",children:"Kolleksiyalar yüklənir..."})]}):i.length===0&&c.length===0?l.jsxs("div",{className:"text-center py-20",children:[l.jsx("div",{className:"w-24 h-24 mx-auto bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mb-6",children:l.jsx(Tt,{className:"w-12 h-12 text-gray-400"})}),l.jsx("h3",{className:"text-2xl font-semibold text-gray-600 mb-4",children:"Hələ kolleksiya yoxdur"}),l.jsx("p",{className:"text-gray-500 mb-8 max-w-md mx-auto",children:"İlk kolleksiyanızı yaradın və söz öyrənməyə başlayın. Hər kolleksiya minimum 6 söz içərməlidir."}),l.jsxs("button",{onClick:()=>S(!0),className:"flex items-center space-x-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white px-8 py-4 rounded-xl font-semibold text-lg hover:from-blue-600 hover:to-purple-700 transition-all shadow-lg hover:shadow-xl mx-auto",children:[l.jsx(Eo,{className:"w-5 h-5"}),l.jsx("span",{children:"İlk Kolleksiyanı Yarat"})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid md:grid-cols-4 gap-6 mb-8",children:[l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:l.jsx(Tt,{className:"w-6 h-6 text-blue-600"})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-800",children:i.length+c.length}),l.jsx("div",{className:"text-gray-600",children:"Cəmi Kolleksiya"})]})]})}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:l.jsx(jn,{className:"w-6 h-6 text-green-600"})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-800",children:[...i,...c].filter(y=>d.has(y.id)).reduce((y,k)=>{var b;return y+(((b=k.words)==null?void 0:b.length)||0)},0)}),l.jsx("div",{className:"text-gray-600",children:"Öyrənilən Söz"})]})]})}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:l.jsx(sy,{className:"w-6 h-6 text-orange-600"})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-800",children:[...i,...c].reduce((y,k)=>{var b;return y+(((b=k.words)==null?void 0:b.length)||0)},0)}),l.jsx("div",{className:"text-gray-600",children:"Cəmi Söz"})]})]})}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:l.jsx(Yr,{className:"w-6 h-6 text-purple-600"})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-800",children:[...i,...c].filter(y=>{var k;return(((k=y.words)==null?void 0:k.length)||0)>=6&&!d.has(y.id)}).length}),l.jsx("div",{className:"text-gray-600",children:"Quiz Hazır"})]})]})})]}),(()=>{const y=(i||[]).filter(z=>!d.has(z.id)),k=(i||[]).filter(z=>d.has(z.id)),b=(c||[]).filter(z=>!(i||[]).some(ae=>ae.id===z.id)),C=b.filter(z=>!d.has(z.id)),N=b.filter(z=>d.has(z.id)),J=[...y||[],...C||[]],he=[...k||[],...N||[]];return l.jsxs(l.Fragment,{children:[J.length>0&&l.jsxs("div",{className:"mb-12",children:[l.jsxs("div",{className:"flex items-center mb-6",children:[l.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:l.jsx(fa,{className:"w-6 h-6 text-blue-600"})}),l.jsxs("h2",{className:"text-2xl font-bold text-gray-800 ml-4",children:["Öyrəniləsi Olanlar (",J.length,")"]})]}),l.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:J.map(z=>{var ae,B,K,Q,fe,ue,Ie,Vt;return l.jsx("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden border-l-4 border-blue-500",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-start justify-between mb-4",children:[l.jsx("h3",{className:"text-xl font-bold text-gray-800 line-clamp-2",children:z.name}),z.userId===(s==null?void 0:s.id)&&l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:()=>L(z),className:"p-1 text-gray-400 hover:text-blue-500 transition-colors",children:l.jsx(sy,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>D(z.id),className:"p-1 text-gray-400 hover:text-red-500 transition-colors",children:l.jsx(iy,{className:"w-4 h-4"})})]})]}),l.jsxs("div",{className:"space-y-2 mb-4",children:[l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-gray-600",children:"Müəllif"}),l.jsx("span",{className:"font-semibold text-gray-800",children:z.userId===(s==null?void 0:s.id)?"Mən":`@${z.username}`})]}),l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-gray-600",children:"Sözlər"}),l.jsx("span",{className:"font-semibold text-gray-800",children:((ae=z.words)==null?void 0:ae.length)||0})]}),l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-gray-600",children:"Yaradılma"}),l.jsx("span",{className:"text-gray-800",children:z.createdAt.toLocaleDateString("az-AZ")})]}),l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-gray-600",children:"Status"}),l.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${(((B=z.words)==null?void 0:B.length)||0)>=6?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:(((K=z.words)==null?void 0:K.length)||0)>=6?"Quiz hazır":`${6-(((Q=z.words)==null?void 0:Q.length)||0)} söz lazım`})]}),l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-gray-600",children:"Görünürlük"}),l.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${(z.visibility||"public")==="public"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:(z.visibility||"public")==="public"?"Açıq":"Gizli"})]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Nümunə sözlər:"}),l.jsxs("div",{className:"space-y-1",children:[(z.words||[]).slice(0,2).map((Lt,Wt)=>l.jsxs("div",{className:"text-sm bg-gray-50 rounded p-2",children:[l.jsx("span",{className:"font-medium",children:Lt.english}),l.jsx("span",{className:"text-gray-600 mx-2",children:"→"}),l.jsx("span",{className:"text-gray-700",children:Lt.meaning})]},Wt)),(((fe=z.words)==null?void 0:fe.length)||0)>2&&l.jsxs("div",{className:"text-sm text-gray-500 text-center py-1",children:["...və ",(((ue=z.words)==null?void 0:ue.length)||0)-2," söz daha"]})]})]}),l.jsxs("button",{onClick:()=>n(z),disabled:(((Ie=z.words)==null?void 0:Ie.length)||0)<6,className:"w-full flex items-center justify-center space-x-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white py-3 rounded-lg font-semibold hover:from-blue-600 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(Yr,{className:"w-4 h-4"}),l.jsx("span",{children:(((Vt=z.words)==null?void 0:Vt.length)||0)>=6?"Quiz Oyna":"Quiz üçün hazır deyil"})]})]})},z.id)})})]}),b.length>0&&l.jsxs("div",{className:"mb-12",children:[l.jsxs("div",{className:"flex items-center mb-6",children:[l.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:l.jsx(p1,{className:"w-6 h-6 text-yellow-600"})}),l.jsxs("h2",{className:"text-2xl font-bold text-gray-800 ml-4",children:["Saxlanılan Kolleksiyalar (",b.length,")"]})]}),l.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(z=>{var ae,B,K,Q;return l.jsx("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden border-l-4 border-yellow-500",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-start justify-between mb-4",children:[l.jsx("h3",{className:"text-xl font-bold text-gray-800 line-clamp-2",children:z.name}),l.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full font-medium",children:"Saxlanılan"})]}),l.jsxs("div",{className:"space-y-2 mb-4",children:[l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-gray-600",children:"Müəllif"}),l.jsxs("span",{className:"font-semibold text-gray-800",children:["@",z.username]})]}),l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-gray-600",children:"Sözlər"}),l.jsx("span",{className:"font-semibold text-gray-800",children:((ae=z.words)==null?void 0:ae.length)||0})]}),l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-gray-600",children:"Status"}),l.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${d.has(z.id)?"bg-green-100 text-green-800":(((B=z.words)==null?void 0:B.length)||0)>=6?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:d.has(z.id)?"Öyrənildi":(((K=z.words)==null?void 0:K.length)||0)>=6?"Quiz hazır":"Quiz yoxdur"})]})]}),(((Q=z.words)==null?void 0:Q.length)||0)>=6&&l.jsxs("button",{onClick:()=>n(z),disabled:d.has(z.id),className:`w-full flex items-center justify-center space-x-2 py-3 rounded-lg font-semibold transition-all ${d.has(z.id)?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700"}`,children:[l.jsx(Yr,{className:"w-4 h-4"}),l.jsx("span",{children:d.has(z.id)?"Öyrənildi":"Quiz Oyna"})]})]})},`saved-${z.id}`)})})]}),he.length>0&&l.jsxs("div",{className:"mb-12",children:[l.jsxs("div",{className:"flex items-center mb-6",children:[l.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:l.jsx(jn,{className:"w-6 h-6 text-green-600"})}),l.jsxs("h2",{className:"text-2xl font-bold text-gray-800 ml-4",children:["Artıq Öyrəndiklərim (",he.length,")"]})]}),l.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:he.map(z=>{var ae,B,K;return l.jsx("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden border-l-4 border-green-500 opacity-90",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-start justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("h3",{className:"text-xl font-bold text-gray-800 line-clamp-2",children:z.name}),l.jsx(jn,{className:"w-5 h-5 text-green-600 ml-2 flex-shrink-0"})]}),z.userId===(s==null?void 0:s.id)&&l.jsx("button",{onClick:()=>D(z.id),className:"p-1 text-gray-400 hover:text-red-500 transition-colors",children:l.jsx(iy,{className:"w-4 h-4"})})]}),l.jsxs("div",{className:"space-y-2 mb-4",children:[l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-gray-600",children:"Müəllif"}),l.jsx("span",{className:"font-semibold text-gray-800",children:z.userId===(s==null?void 0:s.id)?"Mən":`@${z.username}`})]}),l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-gray-600",children:"Sözlər"}),l.jsx("span",{className:"font-semibold text-gray-800",children:((ae=z.words)==null?void 0:ae.length)||0})]}),l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-gray-600",children:"Yaradılma"}),l.jsx("span",{className:"text-gray-800",children:z.createdAt.toLocaleDateString("az-AZ")})]}),l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-gray-600",children:"Status"}),l.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"✨ Öyrənildi"})]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Nümunə sözlər:"}),l.jsxs("div",{className:"space-y-1",children:[(z.words||[]).slice(0,2).map((Q,fe)=>l.jsxs("div",{className:"text-sm bg-green-50 rounded p-2",children:[l.jsx("span",{className:"font-medium",children:Q.english}),l.jsx("span",{className:"text-gray-600 mx-2",children:"→"}),l.jsx("span",{className:"text-gray-700",children:Q.meaning})]},fe)),(((B=z.words)==null?void 0:B.length)||0)>2&&l.jsxs("div",{className:"text-sm text-gray-500 text-center py-1",children:["...və ",(((K=z.words)==null?void 0:K.length)||0)-2," söz daha"]})]})]}),l.jsxs("button",{onClick:()=>n(z),className:"w-full flex items-center justify-center space-x-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white py-3 rounded-lg font-semibold hover:from-green-600 hover:to-emerald-700 transition-all",children:[l.jsx(Yr,{className:"w-4 h-4"}),l.jsx("span",{children:"Yenidən Oyna"})]})]})},z.id)})})]})]})})()]})}),P&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:l.jsx("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md",children:l.jsxs("div",{className:"p-6",children:[l.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:"Kolleksiyanı Redaktə Et"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kolleksiya Adı"}),l.jsx("input",{type:"text",value:T.name,onChange:y=>w(k=>({...k,name:y.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Kolleksiya adını daxil edin"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Görünürlük"}),l.jsxs("div",{className:"flex space-x-4",children:[l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"radio",name:"visibility",value:"public",checked:T.visibility==="public",onChange:y=>w(k=>({...k,visibility:y.target.value})),className:"mr-2"}),l.jsx("span",{className:"text-sm",children:"Açıq (hər kəs görə bilər)"})]}),l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"radio",name:"visibility",value:"private",checked:T.visibility==="private",onChange:y=>w(k=>({...k,visibility:y.target.value})),className:"mr-2"}),l.jsx("span",{className:"text-sm",children:"Gizli (yalnız mən)"})]})]})]})]}),l.jsxs("div",{className:"flex space-x-3 mt-6",children:[l.jsx("button",{onClick:x,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors",children:"Ləğv Et"}),l.jsx("button",{onClick:_,disabled:!T.name.trim(),className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Yadda Saxla"})]})]})})})]})},vP=({onBack:t,onPlayQuiz:e})=>{const{currentUser:n}=Hn(),[r,s]=F.useState([]),[i,o]=F.useState([]),[c,u]=F.useState(!0),[d,m]=F.useState(""),[p,g]=F.useState("rating"),[I,S]=F.useState(new Set);F.useEffect(()=>{P()},[]),F.useEffect(()=>{j()},[r,d,p]);const P=async()=>{try{u(!0);const E=await Jw();if(s(E),n){const A=await Promise.all(E.map(async L=>{const _=await i1(n.id,L.id);return{id:L.id,isSaved:_}})),D=new Set(A.filter(L=>L.isSaved).map(L=>L.id));S(D)}}catch(E){console.error("Error loading public collections:",E)}finally{u(!1)}},j=()=>{let E=r;d&&(E=E.filter(A=>{var D;return A.name.toLowerCase().includes(d.toLowerCase())||A.username.toLowerCase().includes(d.toLowerCase())||((D=A.tags)==null?void 0:D.some(L=>L.toLowerCase().includes(d.toLowerCase())))})),E.sort((A,D)=>{switch(p){case"rating":return D.rating!==A.rating?D.rating-A.rating:D.usageCount-A.usageCount;case"recent":return D.createdAt.getTime()-A.createdAt.getTime();case"usage":return D.usageCount!==A.usageCount?D.usageCount-A.usageCount:D.rating-A.rating;default:return 0}}),o(E)},T=async E=>{if(n)try{I.has(E)?(await s1(n.id,E),S(D=>{const L=new Set(D);return L.delete(E),L})):(await r1(n.id,E),S(D=>new Set([...D,E])))}catch(A){console.error("Error saving/removing collection:",A)}},w=async E=>{n&&await o1(E.id),e(E)};return c?l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex justify-center items-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mb-4"}),l.jsx("span",{className:"text-gray-600",children:"Public kolleksiyalar yüklənir..."})]})}):l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[l.jsx("div",{className:"bg-white shadow-sm border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:l.jsx(Mr,{className:"w-5 h-5 text-gray-600"})}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg",children:l.jsx(Tt,{className:"w-6 h-6 text-white"})}),l.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Bütün Kolleksiyalar"})]})]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx(cP,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"Kolleksiya və ya müəllif axtar...",value:d,onChange:E=>m(E.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 w-64"})]}),l.jsxs("select",{value:p,onChange:E=>g(E.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"rating",children:"Reytinqə görə"}),l.jsx("option",{value:"recent",children:"Yenilərə görə"}),l.jsx("option",{value:"usage",children:"İstifadəyə görə"})]})]})]})})}),l.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[l.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:l.jsx(Tt,{className:"w-6 h-6 text-blue-600"})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-800",children:i.length}),l.jsx("div",{className:"text-gray-600",children:"Mövcud Kolleksiya"})]})]})}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:l.jsx(hs,{className:"w-6 h-6 text-green-600"})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-800",children:new Set(i.map(E=>E.userId)).size}),l.jsx("div",{className:"text-gray-600",children:"Aktiv Müəllif"})]})]})}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:l.jsx(gm,{className:"w-6 h-6 text-purple-600"})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-800",children:i.reduce((E,A)=>E+A.usageCount,0)}),l.jsx("div",{className:"text-gray-600",children:"Ümumi İstifadə"})]})]})})]}),i.length===0?l.jsxs("div",{className:"text-center py-20",children:[l.jsx("div",{className:"w-24 h-24 mx-auto bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mb-6",children:l.jsx(Tt,{className:"w-12 h-12 text-gray-400"})}),l.jsx("h3",{className:"text-2xl font-semibold text-gray-600 mb-4",children:d?"Heç bir kolleksiya tapılmadı":"Hələ public kolleksiya yoxdur"}),l.jsx("p",{className:"text-gray-500 max-w-md mx-auto",children:d?"Axtarış kriteriyalarınızı dəyişdirərək yenidən cəhd edin.":"İlk public kolleksiya yaradın və başqaları ilə paylaşın."})]}):l.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(E=>l.jsx("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-start justify-between mb-4",children:[l.jsx("h3",{className:"text-xl font-bold text-gray-800 line-clamp-2 flex-1",children:E.name}),l.jsx("button",{onClick:()=>T(E.id),className:`p-2 rounded-lg transition-colors ${I.has(E.id)?"bg-yellow-100 text-yellow-600 hover:bg-yellow-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,title:I.has(E.id)?"Saxlanılıbdan çıxar":"Saxla",children:I.has(E.id)?l.jsx(XA,{className:"w-4 h-4"}):l.jsx(p1,{className:"w-4 h-4"})})]}),l.jsxs("div",{className:"space-y-2 mb-4",children:[l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-gray-600",children:"Müəllif"}),l.jsxs("span",{className:"font-semibold text-gray-800",children:["@",E.username]})]}),l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-gray-600",children:"Sözlər"}),l.jsx("span",{className:"font-semibold text-gray-800",children:E.words.length})]}),l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-gray-600",children:"Reytinq"}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(ma,{className:"w-4 h-4 text-yellow-500 mr-1"}),l.jsx("span",{className:"font-semibold text-gray-800",children:E.rating.toFixed(1)})]})]}),l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-gray-600",children:"İstifadə"}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(hs,{className:"w-4 h-4 text-blue-500 mr-1"}),l.jsx("span",{className:"font-semibold text-gray-800",children:E.usageCount})]})]})]}),E.description&&l.jsx("div",{className:"mb-4",children:l.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:E.description})}),l.jsxs("div",{className:"mb-4",children:[l.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Nümunə sözlər:"}),l.jsxs("div",{className:"space-y-1",children:[E.words.slice(0,2).map((A,D)=>l.jsxs("div",{className:"text-sm bg-blue-50 rounded p-2",children:[l.jsx("span",{className:"font-medium",children:A.english}),l.jsx("span",{className:"text-gray-600 mx-2",children:"→"}),l.jsx("span",{className:"text-gray-700",children:A.meaning})]},D)),E.words.length>2&&l.jsxs("div",{className:"text-sm text-gray-500 text-center py-1",children:["...və ",E.words.length-2," söz daha"]})]})]}),E.tags&&E.tags.length>0&&l.jsx("div",{className:"mb-4",children:l.jsx("div",{className:"flex flex-wrap gap-2",children:E.tags.map((A,D)=>l.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:["#",A]},D))})}),l.jsxs("button",{onClick:()=>w(E),disabled:E.words.length<6,className:"w-full flex items-center justify-center space-x-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white py-3 rounded-lg font-semibold hover:from-blue-600 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(Yr,{className:"w-4 h-4"}),l.jsx("span",{children:E.words.length>=6?"Quiz Oyna":"Quiz üçün hazır deyil"})]})]})},E.id))})]})]})},xP=({onBack:t,onTakeExam:e})=>{const[n,r]=F.useState([]),[s,i]=F.useState(!0),[o,c]=F.useState("newest");F.useEffect(()=>{u()},[]);const u=async()=>{try{i(!0);const m=await f1(50);r(m)}catch(m){console.error("Error loading exams:",m)}finally{i(!1)}},d=n.sort((m,p)=>{switch(o){case"newest":return new Date(p.createdAt).getTime()-new Date(m.createdAt).getTime();case"popular":return p.totalAttempts-m.totalAttempts;case"rating":return p.rating-m.rating;default:return 0}});return s?l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex justify-center items-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mb-4"}),l.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"İmtahanlar yüklənir..."})]})}):l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:[l.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b dark:border-gray-700",children:l.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:l.jsx(Mr,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-lg",children:l.jsx(yi,{className:"w-6 h-6 text-white"})}),l.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bütün İmtahanlar"})]})]}),l.jsx("div",{className:"flex items-center space-x-4",children:l.jsxs("div",{className:"flex items-center space-x-2 bg-blue-50 dark:bg-gray-700 px-3 py-2 rounded-lg",children:[l.jsx(Cn,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),l.jsxs("span",{className:"text-sm text-blue-800 dark:text-blue-300",children:[l.jsx("strong",{children:n.length})," İmtahan"]})]})})]})})}),l.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[l.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-8",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Sıralama"}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:()=>c("newest"),className:`px-4 py-2 rounded-lg transition-colors ${o==="newest"?"bg-purple-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Ən Yeni"}),l.jsx("button",{onClick:()=>c("popular"),className:`px-4 py-2 rounded-lg transition-colors ${o==="popular"?"bg-purple-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Ən Populyar"}),l.jsx("button",{onClick:()=>c("rating"),className:`px-4 py-2 rounded-lg transition-colors ${o==="rating"?"bg-purple-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Ən Yüksək Reytinq"})]})]})}),d.length===0?l.jsxs("div",{className:"text-center py-16",children:[l.jsx("div",{className:"w-16 h-16 mx-auto bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-600 rounded-full flex items-center justify-center mb-4",children:l.jsx(yi,{className:"w-8 h-8 text-gray-400 dark:text-gray-500"})}),l.jsx("h3",{className:"text-xl font-semibold text-gray-600 dark:text-gray-300 mb-2",children:"Hələ public imtahan yoxdur"}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"İlk public imtahanınızı yaradın və community ilə paylaşın!"})]}):l.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(m=>l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 p-6 border border-gray-200 dark:border-gray-600",children:[l.jsx("div",{className:"flex items-start justify-between mb-4",children:l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-2 line-clamp-2",children:m.name}),l.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:["@",m.username]}),m.description&&l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2 mb-3",children:m.description})]})}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[l.jsxs("div",{className:"text-center bg-gray-50 dark:bg-gray-700 rounded-lg p-3",children:[l.jsxs("div",{className:"flex items-center justify-center mb-1",children:[l.jsx(Tt,{className:"w-4 h-4 text-blue-500 mr-1"}),l.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Suallar"})]}),l.jsx("div",{className:"text-lg font-bold text-gray-800 dark:text-white",children:m.settings.wordCount})]}),l.jsxs("div",{className:"text-center bg-gray-50 dark:bg-gray-700 rounded-lg p-3",children:[l.jsxs("div",{className:"flex items-center justify-center mb-1",children:[l.jsx(fa,{className:"w-4 h-4 text-green-500 mr-1"}),l.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Vaxt"})]}),l.jsxs("div",{className:"text-lg font-bold text-gray-800 dark:text-white",children:[m.settings.timeLimit,"m"]})]})]}),l.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 dark:text-gray-400 mb-4",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(hs,{className:"w-3 h-3 mr-1"}),l.jsx("span",{children:m.totalAttempts})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(ma,{className:"w-3 h-3 mr-1 text-yellow-500"}),l.jsx("span",{children:m.rating.toFixed(1)})]})]}),l.jsx("div",{className:"text-xs",children:new Date(m.createdAt).toLocaleDateString("az-AZ")})]}),l.jsxs("button",{onClick:()=>e(m),className:"w-full flex items-center justify-center space-x-2 bg-gradient-to-r from-purple-500 to-indigo-600 text-white py-3 px-4 rounded-lg font-medium hover:from-purple-600 hover:to-indigo-700 transition-all",children:[l.jsx(Yr,{className:"w-4 h-4"}),l.jsx("span",{children:"İmtahan Ver"})]})]},m.id))})]})]})},_P=({onBack:t})=>{const{currentUser:e}=Hn(),[n,r]=F.useState("creators"),[s,i]=F.useState([]),[o,c]=F.useState([]),[u,d]=F.useState([]),[m,p]=F.useState(!0);F.useEffect(()=>{g()},[]);const g=async()=>{try{p(!0),console.log("🚀 Starting to load leaderboard data...");const[T,w]=await Promise.all([a1(50),l1(50)]),E=[...T].sort((A,D)=>A.averageExamScore!==D.averageExamScore?D.averageExamScore-A.averageExamScore:D.totalExams-A.totalExams).filter(A=>A.totalExams>0);console.log("🏆 Creators loaded:",T.length),console.log("🎓 Learners loaded:",w.length),console.log("🎓 Exam takers loaded:",E.length),i(T),c(w),d(E)}catch(T){console.error("❌ Error loading leaderboard:",T)}finally{p(!1)}},I=T=>{switch(T){case 1:return l.jsx(ZA,{className:"w-6 h-6 text-yellow-500"});case 2:return l.jsx(m1,{className:"w-6 h-6 text-gray-400"});case 3:return l.jsx(aP,{className:"w-6 h-6 text-orange-600"});default:return l.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-xs font-bold text-blue-600",children:T})})}},S=T=>{switch(T){case 1:return"from-yellow-50 to-yellow-100 border-yellow-200";case 2:return"from-gray-50 to-gray-100 border-gray-200";case 3:return"from-orange-50 to-orange-100 border-orange-200";default:return"from-white to-gray-50 border-gray-200"}},P=n==="creators"?s:n==="learners"?o:u,j=P.findIndex(T=>T.id===(e==null?void 0:e.id))+1;return m?l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex justify-center items-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mb-4"}),l.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Liderlik cədvəli yüklənir..."})]})}):l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:[l.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b dark:border-gray-700",children:l.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:l.jsx(Mr,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-lg",children:l.jsx(Cn,{className:"w-6 h-6 text-white"})}),l.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Liderlik Cədvəli"})]})]}),l.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 dark:text-gray-300",children:[l.jsxs("div",{className:"flex items-center space-x-2 bg-blue-50 px-3 py-2 rounded-lg",children:[l.jsx(ma,{className:"w-4 h-4 text-blue-600"}),l.jsxs("span",{children:["Sizin yeriniiz: ",l.jsxs("strong",{children:["#",j||"N/A"]})]})]}),l.jsxs("div",{className:"flex items-center space-x-2 bg-green-50 px-3 py-2 rounded-lg",children:[l.jsx(hs,{className:"w-4 h-4 text-green-600"}),l.jsxs("span",{children:["Cəmi İstifadəçi: ",l.jsx("strong",{children:n==="creators"?s.length:o.length})]})]})]})]})})}),l.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-2 mb-8 flex",children:[l.jsxs("button",{onClick:()=>r("creators"),className:`flex-1 flex items-center justify-center space-x-2 py-4 px-6 rounded-xl font-semibold transition-all ${n==="creators"?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg":"text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[l.jsx(Tt,{className:"w-5 h-5"}),l.jsx("span",{children:"Ən Çox Yaradan"})]}),l.jsxs("button",{onClick:()=>r("learners"),className:`flex-1 flex items-center justify-center space-x-2 py-4 px-6 rounded-xl font-semibold transition-all ${n==="learners"?"bg-gradient-to-r from-green-500 to-emerald-600 text-white shadow-lg":"text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[l.jsx(JA,{className:"w-5 h-5"}),l.jsx("span",{children:"Ən Çox Öyrənən"})]}),l.jsxs("button",{onClick:()=>r("exams"),className:`flex-1 flex items-center justify-center space-x-2 py-4 px-6 rounded-xl font-semibold transition-all ${n==="exams"?"bg-gradient-to-r from-orange-500 to-red-600 text-white shadow-lg":"text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[l.jsx(yi,{className:"w-5 h-5"}),l.jsx("span",{children:"Ən Yaxşı İmtahan"})]})]}),l.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[l.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:l.jsx(hs,{className:"w-6 h-6 text-purple-600"})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:P.length}),l.jsx("div",{className:"text-gray-600 dark:text-gray-300",children:"Aktiv İstifadəçi"})]})]})}),l.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:l.jsx(Tt,{className:"w-6 h-6 text-blue-600"})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:n==="exams"?P.reduce((T,w)=>T+w.totalExams,0).toLocaleString():P.reduce((T,w)=>T+w.totalWords,0).toLocaleString()}),l.jsx("div",{className:"text-gray-600 dark:text-gray-300",children:n==="creators"?"Yaradılan Söz":n==="learners"?"Öyrənilən Söz":"İmtahan Sayı"})]})]})}),l.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:l.jsx(gm,{className:"w-6 h-6 text-green-600"})}),l.jsxs("div",{className:"ml-4",children:[l.jsxs("div",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:[n==="exams"?Math.round(P.reduce((T,w)=>T+w.averageExamScore,0)/Math.max(P.length,1)):P.reduce((T,w)=>T+w.totalCollections,0),n==="exams"&&"%"]}),l.jsx("div",{className:"text-gray-600 dark:text-gray-300",children:n==="exams"?"Ortalama Bal":"Cəmi Kolleksiya"})]})]})})]}),l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg overflow-hidden",children:[l.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-600 px-8 py-6",children:[l.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center",children:[l.jsx(Cn,{className:"w-6 h-6 mr-3"}),n==="creators"?"Ən Çox Kolleksiya Yaradanlar":n==="learners"?"Ən Çox Söz Öyrənənlər":"Ən Yaxşı İmtahan Nəticələri"]}),l.jsx("p",{className:"text-purple-100 mt-2",children:n==="creators"?"Ən çox söz və kolleksiya yaradıb community ilə paylaşanlar":n==="learners"?"Ən çox söz öyrənib bilik qazananlar":"Ən yüksək ortalama imtahan nəticəsi əldə edənlər"})]}),P.length===0?l.jsxs("div",{className:"text-center py-16",children:[l.jsx("div",{className:"w-16 h-16 mx-auto bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mb-4",children:l.jsx(Cn,{className:"w-8 h-8 text-gray-400"})}),l.jsx("h3",{className:"text-xl font-semibold text-gray-600 dark:text-gray-300 mb-2",children:"Hələ məlumat yoxdur"}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:n==="creators"?"İlk public kolleksiyanı yaradın və liderlik cədvəlində yerinizi alın!":n==="learners"?"İlk quiz-lərinizi tamamlayın və liderlik cədvəlində yerinizi alın!":"İlk imtahanınızı verin və liderlik cədvəlində yerinizi alın!"})]}):l.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:P.map((T,w)=>{const E=T.id===(e==null?void 0:e.id),A=T.rank||w+1;return l.jsx("div",{className:`px-8 py-6 transition-all duration-200 ${E?"bg-gradient-to-r from-blue-50 to-purple-50 border-l-4 border-blue-500":A<=3?`bg-gradient-to-r ${S(A)} border-l-4 border-transparent`:"hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:"flex items-center justify-center",children:I(A)}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center font-bold text-white ${E?"bg-gradient-to-r from-blue-500 to-purple-600":"bg-gradient-to-r from-gray-400 to-gray-600"}`,children:T.username.charAt(0).toUpperCase()}),l.jsx("div",{children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("h3",{className:`text-lg font-bold ${E?"text-blue-700":"text-gray-800 dark:text-white"}`,children:["@",T.username]}),E&&l.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full font-medium",children:"Siz"}),A<=3&&l.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${A===1?"bg-yellow-100 text-yellow-800":A===2?"bg-gray-100 text-gray-800":"bg-orange-100 text-orange-800"}`,children:A===1?"Birinci":A===2?"İkinci":"Üçüncü"})]})})]})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-8 text-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:n==="creators"?T.totalWords:n==="learners"?T.learnedWords:`${Math.round(T.averageExamScore)}%`}),l.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:n==="creators"?"Yaradılan Söz":n==="learners"?"Öyrənilən Söz":"Ortalama Bal"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xl font-semibold text-gray-700 dark:text-gray-200",children:n==="exams"?T.totalExams:T.totalCollections}),l.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:n==="exams"?"İmtahan Sayı":"Kolleksiya"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xl font-semibold text-gray-700 dark:text-gray-200",children:n==="creators"?T.totalUsage:n==="learners"?T.publicCollections:T.perfectExams}),l.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:n==="creators"?"İstifadə":n==="learners"?"Public":"100% Bal"})]})]})]})},T.id)})})]}),l.jsxs("div",{className:"mt-8 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-2xl p-8 text-center text-white",children:[l.jsx(Cn,{className:"w-16 h-16 mx-auto mb-4 opacity-80"}),l.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Səndə liderlərdən olabilərsən!"}),l.jsx("p",{className:"text-lg opacity-90 max-w-2xl mx-auto",children:n==="creators"?"Yeni kolleksiyalar yaradıb community ilə paylaş. Hər söz sayılır!":n==="learners"?"Yeni sözlər öyrən və quiz-ləri 100% nəticə ilə tamamla!":"İmtahanlar ver və yüksək nəticələrlə liderlik cədvəlində yerin qorumağa çalış!"})]})]})]})},wP=t=>{if(t.length<4)throw new Error("Minimum 4 söz lazımdır quiz üçün");return t.map(e=>{const n=t.filter(i=>i.id!==e.id).map(i=>i.meaning).sort(()=>Math.random()-.5).slice(0,3),r=[e.meaning,...n].sort(()=>Math.random()-.5),s=r.indexOf(e.meaning);return{word:e,options:r,correctIndex:s}})},EP=({collection:t,autoAdvance:e,onBack:n,onFinish:r})=>{const[s,i]=F.useState([]),[o,c]=F.useState(0),[u,d]=F.useState(null),[m,p]=F.useState(!1),[g,I]=F.useState(0),[S,P]=F.useState(!1);F.useEffect(()=>{i(wP(t.words))},[t]);const j=s[o],T=()=>{if(o<s.length-1)c(A=>A+1),d(null),p(!1),P(!1);else{const A={correct:g,total:s.length,percentage:Math.round(g/s.length*100)};r(A)}},w=A=>{u===null&&(d(A),P(!0),A===j.correctIndex&&I(D=>D+1),e&&setTimeout(()=>{T()},1500))},E=A=>u===null?"bg-white border-2 border-gray-200 hover:border-blue-300 hover:bg-blue-50 text-gray-800":A===j.correctIndex?"bg-green-500 border-green-500 text-white":A===u?"bg-red-500 border-red-500 text-white":"bg-gray-100 border-gray-200 text-gray-500";return j?l.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-8",children:[l.jsxs("button",{onClick:n,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800 transition-colors duration-200",children:[l.jsx(Mr,{className:"w-5 h-5"}),l.jsx("span",{children:"Geri"})]}),l.jsxs("div",{className:"text-sm text-gray-600",children:[o+1," / ",s.length]})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"Bu sözün mənası nədir?"}),l.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-8 py-4 rounded-xl inline-block",children:l.jsx("span",{className:"text-3xl font-bold",children:j.word.english})})]}),l.jsx("div",{className:"grid gap-4",children:j.options.map((A,D)=>l.jsx("button",{onClick:()=>w(D),disabled:u!==null,className:`p-4 rounded-xl text-left font-medium transition-all duration-300 transform hover:scale-102 ${E(D)}`,children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{children:A}),u!==null&&l.jsx("div",{children:D===j.correctIndex?l.jsx(jn,{className:"w-5 h-5 text-white"}):D===u?l.jsx(hP,{className:"w-5 h-5 text-white"}):null})]})},D))}),!e&&S&&l.jsx("div",{className:"mt-6 flex justify-center",children:l.jsxs("button",{onClick:T,className:"flex items-center space-x-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-md hover:shadow-lg",children:[l.jsx("span",{children:o<s.length-1?"Növbəti sual":"Nəticəni gör"}),l.jsx(QA,{className:"w-4 h-4"})]})}),l.jsx("div",{className:"mt-8",children:l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:l.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full transition-all duration-500",style:{width:`${(o+1)/s.length*100}%`}})})})]})]}):l.jsx("div",{children:"Yüklənir..."})},TP=({result:t,collection:e,onPlayAgain:n,onBackHome:r,onMarkAsLearned:s})=>{const[i,o]=F.useState(!1),c=()=>t.percentage>=90?{text:"Əla nəticə!",icon:Cn,color:"from-yellow-400 to-orange-500"}:t.percentage>=75?{text:"Çox yaxşı!",icon:m1,color:"from-green-400 to-emerald-500"}:t.percentage>=60?{text:"Yaxşı!",icon:kh,color:"from-blue-400 to-cyan-500"}:{text:"Daha çox məşq lazım",icon:kh,color:"from-gray-400 to-gray-500"},{text:u,icon:d,color:m}=c(),p=async()=>{if(s&&!i){o(!0);try{await s(e.id),r()}catch(g){console.error("Failed to mark as learned:",g),o(!1)}}};return l.jsx("div",{className:"max-w-2xl mx-auto p-6",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("div",{className:`w-20 h-20 mx-auto bg-gradient-to-br ${m} rounded-full flex items-center justify-center mb-4`,children:l.jsx(d,{className:"w-10 h-10 text-white"})}),l.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:u}),l.jsxs("p",{className:"text-gray-600",children:['"',e.name,'" kolleksiyasını bitirdiniz']})]}),l.jsx("div",{className:"bg-gray-50 rounded-xl p-6 mb-8",children:l.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.correct}),l.jsx("div",{className:"text-sm text-gray-600",children:"Doğru"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold text-red-600",children:t.total-t.correct}),l.jsx("div",{className:"text-sm text-gray-600",children:"Yanlış"})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[t.percentage,"%"]}),l.jsx("div",{className:"text-sm text-gray-600",children:"Nəticə"})]})]})}),l.jsxs("div",{className:"space-y-4",children:[t.percentage===100&&s&&!e.isLearned&&l.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-6",children:[l.jsx("div",{className:"flex items-center justify-center mb-4",children:l.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:l.jsx(Cn,{className:"w-8 h-8 text-green-600"})})}),l.jsx("h3",{className:"text-lg font-bold text-green-800 mb-2",children:"Mükəmməl Nəticə! 🎉"}),l.jsx("p",{className:"text-green-700 mb-4",children:"100% nəticə əldə etdiniz! Bu kolleksiyanı tamamilə öyrəndiniz."}),l.jsxs("button",{onClick:p,disabled:i,className:"flex items-center justify-center space-x-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-green-600 hover:to-emerald-700 transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50",children:[l.jsx(jn,{className:"w-5 h-5"}),l.jsx("span",{children:i?"Saxlanır...":"Öyrəndim! ✨"})]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[l.jsxs("button",{onClick:n,className:"flex items-center justify-center space-x-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-md hover:shadow-lg",children:[l.jsx(y1,{className:"w-4 h-4"}),l.jsx("span",{children:"Yenidən oyna"})]}),l.jsxs("button",{onClick:r,className:"flex items-center justify-center space-x-2 bg-white border-2 border-gray-300 text-gray-700 px-6 py-3 rounded-lg font-medium hover:bg-gray-50 transition-all duration-200",children:[l.jsx(g1,{className:"w-4 h-4"}),l.jsx("span",{children:"Ana səhifə"})]})]})]})]})})},IP=({settings:t,onUpdateSettings:e,onBack:n})=>{const{currentUser:r,updateUserProfile:s,updateUserPassword:i}=Hn(),[o,c]=F.useState(!1),[u,d]=F.useState(!1),[m,p]=F.useState((r==null?void 0:r.username)||""),[g,I]=F.useState(""),[S,P]=F.useState(""),[j,T]=F.useState(!1),[w,E]=F.useState(!1),[A,D]=F.useState(!1),[L,_]=F.useState(""),[x,y]=F.useState(""),k=J=>{e({...t,autoAdvance:J})},b=J=>{e({...t,darkMode:J})},C=async()=>{if(m===(r==null?void 0:r.username)){c(!1);return}if(m.length<3){_("Username ən azı 3 simvol olmalıdır");return}D(!0),_(""),y("");try{await s({username:m}),y("Username uğurla yeniləndi"),c(!1)}catch(J){_(J.message||"Username yenilənə bilmədi")}finally{D(!1)}},N=async()=>{if(g.length<6){_("Parol ən azı 6 simvol olmalıdır");return}if(g!==S){_("Parollar uyğun gəlmir");return}D(!0),_(""),y("");try{await i(g),y("Parol uğurla yeniləndi"),d(!1),I(""),P("")}catch(J){_(J.message||"Parol yenilənə bilmədi")}finally{D(!1)}};return l.jsxs("div",{className:"max-w-2xl mx-auto p-6 dark:text-white",children:[l.jsxs("div",{className:"flex items-center mb-6",children:[l.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200 mr-4",children:l.jsx(Mr,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg",children:l.jsx(pm,{className:"w-6 h-6 text-white"})}),l.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Ayarlar"})]})]}),l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8",children:[L&&l.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg mb-4 text-sm",children:L}),x&&l.jsx("div",{className:"bg-green-50 text-green-600 p-3 rounded-lg mb-4 text-sm",children:x}),l.jsxs("div",{className:"mb-8",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-6",children:"İstifadəçi Profili"}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-xl p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"font-medium text-gray-800 dark:text-white",children:"Username"}),!o&&l.jsx("button",{onClick:()=>c(!0),className:"text-blue-600 hover:text-blue-700 text-sm",children:"Dəyişdir"})]}),o?l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{children:l.jsx("input",{type:"text",value:m,onChange:J=>p(J.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Yeni username",disabled:A})}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("button",{onClick:C,disabled:A,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:A?"Saxlanır...":"Saxla"}),l.jsx("button",{onClick:()=>{c(!1),p((r==null?void 0:r.username)||""),_("")},className:"text-gray-600 hover:text-gray-800",disabled:A,children:"Ləğv et"})]})]}):l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:l.jsx(v1,{className:"w-5 h-5 text-blue-600"})}),l.jsx("span",{className:"text-gray-800 dark:text-white",children:r==null?void 0:r.username})]})]}),l.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-xl p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"font-medium text-gray-800 dark:text-white",children:"Parol"}),!u&&l.jsx("button",{onClick:()=>d(!0),className:"text-blue-600 hover:text-blue-700 text-sm",children:"Dəyişdir"})]}),u?l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Yeni Parol"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:j?"text":"password",value:g,onChange:J=>I(J.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Yeni parol",disabled:A}),l.jsx("button",{type:"button",onClick:()=>T(!j),className:"absolute right-3 top-2.5 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300",disabled:A,children:j?l.jsx(pi,{className:"w-4 h-4"}):l.jsx(gi,{className:"w-4 h-4"})})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Parolu təkrarla"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:w?"text":"password",value:S,onChange:J=>P(J.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Parolu təkrarla",disabled:A}),l.jsx("button",{type:"button",onClick:()=>E(!w),className:"absolute right-3 top-2.5 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300",disabled:A,children:w?l.jsx(pi,{className:"w-4 h-4"}):l.jsx(gi,{className:"w-4 h-4"})})]})]}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("button",{onClick:N,disabled:A,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:A?"Saxlanır...":"Saxla"}),l.jsx("button",{onClick:()=>{d(!1),I(""),P(""),_("")},className:"text-gray-600 hover:text-gray-800",disabled:A,children:"Ləğv et"})]})]}):l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:l.jsx(sP,{className:"w-5 h-5 text-purple-600"})}),l.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"••••••••"})]})]})]})]}),l.jsxs("div",{className:"mb-8",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-6",children:"Görünüş Ayarları"}),l.jsx("div",{className:"space-y-6",children:l.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-xl p-6",children:[l.jsx("h3",{className:"font-medium text-gray-800 mb-4",children:"Tema"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("label",{className:"flex items-center space-x-4 cursor-pointer group",children:[l.jsx("input",{type:"radio",name:"theme",checked:!t.darkMode,onChange:()=>b(!1),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),l.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[l.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg group-hover:bg-yellow-200 transition-colors duration-200",children:l.jsx(uP,{className:"w-5 h-5 text-yellow-600"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Açıq tema"}),l.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Gündüz rejimi"})]})]})]}),l.jsxs("label",{className:"flex items-center space-x-4 cursor-pointer group",children:[l.jsx("input",{type:"radio",name:"theme",checked:t.darkMode,onChange:()=>b(!0),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),l.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[l.jsx("div",{className:"p-2 bg-gray-800 rounded-lg group-hover:bg-gray-700 transition-colors duration-200",children:l.jsx(lP,{className:"w-5 h-5 text-gray-200"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Qaranlıq tema"}),l.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Gecə rejimi"})]})]})]})]})]})})]}),l.jsxs("div",{className:"mb-8",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-6",children:"Quiz Ayarları"}),l.jsx("div",{className:"space-y-6",children:l.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-xl p-6",children:[l.jsx("h3",{className:"font-medium text-gray-800 mb-4",children:"Sual Keçid Rejimi"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("label",{className:"flex items-center space-x-4 cursor-pointer group",children:[l.jsx("input",{type:"radio",name:"advanceMode",checked:t.autoAdvance,onChange:()=>k(!0),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),l.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[l.jsx("div",{className:"p-2 bg-blue-100 rounded-lg group-hover:bg-blue-200 transition-colors duration-200",children:l.jsx(fP,{className:"w-5 h-5 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Avtomatik keçid"}),l.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Cavab verdikdən sonra avtomatik növbəti suala keç"})]})]})]}),l.jsxs("label",{className:"flex items-center space-x-4 cursor-pointer group",children:[l.jsx("input",{type:"radio",name:"advanceMode",checked:!t.autoAdvance,onChange:()=>k(!1),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),l.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[l.jsx("div",{className:"p-2 bg-purple-100 rounded-lg group-hover:bg-purple-200 transition-colors duration-200",children:l.jsx(nP,{className:"w-5 h-5 text-purple-600"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Manual keçid"}),l.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:'"Növbəti" düyməsinə basaraq özünüz keçid edin'})]})]})]})]})]})})]}),l.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-6",children:l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center",children:"Ayarlar avtomatik saxlanılır"})})]})]})},kP=({onSwitchToRegister:t})=>{const[e,n]=F.useState(""),[r,s]=F.useState(""),[i,o]=F.useState(!1),[c,u]=F.useState(!1),[d,m]=F.useState(""),{login:p}=Hn(),g=async I=>{if(I.preventDefault(),!e||!r){m("Bütün sahələri doldurun");return}u(!0),m("");try{await p(e,r)}catch(S){m(S.message||"Giriş zamanı xəta baş verdi")}finally{u(!1)}};return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-8 w-full max-w-md",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(iP,{className:"w-8 h-8 text-white"})}),l.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Daxil ol"}),l.jsx("p",{className:"text-gray-600",children:"Hesabınıza daxil olun"})]}),d&&l.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg mb-4 text-sm",children:d}),l.jsxs("form",{onSubmit:g,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"emailOrUsername",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email və ya Username"}),l.jsx("input",{type:"text",id:"emailOrUsername",value:e,onChange:I=>n(I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Email və ya username daxil edin",disabled:c})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Parol"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:i?"text":"password",id:"password",value:r,onChange:I=>s(I.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Parolu daxil edin",disabled:c}),l.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",disabled:c,children:i?l.jsx(pi,{className:"w-4 h-4"}):l.jsx(gi,{className:"w-4 h-4"})})]})]}),l.jsx("button",{type:"submit",disabled:c,className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-2 px-4 rounded-lg hover:from-blue-600 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:c?"Daxil olunur...":"Daxil ol"})]}),l.jsx("div",{className:"mt-6 text-center",children:l.jsxs("p",{className:"text-gray-600",children:["Hesabınız yoxdur?"," ",l.jsx("button",{onClick:t,className:"text-blue-600 hover:text-blue-700 font-medium",disabled:c,children:"Qeydiyyatdan keçin"})]})})]})})},NP=({onSwitchToLogin:t})=>{const[e,n]=F.useState(""),[r,s]=F.useState(""),[i,o]=F.useState(""),[c,u]=F.useState(""),[d,m]=F.useState(!1),[p,g]=F.useState(!1),[I,S]=F.useState(!1),[P,j]=F.useState(""),{register:T}=Hn(),w=async E=>{if(E.preventDefault(),!e||!r||!i||!c){j("Bütün sahələri doldurun");return}if(!e.includes("@")){j("Düzgün email adresi daxil edin");return}if(r.length<3){j("Username ən azı 3 simvol olmalıdır");return}if(i.length<6){j("Parol ən azı 6 simvol olmalıdır");return}if(i!==c){j("Parollar uyğun gəlmir");return}S(!0),j("");try{await T(e,r,i)}catch(A){j(A.message||"Qeydiyyat zamanı xəta baş verdi")}finally{S(!1)}};return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-8 w-full max-w-md",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-green-500 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(dP,{className:"w-8 h-8 text-white"})}),l.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Qeydiyyat"}),l.jsx("p",{className:"text-gray-600",children:"Yeni hesab yaradın"})]}),P&&l.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg mb-4 text-sm",children:P}),l.jsxs("form",{onSubmit:w,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),l.jsx("input",{type:"email",id:"email",value:e,onChange:E=>n(E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Email adresinizi daxil edin",disabled:I})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),l.jsx("input",{type:"text",id:"username",value:r,onChange:E=>s(E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Username daxil edin",disabled:I})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Parol"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:d?"text":"password",id:"password",value:i,onChange:E=>o(E.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Parolu daxil edin",disabled:I}),l.jsx("button",{type:"button",onClick:()=>m(!d),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",disabled:I,children:d?l.jsx(pi,{className:"w-4 h-4"}):l.jsx(gi,{className:"w-4 h-4"})})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Parolu təkrarla"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:p?"text":"password",id:"confirmPassword",value:c,onChange:E=>u(E.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Parolu yenidən daxil edin",disabled:I}),l.jsx("button",{type:"button",onClick:()=>g(!p),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",disabled:I,children:p?l.jsx(pi,{className:"w-4 h-4"}):l.jsx(gi,{className:"w-4 h-4"})})]})]}),l.jsx("button",{type:"submit",disabled:I,className:"w-full bg-gradient-to-r from-green-500 to-blue-600 text-white py-2 px-4 rounded-lg hover:from-green-600 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:I?"Qeydiyyat edilir...":"Qeydiyyatdan keç"})]}),l.jsx("div",{className:"mt-6 text-center",children:l.jsxs("p",{className:"text-gray-600",children:["Artıq hesabınız var?"," ",l.jsx("button",{onClick:t,className:"text-blue-600 hover:text-blue-700 font-medium",disabled:I,children:"Daxil olun"})]})})]})})},SP=({collections:t,onBack:e,onStartExam:n})=>{const[r,s]=F.useState([]),[i,o]=F.useState(4),[c,u]=F.useState(20),[d,m]=F.useState(10),[p,g]=F.useState(!1),[I,S]=F.useState(""),[P,j]=F.useState(""),T=_=>{s(x=>x.includes(_)?x.filter(y=>y!==_):[...x,_])},w=()=>{r.length===t.length?s([]):s(t.map(_=>_.id))},E=()=>t.filter(_=>r.includes(_.id)).reduce((_,x)=>{var y;return _+(((y=x.words)==null?void 0:y.length)||0)},0),A=()=>{if(r.length===0||p&&!I.trim())return;n({selectedCollections:r,variantCount:i,wordCount:c,timeLimit:d,isPublic:p,name:p?I:void 0,description:p?P:void 0})},D=E(),L=Math.min(D,100);return l.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[l.jsxs("div",{className:"flex items-center mb-6",children:[l.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200 mr-4",children:l.jsx(Mr,{className:"w-5 h-5 text-gray-600"})}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"p-2 bg-gradient-to-br from-green-500 to-teal-600 rounded-lg",children:l.jsx(yi,{className:"w-6 h-6 text-white"})}),l.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Peşəkar İmtahan Ayarları"})]})]}),l.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center space-x-2",children:[l.jsx(hs,{className:"w-5 h-5 text-blue-600"}),l.jsx("span",{children:"Kolleksiyalar"})]}),l.jsx("button",{onClick:w,className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:r.length===t.length?"Hamısını ləğv et":"Hamısını seç"})]}),l.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:t.map(_=>{var x;return l.jsxs("div",{className:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",onClick:()=>T(_.id),children:[l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"checkbox",checked:r.includes(_.id),onChange:y=>{y.stopPropagation(),T(_.id)},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),r.includes(_.id)&&l.jsx(jn,{className:"w-4 h-4 text-green-600 absolute -top-1 -right-1"})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-medium text-gray-800",children:_.name}),l.jsxs("p",{className:"text-sm text-gray-600",children:[((x=_.words)==null?void 0:x.length)||0," söz"]})]})]},_.id)})}),l.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:l.jsxs("p",{className:"text-sm text-blue-800",children:[l.jsx("span",{className:"font-medium",children:r.length})," kolleksiya seçildi",D>0&&l.jsxs("span",{children:[" • Cəmi ",l.jsx("span",{className:"font-medium",children:D})," söz"]})]})})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsxs("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center space-x-2",children:[l.jsx(pm,{className:"w-5 h-5 text-purple-600"}),l.jsx("span",{children:"İmtahan Ayarları"})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Variant sayı"}),l.jsxs("select",{value:i,onChange:_=>o(Number(_.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[l.jsx("option",{value:3,children:"3 variant"}),l.jsx("option",{value:4,children:"4 variant"}),l.jsx("option",{value:5,children:"5 variant"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sual sayı"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("input",{type:"range",min:"5",max:L,step:"1",value:Math.min(c,L),onChange:_=>u(Number(_.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),l.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[l.jsx("span",{children:"5"}),l.jsx("span",{className:"font-medium text-blue-600",children:Math.min(c,L)}),l.jsx("span",{children:L})]})]}),D<c&&D>0&&l.jsxs("p",{className:"text-sm text-orange-600 mt-1",children:["Maksimum ",D," sual edə bilərsiniz"]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vaxt limiti (dəqiqə)"}),l.jsxs("select",{value:d,onChange:_=>m(Number(_.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[l.jsx("option",{value:5,children:"5 dəqiqə"}),l.jsx("option",{value:10,children:"10 dəqiqə"}),l.jsx("option",{value:15,children:"15 dəqiqə"}),l.jsx("option",{value:20,children:"20 dəqiqə"}),l.jsx("option",{value:30,children:"30 dəqiqə"}),l.jsx("option",{value:45,children:"45 dəqiqə"}),l.jsx("option",{value:60,children:"1 saat"})]})]}),l.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[l.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:p,onChange:_=>g(_.target.checked),className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-gray-800",children:"Public İmtahan"}),l.jsx("div",{className:"text-sm text-gray-600",children:"İmtahanınızı digər istifadəçilər də görsün"})]})]}),p&&l.jsxs("div",{className:"mt-4 space-y-4 p-4 bg-purple-50 rounded-lg border border-purple-200",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-1",children:"İmtahan Adı *"}),l.jsx("input",{type:"text",value:I,onChange:_=>S(_.target.value),placeholder:"Məsələn: İngilis dili - Orta səviyyə",className:"w-full px-3 py-2 border border-purple-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-1",children:"Təsvir (seçimlik)"}),l.jsx("textarea",{value:P,onChange:_=>j(_.target.value),placeholder:"İmtahan haqqında qısa məlumat...",className:"w-full px-3 py-2 border border-purple-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",rows:3})]})]})]})]}),l.jsxs("div",{className:"mt-6 p-4 bg-gradient-to-r from-green-50 to-teal-50 rounded-lg border border-green-200",children:[l.jsxs("h3",{className:"font-medium text-green-800 mb-2 flex items-center space-x-2",children:[l.jsx(eP,{className:"w-4 h-4"}),l.jsx("span",{children:"İmtahan Xülasəsi"})]}),l.jsxs("div",{className:"space-y-1 text-sm text-green-700",children:[l.jsxs("p",{children:["• ",r.length," kolleksiya"]}),l.jsxs("p",{children:["• ",Math.min(c,L)," sual"]}),l.jsxs("p",{children:["• ",i," variant"]}),l.jsxs("p",{className:"flex items-center space-x-1",children:[l.jsx(fa,{className:"w-3 h-3"}),l.jsxs("span",{children:[d," dəqiqə"]})]})]})]})]})]}),l.jsx("div",{className:"mt-8 flex justify-center",children:l.jsxs("button",{onClick:A,disabled:r.length===0||p&&!I.trim(),className:"flex items-center space-x-3 bg-gradient-to-r from-green-500 to-teal-600 text-white px-8 py-4 rounded-xl font-semibold text-lg hover:from-green-600 hover:to-teal-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:transform-none",children:[l.jsx(yi,{className:"w-5 h-5"}),l.jsx("span",{children:"İmtahana Başla"})]})}),(r.length===0||p&&!I.trim())&&l.jsx("div",{className:"mt-4 text-center",children:l.jsx("p",{className:"text-sm text-gray-500",children:r.length===0?"İmtahana başlamaq üçün ən azı bir kolleksiya seçin":"Public imtahan üçün ad məcburidir"})})]})},bP=({collections:t,examSettings:e,onFinish:n,onBack:r})=>{const[s,i]=F.useState([]),[o,c]=F.useState(0),[u,d]=F.useState({}),[m,p]=F.useState(e.timeLimit*60),[g,I]=F.useState(!1),[S,P]=F.useState(!1);F.useEffect(()=>{const _=(()=>{if(!t.length||!e.selectedCollections.length)return[];const x=t.filter(z=>e.selectedCollections.includes(z.id));if(!x.length)return[];const y=new Map;x.forEach(z=>{z.words&&Array.isArray(z.words)&&z.words.forEach(ae=>{y.set(ae.id,ae)})});const k=Array.from(y.values());if(k.length<e.wordCount)return console.warn("Not enough unique words for exam. Available:",k.length,"Required:",e.wordCount),[];const b=z=>{const ae=[...z];for(let B=ae.length-1;B>0;B--){const K=Math.floor(Math.random()*(B+1));[ae[B],ae[K]]=[ae[K],ae[B]]}return ae},N=b(k).slice(0,e.wordCount),J=k.map(z=>z.meaning);return N.map(z=>{const ae=J.filter(ue=>ue!==z.meaning),K=b(ae).slice(0,e.variantCount-1),Q=b([z.meaning,...K]),fe=Q.indexOf(z.meaning);return{word:z,options:Q,correctIndex:fe}})})();i(_)},[t,e]),F.useEffect(()=>{if(m>0&&!g){const L=setTimeout(()=>{p(_=>_-1)},1e3);return()=>clearTimeout(L)}else m===0&&!g&&T(!0)},[m,g]);const j=(L,_)=>{d(x=>({...x,[L]:_}))},T=F.useCallback((L=!1)=>{if(g)return;I(!0);let _=0;s.forEach((y,k)=>{u[k]===y.correctIndex&&_++});const x=e.timeLimit*60-m;n(_,s.length,x)},[g,s,u,e.timeLimit,m,n]),w=()=>{s.length-Object.keys(u).length>0?P(!0):T()},E=L=>{const _=Math.floor(L/60),x=L%60;return`${_}:${x.toString().padStart(2,"0")}`},A=()=>Object.keys(u).length,D=()=>s.length-A();return s.length===0?l.jsx("div",{className:"max-w-4xl mx-auto p-6 flex justify-center items-center min-h-96",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"İmtahan yüklənir..."})]})}):l.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-blue-600",children:[l.jsx(tP,{className:"w-5 h-5"}),l.jsxs("span",{className:"font-semibold",children:["Sual ",o+1," / ",s.length]})]}),l.jsxs("div",{className:"flex items-center space-x-2 text-green-600",children:[l.jsx(jn,{className:"w-5 h-5"}),l.jsxs("span",{className:"font-semibold",children:["Cavablanmış: ",A()]})]})]}),l.jsxs("div",{className:`flex items-center space-x-2 px-4 py-2 rounded-lg font-semibold ${m<=60?"bg-red-100 text-red-700":m<=300?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}`,children:[l.jsx(fa,{className:"w-5 h-5"}),l.jsx("span",{children:E(m)})]})]}),l.jsx("div",{className:"mt-4",children:l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:l.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${(o+1)/s.length*100}%`}})})})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-6",children:[l.jsx("div",{className:"mb-6",children:l.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:['"',s[o].word.english,'" sözünün mənası nədir?']})}),l.jsx("div",{className:"space-y-3",children:s[o].options.map((L,_)=>l.jsx("button",{onClick:()=>j(o,_),className:`w-full p-4 text-left border-2 rounded-xl transition-all duration-200 ${u[o]===_?"border-blue-500 bg-blue-50 text-blue-800":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("span",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center text-sm font-medium ${u[o]===_?"border-blue-500 bg-blue-500 text-white":"border-gray-300"}`,children:String.fromCharCode(65+_)}),l.jsx("span",{className:"text-lg",children:L})]})},_))})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("button",{onClick:()=>c(L=>Math.max(0,L-1)),disabled:o===0,className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Əvvəlki"}),o<s.length-1?l.jsx("button",{onClick:()=>c(L=>L+1),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Növbəti"}):l.jsx("button",{onClick:w,className:"px-8 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-semibold",children:"İmtahanı Bitir"})]}),l.jsx("div",{className:"text-sm text-gray-600",children:D()>0&&l.jsxs("span",{className:"text-orange-600",children:[D()," sual cavabsızdır"]})})]}),l.jsxs("div",{className:"mt-6 bg-white rounded-xl shadow-lg p-6",children:[l.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:"Suallar"}),l.jsx("div",{className:"grid grid-cols-10 gap-2",children:s.map((L,_)=>l.jsx("button",{onClick:()=>c(_),className:`w-10 h-10 rounded-lg text-sm font-medium transition-colors ${_===o?"bg-blue-600 text-white":u[_]!==void 0?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:_+1},_))})]}),S&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-xl p-8 max-w-md mx-4",children:[l.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[l.jsx(GA,{className:"w-6 h-6 text-orange-600"}),l.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Diqqət!"})]}),l.jsxs("p",{className:"text-gray-600 mb-6",children:[D()," sual hələ cavablanmayıb. İmtahanı bitirmək istədiyinizə əminsiniz?"]}),l.jsxs("div",{className:"flex justify-end space-x-3",children:[l.jsx("button",{onClick:()=>P(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:"Davam et"}),l.jsx("button",{onClick:()=>T(),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Bitir"})]})]})})]})},CP=({score:t,totalQuestions:e,timeSpent:n,timeLimit:r,onRetakeExam:s,onBackToHome:i})=>{const o=Math.round(t/e*100),c=p=>{const g=Math.floor(p/60),I=p%60;return`${g}:${I.toString().padStart(2,"0")}`},d=o>=90?{grade:"Əla",color:"text-green-600",bg:"bg-green-50",icon:Cn}:o>=80?{grade:"Yaxşı",color:"text-blue-600",bg:"bg-blue-50",icon:jn}:o>=70?{grade:"Orta",color:"text-yellow-600",bg:"bg-yellow-50",icon:ma}:o>=60?{grade:"Kəmçalı",color:"text-orange-600",bg:"bg-orange-50",icon:ry}:{grade:"Zəif",color:"text-red-600",bg:"bg-red-50",icon:ry},m=d.icon;return l.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"flex items-center justify-center mb-4",children:l.jsx("div",{className:`p-4 ${d.bg} rounded-full`,children:l.jsx(m,{className:`w-12 h-12 ${d.color}`})})}),l.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"İmtahan Nəticəsi"}),l.jsx("p",{className:"text-gray-600 text-lg",children:"Peşəkar imtahanınız tamamlandı!"})]}),l.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsxs("div",{className:`inline-flex items-center space-x-3 px-6 py-3 ${d.bg} rounded-full mb-4`,children:[l.jsx(m,{className:`w-6 h-6 ${d.color}`}),l.jsx("span",{className:`text-2xl font-bold ${d.color}`,children:d.grade})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"text-6xl font-bold text-gray-800 mb-2",children:[o,"%"]}),l.jsxs("p",{className:"text-xl text-gray-600",children:[t," / ",e," doğru cavab"]})]}),l.jsxs("div",{className:"relative w-32 h-32 mx-auto mb-6",children:[l.jsxs("svg",{className:"transform -rotate-90 w-32 h-32",viewBox:"0 0 36 36",children:[l.jsx("path",{d:"m18,2.0845 a 15.9155,15.9155 0 0,1 0,31.831 a 15.9155,15.9155 0 0,1 0,-31.831",fill:"none",stroke:"#e5e7eb",strokeWidth:"2"}),l.jsx("path",{d:"m18,2.0845 a 15.9155,15.9155 0 0,1 0,31.831 a 15.9155,15.9155 0 0,1 0,-31.831",fill:"none",stroke:o>=80?"#10b981":o>=60?"#f59e0b":"#ef4444",strokeWidth:"2",strokeDasharray:`${o}, 100`,strokeLinecap:"round"})]}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsxs("span",{className:"text-xl font-bold text-gray-800",children:[o,"%"]})})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[l.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 text-center",children:[l.jsx(kh,{className:"w-8 h-8 text-blue-600 mx-auto mb-3"}),l.jsx("h3",{className:"font-semibold text-gray-800 mb-1",children:"Doğruluq"}),l.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[o,"%"]})]}),l.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-6 text-center",children:[l.jsx(fa,{className:"w-8 h-8 text-purple-600 mx-auto mb-3"}),l.jsx("h3",{className:"font-semibold text-gray-800 mb-1",children:"Vaxt"}),l.jsx("p",{className:"text-2xl font-bold text-purple-600",children:c(n)}),l.jsxs("p",{className:"text-sm text-gray-600",children:["/ ",r," dəqiqə"]})]}),l.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-6 text-center",children:[l.jsx(jn,{className:"w-8 h-8 text-green-600 mx-auto mb-3"}),l.jsx("h3",{className:"font-semibold text-gray-800 mb-1",children:"Cavablar"}),l.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[t," / ",e]})]})]}),l.jsxs("div",{className:`${d.bg} rounded-xl p-6 text-center mb-8`,children:[l.jsxs("h3",{className:`text-lg font-semibold ${d.color} mb-2`,children:[o>=90&&"Əla nəticə! Mükəmməl performans göstərdiniz!",o>=80&&o<90&&"Çox yaxşı! Bilikləriniz kifayət qədər yaxşıdır.",o>=70&&o<80&&"Yaxşı nəticə, lakin daha da yaxşılaşdıra bilərsiniz.",o>=60&&o<70&&"Orta nəticə. Daha çox məşq etməlisiniz.",o<60&&"Daha çox öyrənməyə ehtiyacınız var. Məşq etməyə davam edin!"]}),l.jsx("p",{className:`${d.color} opacity-80`,children:o>=80?"Biliklərinizlə fəxr edə bilərsiniz!":"Təkmilləşdirmək üçün daha çox məşq edin."})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[l.jsxs("button",{onClick:s,className:"flex items-center justify-center space-x-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white px-8 py-4 rounded-xl font-semibold text-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105",children:[l.jsx(y1,{className:"w-5 h-5"}),l.jsx("span",{children:"Yenidən Cəhd Et"})]}),l.jsxs("button",{onClick:i,className:"flex items-center justify-center space-x-3 bg-gradient-to-r from-gray-500 to-gray-600 text-white px-8 py-4 rounded-xl font-semibold text-lg hover:from-gray-600 hover:to-gray-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105",children:[l.jsx(g1,{className:"w-5 h-5"}),l.jsx("span",{children:"Ana Səhifə"})]})]})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Təkmilləşdirmək üçün məsləhətlər:"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mt-0.5",children:l.jsx("span",{className:"text-blue-600 text-sm font-semibold",children:"1"})}),l.jsx("p",{className:"text-gray-600",children:"Səhv etdiyiniz sözləri bir daha məşq edin"})]}),l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mt-0.5",children:l.jsx("span",{className:"text-blue-600 text-sm font-semibold",children:"2"})}),l.jsx("p",{className:"text-gray-600",children:"Yeni söz kolleksiyaları yaradın"})]}),l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mt-0.5",children:l.jsx("span",{className:"text-blue-600 text-sm font-semibold",children:"3"})}),l.jsx("p",{className:"text-gray-600",children:"Mütəmadi olaraq təkrar edin"})]}),l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mt-0.5",children:l.jsx("span",{className:"text-blue-600 text-sm font-semibold",children:"4"})}),l.jsx("p",{className:"text-gray-600",children:"Müxtəlif kolleksiyalardan imtahan verin"})]})]})]})]})},AP=()=>{const{currentUser:t}=Hn(),[e,n]=F.useState("login");return t?l.jsx(PP,{}):e==="login"?l.jsx(kP,{onSwitchToRegister:()=>n("register")}):l.jsx(NP,{onSwitchToLogin:()=>n("login")})},PP=()=>{const{currentUser:t}=Hn(),[e,n]=F.useState([]),[r,s]=F.useState({autoAdvance:!0,darkMode:!1}),[i,o]=F.useState("home"),[c,u]=F.useState(null),[d,m]=F.useState(null),[p,g]=F.useState(null),[I,S]=F.useState(null);F.useEffect(()=>{P(),s(h1())},[t]);const P=async()=>{if(t){const{loadUserCollections:C}=await Yn(async()=>{const{loadUserCollections:J}=await Promise.resolve().then(()=>Jn);return{loadUserCollections:J}},void 0),N=await C(t.id);n(N)}},j=C=>{s(C),d1(C)},T=async C=>{if(t){const{saveCollection:N}=await Yn(async()=>{const{saveCollection:he}=await Promise.resolve().then(()=>Jn);return{saveCollection:he}},void 0),J=await N(t.id,t.username,C);n(he=>[J,...he]),o("collections")}},w=C=>{u(C),o("quiz")},E=C=>{m(C),o("result")},A=()=>{o("quiz")},D=()=>{o("home"),u(null),m(null),g(null),S(null)},L=async C=>{let N=null;if(C.isPublic&&t&&C.name)try{const{savePublicExam:he}=await Yn(async()=>{const{savePublicExam:ae}=await Promise.resolve().then(()=>Jn);return{savePublicExam:ae}},void 0),z=await he(t.id,t.username,C);N=z.id,console.log("✅ Public exam saved to database:",z.id)}catch(he){console.error("❌ Error saving public exam:",he)}const J={...C,publicExamId:N};g(J),o("exam-active")},_=async(C,N,J)=>{if(t)try{const{saveExamResult:he}=await Yn(async()=>{const{saveExamResult:z}=await Promise.resolve().then(()=>Jn);return{saveExamResult:z}},void 0);await he(t.id,C,N,J,p),console.log("✅ Exam result saved for user:",t.id)}catch(he){console.error("❌ Error saving exam result:",he)}if(p!=null&&p.publicExamId)try{const{updateExamStats:he}=await Yn(async()=>{const{updateExamStats:z}=await Promise.resolve().then(()=>Jn);return{updateExamStats:z}},void 0);await he(p.publicExamId,C,N),console.log("✅ Public exam stats updated:",p.publicExamId)}catch(he){console.error("❌ Error updating exam stats:",he)}S({score:C,total:N,timeSpent:J,timeLimit:(p==null?void 0:p.timeLimit)||10}),o("exam-result")},x=()=>{S(null),p!=null&&p.publicExamId||p!=null&&p.isPublic?(console.log("🔄 Retaking exam with same settings"),o("exam-active")):(console.log("🔄 Going back to exam setup"),o("exam"))},y=async C=>{if(t){const{markCollectionAsLearned:N}=await Yn(async()=>{const{markCollectionAsLearned:J}=await Promise.resolve().then(()=>Jn);return{markCollectionAsLearned:J}},void 0);await N(t.id,C),P()}},k=async()=>{if(t){const{loadUserCollections:C}=await Yn(async()=>{const{loadUserCollections:J}=await Promise.resolve().then(()=>Jn);return{loadUserCollections:J}},void 0),N=await C(t.id);n(N)}o("exam")},b=async C=>{const N={...C.settings,isPublic:!1,publicExamId:C.id};if(t){const{loadUserCollections:J}=await Yn(async()=>{const{loadUserCollections:z}=await Promise.resolve().then(()=>Jn);return{loadUserCollections:z}},void 0),he=await J(t.id);n(he)}console.log("🚀 Starting public exam:",C.name,"ID:",C.id),g(N),o("exam-active")};return l.jsxs("div",{className:`min-h-screen ${r.darkMode?"dark bg-gray-900":""}`,children:[i==="home"&&l.jsx(pP,{onNavigateToCollections:()=>o("collections"),onNavigateToAllCollections:()=>o("all-collections"),onNavigateToLeaderboard:()=>o("leaderboard"),onNavigateToExam:k,onNavigateToAllExams:()=>o("all-exams"),onNavigateToSettings:()=>o("settings")}),i==="collections"&&l.jsx(yP,{onBack:D,onNavigateToAllCollections:()=>o("all-collections"),onPlayQuiz:w,onSaveCollection:T}),i==="all-collections"&&l.jsx(vP,{onBack:D,onPlayQuiz:w}),i==="all-exams"&&l.jsx(xP,{onBack:D,onTakeExam:b}),i==="leaderboard"&&l.jsx(_P,{onBack:D}),i==="quiz"&&c&&l.jsx(EP,{collection:c,autoAdvance:r.autoAdvance,onBack:()=>o("collections"),onFinish:E}),i==="result"&&d&&c&&l.jsx(TP,{result:d,collection:c,onPlayAgain:A,onBackHome:D,onMarkAsLearned:y}),i==="settings"&&l.jsx(IP,{settings:r,onUpdateSettings:j,onBack:D}),i==="exam"&&l.jsx(SP,{collections:e,onBack:D,onStartExam:L}),i==="exam-active"&&p&&l.jsx(bP,{collections:e,examSettings:p,onFinish:_,onBack:()=>o("exam")}),i==="exam-result"&&I&&l.jsx(CP,{score:I.score,totalQuestions:I.total,timeSpent:I.timeSpent,timeLimit:I.timeLimit,onRetakeExam:x,onBackToHome:D})]})};function RP(){return l.jsx(mP,{children:l.jsx(AP,{})})}vx(document.getElementById("root")).render(l.jsx(F.StrictMode,{children:l.jsx(RP,{})}));
