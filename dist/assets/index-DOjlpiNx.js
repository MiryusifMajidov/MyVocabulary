(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var py={exports:{}},xc={},gy={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zo=Symbol.for("react.element"),cE=Symbol.for("react.portal"),uE=Symbol.for("react.fragment"),dE=Symbol.for("react.strict_mode"),hE=Symbol.for("react.profiler"),fE=Symbol.for("react.provider"),mE=Symbol.for("react.context"),pE=Symbol.for("react.forward_ref"),gE=Symbol.for("react.suspense"),yE=Symbol.for("react.memo"),xE=Symbol.for("react.lazy"),Tp=Symbol.iterator;function vE(t){return t===null||typeof t!="object"?null:(t=Tp&&t[Tp]||t["@@iterator"],typeof t=="function"?t:null)}var yy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xy=Object.assign,vy={};function _i(t,e,n){this.props=t,this.context=e,this.refs=vy,this.updater=n||yy}_i.prototype.isReactComponent={};_i.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};_i.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function _y(){}_y.prototype=_i.prototype;function Ph(t,e,n){this.props=t,this.context=e,this.refs=vy,this.updater=n||yy}var Rh=Ph.prototype=new _y;Rh.constructor=Ph;xy(Rh,_i.prototype);Rh.isPureReactComponent=!0;var Ip=Array.isArray,wy=Object.prototype.hasOwnProperty,Dh={current:null},Ey={key:!0,ref:!0,__self:!0,__source:!0};function by(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)wy.call(e,r)&&!Ey.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:Zo,type:t,key:i,ref:o,props:s,_owner:Dh.current}}function _E(t,e){return{$$typeof:Zo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Vh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Zo}function wE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Sp=/\/+/g;function ku(t,e){return typeof t=="object"&&t!==null&&t.key!=null?wE(""+t.key):e.toString(36)}function ol(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Zo:case cE:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+ku(o,0):r,Ip(s)?(n="",t!=null&&(n=t.replace(Sp,"$&/")+"/"),ol(s,e,n,"",function(d){return d})):s!=null&&(Vh(s)&&(s=_E(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Sp,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Ip(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+ku(i,c);o+=ol(i,e,n,u,s)}else if(u=vE(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+ku(i,c++),o+=ol(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Va(t,e,n){if(t==null)return t;var r=[],s=0;return ol(t,r,"","",function(i){return e.call(n,i,s++)}),r}function EE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var bt={current:null},al={transition:null},bE={ReactCurrentDispatcher:bt,ReactCurrentBatchConfig:al,ReactCurrentOwner:Dh};function Ny(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:Va,forEach:function(t,e,n){Va(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Va(t,function(){e++}),e},toArray:function(t){return Va(t,function(e){return e})||[]},only:function(t){if(!Vh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ce.Component=_i;ce.Fragment=uE;ce.Profiler=hE;ce.PureComponent=Ph;ce.StrictMode=dE;ce.Suspense=gE;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bE;ce.act=Ny;ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=xy({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Dh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)wy.call(e,u)&&!Ey.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:Zo,type:t.type,key:s,ref:i,props:r,_owner:o}};ce.createContext=function(t){return t={$$typeof:mE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:fE,_context:t},t.Consumer=t};ce.createElement=by;ce.createFactory=function(t){var e=by.bind(null,t);return e.type=t,e};ce.createRef=function(){return{current:null}};ce.forwardRef=function(t){return{$$typeof:pE,render:t}};ce.isValidElement=Vh;ce.lazy=function(t){return{$$typeof:xE,_payload:{_status:-1,_result:t},_init:EE}};ce.memo=function(t,e){return{$$typeof:yE,type:t,compare:e===void 0?null:e}};ce.startTransition=function(t){var e=al.transition;al.transition={};try{t()}finally{al.transition=e}};ce.unstable_act=Ny;ce.useCallback=function(t,e){return bt.current.useCallback(t,e)};ce.useContext=function(t){return bt.current.useContext(t)};ce.useDebugValue=function(){};ce.useDeferredValue=function(t){return bt.current.useDeferredValue(t)};ce.useEffect=function(t,e){return bt.current.useEffect(t,e)};ce.useId=function(){return bt.current.useId()};ce.useImperativeHandle=function(t,e,n){return bt.current.useImperativeHandle(t,e,n)};ce.useInsertionEffect=function(t,e){return bt.current.useInsertionEffect(t,e)};ce.useLayoutEffect=function(t,e){return bt.current.useLayoutEffect(t,e)};ce.useMemo=function(t,e){return bt.current.useMemo(t,e)};ce.useReducer=function(t,e,n){return bt.current.useReducer(t,e,n)};ce.useRef=function(t){return bt.current.useRef(t)};ce.useState=function(t){return bt.current.useState(t)};ce.useSyncExternalStore=function(t,e,n){return bt.current.useSyncExternalStore(t,e,n)};ce.useTransition=function(){return bt.current.useTransition()};ce.version="18.3.1";gy.exports=ce;var M=gy.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NE=M,TE=Symbol.for("react.element"),IE=Symbol.for("react.fragment"),SE=Object.prototype.hasOwnProperty,kE=NE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,CE={key:!0,ref:!0,__self:!0,__source:!0};function Ty(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)SE.call(e,r)&&!CE.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:TE,type:t,key:i,ref:o,props:s,_owner:kE.current}}xc.Fragment=IE;xc.jsx=Ty;xc.jsxs=Ty;py.exports=xc;var a=py.exports,Iy={exports:{}},Ot={},Sy={exports:{}},ky={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,J){var F=B.length;B.push(J);e:for(;0<F;){var K=F-1>>>1,Y=B[K];if(0<s(Y,J))B[K]=J,B[F]=Y,F=K;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var J=B[0],F=B.pop();if(F!==J){B[0]=F;e:for(var K=0,Y=B.length,G=Y>>>1;K<G;){var oe=2*(K+1)-1,_e=B[oe],Fe=oe+1,Qe=B[Fe];if(0>s(_e,F))Fe<Y&&0>s(Qe,_e)?(B[K]=Qe,B[Fe]=F,K=Fe):(B[K]=_e,B[oe]=F,K=oe);else if(Fe<Y&&0>s(Qe,F))B[K]=Qe,B[Fe]=F,K=Fe;else break e}}return J}function s(B,J){var F=B.sortIndex-J.sortIndex;return F!==0?F:B.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],m=1,p=null,g=3,b=!1,C=!1,k=!1,P=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(B){for(var J=n(d);J!==null;){if(J.callback===null)r(d);else if(J.startTime<=B)r(d),J.sortIndex=J.expirationTime,e(u,J);else break;J=n(d)}}function j(B){if(k=!1,v(B),!C)if(n(u)!==null)C=!0,W(D);else{var J=n(d);J!==null&&Ee(j,J.startTime-B)}}function D(B,J){C=!1,k&&(k=!1,w(y),y=-1),b=!0;var F=g;try{for(v(J),p=n(u);p!==null&&(!(p.expirationTime>J)||B&&!S());){var K=p.callback;if(typeof K=="function"){p.callback=null,g=p.priorityLevel;var Y=K(p.expirationTime<=J);J=t.unstable_now(),typeof Y=="function"?p.callback=Y:p===n(u)&&r(u),v(J)}else r(u);p=n(u)}if(p!==null)var G=!0;else{var oe=n(d);oe!==null&&Ee(j,oe.startTime-J),G=!1}return G}finally{p=null,g=F,b=!1}}var V=!1,_=null,y=-1,N=5,I=-1;function S(){return!(t.unstable_now()-I<N)}function A(){if(_!==null){var B=t.unstable_now();I=B;var J=!0;try{J=_(!0,B)}finally{J?T():(V=!1,_=null)}}else V=!1}var T;if(typeof E=="function")T=function(){E(A)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,ae=$.port2;$.port1.onmessage=A,T=function(){ae.postMessage(null)}}else T=function(){P(A,0)};function W(B){_=B,V||(V=!0,T())}function Ee(B,J){y=P(function(){B(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){C||b||(C=!0,W(D))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(g){case 1:case 2:case 3:var J=3;break;default:J=g}var F=g;g=J;try{return B()}finally{g=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,J){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var F=g;g=B;try{return J()}finally{g=F}},t.unstable_scheduleCallback=function(B,J,F){var K=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?K+F:K):F=K,B){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=F+Y,B={id:m++,callback:J,priorityLevel:B,startTime:F,expirationTime:Y,sortIndex:-1},F>K?(B.sortIndex=F,e(d,B),n(u)===null&&B===n(d)&&(k?(w(y),y=-1):k=!0,Ee(j,F-K))):(B.sortIndex=Y,e(u,B),C||b||(C=!0,W(D))),B},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(B){var J=g;return function(){var F=g;g=J;try{return B.apply(this,arguments)}finally{g=F}}}})(ky);Sy.exports=ky;var AE=Sy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jE=M,Mt=AE;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Cy=new Set,To={};function ys(t,e){ni(t,e),ni(t+"Capture",e)}function ni(t,e){for(To[t]=e,t=0;t<e.length;t++)Cy.add(e[t])}var Bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hd=Object.prototype.hasOwnProperty,PE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,kp={},Cp={};function RE(t){return hd.call(Cp,t)?!0:hd.call(kp,t)?!1:PE.test(t)?Cp[t]=!0:(kp[t]=!0,!1)}function DE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function VE(t,e,n,r){if(e===null||typeof e>"u"||DE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var it={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){it[t]=new Nt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];it[e]=new Nt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){it[t]=new Nt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){it[t]=new Nt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){it[t]=new Nt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){it[t]=new Nt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){it[t]=new Nt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){it[t]=new Nt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){it[t]=new Nt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Lh=/[\-:]([a-z])/g;function Mh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Lh,Mh);it[e]=new Nt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Lh,Mh);it[e]=new Nt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Lh,Mh);it[e]=new Nt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){it[t]=new Nt(t,1,!1,t.toLowerCase(),null,!1,!1)});it.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){it[t]=new Nt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Oh(t,e,n,r){var s=it.hasOwnProperty(e)?it[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(VE(e,n,s,r)&&(n=null),r||s===null?RE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Yn=jE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,La=Symbol.for("react.element"),Ps=Symbol.for("react.portal"),Rs=Symbol.for("react.fragment"),Uh=Symbol.for("react.strict_mode"),fd=Symbol.for("react.profiler"),Ay=Symbol.for("react.provider"),jy=Symbol.for("react.context"),Fh=Symbol.for("react.forward_ref"),md=Symbol.for("react.suspense"),pd=Symbol.for("react.suspense_list"),zh=Symbol.for("react.memo"),sr=Symbol.for("react.lazy"),Py=Symbol.for("react.offscreen"),Ap=Symbol.iterator;function Wi(t){return t===null||typeof t!="object"?null:(t=Ap&&t[Ap]||t["@@iterator"],typeof t=="function"?t:null)}var Re=Object.assign,Cu;function Zi(t){if(Cu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Cu=e&&e[1]||""}return`
`+Cu+t}var Au=!1;function ju(t,e){if(!t||Au)return"";Au=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,c=i.length-1;1<=o&&0<=c&&s[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==i[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{Au=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Zi(t):""}function LE(t){switch(t.tag){case 5:return Zi(t.type);case 16:return Zi("Lazy");case 13:return Zi("Suspense");case 19:return Zi("SuspenseList");case 0:case 2:case 15:return t=ju(t.type,!1),t;case 11:return t=ju(t.type.render,!1),t;case 1:return t=ju(t.type,!0),t;default:return""}}function gd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Rs:return"Fragment";case Ps:return"Portal";case fd:return"Profiler";case Uh:return"StrictMode";case md:return"Suspense";case pd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case jy:return(t.displayName||"Context")+".Consumer";case Ay:return(t._context.displayName||"Context")+".Provider";case Fh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case zh:return e=t.displayName||null,e!==null?e:gd(t.type)||"Memo";case sr:e=t._payload,t=t._init;try{return gd(t(e))}catch{}}return null}function ME(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gd(e);case 8:return e===Uh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function kr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ry(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function OE(t){var e=Ry(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ma(t){t._valueTracker||(t._valueTracker=OE(t))}function Dy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ry(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function kl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function yd(t,e){var n=e.checked;return Re({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function jp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=kr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Vy(t,e){e=e.checked,e!=null&&Oh(t,"checked",e,!1)}function xd(t,e){Vy(t,e);var n=kr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?vd(t,e.type,n):e.hasOwnProperty("defaultValue")&&vd(t,e.type,kr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Pp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function vd(t,e,n){(e!=="number"||kl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var eo=Array.isArray;function Ws(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+kr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function _d(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Re({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Rp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(eo(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:kr(n)}}function Ly(t,e){var n=kr(e.value),r=kr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Dp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function My(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?My(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Oa,Oy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Oa=Oa||document.createElement("div"),Oa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Oa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Io(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var co={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},UE=["Webkit","ms","Moz","O"];Object.keys(co).forEach(function(t){UE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),co[e]=co[t]})});function Uy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||co.hasOwnProperty(t)&&co[t]?(""+e).trim():e+"px"}function Fy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Uy(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var FE=Re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ed(t,e){if(e){if(FE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function bd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nd=null;function Bh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Td=null,Hs=null,Ks=null;function Vp(t){if(t=na(t)){if(typeof Td!="function")throw Error(z(280));var e=t.stateNode;e&&(e=bc(e),Td(t.stateNode,t.type,e))}}function zy(t){Hs?Ks?Ks.push(t):Ks=[t]:Hs=t}function By(){if(Hs){var t=Hs,e=Ks;if(Ks=Hs=null,Vp(t),e)for(t=0;t<e.length;t++)Vp(e[t])}}function $y(t,e){return t(e)}function qy(){}var Pu=!1;function Wy(t,e,n){if(Pu)return t(e,n);Pu=!0;try{return $y(t,e,n)}finally{Pu=!1,(Hs!==null||Ks!==null)&&(qy(),By())}}function So(t,e){var n=t.stateNode;if(n===null)return null;var r=bc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var Id=!1;if(Bn)try{var Hi={};Object.defineProperty(Hi,"passive",{get:function(){Id=!0}}),window.addEventListener("test",Hi,Hi),window.removeEventListener("test",Hi,Hi)}catch{Id=!1}function zE(t,e,n,r,s,i,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(m){this.onError(m)}}var uo=!1,Cl=null,Al=!1,Sd=null,BE={onError:function(t){uo=!0,Cl=t}};function $E(t,e,n,r,s,i,o,c,u){uo=!1,Cl=null,zE.apply(BE,arguments)}function qE(t,e,n,r,s,i,o,c,u){if($E.apply(this,arguments),uo){if(uo){var d=Cl;uo=!1,Cl=null}else throw Error(z(198));Al||(Al=!0,Sd=d)}}function xs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Hy(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Lp(t){if(xs(t)!==t)throw Error(z(188))}function WE(t){var e=t.alternate;if(!e){if(e=xs(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Lp(s),t;if(i===r)return Lp(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function Ky(t){return t=WE(t),t!==null?Gy(t):null}function Gy(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Gy(t);if(e!==null)return e;t=t.sibling}return null}var Qy=Mt.unstable_scheduleCallback,Mp=Mt.unstable_cancelCallback,HE=Mt.unstable_shouldYield,KE=Mt.unstable_requestPaint,Oe=Mt.unstable_now,GE=Mt.unstable_getCurrentPriorityLevel,$h=Mt.unstable_ImmediatePriority,Yy=Mt.unstable_UserBlockingPriority,jl=Mt.unstable_NormalPriority,QE=Mt.unstable_LowPriority,Xy=Mt.unstable_IdlePriority,vc=null,vn=null;function YE(t){if(vn&&typeof vn.onCommitFiberRoot=="function")try{vn.onCommitFiberRoot(vc,t,void 0,(t.current.flags&128)===128)}catch{}}var nn=Math.clz32?Math.clz32:ZE,XE=Math.log,JE=Math.LN2;function ZE(t){return t>>>=0,t===0?32:31-(XE(t)/JE|0)|0}var Ua=64,Fa=4194304;function to(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Pl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=to(c):(i&=o,i!==0&&(r=to(i)))}else o=n&~s,o!==0?r=to(o):i!==0&&(r=to(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-nn(e),s=1<<n,r|=t[n],e&=~s;return r}function eb(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tb(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-nn(i),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=eb(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function kd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Jy(){var t=Ua;return Ua<<=1,!(Ua&4194240)&&(Ua=64),t}function Ru(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ea(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-nn(e),t[e]=n}function nb(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-nn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function qh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-nn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var we=0;function Zy(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ex,Wh,tx,nx,rx,Cd=!1,za=[],pr=null,gr=null,yr=null,ko=new Map,Co=new Map,or=[],rb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Op(t,e){switch(t){case"focusin":case"focusout":pr=null;break;case"dragenter":case"dragleave":gr=null;break;case"mouseover":case"mouseout":yr=null;break;case"pointerover":case"pointerout":ko.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Co.delete(e.pointerId)}}function Ki(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=na(e),e!==null&&Wh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function sb(t,e,n,r,s){switch(e){case"focusin":return pr=Ki(pr,t,e,n,r,s),!0;case"dragenter":return gr=Ki(gr,t,e,n,r,s),!0;case"mouseover":return yr=Ki(yr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ko.set(i,Ki(ko.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Co.set(i,Ki(Co.get(i)||null,t,e,n,r,s)),!0}return!1}function sx(t){var e=Yr(t.target);if(e!==null){var n=xs(e);if(n!==null){if(e=n.tag,e===13){if(e=Hy(n),e!==null){t.blockedOn=e,rx(t.priority,function(){tx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ll(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ad(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Nd=r,n.target.dispatchEvent(r),Nd=null}else return e=na(n),e!==null&&Wh(e),t.blockedOn=n,!1;e.shift()}return!0}function Up(t,e,n){ll(t)&&n.delete(e)}function ib(){Cd=!1,pr!==null&&ll(pr)&&(pr=null),gr!==null&&ll(gr)&&(gr=null),yr!==null&&ll(yr)&&(yr=null),ko.forEach(Up),Co.forEach(Up)}function Gi(t,e){t.blockedOn===e&&(t.blockedOn=null,Cd||(Cd=!0,Mt.unstable_scheduleCallback(Mt.unstable_NormalPriority,ib)))}function Ao(t){function e(s){return Gi(s,t)}if(0<za.length){Gi(za[0],t);for(var n=1;n<za.length;n++){var r=za[n];r.blockedOn===t&&(r.blockedOn=null)}}for(pr!==null&&Gi(pr,t),gr!==null&&Gi(gr,t),yr!==null&&Gi(yr,t),ko.forEach(e),Co.forEach(e),n=0;n<or.length;n++)r=or[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<or.length&&(n=or[0],n.blockedOn===null);)sx(n),n.blockedOn===null&&or.shift()}var Gs=Yn.ReactCurrentBatchConfig,Rl=!0;function ob(t,e,n,r){var s=we,i=Gs.transition;Gs.transition=null;try{we=1,Hh(t,e,n,r)}finally{we=s,Gs.transition=i}}function ab(t,e,n,r){var s=we,i=Gs.transition;Gs.transition=null;try{we=4,Hh(t,e,n,r)}finally{we=s,Gs.transition=i}}function Hh(t,e,n,r){if(Rl){var s=Ad(t,e,n,r);if(s===null)$u(t,e,r,Dl,n),Op(t,r);else if(sb(s,t,e,n,r))r.stopPropagation();else if(Op(t,r),e&4&&-1<rb.indexOf(t)){for(;s!==null;){var i=na(s);if(i!==null&&ex(i),i=Ad(t,e,n,r),i===null&&$u(t,e,r,Dl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else $u(t,e,r,null,n)}}var Dl=null;function Ad(t,e,n,r){if(Dl=null,t=Bh(r),t=Yr(t),t!==null)if(e=xs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Hy(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Dl=t,null}function ix(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(GE()){case $h:return 1;case Yy:return 4;case jl:case QE:return 16;case Xy:return 536870912;default:return 16}default:return 16}}var hr=null,Kh=null,cl=null;function ox(){if(cl)return cl;var t,e=Kh,n=e.length,r,s="value"in hr?hr.value:hr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return cl=s.slice(t,1<r?1-r:void 0)}function ul(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ba(){return!0}function Fp(){return!1}function Ut(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ba:Fp,this.isPropagationStopped=Fp,this}return Re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ba)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ba)},persist:function(){},isPersistent:Ba}),e}var wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gh=Ut(wi),ta=Re({},wi,{view:0,detail:0}),lb=Ut(ta),Du,Vu,Qi,_c=Re({},ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qi&&(Qi&&t.type==="mousemove"?(Du=t.screenX-Qi.screenX,Vu=t.screenY-Qi.screenY):Vu=Du=0,Qi=t),Du)},movementY:function(t){return"movementY"in t?t.movementY:Vu}}),zp=Ut(_c),cb=Re({},_c,{dataTransfer:0}),ub=Ut(cb),db=Re({},ta,{relatedTarget:0}),Lu=Ut(db),hb=Re({},wi,{animationName:0,elapsedTime:0,pseudoElement:0}),fb=Ut(hb),mb=Re({},wi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),pb=Ut(mb),gb=Re({},wi,{data:0}),Bp=Ut(gb),yb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _b(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=vb[t])?!!e[t]:!1}function Qh(){return _b}var wb=Re({},ta,{key:function(t){if(t.key){var e=yb[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ul(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?xb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qh,charCode:function(t){return t.type==="keypress"?ul(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ul(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Eb=Ut(wb),bb=Re({},_c,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$p=Ut(bb),Nb=Re({},ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qh}),Tb=Ut(Nb),Ib=Re({},wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sb=Ut(Ib),kb=Re({},_c,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Cb=Ut(kb),Ab=[9,13,27,32],Yh=Bn&&"CompositionEvent"in window,ho=null;Bn&&"documentMode"in document&&(ho=document.documentMode);var jb=Bn&&"TextEvent"in window&&!ho,ax=Bn&&(!Yh||ho&&8<ho&&11>=ho),qp=" ",Wp=!1;function lx(t,e){switch(t){case"keyup":return Ab.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ds=!1;function Pb(t,e){switch(t){case"compositionend":return cx(e);case"keypress":return e.which!==32?null:(Wp=!0,qp);case"textInput":return t=e.data,t===qp&&Wp?null:t;default:return null}}function Rb(t,e){if(Ds)return t==="compositionend"||!Yh&&lx(t,e)?(t=ox(),cl=Kh=hr=null,Ds=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ax&&e.locale!=="ko"?null:e.data;default:return null}}var Db={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Db[t.type]:e==="textarea"}function ux(t,e,n,r){zy(r),e=Vl(e,"onChange"),0<e.length&&(n=new Gh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var fo=null,jo=null;function Vb(t){wx(t,0)}function wc(t){var e=Ms(t);if(Dy(e))return t}function Lb(t,e){if(t==="change")return e}var dx=!1;if(Bn){var Mu;if(Bn){var Ou="oninput"in document;if(!Ou){var Kp=document.createElement("div");Kp.setAttribute("oninput","return;"),Ou=typeof Kp.oninput=="function"}Mu=Ou}else Mu=!1;dx=Mu&&(!document.documentMode||9<document.documentMode)}function Gp(){fo&&(fo.detachEvent("onpropertychange",hx),jo=fo=null)}function hx(t){if(t.propertyName==="value"&&wc(jo)){var e=[];ux(e,jo,t,Bh(t)),Wy(Vb,e)}}function Mb(t,e,n){t==="focusin"?(Gp(),fo=e,jo=n,fo.attachEvent("onpropertychange",hx)):t==="focusout"&&Gp()}function Ob(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wc(jo)}function Ub(t,e){if(t==="click")return wc(e)}function Fb(t,e){if(t==="input"||t==="change")return wc(e)}function zb(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var on=typeof Object.is=="function"?Object.is:zb;function Po(t,e){if(on(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!hd.call(e,s)||!on(t[s],e[s]))return!1}return!0}function Qp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yp(t,e){var n=Qp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Qp(n)}}function fx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?fx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function mx(){for(var t=window,e=kl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=kl(t.document)}return e}function Xh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Bb(t){var e=mx(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&fx(n.ownerDocument.documentElement,n)){if(r!==null&&Xh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Yp(n,i);var o=Yp(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var $b=Bn&&"documentMode"in document&&11>=document.documentMode,Vs=null,jd=null,mo=null,Pd=!1;function Xp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Pd||Vs==null||Vs!==kl(r)||(r=Vs,"selectionStart"in r&&Xh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),mo&&Po(mo,r)||(mo=r,r=Vl(jd,"onSelect"),0<r.length&&(e=new Gh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Vs)))}function $a(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ls={animationend:$a("Animation","AnimationEnd"),animationiteration:$a("Animation","AnimationIteration"),animationstart:$a("Animation","AnimationStart"),transitionend:$a("Transition","TransitionEnd")},Uu={},px={};Bn&&(px=document.createElement("div").style,"AnimationEvent"in window||(delete Ls.animationend.animation,delete Ls.animationiteration.animation,delete Ls.animationstart.animation),"TransitionEvent"in window||delete Ls.transitionend.transition);function Ec(t){if(Uu[t])return Uu[t];if(!Ls[t])return t;var e=Ls[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in px)return Uu[t]=e[n];return t}var gx=Ec("animationend"),yx=Ec("animationiteration"),xx=Ec("animationstart"),vx=Ec("transitionend"),_x=new Map,Jp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(t,e){_x.set(t,e),ys(e,[t])}for(var Fu=0;Fu<Jp.length;Fu++){var zu=Jp[Fu],qb=zu.toLowerCase(),Wb=zu[0].toUpperCase()+zu.slice(1);Lr(qb,"on"+Wb)}Lr(gx,"onAnimationEnd");Lr(yx,"onAnimationIteration");Lr(xx,"onAnimationStart");Lr("dblclick","onDoubleClick");Lr("focusin","onFocus");Lr("focusout","onBlur");Lr(vx,"onTransitionEnd");ni("onMouseEnter",["mouseout","mouseover"]);ni("onMouseLeave",["mouseout","mouseover"]);ni("onPointerEnter",["pointerout","pointerover"]);ni("onPointerLeave",["pointerout","pointerover"]);ys("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ys("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ys("onBeforeInput",["compositionend","keypress","textInput","paste"]);ys("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ys("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ys("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var no="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hb=new Set("cancel close invalid load scroll toggle".split(" ").concat(no));function Zp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,qE(r,e,void 0,t),t.currentTarget=null}function wx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;Zp(s,c,d),i=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;Zp(s,c,d),i=u}}}if(Al)throw t=Sd,Al=!1,Sd=null,t}function Se(t,e){var n=e[Md];n===void 0&&(n=e[Md]=new Set);var r=t+"__bubble";n.has(r)||(Ex(e,t,2,!1),n.add(r))}function Bu(t,e,n){var r=0;e&&(r|=4),Ex(n,t,r,e)}var qa="_reactListening"+Math.random().toString(36).slice(2);function Ro(t){if(!t[qa]){t[qa]=!0,Cy.forEach(function(n){n!=="selectionchange"&&(Hb.has(n)||Bu(n,!1,t),Bu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[qa]||(e[qa]=!0,Bu("selectionchange",!1,e))}}function Ex(t,e,n,r){switch(ix(e)){case 1:var s=ob;break;case 4:s=ab;break;default:s=Hh}n=s.bind(null,e,n,t),s=void 0,!Id||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function $u(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=Yr(c),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}c=c.parentNode}}r=r.return}Wy(function(){var d=i,m=Bh(n),p=[];e:{var g=_x.get(t);if(g!==void 0){var b=Gh,C=t;switch(t){case"keypress":if(ul(n)===0)break e;case"keydown":case"keyup":b=Eb;break;case"focusin":C="focus",b=Lu;break;case"focusout":C="blur",b=Lu;break;case"beforeblur":case"afterblur":b=Lu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=zp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=ub;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=Tb;break;case gx:case yx:case xx:b=fb;break;case vx:b=Sb;break;case"scroll":b=lb;break;case"wheel":b=Cb;break;case"copy":case"cut":case"paste":b=pb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=$p}var k=(e&4)!==0,P=!k&&t==="scroll",w=k?g!==null?g+"Capture":null:g;k=[];for(var E=d,v;E!==null;){v=E;var j=v.stateNode;if(v.tag===5&&j!==null&&(v=j,w!==null&&(j=So(E,w),j!=null&&k.push(Do(E,j,v)))),P)break;E=E.return}0<k.length&&(g=new b(g,C,null,n,m),p.push({event:g,listeners:k}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",b=t==="mouseout"||t==="pointerout",g&&n!==Nd&&(C=n.relatedTarget||n.fromElement)&&(Yr(C)||C[$n]))break e;if((b||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,b?(C=n.relatedTarget||n.toElement,b=d,C=C?Yr(C):null,C!==null&&(P=xs(C),C!==P||C.tag!==5&&C.tag!==6)&&(C=null)):(b=null,C=d),b!==C)){if(k=zp,j="onMouseLeave",w="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(k=$p,j="onPointerLeave",w="onPointerEnter",E="pointer"),P=b==null?g:Ms(b),v=C==null?g:Ms(C),g=new k(j,E+"leave",b,n,m),g.target=P,g.relatedTarget=v,j=null,Yr(m)===d&&(k=new k(w,E+"enter",C,n,m),k.target=v,k.relatedTarget=P,j=k),P=j,b&&C)t:{for(k=b,w=C,E=0,v=k;v;v=Ss(v))E++;for(v=0,j=w;j;j=Ss(j))v++;for(;0<E-v;)k=Ss(k),E--;for(;0<v-E;)w=Ss(w),v--;for(;E--;){if(k===w||w!==null&&k===w.alternate)break t;k=Ss(k),w=Ss(w)}k=null}else k=null;b!==null&&eg(p,g,b,k,!1),C!==null&&P!==null&&eg(p,P,C,k,!0)}}e:{if(g=d?Ms(d):window,b=g.nodeName&&g.nodeName.toLowerCase(),b==="select"||b==="input"&&g.type==="file")var D=Lb;else if(Hp(g))if(dx)D=Fb;else{D=Ob;var V=Mb}else(b=g.nodeName)&&b.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(D=Ub);if(D&&(D=D(t,d))){ux(p,D,n,m);break e}V&&V(t,g,d),t==="focusout"&&(V=g._wrapperState)&&V.controlled&&g.type==="number"&&vd(g,"number",g.value)}switch(V=d?Ms(d):window,t){case"focusin":(Hp(V)||V.contentEditable==="true")&&(Vs=V,jd=d,mo=null);break;case"focusout":mo=jd=Vs=null;break;case"mousedown":Pd=!0;break;case"contextmenu":case"mouseup":case"dragend":Pd=!1,Xp(p,n,m);break;case"selectionchange":if($b)break;case"keydown":case"keyup":Xp(p,n,m)}var _;if(Yh)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Ds?lx(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(ax&&n.locale!=="ko"&&(Ds||y!=="onCompositionStart"?y==="onCompositionEnd"&&Ds&&(_=ox()):(hr=m,Kh="value"in hr?hr.value:hr.textContent,Ds=!0)),V=Vl(d,y),0<V.length&&(y=new Bp(y,t,null,n,m),p.push({event:y,listeners:V}),_?y.data=_:(_=cx(n),_!==null&&(y.data=_)))),(_=jb?Pb(t,n):Rb(t,n))&&(d=Vl(d,"onBeforeInput"),0<d.length&&(m=new Bp("onBeforeInput","beforeinput",null,n,m),p.push({event:m,listeners:d}),m.data=_))}wx(p,e)})}function Do(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=So(t,n),i!=null&&r.unshift(Do(t,i,s)),i=So(t,e),i!=null&&r.push(Do(t,i,s))),t=t.return}return r}function Ss(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function eg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=So(n,i),u!=null&&o.unshift(Do(n,u,c))):s||(u=So(n,i),u!=null&&o.push(Do(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Kb=/\r\n?/g,Gb=/\u0000|\uFFFD/g;function tg(t){return(typeof t=="string"?t:""+t).replace(Kb,`
`).replace(Gb,"")}function Wa(t,e,n){if(e=tg(e),tg(t)!==e&&n)throw Error(z(425))}function Ll(){}var Rd=null,Dd=null;function Vd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ld=typeof setTimeout=="function"?setTimeout:void 0,Qb=typeof clearTimeout=="function"?clearTimeout:void 0,ng=typeof Promise=="function"?Promise:void 0,Yb=typeof queueMicrotask=="function"?queueMicrotask:typeof ng<"u"?function(t){return ng.resolve(null).then(t).catch(Xb)}:Ld;function Xb(t){setTimeout(function(){throw t})}function qu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ao(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ao(e)}function xr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function rg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ei=Math.random().toString(36).slice(2),gn="__reactFiber$"+Ei,Vo="__reactProps$"+Ei,$n="__reactContainer$"+Ei,Md="__reactEvents$"+Ei,Jb="__reactListeners$"+Ei,Zb="__reactHandles$"+Ei;function Yr(t){var e=t[gn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[$n]||n[gn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=rg(t);t!==null;){if(n=t[gn])return n;t=rg(t)}return e}t=n,n=t.parentNode}return null}function na(t){return t=t[gn]||t[$n],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ms(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function bc(t){return t[Vo]||null}var Od=[],Os=-1;function Mr(t){return{current:t}}function Ce(t){0>Os||(t.current=Od[Os],Od[Os]=null,Os--)}function Te(t,e){Os++,Od[Os]=t.current,t.current=e}var Cr={},gt=Mr(Cr),Ct=Mr(!1),ss=Cr;function ri(t,e){var n=t.type.contextTypes;if(!n)return Cr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function At(t){return t=t.childContextTypes,t!=null}function Ml(){Ce(Ct),Ce(gt)}function sg(t,e,n){if(gt.current!==Cr)throw Error(z(168));Te(gt,e),Te(Ct,n)}function bx(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,ME(t)||"Unknown",s));return Re({},n,r)}function Ol(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Cr,ss=gt.current,Te(gt,t),Te(Ct,Ct.current),!0}function ig(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=bx(t,e,ss),r.__reactInternalMemoizedMergedChildContext=t,Ce(Ct),Ce(gt),Te(gt,t)):Ce(Ct),Te(Ct,n)}var Pn=null,Nc=!1,Wu=!1;function Nx(t){Pn===null?Pn=[t]:Pn.push(t)}function eN(t){Nc=!0,Nx(t)}function Or(){if(!Wu&&Pn!==null){Wu=!0;var t=0,e=we;try{var n=Pn;for(we=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Pn=null,Nc=!1}catch(s){throw Pn!==null&&(Pn=Pn.slice(t+1)),Qy($h,Or),s}finally{we=e,Wu=!1}}return null}var Us=[],Fs=0,Ul=null,Fl=0,Ft=[],zt=0,is=null,Rn=1,Dn="";function Kr(t,e){Us[Fs++]=Fl,Us[Fs++]=Ul,Ul=t,Fl=e}function Tx(t,e,n){Ft[zt++]=Rn,Ft[zt++]=Dn,Ft[zt++]=is,is=t;var r=Rn;t=Dn;var s=32-nn(r)-1;r&=~(1<<s),n+=1;var i=32-nn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Rn=1<<32-nn(e)+s|n<<s|r,Dn=i+t}else Rn=1<<i|n<<s|r,Dn=t}function Jh(t){t.return!==null&&(Kr(t,1),Tx(t,1,0))}function Zh(t){for(;t===Ul;)Ul=Us[--Fs],Us[Fs]=null,Fl=Us[--Fs],Us[Fs]=null;for(;t===is;)is=Ft[--zt],Ft[zt]=null,Dn=Ft[--zt],Ft[zt]=null,Rn=Ft[--zt],Ft[zt]=null}var Lt=null,Dt=null,Ae=!1,en=null;function Ix(t,e){var n=qt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function og(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Lt=t,Dt=xr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Lt=t,Dt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=is!==null?{id:Rn,overflow:Dn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=qt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Lt=t,Dt=null,!0):!1;default:return!1}}function Ud(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Fd(t){if(Ae){var e=Dt;if(e){var n=e;if(!og(t,e)){if(Ud(t))throw Error(z(418));e=xr(n.nextSibling);var r=Lt;e&&og(t,e)?Ix(r,n):(t.flags=t.flags&-4097|2,Ae=!1,Lt=t)}}else{if(Ud(t))throw Error(z(418));t.flags=t.flags&-4097|2,Ae=!1,Lt=t}}}function ag(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Lt=t}function Ha(t){if(t!==Lt)return!1;if(!Ae)return ag(t),Ae=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Vd(t.type,t.memoizedProps)),e&&(e=Dt)){if(Ud(t))throw Sx(),Error(z(418));for(;e;)Ix(t,e),e=xr(e.nextSibling)}if(ag(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Dt=xr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Dt=null}}else Dt=Lt?xr(t.stateNode.nextSibling):null;return!0}function Sx(){for(var t=Dt;t;)t=xr(t.nextSibling)}function si(){Dt=Lt=null,Ae=!1}function ef(t){en===null?en=[t]:en.push(t)}var tN=Yn.ReactCurrentBatchConfig;function Yi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var c=s.refs;o===null?delete c[i]:c[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Ka(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function lg(t){var e=t._init;return e(t._payload)}function kx(t){function e(w,E){if(t){var v=w.deletions;v===null?(w.deletions=[E],w.flags|=16):v.push(E)}}function n(w,E){if(!t)return null;for(;E!==null;)e(w,E),E=E.sibling;return null}function r(w,E){for(w=new Map;E!==null;)E.key!==null?w.set(E.key,E):w.set(E.index,E),E=E.sibling;return w}function s(w,E){return w=Er(w,E),w.index=0,w.sibling=null,w}function i(w,E,v){return w.index=v,t?(v=w.alternate,v!==null?(v=v.index,v<E?(w.flags|=2,E):v):(w.flags|=2,E)):(w.flags|=1048576,E)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function c(w,E,v,j){return E===null||E.tag!==6?(E=Ju(v,w.mode,j),E.return=w,E):(E=s(E,v),E.return=w,E)}function u(w,E,v,j){var D=v.type;return D===Rs?m(w,E,v.props.children,j,v.key):E!==null&&(E.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===sr&&lg(D)===E.type)?(j=s(E,v.props),j.ref=Yi(w,E,v),j.return=w,j):(j=yl(v.type,v.key,v.props,null,w.mode,j),j.ref=Yi(w,E,v),j.return=w,j)}function d(w,E,v,j){return E===null||E.tag!==4||E.stateNode.containerInfo!==v.containerInfo||E.stateNode.implementation!==v.implementation?(E=Zu(v,w.mode,j),E.return=w,E):(E=s(E,v.children||[]),E.return=w,E)}function m(w,E,v,j,D){return E===null||E.tag!==7?(E=ts(v,w.mode,j,D),E.return=w,E):(E=s(E,v),E.return=w,E)}function p(w,E,v){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Ju(""+E,w.mode,v),E.return=w,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case La:return v=yl(E.type,E.key,E.props,null,w.mode,v),v.ref=Yi(w,null,E),v.return=w,v;case Ps:return E=Zu(E,w.mode,v),E.return=w,E;case sr:var j=E._init;return p(w,j(E._payload),v)}if(eo(E)||Wi(E))return E=ts(E,w.mode,v,null),E.return=w,E;Ka(w,E)}return null}function g(w,E,v,j){var D=E!==null?E.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return D!==null?null:c(w,E,""+v,j);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case La:return v.key===D?u(w,E,v,j):null;case Ps:return v.key===D?d(w,E,v,j):null;case sr:return D=v._init,g(w,E,D(v._payload),j)}if(eo(v)||Wi(v))return D!==null?null:m(w,E,v,j,null);Ka(w,v)}return null}function b(w,E,v,j,D){if(typeof j=="string"&&j!==""||typeof j=="number")return w=w.get(v)||null,c(E,w,""+j,D);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case La:return w=w.get(j.key===null?v:j.key)||null,u(E,w,j,D);case Ps:return w=w.get(j.key===null?v:j.key)||null,d(E,w,j,D);case sr:var V=j._init;return b(w,E,v,V(j._payload),D)}if(eo(j)||Wi(j))return w=w.get(v)||null,m(E,w,j,D,null);Ka(E,j)}return null}function C(w,E,v,j){for(var D=null,V=null,_=E,y=E=0,N=null;_!==null&&y<v.length;y++){_.index>y?(N=_,_=null):N=_.sibling;var I=g(w,_,v[y],j);if(I===null){_===null&&(_=N);break}t&&_&&I.alternate===null&&e(w,_),E=i(I,E,y),V===null?D=I:V.sibling=I,V=I,_=N}if(y===v.length)return n(w,_),Ae&&Kr(w,y),D;if(_===null){for(;y<v.length;y++)_=p(w,v[y],j),_!==null&&(E=i(_,E,y),V===null?D=_:V.sibling=_,V=_);return Ae&&Kr(w,y),D}for(_=r(w,_);y<v.length;y++)N=b(_,w,y,v[y],j),N!==null&&(t&&N.alternate!==null&&_.delete(N.key===null?y:N.key),E=i(N,E,y),V===null?D=N:V.sibling=N,V=N);return t&&_.forEach(function(S){return e(w,S)}),Ae&&Kr(w,y),D}function k(w,E,v,j){var D=Wi(v);if(typeof D!="function")throw Error(z(150));if(v=D.call(v),v==null)throw Error(z(151));for(var V=D=null,_=E,y=E=0,N=null,I=v.next();_!==null&&!I.done;y++,I=v.next()){_.index>y?(N=_,_=null):N=_.sibling;var S=g(w,_,I.value,j);if(S===null){_===null&&(_=N);break}t&&_&&S.alternate===null&&e(w,_),E=i(S,E,y),V===null?D=S:V.sibling=S,V=S,_=N}if(I.done)return n(w,_),Ae&&Kr(w,y),D;if(_===null){for(;!I.done;y++,I=v.next())I=p(w,I.value,j),I!==null&&(E=i(I,E,y),V===null?D=I:V.sibling=I,V=I);return Ae&&Kr(w,y),D}for(_=r(w,_);!I.done;y++,I=v.next())I=b(_,w,y,I.value,j),I!==null&&(t&&I.alternate!==null&&_.delete(I.key===null?y:I.key),E=i(I,E,y),V===null?D=I:V.sibling=I,V=I);return t&&_.forEach(function(A){return e(w,A)}),Ae&&Kr(w,y),D}function P(w,E,v,j){if(typeof v=="object"&&v!==null&&v.type===Rs&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case La:e:{for(var D=v.key,V=E;V!==null;){if(V.key===D){if(D=v.type,D===Rs){if(V.tag===7){n(w,V.sibling),E=s(V,v.props.children),E.return=w,w=E;break e}}else if(V.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===sr&&lg(D)===V.type){n(w,V.sibling),E=s(V,v.props),E.ref=Yi(w,V,v),E.return=w,w=E;break e}n(w,V);break}else e(w,V);V=V.sibling}v.type===Rs?(E=ts(v.props.children,w.mode,j,v.key),E.return=w,w=E):(j=yl(v.type,v.key,v.props,null,w.mode,j),j.ref=Yi(w,E,v),j.return=w,w=j)}return o(w);case Ps:e:{for(V=v.key;E!==null;){if(E.key===V)if(E.tag===4&&E.stateNode.containerInfo===v.containerInfo&&E.stateNode.implementation===v.implementation){n(w,E.sibling),E=s(E,v.children||[]),E.return=w,w=E;break e}else{n(w,E);break}else e(w,E);E=E.sibling}E=Zu(v,w.mode,j),E.return=w,w=E}return o(w);case sr:return V=v._init,P(w,E,V(v._payload),j)}if(eo(v))return C(w,E,v,j);if(Wi(v))return k(w,E,v,j);Ka(w,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,E!==null&&E.tag===6?(n(w,E.sibling),E=s(E,v),E.return=w,w=E):(n(w,E),E=Ju(v,w.mode,j),E.return=w,w=E),o(w)):n(w,E)}return P}var ii=kx(!0),Cx=kx(!1),zl=Mr(null),Bl=null,zs=null,tf=null;function nf(){tf=zs=Bl=null}function rf(t){var e=zl.current;Ce(zl),t._currentValue=e}function zd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Qs(t,e){Bl=t,tf=zs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(kt=!0),t.firstContext=null)}function Gt(t){var e=t._currentValue;if(tf!==t)if(t={context:t,memoizedValue:e,next:null},zs===null){if(Bl===null)throw Error(z(308));zs=t,Bl.dependencies={lanes:0,firstContext:t}}else zs=zs.next=t;return e}var Xr=null;function sf(t){Xr===null?Xr=[t]:Xr.push(t)}function Ax(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,sf(e)):(n.next=s.next,s.next=n),e.interleaved=n,qn(t,r)}function qn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ir=!1;function of(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function On(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function vr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ge&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,qn(t,n)}return s=r.interleaved,s===null?(e.next=e,sf(r)):(e.next=s.next,s.next=e),r.interleaved=e,qn(t,n)}function dl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qh(t,n)}}function cg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function $l(t,e,n,r){var s=t.updateQueue;ir=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var m=t.alternate;m!==null&&(m=m.updateQueue,c=m.lastBaseUpdate,c!==o&&(c===null?m.firstBaseUpdate=d:c.next=d,m.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,m=d=u=null,c=i;do{var g=c.lane,b=c.eventTime;if((r&g)===g){m!==null&&(m=m.next={eventTime:b,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var C=t,k=c;switch(g=e,b=n,k.tag){case 1:if(C=k.payload,typeof C=="function"){p=C.call(b,p,g);break e}p=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=k.payload,g=typeof C=="function"?C.call(b,p,g):C,g==null)break e;p=Re({},p,g);break e;case 2:ir=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[c]:g.push(c))}else b={eventTime:b,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},m===null?(d=m=b,u=p):m=m.next=b,o|=g;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;g=c,c=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(m===null&&(u=p),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);as|=o,t.lanes=o,t.memoizedState=p}}function ug(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var ra={},_n=Mr(ra),Lo=Mr(ra),Mo=Mr(ra);function Jr(t){if(t===ra)throw Error(z(174));return t}function af(t,e){switch(Te(Mo,e),Te(Lo,t),Te(_n,ra),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:wd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=wd(e,t)}Ce(_n),Te(_n,e)}function oi(){Ce(_n),Ce(Lo),Ce(Mo)}function Px(t){Jr(Mo.current);var e=Jr(_n.current),n=wd(e,t.type);e!==n&&(Te(Lo,t),Te(_n,n))}function lf(t){Lo.current===t&&(Ce(_n),Ce(Lo))}var je=Mr(0);function ql(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Hu=[];function cf(){for(var t=0;t<Hu.length;t++)Hu[t]._workInProgressVersionPrimary=null;Hu.length=0}var hl=Yn.ReactCurrentDispatcher,Ku=Yn.ReactCurrentBatchConfig,os=0,Pe=null,We=null,Xe=null,Wl=!1,po=!1,Oo=0,nN=0;function ut(){throw Error(z(321))}function uf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!on(t[n],e[n]))return!1;return!0}function df(t,e,n,r,s,i){if(os=i,Pe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,hl.current=t===null||t.memoizedState===null?oN:aN,t=n(r,s),po){i=0;do{if(po=!1,Oo=0,25<=i)throw Error(z(301));i+=1,Xe=We=null,e.updateQueue=null,hl.current=lN,t=n(r,s)}while(po)}if(hl.current=Hl,e=We!==null&&We.next!==null,os=0,Xe=We=Pe=null,Wl=!1,e)throw Error(z(300));return t}function hf(){var t=Oo!==0;return Oo=0,t}function mn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?Pe.memoizedState=Xe=t:Xe=Xe.next=t,Xe}function Qt(){if(We===null){var t=Pe.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var e=Xe===null?Pe.memoizedState:Xe.next;if(e!==null)Xe=e,We=t;else{if(t===null)throw Error(z(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Xe===null?Pe.memoizedState=Xe=t:Xe=Xe.next=t}return Xe}function Uo(t,e){return typeof e=="function"?e(t):e}function Gu(t){var e=Qt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=We,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=o=null,u=null,d=i;do{var m=d.lane;if((os&m)===m)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=p,o=r):u=u.next=p,Pe.lanes|=m,as|=m}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=c,on(r,e.memoizedState)||(kt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Pe.lanes|=i,as|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Qu(t){var e=Qt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);on(i,e.memoizedState)||(kt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Rx(){}function Dx(t,e){var n=Pe,r=Qt(),s=e(),i=!on(r.memoizedState,s);if(i&&(r.memoizedState=s,kt=!0),r=r.queue,ff(Mx.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Xe!==null&&Xe.memoizedState.tag&1){if(n.flags|=2048,Fo(9,Lx.bind(null,n,r,s,e),void 0,null),Ze===null)throw Error(z(349));os&30||Vx(n,e,s)}return s}function Vx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Lx(t,e,n,r){e.value=n,e.getSnapshot=r,Ox(e)&&Ux(t)}function Mx(t,e,n){return n(function(){Ox(e)&&Ux(t)})}function Ox(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!on(t,n)}catch{return!0}}function Ux(t){var e=qn(t,1);e!==null&&rn(e,t,1,-1)}function dg(t){var e=mn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uo,lastRenderedState:t},e.queue=t,t=t.dispatch=iN.bind(null,Pe,t),[e.memoizedState,t]}function Fo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Fx(){return Qt().memoizedState}function fl(t,e,n,r){var s=mn();Pe.flags|=t,s.memoizedState=Fo(1|e,n,void 0,r===void 0?null:r)}function Tc(t,e,n,r){var s=Qt();r=r===void 0?null:r;var i=void 0;if(We!==null){var o=We.memoizedState;if(i=o.destroy,r!==null&&uf(r,o.deps)){s.memoizedState=Fo(e,n,i,r);return}}Pe.flags|=t,s.memoizedState=Fo(1|e,n,i,r)}function hg(t,e){return fl(8390656,8,t,e)}function ff(t,e){return Tc(2048,8,t,e)}function zx(t,e){return Tc(4,2,t,e)}function Bx(t,e){return Tc(4,4,t,e)}function $x(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function qx(t,e,n){return n=n!=null?n.concat([t]):null,Tc(4,4,$x.bind(null,e,t),n)}function mf(){}function Wx(t,e){var n=Qt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&uf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Hx(t,e){var n=Qt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&uf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Kx(t,e,n){return os&21?(on(n,e)||(n=Jy(),Pe.lanes|=n,as|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,kt=!0),t.memoizedState=n)}function rN(t,e){var n=we;we=n!==0&&4>n?n:4,t(!0);var r=Ku.transition;Ku.transition={};try{t(!1),e()}finally{we=n,Ku.transition=r}}function Gx(){return Qt().memoizedState}function sN(t,e,n){var r=wr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qx(t))Yx(e,n);else if(n=Ax(t,e,n,r),n!==null){var s=Et();rn(n,t,r,s),Xx(n,e,r)}}function iN(t,e,n){var r=wr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qx(t))Yx(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,c=i(o,n);if(s.hasEagerState=!0,s.eagerState=c,on(c,o)){var u=e.interleaved;u===null?(s.next=s,sf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Ax(t,e,s,r),n!==null&&(s=Et(),rn(n,t,r,s),Xx(n,e,r))}}function Qx(t){var e=t.alternate;return t===Pe||e!==null&&e===Pe}function Yx(t,e){po=Wl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Xx(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qh(t,n)}}var Hl={readContext:Gt,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useInsertionEffect:ut,useLayoutEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useMutableSource:ut,useSyncExternalStore:ut,useId:ut,unstable_isNewReconciler:!1},oN={readContext:Gt,useCallback:function(t,e){return mn().memoizedState=[t,e===void 0?null:e],t},useContext:Gt,useEffect:hg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,fl(4194308,4,$x.bind(null,e,t),n)},useLayoutEffect:function(t,e){return fl(4194308,4,t,e)},useInsertionEffect:function(t,e){return fl(4,2,t,e)},useMemo:function(t,e){var n=mn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=mn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=sN.bind(null,Pe,t),[r.memoizedState,t]},useRef:function(t){var e=mn();return t={current:t},e.memoizedState=t},useState:dg,useDebugValue:mf,useDeferredValue:function(t){return mn().memoizedState=t},useTransition:function(){var t=dg(!1),e=t[0];return t=rN.bind(null,t[1]),mn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Pe,s=mn();if(Ae){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),Ze===null)throw Error(z(349));os&30||Vx(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,hg(Mx.bind(null,r,i,t),[t]),r.flags|=2048,Fo(9,Lx.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=mn(),e=Ze.identifierPrefix;if(Ae){var n=Dn,r=Rn;n=(r&~(1<<32-nn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Oo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=nN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},aN={readContext:Gt,useCallback:Wx,useContext:Gt,useEffect:ff,useImperativeHandle:qx,useInsertionEffect:zx,useLayoutEffect:Bx,useMemo:Hx,useReducer:Gu,useRef:Fx,useState:function(){return Gu(Uo)},useDebugValue:mf,useDeferredValue:function(t){var e=Qt();return Kx(e,We.memoizedState,t)},useTransition:function(){var t=Gu(Uo)[0],e=Qt().memoizedState;return[t,e]},useMutableSource:Rx,useSyncExternalStore:Dx,useId:Gx,unstable_isNewReconciler:!1},lN={readContext:Gt,useCallback:Wx,useContext:Gt,useEffect:ff,useImperativeHandle:qx,useInsertionEffect:zx,useLayoutEffect:Bx,useMemo:Hx,useReducer:Qu,useRef:Fx,useState:function(){return Qu(Uo)},useDebugValue:mf,useDeferredValue:function(t){var e=Qt();return We===null?e.memoizedState=t:Kx(e,We.memoizedState,t)},useTransition:function(){var t=Qu(Uo)[0],e=Qt().memoizedState;return[t,e]},useMutableSource:Rx,useSyncExternalStore:Dx,useId:Gx,unstable_isNewReconciler:!1};function Jt(t,e){if(t&&t.defaultProps){e=Re({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Bd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Re({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ic={isMounted:function(t){return(t=t._reactInternals)?xs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Et(),s=wr(t),i=On(r,s);i.payload=e,n!=null&&(i.callback=n),e=vr(t,i,s),e!==null&&(rn(e,t,s,r),dl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Et(),s=wr(t),i=On(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=vr(t,i,s),e!==null&&(rn(e,t,s,r),dl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Et(),r=wr(t),s=On(n,r);s.tag=2,e!=null&&(s.callback=e),e=vr(t,s,r),e!==null&&(rn(e,t,r,n),dl(e,t,r))}};function fg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Po(n,r)||!Po(s,i):!0}function Jx(t,e,n){var r=!1,s=Cr,i=e.contextType;return typeof i=="object"&&i!==null?i=Gt(i):(s=At(e)?ss:gt.current,r=e.contextTypes,i=(r=r!=null)?ri(t,s):Cr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ic,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function mg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ic.enqueueReplaceState(e,e.state,null)}function $d(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},of(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Gt(i):(i=At(e)?ss:gt.current,s.context=ri(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Bd(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Ic.enqueueReplaceState(s,s.state,null),$l(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ai(t,e){try{var n="",r=e;do n+=LE(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Yu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function qd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var cN=typeof WeakMap=="function"?WeakMap:Map;function Zx(t,e,n){n=On(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Gl||(Gl=!0,eh=r),qd(t,e)},n}function ev(t,e,n){n=On(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){qd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){qd(t,e),typeof r!="function"&&(_r===null?_r=new Set([this]):_r.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function pg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new cN;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=bN.bind(null,t,e,n),e.then(t,t))}function gg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function yg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=On(-1,1),e.tag=2,vr(n,e,1))),n.lanes|=1),t)}var uN=Yn.ReactCurrentOwner,kt=!1;function _t(t,e,n,r){e.child=t===null?Cx(e,null,n,r):ii(e,t.child,n,r)}function xg(t,e,n,r,s){n=n.render;var i=e.ref;return Qs(e,s),r=df(t,e,n,r,i,s),n=hf(),t!==null&&!kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wn(t,e,s)):(Ae&&n&&Jh(e),e.flags|=1,_t(t,e,r,s),e.child)}function vg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Ef(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,tv(t,e,i,r,s)):(t=yl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Po,n(o,r)&&t.ref===e.ref)return Wn(t,e,s)}return e.flags|=1,t=Er(i,r),t.ref=e.ref,t.return=e,e.child=t}function tv(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Po(i,r)&&t.ref===e.ref)if(kt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(kt=!0);else return e.lanes=t.lanes,Wn(t,e,s)}return Wd(t,e,n,r,s)}function nv(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te($s,Rt),Rt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te($s,Rt),Rt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Te($s,Rt),Rt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Te($s,Rt),Rt|=r;return _t(t,e,s,n),e.child}function rv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Wd(t,e,n,r,s){var i=At(n)?ss:gt.current;return i=ri(e,i),Qs(e,s),n=df(t,e,n,r,i,s),r=hf(),t!==null&&!kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wn(t,e,s)):(Ae&&r&&Jh(e),e.flags|=1,_t(t,e,n,s),e.child)}function _g(t,e,n,r,s){if(At(n)){var i=!0;Ol(e)}else i=!1;if(Qs(e,s),e.stateNode===null)ml(t,e),Jx(e,n,r),$d(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Gt(d):(d=At(n)?ss:gt.current,d=ri(e,d));var m=n.getDerivedStateFromProps,p=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&mg(e,o,r,d),ir=!1;var g=e.memoizedState;o.state=g,$l(e,r,o,s),u=e.memoizedState,c!==r||g!==u||Ct.current||ir?(typeof m=="function"&&(Bd(e,n,m,r),u=e.memoizedState),(c=ir||fg(e,n,c,r,g,u,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,jx(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:Jt(e.type,c),o.props=d,p=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Gt(u):(u=At(n)?ss:gt.current,u=ri(e,u));var b=n.getDerivedStateFromProps;(m=typeof b=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==p||g!==u)&&mg(e,o,r,u),ir=!1,g=e.memoizedState,o.state=g,$l(e,r,o,s);var C=e.memoizedState;c!==p||g!==C||Ct.current||ir?(typeof b=="function"&&(Bd(e,n,b,r),C=e.memoizedState),(d=ir||fg(e,n,d,r,g,C,u)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,C,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,C,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=C),o.props=r,o.state=C,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Hd(t,e,n,r,i,s)}function Hd(t,e,n,r,s,i){rv(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&ig(e,n,!1),Wn(t,e,i);r=e.stateNode,uN.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ii(e,t.child,null,i),e.child=ii(e,null,c,i)):_t(t,e,c,i),e.memoizedState=r.state,s&&ig(e,n,!0),e.child}function sv(t){var e=t.stateNode;e.pendingContext?sg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&sg(t,e.context,!1),af(t,e.containerInfo)}function wg(t,e,n,r,s){return si(),ef(s),e.flags|=256,_t(t,e,n,r),e.child}var Kd={dehydrated:null,treeContext:null,retryLane:0};function Gd(t){return{baseLanes:t,cachePool:null,transitions:null}}function iv(t,e,n){var r=e.pendingProps,s=je.current,i=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Te(je,s&1),t===null)return Fd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Cc(o,r,0,null),t=ts(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Gd(n),e.memoizedState=Kd,t):pf(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return dN(t,e,o,r,c,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Er(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=Er(c,i):(i=ts(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Gd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Kd,r}return i=t.child,t=i.sibling,r=Er(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function pf(t,e){return e=Cc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ga(t,e,n,r){return r!==null&&ef(r),ii(e,t.child,null,n),t=pf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function dN(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Yu(Error(z(422))),Ga(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Cc({mode:"visible",children:r.children},s,0,null),i=ts(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ii(e,t.child,null,o),e.child.memoizedState=Gd(o),e.memoizedState=Kd,i);if(!(e.mode&1))return Ga(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(z(419)),r=Yu(i,r,void 0),Ga(t,e,o,r)}if(c=(o&t.childLanes)!==0,kt||c){if(r=Ze,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,qn(t,s),rn(r,t,s,-1))}return wf(),r=Yu(Error(z(421))),Ga(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=NN.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Dt=xr(s.nextSibling),Lt=e,Ae=!0,en=null,t!==null&&(Ft[zt++]=Rn,Ft[zt++]=Dn,Ft[zt++]=is,Rn=t.id,Dn=t.overflow,is=e),e=pf(e,r.children),e.flags|=4096,e)}function Eg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),zd(t.return,e,n)}function Xu(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function ov(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(_t(t,e,r.children,n),r=je.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Eg(t,n,e);else if(t.tag===19)Eg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Te(je,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ql(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Xu(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ql(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Xu(e,!0,n,null,i);break;case"together":Xu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ml(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),as|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=Er(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Er(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function hN(t,e,n){switch(e.tag){case 3:sv(e),si();break;case 5:Px(e);break;case 1:At(e.type)&&Ol(e);break;case 4:af(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Te(zl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(je,je.current&1),e.flags|=128,null):n&e.child.childLanes?iv(t,e,n):(Te(je,je.current&1),t=Wn(t,e,n),t!==null?t.sibling:null);Te(je,je.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ov(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Te(je,je.current),r)break;return null;case 22:case 23:return e.lanes=0,nv(t,e,n)}return Wn(t,e,n)}var av,Qd,lv,cv;av=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Qd=function(){};lv=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Jr(_n.current);var i=null;switch(n){case"input":s=yd(t,s),r=yd(t,r),i=[];break;case"select":s=Re({},s,{value:void 0}),r=Re({},r,{value:void 0}),i=[];break;case"textarea":s=_d(t,s),r=_d(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ll)}Ed(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(To.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(To.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Se("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};cv=function(t,e,n,r){n!==r&&(e.flags|=4)};function Xi(t,e){if(!Ae)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function fN(t,e,n){var r=e.pendingProps;switch(Zh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(e),null;case 1:return At(e.type)&&Ml(),dt(e),null;case 3:return r=e.stateNode,oi(),Ce(Ct),Ce(gt),cf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ha(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,en!==null&&(rh(en),en=null))),Qd(t,e),dt(e),null;case 5:lf(e);var s=Jr(Mo.current);if(n=e.type,t!==null&&e.stateNode!=null)lv(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return dt(e),null}if(t=Jr(_n.current),Ha(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[gn]=e,r[Vo]=i,t=(e.mode&1)!==0,n){case"dialog":Se("cancel",r),Se("close",r);break;case"iframe":case"object":case"embed":Se("load",r);break;case"video":case"audio":for(s=0;s<no.length;s++)Se(no[s],r);break;case"source":Se("error",r);break;case"img":case"image":case"link":Se("error",r),Se("load",r);break;case"details":Se("toggle",r);break;case"input":jp(r,i),Se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Se("invalid",r);break;case"textarea":Rp(r,i),Se("invalid",r)}Ed(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&Wa(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Wa(r.textContent,c,t),s=["children",""+c]):To.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Se("scroll",r)}switch(n){case"input":Ma(r),Pp(r,i,!0);break;case"textarea":Ma(r),Dp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ll)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=My(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[gn]=e,t[Vo]=r,av(t,e,!1,!1),e.stateNode=t;e:{switch(o=bd(n,r),n){case"dialog":Se("cancel",t),Se("close",t),s=r;break;case"iframe":case"object":case"embed":Se("load",t),s=r;break;case"video":case"audio":for(s=0;s<no.length;s++)Se(no[s],t);s=r;break;case"source":Se("error",t),s=r;break;case"img":case"image":case"link":Se("error",t),Se("load",t),s=r;break;case"details":Se("toggle",t),s=r;break;case"input":jp(t,r),s=yd(t,r),Se("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Re({},r,{value:void 0}),Se("invalid",t);break;case"textarea":Rp(t,r),s=_d(t,r),Se("invalid",t);break;default:s=r}Ed(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?Fy(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Oy(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Io(t,u):typeof u=="number"&&Io(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(To.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Se("scroll",t):u!=null&&Oh(t,i,u,o))}switch(n){case"input":Ma(t),Pp(t,r,!1);break;case"textarea":Ma(t),Dp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+kr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ws(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ws(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ll)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return dt(e),null;case 6:if(t&&e.stateNode!=null)cv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=Jr(Mo.current),Jr(_n.current),Ha(e)){if(r=e.stateNode,n=e.memoizedProps,r[gn]=e,(i=r.nodeValue!==n)&&(t=Lt,t!==null))switch(t.tag){case 3:Wa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Wa(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[gn]=e,e.stateNode=r}return dt(e),null;case 13:if(Ce(je),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ae&&Dt!==null&&e.mode&1&&!(e.flags&128))Sx(),si(),e.flags|=98560,i=!1;else if(i=Ha(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[gn]=e}else si(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;dt(e),i=!1}else en!==null&&(rh(en),en=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||je.current&1?He===0&&(He=3):wf())),e.updateQueue!==null&&(e.flags|=4),dt(e),null);case 4:return oi(),Qd(t,e),t===null&&Ro(e.stateNode.containerInfo),dt(e),null;case 10:return rf(e.type._context),dt(e),null;case 17:return At(e.type)&&Ml(),dt(e),null;case 19:if(Ce(je),i=e.memoizedState,i===null)return dt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Xi(i,!1);else{if(He!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ql(t),o!==null){for(e.flags|=128,Xi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(je,je.current&1|2),e.child}t=t.sibling}i.tail!==null&&Oe()>li&&(e.flags|=128,r=!0,Xi(i,!1),e.lanes=4194304)}else{if(!r)if(t=ql(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Xi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ae)return dt(e),null}else 2*Oe()-i.renderingStartTime>li&&n!==1073741824&&(e.flags|=128,r=!0,Xi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Oe(),e.sibling=null,n=je.current,Te(je,r?n&1|2:n&1),e):(dt(e),null);case 22:case 23:return _f(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Rt&1073741824&&(dt(e),e.subtreeFlags&6&&(e.flags|=8192)):dt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function mN(t,e){switch(Zh(e),e.tag){case 1:return At(e.type)&&Ml(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return oi(),Ce(Ct),Ce(gt),cf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return lf(e),null;case 13:if(Ce(je),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));si()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ce(je),null;case 4:return oi(),null;case 10:return rf(e.type._context),null;case 22:case 23:return _f(),null;case 24:return null;default:return null}}var Qa=!1,mt=!1,pN=typeof WeakSet=="function"?WeakSet:Set,X=null;function Bs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Le(t,e,r)}else n.current=null}function Yd(t,e,n){try{n()}catch(r){Le(t,e,r)}}var bg=!1;function gN(t,e){if(Rd=Rl,t=mx(),Xh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,m=0,p=t,g=null;t:for(;;){for(var b;p!==n||s!==0&&p.nodeType!==3||(c=o+s),p!==i||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(b=p.firstChild)!==null;)g=p,p=b;for(;;){if(p===t)break t;if(g===n&&++d===s&&(c=o),g===i&&++m===r&&(u=o),(b=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=b}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Dd={focusedElem:t,selectionRange:n},Rl=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var k=C.memoizedProps,P=C.memoizedState,w=e.stateNode,E=w.getSnapshotBeforeUpdate(e.elementType===e.type?k:Jt(e.type,k),P);w.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(j){Le(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return C=bg,bg=!1,C}function go(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Yd(e,n,i)}s=s.next}while(s!==r)}}function Sc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Xd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function uv(t){var e=t.alternate;e!==null&&(t.alternate=null,uv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[gn],delete e[Vo],delete e[Md],delete e[Jb],delete e[Zb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function dv(t){return t.tag===5||t.tag===3||t.tag===4}function Ng(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||dv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Jd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ll));else if(r!==4&&(t=t.child,t!==null))for(Jd(t,e,n),t=t.sibling;t!==null;)Jd(t,e,n),t=t.sibling}function Zd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Zd(t,e,n),t=t.sibling;t!==null;)Zd(t,e,n),t=t.sibling}var tt=null,Zt=!1;function nr(t,e,n){for(n=n.child;n!==null;)hv(t,e,n),n=n.sibling}function hv(t,e,n){if(vn&&typeof vn.onCommitFiberUnmount=="function")try{vn.onCommitFiberUnmount(vc,n)}catch{}switch(n.tag){case 5:mt||Bs(n,e);case 6:var r=tt,s=Zt;tt=null,nr(t,e,n),tt=r,Zt=s,tt!==null&&(Zt?(t=tt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):tt.removeChild(n.stateNode));break;case 18:tt!==null&&(Zt?(t=tt,n=n.stateNode,t.nodeType===8?qu(t.parentNode,n):t.nodeType===1&&qu(t,n),Ao(t)):qu(tt,n.stateNode));break;case 4:r=tt,s=Zt,tt=n.stateNode.containerInfo,Zt=!0,nr(t,e,n),tt=r,Zt=s;break;case 0:case 11:case 14:case 15:if(!mt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Yd(n,e,o),s=s.next}while(s!==r)}nr(t,e,n);break;case 1:if(!mt&&(Bs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Le(n,e,c)}nr(t,e,n);break;case 21:nr(t,e,n);break;case 22:n.mode&1?(mt=(r=mt)||n.memoizedState!==null,nr(t,e,n),mt=r):nr(t,e,n);break;default:nr(t,e,n)}}function Tg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new pN),e.forEach(function(r){var s=TN.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Xt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:tt=c.stateNode,Zt=!1;break e;case 3:tt=c.stateNode.containerInfo,Zt=!0;break e;case 4:tt=c.stateNode.containerInfo,Zt=!0;break e}c=c.return}if(tt===null)throw Error(z(160));hv(i,o,s),tt=null,Zt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Le(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)fv(e,t),e=e.sibling}function fv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Xt(e,t),dn(t),r&4){try{go(3,t,t.return),Sc(3,t)}catch(k){Le(t,t.return,k)}try{go(5,t,t.return)}catch(k){Le(t,t.return,k)}}break;case 1:Xt(e,t),dn(t),r&512&&n!==null&&Bs(n,n.return);break;case 5:if(Xt(e,t),dn(t),r&512&&n!==null&&Bs(n,n.return),t.flags&32){var s=t.stateNode;try{Io(s,"")}catch(k){Le(t,t.return,k)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&Vy(s,i),bd(c,o);var d=bd(c,i);for(o=0;o<u.length;o+=2){var m=u[o],p=u[o+1];m==="style"?Fy(s,p):m==="dangerouslySetInnerHTML"?Oy(s,p):m==="children"?Io(s,p):Oh(s,m,p,d)}switch(c){case"input":xd(s,i);break;case"textarea":Ly(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var b=i.value;b!=null?Ws(s,!!i.multiple,b,!1):g!==!!i.multiple&&(i.defaultValue!=null?Ws(s,!!i.multiple,i.defaultValue,!0):Ws(s,!!i.multiple,i.multiple?[]:"",!1))}s[Vo]=i}catch(k){Le(t,t.return,k)}}break;case 6:if(Xt(e,t),dn(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(k){Le(t,t.return,k)}}break;case 3:if(Xt(e,t),dn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ao(e.containerInfo)}catch(k){Le(t,t.return,k)}break;case 4:Xt(e,t),dn(t);break;case 13:Xt(e,t),dn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(xf=Oe())),r&4&&Tg(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(mt=(d=mt)||m,Xt(e,t),mt=d):Xt(e,t),dn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!m&&t.mode&1)for(X=t,m=t.child;m!==null;){for(p=X=m;X!==null;){switch(g=X,b=g.child,g.tag){case 0:case 11:case 14:case 15:go(4,g,g.return);break;case 1:Bs(g,g.return);var C=g.stateNode;if(typeof C.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(k){Le(r,n,k)}}break;case 5:Bs(g,g.return);break;case 22:if(g.memoizedState!==null){Sg(p);continue}}b!==null?(b.return=g,X=b):Sg(p)}m=m.sibling}e:for(m=null,p=t;;){if(p.tag===5){if(m===null){m=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=Uy("display",o))}catch(k){Le(t,t.return,k)}}}else if(p.tag===6){if(m===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(k){Le(t,t.return,k)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;m===p&&(m=null),p=p.return}m===p&&(m=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Xt(e,t),dn(t),r&4&&Tg(t);break;case 21:break;default:Xt(e,t),dn(t)}}function dn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(dv(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Io(s,""),r.flags&=-33);var i=Ng(t);Zd(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=Ng(t);Jd(t,c,o);break;default:throw Error(z(161))}}catch(u){Le(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function yN(t,e,n){X=t,mv(t)}function mv(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var s=X,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Qa;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||mt;c=Qa;var d=mt;if(Qa=o,(mt=u)&&!d)for(X=s;X!==null;)o=X,u=o.child,o.tag===22&&o.memoizedState!==null?kg(s):u!==null?(u.return=o,X=u):kg(s);for(;i!==null;)X=i,mv(i),i=i.sibling;X=s,Qa=c,mt=d}Ig(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,X=i):Ig(t)}}function Ig(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:mt||Sc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!mt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Jt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&ug(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ug(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var p=m.dehydrated;p!==null&&Ao(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}mt||e.flags&512&&Xd(e)}catch(g){Le(e,e.return,g)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function Sg(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function kg(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Sc(4,e)}catch(u){Le(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Le(e,s,u)}}var i=e.return;try{Xd(e)}catch(u){Le(e,i,u)}break;case 5:var o=e.return;try{Xd(e)}catch(u){Le(e,o,u)}}}catch(u){Le(e,e.return,u)}if(e===t){X=null;break}var c=e.sibling;if(c!==null){c.return=e.return,X=c;break}X=e.return}}var xN=Math.ceil,Kl=Yn.ReactCurrentDispatcher,gf=Yn.ReactCurrentOwner,Wt=Yn.ReactCurrentBatchConfig,ge=0,Ze=null,Be=null,st=0,Rt=0,$s=Mr(0),He=0,zo=null,as=0,kc=0,yf=0,yo=null,It=null,xf=0,li=1/0,jn=null,Gl=!1,eh=null,_r=null,Ya=!1,fr=null,Ql=0,xo=0,th=null,pl=-1,gl=0;function Et(){return ge&6?Oe():pl!==-1?pl:pl=Oe()}function wr(t){return t.mode&1?ge&2&&st!==0?st&-st:tN.transition!==null?(gl===0&&(gl=Jy()),gl):(t=we,t!==0||(t=window.event,t=t===void 0?16:ix(t.type)),t):1}function rn(t,e,n,r){if(50<xo)throw xo=0,th=null,Error(z(185));ea(t,n,r),(!(ge&2)||t!==Ze)&&(t===Ze&&(!(ge&2)&&(kc|=n),He===4&&ar(t,st)),jt(t,r),n===1&&ge===0&&!(e.mode&1)&&(li=Oe()+500,Nc&&Or()))}function jt(t,e){var n=t.callbackNode;tb(t,e);var r=Pl(t,t===Ze?st:0);if(r===0)n!==null&&Mp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Mp(n),e===1)t.tag===0?eN(Cg.bind(null,t)):Nx(Cg.bind(null,t)),Yb(function(){!(ge&6)&&Or()}),n=null;else{switch(Zy(r)){case 1:n=$h;break;case 4:n=Yy;break;case 16:n=jl;break;case 536870912:n=Xy;break;default:n=jl}n=Ev(n,pv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function pv(t,e){if(pl=-1,gl=0,ge&6)throw Error(z(327));var n=t.callbackNode;if(Ys()&&t.callbackNode!==n)return null;var r=Pl(t,t===Ze?st:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Yl(t,r);else{e=r;var s=ge;ge|=2;var i=yv();(Ze!==t||st!==e)&&(jn=null,li=Oe()+500,es(t,e));do try{wN();break}catch(c){gv(t,c)}while(!0);nf(),Kl.current=i,ge=s,Be!==null?e=0:(Ze=null,st=0,e=He)}if(e!==0){if(e===2&&(s=kd(t),s!==0&&(r=s,e=nh(t,s))),e===1)throw n=zo,es(t,0),ar(t,r),jt(t,Oe()),n;if(e===6)ar(t,r);else{if(s=t.current.alternate,!(r&30)&&!vN(s)&&(e=Yl(t,r),e===2&&(i=kd(t),i!==0&&(r=i,e=nh(t,i))),e===1))throw n=zo,es(t,0),ar(t,r),jt(t,Oe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:Gr(t,It,jn);break;case 3:if(ar(t,r),(r&130023424)===r&&(e=xf+500-Oe(),10<e)){if(Pl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Et(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ld(Gr.bind(null,t,It,jn),e);break}Gr(t,It,jn);break;case 4:if(ar(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-nn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Oe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xN(r/1960))-r,10<r){t.timeoutHandle=Ld(Gr.bind(null,t,It,jn),r);break}Gr(t,It,jn);break;case 5:Gr(t,It,jn);break;default:throw Error(z(329))}}}return jt(t,Oe()),t.callbackNode===n?pv.bind(null,t):null}function nh(t,e){var n=yo;return t.current.memoizedState.isDehydrated&&(es(t,e).flags|=256),t=Yl(t,e),t!==2&&(e=It,It=n,e!==null&&rh(e)),t}function rh(t){It===null?It=t:It.push.apply(It,t)}function vN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!on(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ar(t,e){for(e&=~yf,e&=~kc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-nn(e),r=1<<n;t[n]=-1,e&=~r}}function Cg(t){if(ge&6)throw Error(z(327));Ys();var e=Pl(t,0);if(!(e&1))return jt(t,Oe()),null;var n=Yl(t,e);if(t.tag!==0&&n===2){var r=kd(t);r!==0&&(e=r,n=nh(t,r))}if(n===1)throw n=zo,es(t,0),ar(t,e),jt(t,Oe()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Gr(t,It,jn),jt(t,Oe()),null}function vf(t,e){var n=ge;ge|=1;try{return t(e)}finally{ge=n,ge===0&&(li=Oe()+500,Nc&&Or())}}function ls(t){fr!==null&&fr.tag===0&&!(ge&6)&&Ys();var e=ge;ge|=1;var n=Wt.transition,r=we;try{if(Wt.transition=null,we=1,t)return t()}finally{we=r,Wt.transition=n,ge=e,!(ge&6)&&Or()}}function _f(){Rt=$s.current,Ce($s)}function es(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Qb(n)),Be!==null)for(n=Be.return;n!==null;){var r=n;switch(Zh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ml();break;case 3:oi(),Ce(Ct),Ce(gt),cf();break;case 5:lf(r);break;case 4:oi();break;case 13:Ce(je);break;case 19:Ce(je);break;case 10:rf(r.type._context);break;case 22:case 23:_f()}n=n.return}if(Ze=t,Be=t=Er(t.current,null),st=Rt=e,He=0,zo=null,yf=kc=as=0,It=yo=null,Xr!==null){for(e=0;e<Xr.length;e++)if(n=Xr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Xr=null}return t}function gv(t,e){do{var n=Be;try{if(nf(),hl.current=Hl,Wl){for(var r=Pe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Wl=!1}if(os=0,Xe=We=Pe=null,po=!1,Oo=0,gf.current=null,n===null||n.return===null){He=1,zo=e,Be=null;break}e:{var i=t,o=n.return,c=n,u=e;if(e=st,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,m=c,p=m.tag;if(!(m.mode&1)&&(p===0||p===11||p===15)){var g=m.alternate;g?(m.updateQueue=g.updateQueue,m.memoizedState=g.memoizedState,m.lanes=g.lanes):(m.updateQueue=null,m.memoizedState=null)}var b=gg(o);if(b!==null){b.flags&=-257,yg(b,o,c,i,e),b.mode&1&&pg(i,d,e),e=b,u=d;var C=e.updateQueue;if(C===null){var k=new Set;k.add(u),e.updateQueue=k}else C.add(u);break e}else{if(!(e&1)){pg(i,d,e),wf();break e}u=Error(z(426))}}else if(Ae&&c.mode&1){var P=gg(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),yg(P,o,c,i,e),ef(ai(u,c));break e}}i=u=ai(u,c),He!==4&&(He=2),yo===null?yo=[i]:yo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=Zx(i,u,e);cg(i,w);break e;case 1:c=u;var E=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(_r===null||!_r.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var j=ev(i,c,e);cg(i,j);break e}}i=i.return}while(i!==null)}vv(n)}catch(D){e=D,Be===n&&n!==null&&(Be=n=n.return);continue}break}while(!0)}function yv(){var t=Kl.current;return Kl.current=Hl,t===null?Hl:t}function wf(){(He===0||He===3||He===2)&&(He=4),Ze===null||!(as&268435455)&&!(kc&268435455)||ar(Ze,st)}function Yl(t,e){var n=ge;ge|=2;var r=yv();(Ze!==t||st!==e)&&(jn=null,es(t,e));do try{_N();break}catch(s){gv(t,s)}while(!0);if(nf(),ge=n,Kl.current=r,Be!==null)throw Error(z(261));return Ze=null,st=0,He}function _N(){for(;Be!==null;)xv(Be)}function wN(){for(;Be!==null&&!HE();)xv(Be)}function xv(t){var e=wv(t.alternate,t,Rt);t.memoizedProps=t.pendingProps,e===null?vv(t):Be=e,gf.current=null}function vv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=mN(n,e),n!==null){n.flags&=32767,Be=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{He=6,Be=null;return}}else if(n=fN(n,e,Rt),n!==null){Be=n;return}if(e=e.sibling,e!==null){Be=e;return}Be=e=t}while(e!==null);He===0&&(He=5)}function Gr(t,e,n){var r=we,s=Wt.transition;try{Wt.transition=null,we=1,EN(t,e,n,r)}finally{Wt.transition=s,we=r}return null}function EN(t,e,n,r){do Ys();while(fr!==null);if(ge&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(nb(t,i),t===Ze&&(Be=Ze=null,st=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ya||(Ya=!0,Ev(jl,function(){return Ys(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Wt.transition,Wt.transition=null;var o=we;we=1;var c=ge;ge|=4,gf.current=null,gN(t,n),fv(n,t),Bb(Dd),Rl=!!Rd,Dd=Rd=null,t.current=n,yN(n),KE(),ge=c,we=o,Wt.transition=i}else t.current=n;if(Ya&&(Ya=!1,fr=t,Ql=s),i=t.pendingLanes,i===0&&(_r=null),YE(n.stateNode),jt(t,Oe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Gl)throw Gl=!1,t=eh,eh=null,t;return Ql&1&&t.tag!==0&&Ys(),i=t.pendingLanes,i&1?t===th?xo++:(xo=0,th=t):xo=0,Or(),null}function Ys(){if(fr!==null){var t=Zy(Ql),e=Wt.transition,n=we;try{if(Wt.transition=null,we=16>t?16:t,fr===null)var r=!1;else{if(t=fr,fr=null,Ql=0,ge&6)throw Error(z(331));var s=ge;for(ge|=4,X=t.current;X!==null;){var i=X,o=i.child;if(X.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(X=d;X!==null;){var m=X;switch(m.tag){case 0:case 11:case 15:go(8,m,i)}var p=m.child;if(p!==null)p.return=m,X=p;else for(;X!==null;){m=X;var g=m.sibling,b=m.return;if(uv(m),m===d){X=null;break}if(g!==null){g.return=b,X=g;break}X=b}}}var C=i.alternate;if(C!==null){var k=C.child;if(k!==null){C.child=null;do{var P=k.sibling;k.sibling=null,k=P}while(k!==null)}}X=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,X=o;else e:for(;X!==null;){if(i=X,i.flags&2048)switch(i.tag){case 0:case 11:case 15:go(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,X=w;break e}X=i.return}}var E=t.current;for(X=E;X!==null;){o=X;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,X=v;else e:for(o=E;X!==null;){if(c=X,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Sc(9,c)}}catch(D){Le(c,c.return,D)}if(c===o){X=null;break e}var j=c.sibling;if(j!==null){j.return=c.return,X=j;break e}X=c.return}}if(ge=s,Or(),vn&&typeof vn.onPostCommitFiberRoot=="function")try{vn.onPostCommitFiberRoot(vc,t)}catch{}r=!0}return r}finally{we=n,Wt.transition=e}}return!1}function Ag(t,e,n){e=ai(n,e),e=Zx(t,e,1),t=vr(t,e,1),e=Et(),t!==null&&(ea(t,1,e),jt(t,e))}function Le(t,e,n){if(t.tag===3)Ag(t,t,n);else for(;e!==null;){if(e.tag===3){Ag(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(_r===null||!_r.has(r))){t=ai(n,t),t=ev(e,t,1),e=vr(e,t,1),t=Et(),e!==null&&(ea(e,1,t),jt(e,t));break}}e=e.return}}function bN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Et(),t.pingedLanes|=t.suspendedLanes&n,Ze===t&&(st&n)===n&&(He===4||He===3&&(st&130023424)===st&&500>Oe()-xf?es(t,0):yf|=n),jt(t,e)}function _v(t,e){e===0&&(t.mode&1?(e=Fa,Fa<<=1,!(Fa&130023424)&&(Fa=4194304)):e=1);var n=Et();t=qn(t,e),t!==null&&(ea(t,e,n),jt(t,n))}function NN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),_v(t,n)}function TN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),_v(t,n)}var wv;wv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ct.current)kt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return kt=!1,hN(t,e,n);kt=!!(t.flags&131072)}else kt=!1,Ae&&e.flags&1048576&&Tx(e,Fl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ml(t,e),t=e.pendingProps;var s=ri(e,gt.current);Qs(e,n),s=df(null,e,r,t,s,n);var i=hf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,At(r)?(i=!0,Ol(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,of(e),s.updater=Ic,e.stateNode=s,s._reactInternals=e,$d(e,r,t,n),e=Hd(null,e,r,!0,i,n)):(e.tag=0,Ae&&i&&Jh(e),_t(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ml(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=SN(r),t=Jt(r,t),s){case 0:e=Wd(null,e,r,t,n);break e;case 1:e=_g(null,e,r,t,n);break e;case 11:e=xg(null,e,r,t,n);break e;case 14:e=vg(null,e,r,Jt(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jt(r,s),Wd(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jt(r,s),_g(t,e,r,s,n);case 3:e:{if(sv(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,jx(t,e),$l(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ai(Error(z(423)),e),e=wg(t,e,r,n,s);break e}else if(r!==s){s=ai(Error(z(424)),e),e=wg(t,e,r,n,s);break e}else for(Dt=xr(e.stateNode.containerInfo.firstChild),Lt=e,Ae=!0,en=null,n=Cx(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(si(),r===s){e=Wn(t,e,n);break e}_t(t,e,r,n)}e=e.child}return e;case 5:return Px(e),t===null&&Fd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Vd(r,s)?o=null:i!==null&&Vd(r,i)&&(e.flags|=32),rv(t,e),_t(t,e,o,n),e.child;case 6:return t===null&&Fd(e),null;case 13:return iv(t,e,n);case 4:return af(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ii(e,null,r,n):_t(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jt(r,s),xg(t,e,r,s,n);case 7:return _t(t,e,e.pendingProps,n),e.child;case 8:return _t(t,e,e.pendingProps.children,n),e.child;case 12:return _t(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Te(zl,r._currentValue),r._currentValue=o,i!==null)if(on(i.value,o)){if(i.children===s.children&&!Ct.current){e=Wn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=On(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?u.next=u:(u.next=m.next,m.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),zd(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(z(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),zd(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}_t(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Qs(e,n),s=Gt(s),r=r(s),e.flags|=1,_t(t,e,r,n),e.child;case 14:return r=e.type,s=Jt(r,e.pendingProps),s=Jt(r.type,s),vg(t,e,r,s,n);case 15:return tv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jt(r,s),ml(t,e),e.tag=1,At(r)?(t=!0,Ol(e)):t=!1,Qs(e,n),Jx(e,r,s),$d(e,r,s,n),Hd(null,e,r,!0,t,n);case 19:return ov(t,e,n);case 22:return nv(t,e,n)}throw Error(z(156,e.tag))};function Ev(t,e){return Qy(t,e)}function IN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qt(t,e,n,r){return new IN(t,e,n,r)}function Ef(t){return t=t.prototype,!(!t||!t.isReactComponent)}function SN(t){if(typeof t=="function")return Ef(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Fh)return 11;if(t===zh)return 14}return 2}function Er(t,e){var n=t.alternate;return n===null?(n=qt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function yl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Ef(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Rs:return ts(n.children,s,i,e);case Uh:o=8,s|=8;break;case fd:return t=qt(12,n,e,s|2),t.elementType=fd,t.lanes=i,t;case md:return t=qt(13,n,e,s),t.elementType=md,t.lanes=i,t;case pd:return t=qt(19,n,e,s),t.elementType=pd,t.lanes=i,t;case Py:return Cc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ay:o=10;break e;case jy:o=9;break e;case Fh:o=11;break e;case zh:o=14;break e;case sr:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=qt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ts(t,e,n,r){return t=qt(7,t,r,e),t.lanes=n,t}function Cc(t,e,n,r){return t=qt(22,t,r,e),t.elementType=Py,t.lanes=n,t.stateNode={isHidden:!1},t}function Ju(t,e,n){return t=qt(6,t,null,e),t.lanes=n,t}function Zu(t,e,n){return e=qt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function kN(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ru(0),this.expirationTimes=Ru(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ru(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function bf(t,e,n,r,s,i,o,c,u){return t=new kN(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=qt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},of(i),t}function CN(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ps,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function bv(t){if(!t)return Cr;t=t._reactInternals;e:{if(xs(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(At(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(At(n))return bx(t,n,e)}return e}function Nv(t,e,n,r,s,i,o,c,u){return t=bf(n,r,!0,t,s,i,o,c,u),t.context=bv(null),n=t.current,r=Et(),s=wr(n),i=On(r,s),i.callback=e??null,vr(n,i,s),t.current.lanes=s,ea(t,s,r),jt(t,r),t}function Ac(t,e,n,r){var s=e.current,i=Et(),o=wr(s);return n=bv(n),e.context===null?e.context=n:e.pendingContext=n,e=On(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=vr(s,e,o),t!==null&&(rn(t,s,o,i),dl(t,s,o)),o}function Xl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function jg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Nf(t,e){jg(t,e),(t=t.alternate)&&jg(t,e)}function AN(){return null}var Tv=typeof reportError=="function"?reportError:function(t){console.error(t)};function Tf(t){this._internalRoot=t}jc.prototype.render=Tf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Ac(t,e,null,null)};jc.prototype.unmount=Tf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ls(function(){Ac(null,t,null,null)}),e[$n]=null}};function jc(t){this._internalRoot=t}jc.prototype.unstable_scheduleHydration=function(t){if(t){var e=nx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<or.length&&e!==0&&e<or[n].priority;n++);or.splice(n,0,t),n===0&&sx(t)}};function If(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Pg(){}function jN(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Xl(o);i.call(d)}}var o=Nv(e,r,t,0,null,!1,!1,"",Pg);return t._reactRootContainer=o,t[$n]=o.current,Ro(t.nodeType===8?t.parentNode:t),ls(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=Xl(u);c.call(d)}}var u=bf(t,0,!1,null,null,!1,!1,"",Pg);return t._reactRootContainer=u,t[$n]=u.current,Ro(t.nodeType===8?t.parentNode:t),ls(function(){Ac(e,u,n,r)}),u}function Rc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var c=s;s=function(){var u=Xl(o);c.call(u)}}Ac(e,o,t,s)}else o=jN(n,e,t,s,r);return Xl(o)}ex=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=to(e.pendingLanes);n!==0&&(qh(e,n|1),jt(e,Oe()),!(ge&6)&&(li=Oe()+500,Or()))}break;case 13:ls(function(){var r=qn(t,1);if(r!==null){var s=Et();rn(r,t,1,s)}}),Nf(t,1)}};Wh=function(t){if(t.tag===13){var e=qn(t,134217728);if(e!==null){var n=Et();rn(e,t,134217728,n)}Nf(t,134217728)}};tx=function(t){if(t.tag===13){var e=wr(t),n=qn(t,e);if(n!==null){var r=Et();rn(n,t,e,r)}Nf(t,e)}};nx=function(){return we};rx=function(t,e){var n=we;try{return we=t,e()}finally{we=n}};Td=function(t,e,n){switch(e){case"input":if(xd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=bc(r);if(!s)throw Error(z(90));Dy(r),xd(r,s)}}}break;case"textarea":Ly(t,n);break;case"select":e=n.value,e!=null&&Ws(t,!!n.multiple,e,!1)}};$y=vf;qy=ls;var PN={usingClientEntryPoint:!1,Events:[na,Ms,bc,zy,By,vf]},Ji={findFiberByHostInstance:Yr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},RN={bundleType:Ji.bundleType,version:Ji.version,rendererPackageName:Ji.rendererPackageName,rendererConfig:Ji.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ky(t),t===null?null:t.stateNode},findFiberByHostInstance:Ji.findFiberByHostInstance||AN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xa.isDisabled&&Xa.supportsFiber)try{vc=Xa.inject(RN),vn=Xa}catch{}}Ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PN;Ot.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!If(e))throw Error(z(200));return CN(t,e,null,n)};Ot.createRoot=function(t,e){if(!If(t))throw Error(z(299));var n=!1,r="",s=Tv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=bf(t,1,!1,null,null,n,!1,r,s),t[$n]=e.current,Ro(t.nodeType===8?t.parentNode:t),new Tf(e)};Ot.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=Ky(e),t=t===null?null:t.stateNode,t};Ot.flushSync=function(t){return ls(t)};Ot.hydrate=function(t,e,n){if(!Pc(e))throw Error(z(200));return Rc(null,t,e,!0,n)};Ot.hydrateRoot=function(t,e,n){if(!If(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Tv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Nv(e,null,t,1,n??null,s,!1,i,o),t[$n]=e.current,Ro(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new jc(e)};Ot.render=function(t,e,n){if(!Pc(e))throw Error(z(200));return Rc(null,t,e,!1,n)};Ot.unmountComponentAtNode=function(t){if(!Pc(t))throw Error(z(40));return t._reactRootContainer?(ls(function(){Rc(null,null,t,!1,function(){t._reactRootContainer=null,t[$n]=null})}),!0):!1};Ot.unstable_batchedUpdates=vf;Ot.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Pc(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Rc(t,e,n,!1,r)};Ot.version="18.3.1-next-f1338f8080-20240426";function Iv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Iv)}catch(t){console.error(t)}}Iv(),Iy.exports=Ot;var DN=Iy.exports,Sv,Rg=DN;Sv=Rg.createRoot,Rg.hydrateRoot;const VN="modulepreload",LN=function(t){return"/"+t},Dg={},hn=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=LN(u),u in Dg)return;Dg[u]=!0;const d=u.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${m}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":VN,d||(p.as="script"),p.crossOrigin="",p.href=u,c&&p.setAttribute("nonce",c),document.head.appendChild(p),d)return new Promise((g,b)=>{p.addEventListener("load",g),p.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return s.then(o=>{for(const c of o||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})},MN=()=>{};var Vg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},ON=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Cv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,m=i>>2,p=(i&3)<<4|c>>4;let g=(c&15)<<2|d>>6,b=d&63;u||(b=64,o||(g=64)),r.push(n[m],n[p],n[g],n[b])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(kv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ON(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||p==null)throw new UN;const g=i<<2|c>>4;if(r.push(g),d!==64){const b=c<<4&240|d>>2;if(r.push(b),p!==64){const C=d<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class UN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FN=function(t){const e=kv(t);return Cv.encodeByteArray(e,!0)},Jl=function(t){return FN(t).replace(/\./g,"")},Av=function(t){try{return Cv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN=()=>zN().__FIREBASE_DEFAULTS__,$N=()=>{if(typeof process>"u"||typeof Vg>"u")return;const t=Vg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},qN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Av(t[1]);return e&&JSON.parse(e)},Dc=()=>{try{return MN()||BN()||$N()||qN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},jv=t=>{var e,n;return(n=(e=Dc())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},WN=t=>{const e=jv(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Pv=()=>{var t;return(t=Dc())==null?void 0:t.config},Rv=t=>{var e;return(e=Dc())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Dv(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Jl(JSON.stringify(n)),Jl(JSON.stringify(o)),""].join(".")}const vo={};function GN(){const t={prod:[],emulator:[]};for(const e of Object.keys(vo))vo[e]?t.emulator.push(e):t.prod.push(e);return t}function QN(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Lg=!1;function Vv(t,e){if(typeof window>"u"||typeof document>"u"||!bi(window.location.host)||vo[t]===e||vo[t]||Lg)return;vo[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=GN().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,b){g.setAttribute("width","24"),g.setAttribute("id",b),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Lg=!0,o()},g}function m(g,b){g.setAttribute("id",b),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=QN(r),b=n("text"),C=document.getElementById(b)||document.createElement("span"),k=n("learnmore"),P=document.getElementById(k)||document.createElement("a"),w=n("preprendIcon"),E=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const v=g.element;c(v),m(P,k);const j=d();u(E,w),v.append(E,C,P,j),document.body.appendChild(v)}i?(C.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yt())}function XN(){var e;const t=(e=Dc())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ZN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function eT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tT(){const t=yt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function nT(){return!XN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rT(){try{return typeof indexedDB=="object"}catch{return!1}}function sT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT="FirebaseError";class Xn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=iT,Object.setPrototypeOf(this,Xn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sa.prototype.create)}}class sa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?oT(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new Xn(s,c,r)}}function oT(t,e){return t.replace(aT,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const aT=/\{\$([^}]+)}/g;function lT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function cs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Mg(i)&&Mg(o)){if(!cs(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Mg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ia(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ro(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function so(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function cT(t,e){const n=new uT(t,e);return n.subscribe.bind(n)}class uT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");dT(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=ed),s.error===void 0&&(s.error=ed),s.complete===void 0&&(s.complete=ed);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dT(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ed(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(t){return t&&t._delegate?t._delegate:t}class us{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new HN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mT(e))try{this.getOrInitializeService({instanceIdentifier:Qr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Qr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qr){return this.instances.has(e)}getOptions(e=Qr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:fT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Qr){return this.component?this.component.multipleInstances?e:Qr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fT(t){return t===Qr?void 0:t}function mT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new hT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ue||(ue={}));const gT={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},yT=ue.INFO,xT={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},vT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=xT[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sf{constructor(e){this.name=e,this._logLevel=yT,this._logHandler=vT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}}const _T=(t,e)=>e.some(n=>t instanceof n);let Og,Ug;function wT(){return Og||(Og=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ET(){return Ug||(Ug=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Lv=new WeakMap,sh=new WeakMap,Mv=new WeakMap,td=new WeakMap,kf=new WeakMap;function bT(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(br(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Lv.set(n,t)}).catch(()=>{}),kf.set(e,t),e}function NT(t){if(sh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});sh.set(t,e)}let ih={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return sh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Mv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return br(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function TT(t){ih=t(ih)}function IT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(nd(this),e,...n);return Mv.set(r,e.sort?e.sort():[e]),br(r)}:ET().includes(t)?function(...e){return t.apply(nd(this),e),br(Lv.get(this))}:function(...e){return br(t.apply(nd(this),e))}}function ST(t){return typeof t=="function"?IT(t):(t instanceof IDBTransaction&&NT(t),_T(t,wT())?new Proxy(t,ih):t)}function br(t){if(t instanceof IDBRequest)return bT(t);if(td.has(t))return td.get(t);const e=ST(t);return e!==t&&(td.set(t,e),kf.set(e,t)),e}const nd=t=>kf.get(t);function kT(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=br(o);return r&&o.addEventListener("upgradeneeded",u=>{r(br(o.result),u.oldVersion,u.newVersion,br(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const CT=["get","getKey","getAll","getAllKeys","count"],AT=["put","add","delete","clear"],rd=new Map;function Fg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(rd.get(e))return rd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=AT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||CT.includes(n)))return;const i=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return rd.set(e,i),i}TT(t=>({...t,get:(e,n,r)=>Fg(e,n)||t.get(e,n,r),has:(e,n)=>!!Fg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(PT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function PT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const oh="@firebase/app",zg="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn=new Sf("@firebase/app"),RT="@firebase/app-compat",DT="@firebase/analytics-compat",VT="@firebase/analytics",LT="@firebase/app-check-compat",MT="@firebase/app-check",OT="@firebase/auth",UT="@firebase/auth-compat",FT="@firebase/database",zT="@firebase/data-connect",BT="@firebase/database-compat",$T="@firebase/functions",qT="@firebase/functions-compat",WT="@firebase/installations",HT="@firebase/installations-compat",KT="@firebase/messaging",GT="@firebase/messaging-compat",QT="@firebase/performance",YT="@firebase/performance-compat",XT="@firebase/remote-config",JT="@firebase/remote-config-compat",ZT="@firebase/storage",eI="@firebase/storage-compat",tI="@firebase/firestore",nI="@firebase/ai",rI="@firebase/firestore-compat",sI="firebase",iI="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah="[DEFAULT]",oI={[oh]:"fire-core",[RT]:"fire-core-compat",[VT]:"fire-analytics",[DT]:"fire-analytics-compat",[MT]:"fire-app-check",[LT]:"fire-app-check-compat",[OT]:"fire-auth",[UT]:"fire-auth-compat",[FT]:"fire-rtdb",[zT]:"fire-data-connect",[BT]:"fire-rtdb-compat",[$T]:"fire-fn",[qT]:"fire-fn-compat",[WT]:"fire-iid",[HT]:"fire-iid-compat",[KT]:"fire-fcm",[GT]:"fire-fcm-compat",[QT]:"fire-perf",[YT]:"fire-perf-compat",[XT]:"fire-rc",[JT]:"fire-rc-compat",[ZT]:"fire-gcs",[eI]:"fire-gcs-compat",[tI]:"fire-fst",[rI]:"fire-fst-compat",[nI]:"fire-vertex","fire-js":"fire-js",[sI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zl=new Map,aI=new Map,lh=new Map;function Bg(t,e){try{t.container.addComponent(e)}catch(n){Hn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ci(t){const e=t.name;if(lh.has(e))return Hn.debug(`There were multiple attempts to register component ${e}.`),!1;lh.set(e,t);for(const n of Zl.values())Bg(n,t);for(const n of aI.values())Bg(n,t);return!0}function Cf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Bt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Nr=new sa("app","Firebase",lI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new us("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Nr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni=iI;function Ov(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:ah,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Nr.create("bad-app-name",{appName:String(s)});if(n||(n=Pv()),!n)throw Nr.create("no-options");const i=Zl.get(s);if(i){if(cs(n,i.options)&&cs(r,i.config))return i;throw Nr.create("duplicate-app",{appName:s})}const o=new pT(s);for(const u of lh.values())o.addComponent(u);const c=new cI(n,r,o);return Zl.set(s,c),c}function Uv(t=ah){const e=Zl.get(t);if(!e&&t===ah&&Pv())return Ov();if(!e)throw Nr.create("no-app",{appName:t});return e}function Tr(t,e,n){let r=oI[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hn.warn(o.join(" "));return}ci(new us(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI="firebase-heartbeat-database",dI=1,Bo="firebase-heartbeat-store";let sd=null;function Fv(){return sd||(sd=kT(uI,dI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Bo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Nr.create("idb-open",{originalErrorMessage:t.message})})),sd}async function hI(t){try{const n=(await Fv()).transaction(Bo),r=await n.objectStore(Bo).get(zv(t));return await n.done,r}catch(e){if(e instanceof Xn)Hn.warn(e.message);else{const n=Nr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Hn.warn(n.message)}}}async function $g(t,e){try{const r=(await Fv()).transaction(Bo,"readwrite");await r.objectStore(Bo).put(e,zv(t)),await r.done}catch(n){if(n instanceof Xn)Hn.warn(n.message);else{const r=Nr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Hn.warn(r.message)}}}function zv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI=1024,mI=30;class pI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new yI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=qg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>mI){const o=xI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Hn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=qg(),{heartbeatsToSend:r,unsentEntries:s}=gI(this._heartbeatsCache.heartbeats),i=Jl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Hn.warn(n),""}}}function qg(){return new Date().toISOString().substring(0,10)}function gI(t,e=fI){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Wg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Wg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class yI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rT()?sT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await hI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return $g(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return $g(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Wg(t){return Jl(JSON.stringify({version:2,heartbeats:t})).length}function xI(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(t){ci(new us("platform-logger",e=>new jT(e),"PRIVATE")),ci(new us("heartbeat",e=>new pI(e),"PRIVATE")),Tr(oh,zg,t),Tr(oh,zg,"esm2020"),Tr("fire-js","")}vI("");var Hg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ir,Bv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,y){function N(){}N.prototype=y.prototype,_.D=y.prototype,_.prototype=new N,_.prototype.constructor=_,_.C=function(I,S,A){for(var T=Array(arguments.length-2),$=2;$<arguments.length;$++)T[$-2]=arguments[$];return y.prototype[S].apply(I,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(_,y,N){N||(N=0);var I=Array(16);if(typeof y=="string")for(var S=0;16>S;++S)I[S]=y.charCodeAt(N++)|y.charCodeAt(N++)<<8|y.charCodeAt(N++)<<16|y.charCodeAt(N++)<<24;else for(S=0;16>S;++S)I[S]=y[N++]|y[N++]<<8|y[N++]<<16|y[N++]<<24;y=_.g[0],N=_.g[1],S=_.g[2];var A=_.g[3],T=y+(A^N&(S^A))+I[0]+3614090360&4294967295;y=N+(T<<7&4294967295|T>>>25),T=A+(S^y&(N^S))+I[1]+3905402710&4294967295,A=y+(T<<12&4294967295|T>>>20),T=S+(N^A&(y^N))+I[2]+606105819&4294967295,S=A+(T<<17&4294967295|T>>>15),T=N+(y^S&(A^y))+I[3]+3250441966&4294967295,N=S+(T<<22&4294967295|T>>>10),T=y+(A^N&(S^A))+I[4]+4118548399&4294967295,y=N+(T<<7&4294967295|T>>>25),T=A+(S^y&(N^S))+I[5]+1200080426&4294967295,A=y+(T<<12&4294967295|T>>>20),T=S+(N^A&(y^N))+I[6]+2821735955&4294967295,S=A+(T<<17&4294967295|T>>>15),T=N+(y^S&(A^y))+I[7]+4249261313&4294967295,N=S+(T<<22&4294967295|T>>>10),T=y+(A^N&(S^A))+I[8]+1770035416&4294967295,y=N+(T<<7&4294967295|T>>>25),T=A+(S^y&(N^S))+I[9]+2336552879&4294967295,A=y+(T<<12&4294967295|T>>>20),T=S+(N^A&(y^N))+I[10]+4294925233&4294967295,S=A+(T<<17&4294967295|T>>>15),T=N+(y^S&(A^y))+I[11]+2304563134&4294967295,N=S+(T<<22&4294967295|T>>>10),T=y+(A^N&(S^A))+I[12]+1804603682&4294967295,y=N+(T<<7&4294967295|T>>>25),T=A+(S^y&(N^S))+I[13]+4254626195&4294967295,A=y+(T<<12&4294967295|T>>>20),T=S+(N^A&(y^N))+I[14]+2792965006&4294967295,S=A+(T<<17&4294967295|T>>>15),T=N+(y^S&(A^y))+I[15]+1236535329&4294967295,N=S+(T<<22&4294967295|T>>>10),T=y+(S^A&(N^S))+I[1]+4129170786&4294967295,y=N+(T<<5&4294967295|T>>>27),T=A+(N^S&(y^N))+I[6]+3225465664&4294967295,A=y+(T<<9&4294967295|T>>>23),T=S+(y^N&(A^y))+I[11]+643717713&4294967295,S=A+(T<<14&4294967295|T>>>18),T=N+(A^y&(S^A))+I[0]+3921069994&4294967295,N=S+(T<<20&4294967295|T>>>12),T=y+(S^A&(N^S))+I[5]+3593408605&4294967295,y=N+(T<<5&4294967295|T>>>27),T=A+(N^S&(y^N))+I[10]+38016083&4294967295,A=y+(T<<9&4294967295|T>>>23),T=S+(y^N&(A^y))+I[15]+3634488961&4294967295,S=A+(T<<14&4294967295|T>>>18),T=N+(A^y&(S^A))+I[4]+3889429448&4294967295,N=S+(T<<20&4294967295|T>>>12),T=y+(S^A&(N^S))+I[9]+568446438&4294967295,y=N+(T<<5&4294967295|T>>>27),T=A+(N^S&(y^N))+I[14]+3275163606&4294967295,A=y+(T<<9&4294967295|T>>>23),T=S+(y^N&(A^y))+I[3]+4107603335&4294967295,S=A+(T<<14&4294967295|T>>>18),T=N+(A^y&(S^A))+I[8]+1163531501&4294967295,N=S+(T<<20&4294967295|T>>>12),T=y+(S^A&(N^S))+I[13]+2850285829&4294967295,y=N+(T<<5&4294967295|T>>>27),T=A+(N^S&(y^N))+I[2]+4243563512&4294967295,A=y+(T<<9&4294967295|T>>>23),T=S+(y^N&(A^y))+I[7]+1735328473&4294967295,S=A+(T<<14&4294967295|T>>>18),T=N+(A^y&(S^A))+I[12]+2368359562&4294967295,N=S+(T<<20&4294967295|T>>>12),T=y+(N^S^A)+I[5]+4294588738&4294967295,y=N+(T<<4&4294967295|T>>>28),T=A+(y^N^S)+I[8]+2272392833&4294967295,A=y+(T<<11&4294967295|T>>>21),T=S+(A^y^N)+I[11]+1839030562&4294967295,S=A+(T<<16&4294967295|T>>>16),T=N+(S^A^y)+I[14]+4259657740&4294967295,N=S+(T<<23&4294967295|T>>>9),T=y+(N^S^A)+I[1]+2763975236&4294967295,y=N+(T<<4&4294967295|T>>>28),T=A+(y^N^S)+I[4]+1272893353&4294967295,A=y+(T<<11&4294967295|T>>>21),T=S+(A^y^N)+I[7]+4139469664&4294967295,S=A+(T<<16&4294967295|T>>>16),T=N+(S^A^y)+I[10]+3200236656&4294967295,N=S+(T<<23&4294967295|T>>>9),T=y+(N^S^A)+I[13]+681279174&4294967295,y=N+(T<<4&4294967295|T>>>28),T=A+(y^N^S)+I[0]+3936430074&4294967295,A=y+(T<<11&4294967295|T>>>21),T=S+(A^y^N)+I[3]+3572445317&4294967295,S=A+(T<<16&4294967295|T>>>16),T=N+(S^A^y)+I[6]+76029189&4294967295,N=S+(T<<23&4294967295|T>>>9),T=y+(N^S^A)+I[9]+3654602809&4294967295,y=N+(T<<4&4294967295|T>>>28),T=A+(y^N^S)+I[12]+3873151461&4294967295,A=y+(T<<11&4294967295|T>>>21),T=S+(A^y^N)+I[15]+530742520&4294967295,S=A+(T<<16&4294967295|T>>>16),T=N+(S^A^y)+I[2]+3299628645&4294967295,N=S+(T<<23&4294967295|T>>>9),T=y+(S^(N|~A))+I[0]+4096336452&4294967295,y=N+(T<<6&4294967295|T>>>26),T=A+(N^(y|~S))+I[7]+1126891415&4294967295,A=y+(T<<10&4294967295|T>>>22),T=S+(y^(A|~N))+I[14]+2878612391&4294967295,S=A+(T<<15&4294967295|T>>>17),T=N+(A^(S|~y))+I[5]+4237533241&4294967295,N=S+(T<<21&4294967295|T>>>11),T=y+(S^(N|~A))+I[12]+1700485571&4294967295,y=N+(T<<6&4294967295|T>>>26),T=A+(N^(y|~S))+I[3]+2399980690&4294967295,A=y+(T<<10&4294967295|T>>>22),T=S+(y^(A|~N))+I[10]+4293915773&4294967295,S=A+(T<<15&4294967295|T>>>17),T=N+(A^(S|~y))+I[1]+2240044497&4294967295,N=S+(T<<21&4294967295|T>>>11),T=y+(S^(N|~A))+I[8]+1873313359&4294967295,y=N+(T<<6&4294967295|T>>>26),T=A+(N^(y|~S))+I[15]+4264355552&4294967295,A=y+(T<<10&4294967295|T>>>22),T=S+(y^(A|~N))+I[6]+2734768916&4294967295,S=A+(T<<15&4294967295|T>>>17),T=N+(A^(S|~y))+I[13]+1309151649&4294967295,N=S+(T<<21&4294967295|T>>>11),T=y+(S^(N|~A))+I[4]+4149444226&4294967295,y=N+(T<<6&4294967295|T>>>26),T=A+(N^(y|~S))+I[11]+3174756917&4294967295,A=y+(T<<10&4294967295|T>>>22),T=S+(y^(A|~N))+I[2]+718787259&4294967295,S=A+(T<<15&4294967295|T>>>17),T=N+(A^(S|~y))+I[9]+3951481745&4294967295,_.g[0]=_.g[0]+y&4294967295,_.g[1]=_.g[1]+(S+(T<<21&4294967295|T>>>11))&4294967295,_.g[2]=_.g[2]+S&4294967295,_.g[3]=_.g[3]+A&4294967295}r.prototype.u=function(_,y){y===void 0&&(y=_.length);for(var N=y-this.blockSize,I=this.B,S=this.h,A=0;A<y;){if(S==0)for(;A<=N;)s(this,_,A),A+=this.blockSize;if(typeof _=="string"){for(;A<y;)if(I[S++]=_.charCodeAt(A++),S==this.blockSize){s(this,I),S=0;break}}else for(;A<y;)if(I[S++]=_[A++],S==this.blockSize){s(this,I),S=0;break}}this.h=S,this.o+=y},r.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var y=1;y<_.length-8;++y)_[y]=0;var N=8*this.o;for(y=_.length-8;y<_.length;++y)_[y]=N&255,N/=256;for(this.u(_),_=Array(16),y=N=0;4>y;++y)for(var I=0;32>I;I+=8)_[N++]=this.g[y]>>>I&255;return _};function i(_,y){var N=c;return Object.prototype.hasOwnProperty.call(N,_)?N[_]:N[_]=y(_)}function o(_,y){this.h=y;for(var N=[],I=!0,S=_.length-1;0<=S;S--){var A=_[S]|0;I&&A==y||(N[S]=A,I=!1)}this.g=N}var c={};function u(_){return-128<=_&&128>_?i(_,function(y){return new o([y|0],0>y?-1:0)}):new o([_|0],0>_?-1:0)}function d(_){if(isNaN(_)||!isFinite(_))return p;if(0>_)return P(d(-_));for(var y=[],N=1,I=0;_>=N;I++)y[I]=_/N|0,N*=4294967296;return new o(y,0)}function m(_,y){if(_.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(_.charAt(0)=="-")return P(m(_.substring(1),y));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=d(Math.pow(y,8)),I=p,S=0;S<_.length;S+=8){var A=Math.min(8,_.length-S),T=parseInt(_.substring(S,S+A),y);8>A?(A=d(Math.pow(y,A)),I=I.j(A).add(d(T))):(I=I.j(N),I=I.add(d(T)))}return I}var p=u(0),g=u(1),b=u(16777216);t=o.prototype,t.m=function(){if(k(this))return-P(this).m();for(var _=0,y=1,N=0;N<this.g.length;N++){var I=this.i(N);_+=(0<=I?I:4294967296+I)*y,y*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(C(this))return"0";if(k(this))return"-"+P(this).toString(_);for(var y=d(Math.pow(_,6)),N=this,I="";;){var S=j(N,y).g;N=w(N,S.j(y));var A=((0<N.g.length?N.g[0]:N.h)>>>0).toString(_);if(N=S,C(N))return A+I;for(;6>A.length;)A="0"+A;I=A+I}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function C(_){if(_.h!=0)return!1;for(var y=0;y<_.g.length;y++)if(_.g[y]!=0)return!1;return!0}function k(_){return _.h==-1}t.l=function(_){return _=w(this,_),k(_)?-1:C(_)?0:1};function P(_){for(var y=_.g.length,N=[],I=0;I<y;I++)N[I]=~_.g[I];return new o(N,~_.h).add(g)}t.abs=function(){return k(this)?P(this):this},t.add=function(_){for(var y=Math.max(this.g.length,_.g.length),N=[],I=0,S=0;S<=y;S++){var A=I+(this.i(S)&65535)+(_.i(S)&65535),T=(A>>>16)+(this.i(S)>>>16)+(_.i(S)>>>16);I=T>>>16,A&=65535,T&=65535,N[S]=T<<16|A}return new o(N,N[N.length-1]&-2147483648?-1:0)};function w(_,y){return _.add(P(y))}t.j=function(_){if(C(this)||C(_))return p;if(k(this))return k(_)?P(this).j(P(_)):P(P(this).j(_));if(k(_))return P(this.j(P(_)));if(0>this.l(b)&&0>_.l(b))return d(this.m()*_.m());for(var y=this.g.length+_.g.length,N=[],I=0;I<2*y;I++)N[I]=0;for(I=0;I<this.g.length;I++)for(var S=0;S<_.g.length;S++){var A=this.i(I)>>>16,T=this.i(I)&65535,$=_.i(S)>>>16,ae=_.i(S)&65535;N[2*I+2*S]+=T*ae,E(N,2*I+2*S),N[2*I+2*S+1]+=A*ae,E(N,2*I+2*S+1),N[2*I+2*S+1]+=T*$,E(N,2*I+2*S+1),N[2*I+2*S+2]+=A*$,E(N,2*I+2*S+2)}for(I=0;I<y;I++)N[I]=N[2*I+1]<<16|N[2*I];for(I=y;I<2*y;I++)N[I]=0;return new o(N,0)};function E(_,y){for(;(_[y]&65535)!=_[y];)_[y+1]+=_[y]>>>16,_[y]&=65535,y++}function v(_,y){this.g=_,this.h=y}function j(_,y){if(C(y))throw Error("division by zero");if(C(_))return new v(p,p);if(k(_))return y=j(P(_),y),new v(P(y.g),P(y.h));if(k(y))return y=j(_,P(y)),new v(P(y.g),y.h);if(30<_.g.length){if(k(_)||k(y))throw Error("slowDivide_ only works with positive integers.");for(var N=g,I=y;0>=I.l(_);)N=D(N),I=D(I);var S=V(N,1),A=V(I,1);for(I=V(I,2),N=V(N,2);!C(I);){var T=A.add(I);0>=T.l(_)&&(S=S.add(N),A=T),I=V(I,1),N=V(N,1)}return y=w(_,S.j(y)),new v(S,y)}for(S=p;0<=_.l(y);){for(N=Math.max(1,Math.floor(_.m()/y.m())),I=Math.ceil(Math.log(N)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),A=d(N),T=A.j(y);k(T)||0<T.l(_);)N-=I,A=d(N),T=A.j(y);C(A)&&(A=g),S=S.add(A),_=w(_,T)}return new v(S,_)}t.A=function(_){return j(this,_).h},t.and=function(_){for(var y=Math.max(this.g.length,_.g.length),N=[],I=0;I<y;I++)N[I]=this.i(I)&_.i(I);return new o(N,this.h&_.h)},t.or=function(_){for(var y=Math.max(this.g.length,_.g.length),N=[],I=0;I<y;I++)N[I]=this.i(I)|_.i(I);return new o(N,this.h|_.h)},t.xor=function(_){for(var y=Math.max(this.g.length,_.g.length),N=[],I=0;I<y;I++)N[I]=this.i(I)^_.i(I);return new o(N,this.h^_.h)};function D(_){for(var y=_.g.length+1,N=[],I=0;I<y;I++)N[I]=_.i(I)<<1|_.i(I-1)>>>31;return new o(N,_.h)}function V(_,y){var N=y>>5;y%=32;for(var I=_.g.length-N,S=[],A=0;A<I;A++)S[A]=0<y?_.i(A+N)>>>y|_.i(A+N+1)<<32-y:_.i(A+N);return new o(S,_.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Bv=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=m,Ir=o}).apply(typeof Hg<"u"?Hg:typeof self<"u"?self:typeof window<"u"?window:{});var Ja=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $v,io,qv,xl,ch,Wv,Hv,Kv;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,f){return l==Array.prototype||l==Object.prototype||(l[h]=f.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ja=="object"&&Ja];for(var h=0;h<l.length;++h){var f=l[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var f=r;l=l.split(".");for(var x=0;x<l.length-1;x++){var R=l[x];if(!(R in f))break e;f=f[R]}l=l[l.length-1],x=f[l],h=h(x),h!=x&&h!=null&&e(f,l,{configurable:!0,writable:!0,value:h})}}function i(l,h){l instanceof String&&(l+="");var f=0,x=!1,R={next:function(){if(!x&&f<l.length){var L=f++;return{value:h(L,l[L]),done:!1}}return x=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}s("Array.prototype.values",function(l){return l||function(){return i(this,function(h,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function d(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function m(l,h,f){return l.call.apply(l.bind,arguments)}function p(l,h,f){if(!l)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var R=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(R,x),l.apply(h,R)}}return function(){return l.apply(h,arguments)}}function g(l,h,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:p,g.apply(null,arguments)}function b(l,h){var f=Array.prototype.slice.call(arguments,1);return function(){var x=f.slice();return x.push.apply(x,arguments),l.apply(this,x)}}function C(l,h){function f(){}f.prototype=h.prototype,l.aa=h.prototype,l.prototype=new f,l.prototype.constructor=l,l.Qb=function(x,R,L){for(var q=Array(arguments.length-2),be=2;be<arguments.length;be++)q[be-2]=arguments[be];return h.prototype[R].apply(x,q)}}function k(l){const h=l.length;if(0<h){const f=Array(h);for(let x=0;x<h;x++)f[x]=l[x];return f}return[]}function P(l,h){for(let f=1;f<arguments.length;f++){const x=arguments[f];if(u(x)){const R=l.length||0,L=x.length||0;l.length=R+L;for(let q=0;q<L;q++)l[R+q]=x[q]}else l.push(x)}}class w{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function E(l){return/^[\s\xa0]*$/.test(l)}function v(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function j(l){return j[" "](l),l}j[" "]=function(){};var D=v().indexOf("Gecko")!=-1&&!(v().toLowerCase().indexOf("webkit")!=-1&&v().indexOf("Edge")==-1)&&!(v().indexOf("Trident")!=-1||v().indexOf("MSIE")!=-1)&&v().indexOf("Edge")==-1;function V(l,h,f){for(const x in l)h.call(f,l[x],x,l)}function _(l,h){for(const f in l)h.call(void 0,l[f],f,l)}function y(l){const h={};for(const f in l)h[f]=l[f];return h}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(l,h){let f,x;for(let R=1;R<arguments.length;R++){x=arguments[R];for(f in x)l[f]=x[f];for(let L=0;L<N.length;L++)f=N[L],Object.prototype.hasOwnProperty.call(x,f)&&(l[f]=x[f])}}function S(l){var h=1;l=l.split(":");const f=[];for(;0<h&&l.length;)f.push(l.shift()),h--;return l.length&&f.push(l.join(":")),f}function A(l){c.setTimeout(()=>{throw l},0)}function T(){var l=J;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class ${constructor(){this.h=this.g=null}add(h,f){const x=ae.get();x.set(h,f),this.h?this.h.next=x:this.g=x,this.h=x}}var ae=new w(()=>new W,l=>l.reset());class W{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ee,B=!1,J=new $,F=()=>{const l=c.Promise.resolve(void 0);Ee=()=>{l.then(K)}};var K=()=>{for(var l;l=T();){try{l.h.call(l.g)}catch(f){A(f)}var h=ae;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}B=!1};function Y(){this.s=this.s,this.C=this.C}Y.prototype.s=!1,Y.prototype.ma=function(){this.s||(this.s=!0,this.N())},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var oe=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const f=()=>{};c.addEventListener("test",f,h),c.removeEventListener("test",f,h)}catch{}return l}();function _e(l,h){if(G.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var f=this.type=l.type,x=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(D){e:{try{j(h.nodeName);var R=!0;break e}catch{}R=!1}R||(h=null)}}else f=="mouseover"?h=l.fromElement:f=="mouseout"&&(h=l.toElement);this.relatedTarget=h,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Fe[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&_e.aa.h.call(this)}}C(_e,G);var Fe={2:"touch",3:"pen",4:"mouse"};_e.prototype.h=function(){_e.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Qe="closure_listenable_"+(1e6*Math.random()|0),ji=0;function R1(l,h,f,x,R){this.listener=l,this.proxy=null,this.src=h,this.type=f,this.capture=!!x,this.ha=R,this.key=++ji,this.da=this.fa=!1}function ya(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function xa(l){this.src=l,this.g={},this.h=0}xa.prototype.add=function(l,h,f,x,R){var L=l.toString();l=this.g[L],l||(l=this.g[L]=[],this.h++);var q=ou(l,h,x,R);return-1<q?(h=l[q],f||(h.fa=!1)):(h=new R1(h,this.src,L,!!x,R),h.fa=f,l.push(h)),h};function iu(l,h){var f=h.type;if(f in l.g){var x=l.g[f],R=Array.prototype.indexOf.call(x,h,void 0),L;(L=0<=R)&&Array.prototype.splice.call(x,R,1),L&&(ya(h),l.g[f].length==0&&(delete l.g[f],l.h--))}}function ou(l,h,f,x){for(var R=0;R<l.length;++R){var L=l[R];if(!L.da&&L.listener==h&&L.capture==!!f&&L.ha==x)return R}return-1}var au="closure_lm_"+(1e6*Math.random()|0),lu={};function Im(l,h,f,x,R){if(Array.isArray(h)){for(var L=0;L<h.length;L++)Im(l,h[L],f,x,R);return null}return f=Cm(f),l&&l[Qe]?l.K(h,f,d(x)?!!x.capture:!!x,R):D1(l,h,f,!1,x,R)}function D1(l,h,f,x,R,L){if(!h)throw Error("Invalid event type");var q=d(R)?!!R.capture:!!R,be=uu(l);if(be||(l[au]=be=new xa(l)),f=be.add(h,f,x,q,L),f.proxy)return f;if(x=V1(),f.proxy=x,x.src=l,x.listener=f,l.addEventListener)oe||(R=q),R===void 0&&(R=!1),l.addEventListener(h.toString(),x,R);else if(l.attachEvent)l.attachEvent(km(h.toString()),x);else if(l.addListener&&l.removeListener)l.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return f}function V1(){function l(f){return h.call(l.src,l.listener,f)}const h=L1;return l}function Sm(l,h,f,x,R){if(Array.isArray(h))for(var L=0;L<h.length;L++)Sm(l,h[L],f,x,R);else x=d(x)?!!x.capture:!!x,f=Cm(f),l&&l[Qe]?(l=l.i,h=String(h).toString(),h in l.g&&(L=l.g[h],f=ou(L,f,x,R),-1<f&&(ya(L[f]),Array.prototype.splice.call(L,f,1),L.length==0&&(delete l.g[h],l.h--)))):l&&(l=uu(l))&&(h=l.g[h.toString()],l=-1,h&&(l=ou(h,f,x,R)),(f=-1<l?h[l]:null)&&cu(f))}function cu(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[Qe])iu(h.i,l);else{var f=l.type,x=l.proxy;h.removeEventListener?h.removeEventListener(f,x,l.capture):h.detachEvent?h.detachEvent(km(f),x):h.addListener&&h.removeListener&&h.removeListener(x),(f=uu(h))?(iu(f,l),f.h==0&&(f.src=null,h[au]=null)):ya(l)}}}function km(l){return l in lu?lu[l]:lu[l]="on"+l}function L1(l,h){if(l.da)l=!0;else{h=new _e(h,this);var f=l.listener,x=l.ha||l.src;l.fa&&cu(l),l=f.call(x,h)}return l}function uu(l){return l=l[au],l instanceof xa?l:null}var du="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cm(l){return typeof l=="function"?l:(l[du]||(l[du]=function(h){return l.handleEvent(h)}),l[du])}function at(){Y.call(this),this.i=new xa(this),this.M=this,this.F=null}C(at,Y),at.prototype[Qe]=!0,at.prototype.removeEventListener=function(l,h,f,x){Sm(this,l,h,f,x)};function xt(l,h){var f,x=l.F;if(x)for(f=[];x;x=x.F)f.push(x);if(l=l.M,x=h.type||h,typeof h=="string")h=new G(h,l);else if(h instanceof G)h.target=h.target||l;else{var R=h;h=new G(x,l),I(h,R)}if(R=!0,f)for(var L=f.length-1;0<=L;L--){var q=h.g=f[L];R=va(q,x,!0,h)&&R}if(q=h.g=l,R=va(q,x,!0,h)&&R,R=va(q,x,!1,h)&&R,f)for(L=0;L<f.length;L++)q=h.g=f[L],R=va(q,x,!1,h)&&R}at.prototype.N=function(){if(at.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var f=l.g[h],x=0;x<f.length;x++)ya(f[x]);delete l.g[h],l.h--}}this.F=null},at.prototype.K=function(l,h,f,x){return this.i.add(String(l),h,!1,f,x)},at.prototype.L=function(l,h,f,x){return this.i.add(String(l),h,!0,f,x)};function va(l,h,f,x){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var R=!0,L=0;L<h.length;++L){var q=h[L];if(q&&!q.da&&q.capture==f){var be=q.listener,et=q.ha||q.src;q.fa&&iu(l.i,q),R=be.call(et,x)!==!1&&R}}return R&&!x.defaultPrevented}function Am(l,h,f){if(typeof l=="function")f&&(l=g(l,f));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(l,h||0)}function jm(l){l.g=Am(()=>{l.g=null,l.i&&(l.i=!1,jm(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class M1 extends Y{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:jm(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pi(l){Y.call(this),this.h=l,this.g={}}C(Pi,Y);var Pm=[];function Rm(l){V(l.g,function(h,f){this.g.hasOwnProperty(f)&&cu(h)},l),l.g={}}Pi.prototype.N=function(){Pi.aa.N.call(this),Rm(this)},Pi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var hu=c.JSON.stringify,O1=c.JSON.parse,U1=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function fu(){}fu.prototype.h=null;function Dm(l){return l.h||(l.h=l.i())}function Vm(){}var Ri={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function mu(){G.call(this,"d")}C(mu,G);function pu(){G.call(this,"c")}C(pu,G);var $r={},Lm=null;function _a(){return Lm=Lm||new at}$r.La="serverreachability";function Mm(l){G.call(this,$r.La,l)}C(Mm,G);function Di(l){const h=_a();xt(h,new Mm(h))}$r.STAT_EVENT="statevent";function Om(l,h){G.call(this,$r.STAT_EVENT,l),this.stat=h}C(Om,G);function vt(l){const h=_a();xt(h,new Om(h,l))}$r.Ma="timingevent";function Um(l,h){G.call(this,$r.Ma,l),this.size=h}C(Um,G);function Vi(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},h)}function Li(){this.g=!0}Li.prototype.xa=function(){this.g=!1};function F1(l,h,f,x,R,L){l.info(function(){if(l.g)if(L)for(var q="",be=L.split("&"),et=0;et<be.length;et++){var ye=be[et].split("=");if(1<ye.length){var lt=ye[0];ye=ye[1];var ct=lt.split("_");q=2<=ct.length&&ct[1]=="type"?q+(lt+"="+ye+"&"):q+(lt+"=redacted&")}}else q=null;else q=L;return"XMLHTTP REQ ("+x+") [attempt "+R+"]: "+h+`
`+f+`
`+q})}function z1(l,h,f,x,R,L,q){l.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+R+"]: "+h+`
`+f+`
`+L+" "+q})}function bs(l,h,f,x){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+$1(l,f)+(x?" "+x:"")})}function B1(l,h){l.info(function(){return"TIMEOUT: "+h})}Li.prototype.info=function(){};function $1(l,h){if(!l.g)return h;if(!h)return null;try{var f=JSON.parse(h);if(f){for(l=0;l<f.length;l++)if(Array.isArray(f[l])){var x=f[l];if(!(2>x.length)){var R=x[1];if(Array.isArray(R)&&!(1>R.length)){var L=R[0];if(L!="noop"&&L!="stop"&&L!="close")for(var q=1;q<R.length;q++)R[q]=""}}}}return hu(f)}catch{return h}}var wa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Fm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},gu;function Ea(){}C(Ea,fu),Ea.prototype.g=function(){return new XMLHttpRequest},Ea.prototype.i=function(){return{}},gu=new Ea;function Zn(l,h,f,x){this.j=l,this.i=h,this.l=f,this.R=x||1,this.U=new Pi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new zm}function zm(){this.i=null,this.g="",this.h=!1}var Bm={},yu={};function xu(l,h,f){l.L=1,l.v=Ia(Cn(h)),l.m=f,l.P=!0,$m(l,null)}function $m(l,h){l.F=Date.now(),ba(l),l.A=Cn(l.v);var f=l.A,x=l.R;Array.isArray(x)||(x=[String(x)]),rp(f.i,"t",x),l.C=0,f=l.j.J,l.h=new zm,l.g=wp(l.j,f?h:null,!l.m),0<l.O&&(l.M=new M1(g(l.Y,l,l.g),l.O)),h=l.U,f=l.g,x=l.ca;var R="readystatechange";Array.isArray(R)||(R&&(Pm[0]=R.toString()),R=Pm);for(var L=0;L<R.length;L++){var q=Im(f,R[L],x||h.handleEvent,!1,h.h||h);if(!q)break;h.g[q.key]=q}h=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),Di(),F1(l.i,l.u,l.A,l.l,l.R,l.m)}Zn.prototype.ca=function(l){l=l.target;const h=this.M;h&&An(l)==3?h.j():this.Y(l)},Zn.prototype.Y=function(l){try{if(l==this.g)e:{const ct=An(this.g);var h=this.g.Ba();const Is=this.g.Z();if(!(3>ct)&&(ct!=3||this.g&&(this.h.h||this.g.oa()||up(this.g)))){this.J||ct!=4||h==7||(h==8||0>=Is?Di(3):Di(2)),vu(this);var f=this.g.Z();this.X=f;t:if(qm(this)){var x=up(this.g);l="";var R=x.length,L=An(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qr(this),Mi(this);var q="";break t}this.h.i=new c.TextDecoder}for(h=0;h<R;h++)this.h.h=!0,l+=this.h.i.decode(x[h],{stream:!(L&&h==R-1)});x.length=0,this.h.g+=l,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=f==200,z1(this.i,this.u,this.A,this.l,this.R,ct,f),this.o){if(this.T&&!this.K){t:{if(this.g){var be,et=this.g;if((be=et.g?et.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(be)){var ye=be;break t}}ye=null}if(f=ye)bs(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_u(this,f);else{this.o=!1,this.s=3,vt(12),qr(this),Mi(this);break e}}if(this.P){f=!0;let Yt;for(;!this.J&&this.C<q.length;)if(Yt=q1(this,q),Yt==yu){ct==4&&(this.s=4,vt(14),f=!1),bs(this.i,this.l,null,"[Incomplete Response]");break}else if(Yt==Bm){this.s=4,vt(15),bs(this.i,this.l,q,"[Invalid Chunk]"),f=!1;break}else bs(this.i,this.l,Yt,null),_u(this,Yt);if(qm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||q.length!=0||this.h.h||(this.s=1,vt(16),f=!1),this.o=this.o&&f,!f)bs(this.i,this.l,q,"[Invalid Chunked Response]"),qr(this),Mi(this);else if(0<q.length&&!this.W){this.W=!0;var lt=this.j;lt.g==this&&lt.ba&&!lt.M&&(lt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),Iu(lt),lt.M=!0,vt(11))}}else bs(this.i,this.l,q,null),_u(this,q);ct==4&&qr(this),this.o&&!this.J&&(ct==4?yp(this.j,this):(this.o=!1,ba(this)))}else aE(this.g),f==400&&0<q.indexOf("Unknown SID")?(this.s=3,vt(12)):(this.s=0,vt(13)),qr(this),Mi(this)}}}catch{}finally{}};function qm(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function q1(l,h){var f=l.C,x=h.indexOf(`
`,f);return x==-1?yu:(f=Number(h.substring(f,x)),isNaN(f)?Bm:(x+=1,x+f>h.length?yu:(h=h.slice(x,x+f),l.C=x+f,h)))}Zn.prototype.cancel=function(){this.J=!0,qr(this)};function ba(l){l.S=Date.now()+l.I,Wm(l,l.I)}function Wm(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Vi(g(l.ba,l),h)}function vu(l){l.B&&(c.clearTimeout(l.B),l.B=null)}Zn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(B1(this.i,this.A),this.L!=2&&(Di(),vt(17)),qr(this),this.s=2,Mi(this)):Wm(this,this.S-l)};function Mi(l){l.j.G==0||l.J||yp(l.j,l)}function qr(l){vu(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,Rm(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function _u(l,h){try{var f=l.j;if(f.G!=0&&(f.g==l||wu(f.h,l))){if(!l.K&&wu(f.h,l)&&f.G==3){try{var x=f.Da.g.parse(h)}catch{x=null}if(Array.isArray(x)&&x.length==3){var R=x;if(R[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<l.F)Pa(f),Aa(f);else break e;Tu(f),vt(18)}}else f.za=R[1],0<f.za-f.T&&37500>R[2]&&f.F&&f.v==0&&!f.C&&(f.C=Vi(g(f.Za,f),6e3));if(1>=Gm(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Hr(f,11)}else if((l.K||f.g==l)&&Pa(f),!E(h))for(R=f.Da.g.parse(h),h=0;h<R.length;h++){let ye=R[h];if(f.T=ye[0],ye=ye[1],f.G==2)if(ye[0]=="c"){f.K=ye[1],f.ia=ye[2];const lt=ye[3];lt!=null&&(f.la=lt,f.j.info("VER="+f.la));const ct=ye[4];ct!=null&&(f.Aa=ct,f.j.info("SVER="+f.Aa));const Is=ye[5];Is!=null&&typeof Is=="number"&&0<Is&&(x=1.5*Is,f.L=x,f.j.info("backChannelRequestTimeoutMs_="+x)),x=f;const Yt=l.g;if(Yt){const Da=Yt.g?Yt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Da){var L=x.h;L.g||Da.indexOf("spdy")==-1&&Da.indexOf("quic")==-1&&Da.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Eu(L,L.h),L.h=null))}if(x.D){const Su=Yt.g?Yt.g.getResponseHeader("X-HTTP-Session-Id"):null;Su&&(x.ya=Su,Ie(x.I,x.D,Su))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-l.F,f.j.info("Handshake RTT: "+f.R+"ms")),x=f;var q=l;if(x.qa=_p(x,x.J?x.ia:null,x.W),q.K){Qm(x.h,q);var be=q,et=x.L;et&&(be.I=et),be.B&&(vu(be),ba(be)),x.g=q}else pp(x);0<f.i.length&&ja(f)}else ye[0]!="stop"&&ye[0]!="close"||Hr(f,7);else f.G==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?Hr(f,7):Nu(f):ye[0]!="noop"&&f.l&&f.l.ta(ye),f.v=0)}}Di(4)}catch{}}var W1=class{constructor(l,h){this.g=l,this.map=h}};function Hm(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Km(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Gm(l){return l.h?1:l.g?l.g.size:0}function wu(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Eu(l,h){l.g?l.g.add(h):l.h=h}function Qm(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}Hm.prototype.cancel=function(){if(this.i=Ym(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Ym(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const f of l.g.values())h=h.concat(f.D);return h}return k(l.i)}function H1(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var h=[],f=l.length,x=0;x<f;x++)h.push(l[x]);return h}h=[],f=0;for(x in l)h[f++]=l[x];return h}function K1(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var h=[];l=l.length;for(var f=0;f<l;f++)h.push(f);return h}h=[],f=0;for(const x in l)h[f++]=x;return h}}}function Xm(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var f=K1(l),x=H1(l),R=x.length,L=0;L<R;L++)h.call(void 0,x[L],f&&f[L],l)}var Jm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function G1(l,h){if(l){l=l.split("&");for(var f=0;f<l.length;f++){var x=l[f].indexOf("="),R=null;if(0<=x){var L=l[f].substring(0,x);R=l[f].substring(x+1)}else L=l[f];h(L,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function Wr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Wr){this.h=l.h,Na(this,l.j),this.o=l.o,this.g=l.g,Ta(this,l.s),this.l=l.l;var h=l.i,f=new Fi;f.i=h.i,h.g&&(f.g=new Map(h.g),f.h=h.h),Zm(this,f),this.m=l.m}else l&&(h=String(l).match(Jm))?(this.h=!1,Na(this,h[1]||"",!0),this.o=Oi(h[2]||""),this.g=Oi(h[3]||"",!0),Ta(this,h[4]),this.l=Oi(h[5]||"",!0),Zm(this,h[6]||"",!0),this.m=Oi(h[7]||"")):(this.h=!1,this.i=new Fi(null,this.h))}Wr.prototype.toString=function(){var l=[],h=this.j;h&&l.push(Ui(h,ep,!0),":");var f=this.g;return(f||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Ui(h,ep,!0),"@"),l.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&l.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&l.push("/"),l.push(Ui(f,f.charAt(0)=="/"?X1:Y1,!0))),(f=this.i.toString())&&l.push("?",f),(f=this.m)&&l.push("#",Ui(f,Z1)),l.join("")};function Cn(l){return new Wr(l)}function Na(l,h,f){l.j=f?Oi(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Ta(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function Zm(l,h,f){h instanceof Fi?(l.i=h,eE(l.i,l.h)):(f||(h=Ui(h,J1)),l.i=new Fi(h,l.h))}function Ie(l,h,f){l.i.set(h,f)}function Ia(l){return Ie(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Oi(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Ui(l,h,f){return typeof l=="string"?(l=encodeURI(l).replace(h,Q1),f&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Q1(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var ep=/[#\/\?@]/g,Y1=/[#\?:]/g,X1=/[#\?]/g,J1=/[#\?@]/g,Z1=/#/g;function Fi(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function er(l){l.g||(l.g=new Map,l.h=0,l.i&&G1(l.i,function(h,f){l.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}t=Fi.prototype,t.add=function(l,h){er(this),this.i=null,l=Ns(this,l);var f=this.g.get(l);return f||this.g.set(l,f=[]),f.push(h),this.h+=1,this};function tp(l,h){er(l),h=Ns(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function np(l,h){return er(l),h=Ns(l,h),l.g.has(h)}t.forEach=function(l,h){er(this),this.g.forEach(function(f,x){f.forEach(function(R){l.call(h,R,x,this)},this)},this)},t.na=function(){er(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),f=[];for(let x=0;x<h.length;x++){const R=l[x];for(let L=0;L<R.length;L++)f.push(h[x])}return f},t.V=function(l){er(this);let h=[];if(typeof l=="string")np(this,l)&&(h=h.concat(this.g.get(Ns(this,l))));else{l=Array.from(this.g.values());for(let f=0;f<l.length;f++)h=h.concat(l[f])}return h},t.set=function(l,h){return er(this),this.i=null,l=Ns(this,l),np(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function rp(l,h,f){tp(l,h),0<f.length&&(l.i=null,l.g.set(Ns(l,h),k(f)),l.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var f=0;f<h.length;f++){var x=h[f];const L=encodeURIComponent(String(x)),q=this.V(x);for(x=0;x<q.length;x++){var R=L;q[x]!==""&&(R+="="+encodeURIComponent(String(q[x]))),l.push(R)}}return this.i=l.join("&")};function Ns(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function eE(l,h){h&&!l.j&&(er(l),l.i=null,l.g.forEach(function(f,x){var R=x.toLowerCase();x!=R&&(tp(this,x),rp(this,R,f))},l)),l.j=h}function tE(l,h){const f=new Li;if(c.Image){const x=new Image;x.onload=b(tr,f,"TestLoadImage: loaded",!0,h,x),x.onerror=b(tr,f,"TestLoadImage: error",!1,h,x),x.onabort=b(tr,f,"TestLoadImage: abort",!1,h,x),x.ontimeout=b(tr,f,"TestLoadImage: timeout",!1,h,x),c.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=l}else h(!1)}function nE(l,h){const f=new Li,x=new AbortController,R=setTimeout(()=>{x.abort(),tr(f,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:x.signal}).then(L=>{clearTimeout(R),L.ok?tr(f,"TestPingServer: ok",!0,h):tr(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(R),tr(f,"TestPingServer: error",!1,h)})}function tr(l,h,f,x,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),x(f)}catch{}}function rE(){this.g=new U1}function sE(l,h,f){const x=f||"";try{Xm(l,function(R,L){let q=R;d(R)&&(q=hu(R)),h.push(x+L+"="+encodeURIComponent(q))})}catch(R){throw h.push(x+"type="+encodeURIComponent("_badmap")),R}}function Sa(l){this.l=l.Ub||null,this.j=l.eb||!1}C(Sa,fu),Sa.prototype.g=function(){return new ka(this.l,this.j)},Sa.prototype.i=function(l){return function(){return l}}({});function ka(l,h){at.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(ka,at),t=ka.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,Bi(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,zi(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Bi(this)),this.g&&(this.readyState=3,Bi(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;sp(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function sp(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?zi(this):Bi(this),this.readyState==3&&sp(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,zi(this))},t.Qa=function(l){this.g&&(this.response=l,zi(this))},t.ga=function(){this.g&&zi(this)};function zi(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Bi(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,l.push(f[0]+": "+f[1]),f=h.next();return l.join(`\r
`)};function Bi(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(ka.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function ip(l){let h="";return V(l,function(f,x){h+=x,h+=":",h+=f,h+=`\r
`}),h}function bu(l,h,f){e:{for(x in f){var x=!1;break e}x=!0}x||(f=ip(f),typeof l=="string"?f!=null&&encodeURIComponent(String(f)):Ie(l,h,f))}function Ve(l){at.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Ve,at);var iE=/^https?$/i,oE=["POST","PUT"];t=Ve.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,f,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():gu.g(),this.v=this.o?Dm(this.o):Dm(gu),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(L){op(this,L);return}if(l=f||"",f=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var R in x)f.set(R,x[R]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const L of x.keys())f.set(L,x.get(L));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(f.keys()).find(L=>L.toLowerCase()=="content-type"),R=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(oE,h,void 0))||x||R||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,q]of f)this.g.setRequestHeader(L,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{cp(this),this.u=!0,this.g.send(l),this.u=!1}catch(L){op(this,L)}};function op(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,ap(l),Ca(l)}function ap(l){l.A||(l.A=!0,xt(l,"complete"),xt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,xt(this,"complete"),xt(this,"abort"),Ca(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ca(this,!0)),Ve.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?lp(this):this.bb())},t.bb=function(){lp(this)};function lp(l){if(l.h&&typeof o<"u"&&(!l.v[1]||An(l)!=4||l.Z()!=2)){if(l.u&&An(l)==4)Am(l.Ea,0,l);else if(xt(l,"readystatechange"),An(l)==4){l.h=!1;try{const q=l.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var x;if(x=q===0){var R=String(l.D).match(Jm)[1]||null;!R&&c.self&&c.self.location&&(R=c.self.location.protocol.slice(0,-1)),x=!iE.test(R?R.toLowerCase():"")}f=x}if(f)xt(l,"complete"),xt(l,"success");else{l.m=6;try{var L=2<An(l)?l.g.statusText:""}catch{L=""}l.l=L+" ["+l.Z()+"]",ap(l)}}finally{Ca(l)}}}}function Ca(l,h){if(l.g){cp(l);const f=l.g,x=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||xt(l,"ready");try{f.onreadystatechange=x}catch{}}}function cp(l){l.I&&(c.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function An(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<An(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),O1(h)}};function up(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function aE(l){const h={};l=(l.g&&2<=An(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<l.length;x++){if(E(l[x]))continue;var f=S(l[x]);const R=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const L=h[R]||[];h[R]=L,L.push(f)}_(h,function(x){return x.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $i(l,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[l]||h}function dp(l){this.Aa=0,this.i=[],this.j=new Li,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$i("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$i("baseRetryDelayMs",5e3,l),this.cb=$i("retryDelaySeedMs",1e4,l),this.Wa=$i("forwardChannelMaxRetries",2,l),this.wa=$i("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Hm(l&&l.concurrentRequestLimit),this.Da=new rE,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=dp.prototype,t.la=8,t.G=1,t.connect=function(l,h,f,x){vt(0),this.W=l,this.H=h||{},f&&x!==void 0&&(this.H.OSID=f,this.H.OAID=x),this.F=this.X,this.I=_p(this,null,this.W),ja(this)};function Nu(l){if(hp(l),l.G==3){var h=l.U++,f=Cn(l.I);if(Ie(f,"SID",l.K),Ie(f,"RID",h),Ie(f,"TYPE","terminate"),qi(l,f),h=new Zn(l,l.j,h),h.L=2,h.v=Ia(Cn(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=h.v,f=!0),f||(h.g=wp(h.j,null),h.g.ea(h.v)),h.F=Date.now(),ba(h)}vp(l)}function Aa(l){l.g&&(Iu(l),l.g.cancel(),l.g=null)}function hp(l){Aa(l),l.u&&(c.clearTimeout(l.u),l.u=null),Pa(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function ja(l){if(!Km(l.h)&&!l.s){l.s=!0;var h=l.Ga;Ee||F(),B||(Ee(),B=!0),J.add(h,l),l.B=0}}function lE(l,h){return Gm(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Vi(g(l.Ga,l,h),xp(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const R=new Zn(this,this.j,l);let L=this.o;if(this.S&&(L?(L=y(L),I(L,this.S)):L=this.S),this.m!==null||this.O||(R.H=L,L=null),this.P)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var x=this.i[f];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(h+=x,4096<h){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=mp(this,R,h),f=Cn(this.I),Ie(f,"RID",l),Ie(f,"CVER",22),this.D&&Ie(f,"X-HTTP-Session-Id",this.D),qi(this,f),L&&(this.O?h="headers="+encodeURIComponent(String(ip(L)))+"&"+h:this.m&&bu(f,this.m,L)),Eu(this.h,R),this.Ua&&Ie(f,"TYPE","init"),this.P?(Ie(f,"$req",h),Ie(f,"SID","null"),R.T=!0,xu(R,f,null)):xu(R,f,h),this.G=2}}else this.G==3&&(l?fp(this,l):this.i.length==0||Km(this.h)||fp(this))};function fp(l,h){var f;h?f=h.l:f=l.U++;const x=Cn(l.I);Ie(x,"SID",l.K),Ie(x,"RID",f),Ie(x,"AID",l.T),qi(l,x),l.m&&l.o&&bu(x,l.m,l.o),f=new Zn(l,l.j,f,l.B+1),l.m===null&&(f.H=l.o),h&&(l.i=h.D.concat(l.i)),h=mp(l,f,1e3),f.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Eu(l.h,f),xu(f,x,h)}function qi(l,h){l.H&&V(l.H,function(f,x){Ie(h,x,f)}),l.l&&Xm({},function(f,x){Ie(h,x,f)})}function mp(l,h,f){f=Math.min(l.i.length,f);var x=l.l?g(l.l.Na,l.l,l):null;e:{var R=l.i;let L=-1;for(;;){const q=["count="+f];L==-1?0<f?(L=R[0].g,q.push("ofs="+L)):L=0:q.push("ofs="+L);let be=!0;for(let et=0;et<f;et++){let ye=R[et].g;const lt=R[et].map;if(ye-=L,0>ye)L=Math.max(0,R[et].g-100),be=!1;else try{sE(lt,q,"req"+ye+"_")}catch{x&&x(lt)}}if(be){x=q.join("&");break e}}}return l=l.i.splice(0,f),h.D=l,x}function pp(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;Ee||F(),B||(Ee(),B=!0),J.add(h,l),l.v=0}}function Tu(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Vi(g(l.Fa,l),xp(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,gp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Vi(g(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vt(10),Aa(this),gp(this))};function Iu(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function gp(l){l.g=new Zn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=Cn(l.qa);Ie(h,"RID","rpc"),Ie(h,"SID",l.K),Ie(h,"AID",l.T),Ie(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ie(h,"TO",l.ja),Ie(h,"TYPE","xmlhttp"),qi(l,h),l.m&&l.o&&bu(h,l.m,l.o),l.L&&(l.g.I=l.L);var f=l.g;l=l.ia,f.L=1,f.v=Ia(Cn(h)),f.m=null,f.P=!0,$m(f,l)}t.Za=function(){this.C!=null&&(this.C=null,Aa(this),Tu(this),vt(19))};function Pa(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function yp(l,h){var f=null;if(l.g==h){Pa(l),Iu(l),l.g=null;var x=2}else if(wu(l.h,h))f=h.D,Qm(l.h,h),x=1;else return;if(l.G!=0){if(h.o)if(x==1){f=h.m?h.m.length:0,h=Date.now()-h.F;var R=l.B;x=_a(),xt(x,new Um(x,f)),ja(l)}else pp(l);else if(R=h.s,R==3||R==0&&0<h.X||!(x==1&&lE(l,h)||x==2&&Tu(l)))switch(f&&0<f.length&&(h=l.h,h.i=h.i.concat(f)),R){case 1:Hr(l,5);break;case 4:Hr(l,10);break;case 3:Hr(l,6);break;default:Hr(l,2)}}}function xp(l,h){let f=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(f*=2),f*h}function Hr(l,h){if(l.j.info("Error code "+h),h==2){var f=g(l.fb,l),x=l.Xa;const R=!x;x=new Wr(x||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Na(x,"https"),Ia(x),R?tE(x.toString(),f):nE(x.toString(),f)}else vt(2);l.G=0,l.l&&l.l.sa(h),vp(l),hp(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),vt(2)):(this.j.info("Failed to ping google.com"),vt(1))};function vp(l){if(l.G=0,l.ka=[],l.l){const h=Ym(l.h);(h.length!=0||l.i.length!=0)&&(P(l.ka,h),P(l.ka,l.i),l.h.i.length=0,k(l.i),l.i.length=0),l.l.ra()}}function _p(l,h,f){var x=f instanceof Wr?Cn(f):new Wr(f);if(x.g!="")h&&(x.g=h+"."+x.g),Ta(x,x.s);else{var R=c.location;x=R.protocol,h=h?h+"."+R.hostname:R.hostname,R=+R.port;var L=new Wr(null);x&&Na(L,x),h&&(L.g=h),R&&Ta(L,R),f&&(L.l=f),x=L}return f=l.D,h=l.ya,f&&h&&Ie(x,f,h),Ie(x,"VER",l.la),qi(l,x),x}function wp(l,h,f){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new Ve(new Sa({eb:f})):new Ve(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ep(){}t=Ep.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ra(){}Ra.prototype.g=function(l,h){return new Pt(l,h)};function Pt(l,h){at.call(this),this.g=new dp(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!E(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!E(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Ts(this)}C(Pt,at),Pt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Pt.prototype.close=function(){Nu(this.g)},Pt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var f={};f.__data__=l,l=f}else this.u&&(f={},f.__data__=hu(l),l=f);h.i.push(new W1(h.Ya++,l)),h.G==3&&ja(h)},Pt.prototype.N=function(){this.g.l=null,delete this.j,Nu(this.g),delete this.g,Pt.aa.N.call(this)};function bp(l){mu.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const f in h){l=f;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}C(bp,mu);function Np(){pu.call(this),this.status=1}C(Np,pu);function Ts(l){this.g=l}C(Ts,Ep),Ts.prototype.ua=function(){xt(this.g,"a")},Ts.prototype.ta=function(l){xt(this.g,new bp(l))},Ts.prototype.sa=function(l){xt(this.g,new Np)},Ts.prototype.ra=function(){xt(this.g,"b")},Ra.prototype.createWebChannel=Ra.prototype.g,Pt.prototype.send=Pt.prototype.o,Pt.prototype.open=Pt.prototype.m,Pt.prototype.close=Pt.prototype.close,Kv=function(){return new Ra},Hv=function(){return _a()},Wv=$r,ch={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wa.NO_ERROR=0,wa.TIMEOUT=8,wa.HTTP_ERROR=6,xl=wa,Fm.COMPLETE="complete",qv=Fm,Vm.EventType=Ri,Ri.OPEN="a",Ri.CLOSE="b",Ri.ERROR="c",Ri.MESSAGE="d",at.prototype.listen=at.prototype.K,io=Vm,Ve.prototype.listenOnce=Ve.prototype.L,Ve.prototype.getLastError=Ve.prototype.Ka,Ve.prototype.getLastErrorCode=Ve.prototype.Ba,Ve.prototype.getStatus=Ve.prototype.Z,Ve.prototype.getResponseJson=Ve.prototype.Oa,Ve.prototype.getResponseText=Ve.prototype.oa,Ve.prototype.send=Ve.prototype.ea,Ve.prototype.setWithCredentials=Ve.prototype.Ha,$v=Ve}).apply(typeof Ja<"u"?Ja:typeof self<"u"?self:typeof window<"u"?window:{});const Kg="@firebase/firestore",Gg="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ft=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ft.UNAUTHENTICATED=new ft(null),ft.GOOGLE_CREDENTIALS=new ft("google-credentials-uid"),ft.FIRST_PARTY=new ft("first-party-uid"),ft.MOCK_USER=new ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ti="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds=new Sf("@firebase/firestore");function ks(){return ds.logLevel}function Q(t,...e){if(ds.logLevel<=ue.DEBUG){const n=e.map(Af);ds.debug(`Firestore (${Ti}): ${t}`,...n)}}function Kn(t,...e){if(ds.logLevel<=ue.ERROR){const n=e.map(Af);ds.error(`Firestore (${Ti}): ${t}`,...n)}}function ui(t,...e){if(ds.logLevel<=ue.WARN){const n=e.map(Af);ds.warn(`Firestore (${Ti}): ${t}`,...n)}}function Af(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Gv(t,r,n)}function Gv(t,e,n){let r=`FIRESTORE (${Ti}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Kn(r),new Error(r)}function ve(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Gv(e,s,r)}function ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends Xn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _I{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ft.UNAUTHENTICATED))}shutdown(){}}class wI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class EI{constructor(e){this.t=e,this.currentUser=ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ve(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Un;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Un,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Un)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string",31837,{l:r}),new Qv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string",2055,{h:e}),new ft(e)}}class bI{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ft.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class NI{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new bI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Qg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Bt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ve(this.o===void 0,3512);const r=i=>{i.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Qg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ve(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Qg(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=II(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function de(t,e){return t<e?-1:t>e?1:0}function uh(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return id(s)===id(i)?de(s,i):id(s)?1:-1}return de(t.length,e.length)}const SI=55296,kI=57343;function id(t){const e=t.charCodeAt(0);return e>=SI&&e<=kI}function di(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yg="__name__";class pn{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ne(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return pn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof pn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=pn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return de(e.length,n.length)}static compareSegments(e,n){const r=pn.isNumericId(e),s=pn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?pn.extractNumericId(e).compare(pn.extractNumericId(n)):uh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ir.fromString(e.substring(4,e.length-2))}}class Ne extends pn{construct(e,n,r){return new Ne(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ne(n)}static emptyPath(){return new Ne([])}}const CI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rt extends pn{construct(e,n,r){return new rt(e,n,r)}static isValidIdentifier(e){return CI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Yg}static keyField(){return new rt([Yg])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new H(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new H(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new H(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new H(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rt(n)}static emptyPath(){return new rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.path=e}static fromPath(e){return new ee(Ne.fromString(e))}static fromName(e){return new ee(Ne.fromString(e).popFirst(5))}static empty(){return new ee(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new Ne(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(t,e,n){if(!n)throw new H(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function AI(t,e,n,r){if(e===!0&&r===!0)throw new H(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Xg(t){if(!ee.isDocumentKey(t))throw new H(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Jg(t){if(ee.isDocumentKey(t))throw new H(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Xv(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Vc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne(12329,{type:typeof t})}function an(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Vc(t);throw new H(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function jI(t,e){if(e<=0)throw new H(O.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(t,e){const n={typeString:t};return e&&(n.value=e),n}function oa(t,e){if(!Xv(t))throw new H(O.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new H(O.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg=-62135596800,e0=1e6;class ke{static now(){return ke.fromMillis(Date.now())}static fromDate(e){return ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*e0);return new ke(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Zg)throw new H(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/e0}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ke._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(oa(e,ke._jsonSchema))return new ke(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Zg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ke._jsonSchemaVersion="firestore/timestamp/1.0",ke._jsonSchema={type:qe("string",ke._jsonSchemaVersion),seconds:qe("number"),nanoseconds:qe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{static fromTimestamp(e){return new re(e)}static min(){return new re(new ke(0,0))}static max(){return new re(new ke(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o=-1;function PI(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=re.fromTimestamp(r===1e9?new ke(n+1,0):new ke(n,r));return new Ar(s,ee.empty(),e)}function RI(t){return new Ar(t.readTime,t.key,$o)}class Ar{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ar(re.min(),ee.empty(),$o)}static max(){return new Ar(re.max(),ee.empty(),$o)}}function DI(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ee.comparator(t.documentKey,e.documentKey),n!==0?n:de(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ii(t){if(t.code!==O.FAILED_PRECONDITION||t.message!==VI)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(c=>{++s,c.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(m=>{o[d]=m,++c,c===i&&r(o)},m=>s(m))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function MI(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Si(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Lc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf=-1;function Mc(t){return t==null}function ec(t){return t===0&&1/t==-1/0}function OI(t){return typeof t=="number"&&Number.isInteger(t)&&!ec(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv="";function UI(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=t0(e)),e=FI(t.get(n),e);return t0(e)}function FI(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Jv:n+="";break;default:n+=i}}return n}function t0(t){return t+Jv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ur(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Zv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n){this.comparator=e,this.root=n||nt.EMPTY}insert(e,n){return new De(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,nt.BLACK,null,null))}remove(e){return new De(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Za(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Za(this.root,e,this.comparator,!1)}getReverseIterator(){return new Za(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Za(this.root,e,this.comparator,!0)}}class Za{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??nt.RED,this.left=s??nt.EMPTY,this.right=i??nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new nt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return nt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ne(27949);return e+(this.isRed()?0:1)}}nt.EMPTY=null,nt.RED=!0,nt.BLACK=!1;nt.EMPTY=new class{constructor(){this.size=0}get key(){throw ne(57766)}get value(){throw ne(16141)}get color(){throw ne(16727)}get left(){throw ne(29726)}get right(){throw ne(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new nt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.comparator=e,this.data=new De(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new r0(this.data.getIterator())}getIteratorFrom(e){return new r0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ke)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ke(this.comparator);return n.data=e,n}}class r0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.fields=e,e.sort(rt.comparator)}static empty(){return new Vt([])}unionWith(e){let n=new Ke(rt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Vt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return di(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new e_("Invalid base64 string: "+i):i}}(e);return new ot(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ot.EMPTY_BYTE_STRING=new ot("");const zI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jr(t){if(ve(!!t,39018),typeof t=="string"){let e=0;const n=zI.exec(t);if(ve(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Me(t.seconds),nanos:Me(t.nanos)}}function Me(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Pr(t){return typeof t=="string"?ot.fromBase64String(t):ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_="server_timestamp",n_="__type__",r_="__previous_value__",s_="__local_write_time__";function Rf(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[n_])==null?void 0:r.stringValue)===t_}function Oc(t){const e=t.mapValue.fields[r_];return Rf(e)?Oc(e):e}function qo(t){const e=jr(t.mapValue.fields[s_].timestampValue);return new ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,n,r,s,i,o,c,u,d,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=m}}const tc="(default)";class Wo{constructor(e,n){this.projectId=e,this.database=n||tc}static empty(){return new Wo("","")}get isDefaultDatabase(){return this.database===tc}isEqual(e){return e instanceof Wo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_="__type__",o_="__max__",el={mapValue:{fields:{__type__:{stringValue:o_}}}},a_="__vector__",nc="value";function Rr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Rf(t)?4:qI(t)?9007199254740991:$I(t)?10:11:ne(28295,{value:t})}function Sn(t,e){if(t===e)return!0;const n=Rr(t);if(n!==Rr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qo(t).isEqual(qo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=jr(s.timestampValue),c=jr(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Pr(s.bytesValue).isEqual(Pr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Me(s.geoPointValue.latitude)===Me(i.geoPointValue.latitude)&&Me(s.geoPointValue.longitude)===Me(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Me(s.integerValue)===Me(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Me(s.doubleValue),c=Me(i.doubleValue);return o===c?ec(o)===ec(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return di(t.arrayValue.values||[],e.arrayValue.values||[],Sn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(n0(o)!==n0(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Sn(o[u],c[u])))return!1;return!0}(t,e);default:return ne(52216,{left:t})}}function Ho(t,e){return(t.values||[]).find(n=>Sn(n,e))!==void 0}function hi(t,e){if(t===e)return 0;const n=Rr(t),r=Rr(e);if(n!==r)return de(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return de(t.booleanValue,e.booleanValue);case 2:return function(i,o){const c=Me(i.integerValue||i.doubleValue),u=Me(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return s0(t.timestampValue,e.timestampValue);case 4:return s0(qo(t),qo(e));case 5:return uh(t.stringValue,e.stringValue);case 6:return function(i,o){const c=Pr(i),u=Pr(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const c=i.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const m=de(c[d],u[d]);if(m!==0)return m}return de(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const c=de(Me(i.latitude),Me(o.latitude));return c!==0?c:de(Me(i.longitude),Me(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return i0(t.arrayValue,e.arrayValue);case 10:return function(i,o){var g,b,C,k;const c=i.fields||{},u=o.fields||{},d=(g=c[nc])==null?void 0:g.arrayValue,m=(b=u[nc])==null?void 0:b.arrayValue,p=de(((C=d==null?void 0:d.values)==null?void 0:C.length)||0,((k=m==null?void 0:m.values)==null?void 0:k.length)||0);return p!==0?p:i0(d,m)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===el.mapValue&&o===el.mapValue)return 0;if(i===el.mapValue)return 1;if(o===el.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),d=o.fields||{},m=Object.keys(d);u.sort(),m.sort();for(let p=0;p<u.length&&p<m.length;++p){const g=uh(u[p],m[p]);if(g!==0)return g;const b=hi(c[u[p]],d[m[p]]);if(b!==0)return b}return de(u.length,m.length)}(t.mapValue,e.mapValue);default:throw ne(23264,{he:n})}}function s0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return de(t,e);const n=jr(t),r=jr(e),s=de(n.seconds,r.seconds);return s!==0?s:de(n.nanos,r.nanos)}function i0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=hi(n[s],r[s]);if(i)return i}return de(n.length,r.length)}function fi(t){return dh(t)}function dh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=jr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Pr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ee.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=dh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${dh(n.fields[o])}`;return s+"}"}(t.mapValue):ne(61005,{value:t})}function vl(t){switch(Rr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Oc(t);return e?16+vl(e):16;case 5:return 2*t.stringValue.length;case 6:return Pr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+vl(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Ur(r.fields,(i,o)=>{s+=i.length+vl(o)}),s}(t.mapValue);default:throw ne(13486,{value:t})}}function o0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function hh(t){return!!t&&"integerValue"in t}function Df(t){return!!t&&"arrayValue"in t}function a0(t){return!!t&&"nullValue"in t}function l0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function _l(t){return!!t&&"mapValue"in t}function $I(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[i_])==null?void 0:r.stringValue)===a_}function _o(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ur(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=_o(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=_o(t.arrayValue.values[n]);return e}return{...t}}function qI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===o_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.value=e}static empty(){return new St({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!_l(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=_o(n)}setAll(e){let n=rt.emptyPath(),r={},s=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=_o(o):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());_l(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Sn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];_l(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ur(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new St(_o(this.value))}}function l_(t){const e=[];return Ur(t.fields,(n,r)=>{const s=new rt([n]);if(_l(r)){const i=l_(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Vt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new pt(e,0,re.min(),re.min(),re.min(),St.empty(),0)}static newFoundDocument(e,n,r,s){return new pt(e,1,n,re.min(),r,s,0)}static newNoDocument(e,n){return new pt(e,2,n,re.min(),re.min(),St.empty(),0)}static newUnknownDocument(e,n){return new pt(e,3,n,re.min(),re.min(),St.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=St.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=St.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,n){this.position=e,this.inclusive=n}}function c0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ee.comparator(ee.fromName(o.referenceValue),n.key):r=hi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function u0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Sn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,n="asc"){this.field=e,this.dir=n}}function WI(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{}class $e extends c_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new KI(e,n,r):n==="array-contains"?new YI(e,r):n==="in"?new XI(e,r):n==="not-in"?new JI(e,r):n==="array-contains-any"?new ZI(e,r):new $e(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new GI(e,r):new QI(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(hi(n,this.value)):n!==null&&Rr(this.value)===Rr(n)&&this.matchesComparison(hi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ln extends c_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ln(e,n)}matches(e){return u_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function u_(t){return t.op==="and"}function d_(t){return HI(t)&&u_(t)}function HI(t){for(const e of t.filters)if(e instanceof ln)return!1;return!0}function fh(t){if(t instanceof $e)return t.field.canonicalString()+t.op.toString()+fi(t.value);if(d_(t))return t.filters.map(e=>fh(e)).join(",");{const e=t.filters.map(n=>fh(n)).join(",");return`${t.op}(${e})`}}function h_(t,e){return t instanceof $e?function(r,s){return s instanceof $e&&r.op===s.op&&r.field.isEqual(s.field)&&Sn(r.value,s.value)}(t,e):t instanceof ln?function(r,s){return s instanceof ln&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,c)=>i&&h_(o,s.filters[c]),!0):!1}(t,e):void ne(19439)}function f_(t){return t instanceof $e?function(n){return`${n.field.canonicalString()} ${n.op} ${fi(n.value)}`}(t):t instanceof ln?function(n){return n.op.toString()+" {"+n.getFilters().map(f_).join(" ,")+"}"}(t):"Filter"}class KI extends $e{constructor(e,n,r){super(e,n,r),this.key=ee.fromName(r.referenceValue)}matches(e){const n=ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class GI extends $e{constructor(e,n){super(e,"in",n),this.keys=m_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class QI extends $e{constructor(e,n){super(e,"not-in",n),this.keys=m_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function m_(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ee.fromName(r.referenceValue))}class YI extends $e{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Df(n)&&Ho(n.arrayValue,this.value)}}class XI extends $e{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ho(this.value.arrayValue,n)}}class JI extends $e{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ho(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ho(this.value.arrayValue,n)}}class ZI extends $e{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Df(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ho(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.Te=null}}function d0(t,e=null,n=[],r=[],s=null,i=null,o=null){return new e2(t,e,n,r,s,i,o)}function Vf(t){const e=ie(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>fh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Mc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>fi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>fi(r)).join(",")),e.Te=n}return e.Te}function Lf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!WI(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!h_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!u0(t.startAt,e.startAt)&&u0(t.endAt,e.endAt)}function mh(t){return ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function t2(t,e,n,r,s,i,o,c){return new ki(t,e,n,r,s,i,o,c)}function Mf(t){return new ki(t)}function h0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function p_(t){return t.collectionGroup!==null}function wo(t){const e=ie(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Ke(rt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Ko(i,r))}),n.has(rt.keyField().canonicalString())||e.Ie.push(new Ko(rt.keyField(),r))}return e.Ie}function wn(t){const e=ie(t);return e.Ee||(e.Ee=n2(e,wo(t))),e.Ee}function n2(t,e){if(t.limitType==="F")return d0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ko(s.field,i)});const n=t.endAt?new rc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new rc(t.startAt.position,t.startAt.inclusive):null;return d0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ph(t,e){const n=t.filters.concat([e]);return new ki(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function sc(t,e,n){return new ki(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Uc(t,e){return Lf(wn(t),wn(e))&&t.limitType===e.limitType}function g_(t){return`${Vf(wn(t))}|lt:${t.limitType}`}function Cs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>f_(s)).join(", ")}]`),Mc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>fi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>fi(s)).join(",")),`Target(${r})`}(wn(t))}; limitType=${t.limitType})`}function Fc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ee.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of wo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,c,u){const d=c0(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,wo(r),s)||r.endAt&&!function(o,c,u){const d=c0(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,wo(r),s))}(t,e)}function r2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function y_(t){return(e,n)=>{let r=!1;for(const s of wo(t)){const i=s2(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function s2(t,e,n){const r=t.field.isKeyField()?ee.comparator(e.key,n.key):function(i,o,c){const u=o.data.field(i),d=c.data.field(i);return u!==null&&d!==null?hi(u,d):ne(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ur(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Zv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2=new De(ee.comparator);function Gn(){return i2}const x_=new De(ee.comparator);function oo(...t){let e=x_;for(const n of t)e=e.insert(n.key,n);return e}function v_(t){let e=x_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Zr(){return Eo()}function __(){return Eo()}function Eo(){return new vs(t=>t.toString(),(t,e)=>t.isEqual(e))}const o2=new De(ee.comparator),a2=new Ke(ee.comparator);function he(...t){let e=a2;for(const n of t)e=e.add(n);return e}const l2=new Ke(de);function c2(){return l2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Of(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ec(e)?"-0":e}}function w_(t){return{integerValue:""+t}}function E_(t,e){return OI(e)?w_(e):Of(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(){this._=void 0}}function u2(t,e,n){return t instanceof ic?function(s,i){const o={fields:{[n_]:{stringValue:t_},[s_]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Rf(i)&&(i=Oc(i)),i&&(o.fields[r_]=i),{mapValue:o}}(n,e):t instanceof Go?N_(t,e):t instanceof Qo?T_(t,e):function(s,i){const o=b_(s,i),c=f0(o)+f0(s.Ae);return hh(o)&&hh(s.Ae)?w_(c):Of(s.serializer,c)}(t,e)}function d2(t,e,n){return t instanceof Go?N_(t,e):t instanceof Qo?T_(t,e):n}function b_(t,e){return t instanceof Yo?function(r){return hh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class ic extends zc{}class Go extends zc{constructor(e){super(),this.elements=e}}function N_(t,e){const n=I_(e);for(const r of t.elements)n.some(s=>Sn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Qo extends zc{constructor(e){super(),this.elements=e}}function T_(t,e){let n=I_(e);for(const r of t.elements)n=n.filter(s=>!Sn(s,r));return{arrayValue:{values:n}}}class Yo extends zc{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function f0(t){return Me(t.integerValue||t.doubleValue)}function I_(t){return Df(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,n){this.field=e,this.transform=n}}function f2(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Go&&s instanceof Go||r instanceof Qo&&s instanceof Qo?di(r.elements,s.elements,Sn):r instanceof Yo&&s instanceof Yo?Sn(r.Ae,s.Ae):r instanceof ic&&s instanceof ic}(t.transform,e.transform)}class m2{constructor(e,n){this.version=e,this.transformResults=n}}class Ht{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ht}static exists(e){return new Ht(void 0,e)}static updateTime(e){return new Ht(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Bc{}function S_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Uf(t.key,Ht.none()):new aa(t.key,t.data,Ht.none());{const n=t.data,r=St.empty();let s=new Ke(rt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Fr(t.key,r,new Vt(s.toArray()),Ht.none())}}function p2(t,e,n){t instanceof aa?function(s,i,o){const c=s.value.clone(),u=p0(s.fieldTransforms,i,o.transformResults);c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Fr?function(s,i,o){if(!wl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=p0(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(k_(s)),u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function bo(t,e,n,r){return t instanceof aa?function(i,o,c,u){if(!wl(i.precondition,o))return c;const d=i.value.clone(),m=g0(i.fieldTransforms,u,o);return d.setAll(m),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Fr?function(i,o,c,u){if(!wl(i.precondition,o))return c;const d=g0(i.fieldTransforms,u,o),m=o.data;return m.setAll(k_(i)),m.setAll(d),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,c){return wl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function g2(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=b_(r.transform,s||null);i!=null&&(n===null&&(n=St.empty()),n.set(r.field,i))}return n||null}function m0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&di(r,s,(i,o)=>f2(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class aa extends Bc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Fr extends Bc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function k_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function p0(t,e,n){const r=new Map;ve(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,d2(o,c,n[s]))}return r}function g0(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,u2(i,o,e))}return r}class Uf extends Bc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class y2 extends Bc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&p2(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=bo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=bo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=__();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const u=S_(o,c);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),he())}isEqual(e){return this.batchId===e.batchId&&di(this.mutations,e.mutations,(n,r)=>m0(n,r))&&di(this.baseMutations,e.baseMutations,(n,r)=>m0(n,r))}}class Ff{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ve(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return o2}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Ff(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze,fe;function w2(t){switch(t){case O.OK:return ne(64938);case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return ne(15467,{code:t})}}function C_(t){if(t===void 0)return Kn("GRPC error has no .code"),O.UNKNOWN;switch(t){case ze.OK:return O.OK;case ze.CANCELLED:return O.CANCELLED;case ze.UNKNOWN:return O.UNKNOWN;case ze.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case ze.INTERNAL:return O.INTERNAL;case ze.UNAVAILABLE:return O.UNAVAILABLE;case ze.UNAUTHENTICATED:return O.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case ze.NOT_FOUND:return O.NOT_FOUND;case ze.ALREADY_EXISTS:return O.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return O.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case ze.ABORTED:return O.ABORTED;case ze.OUT_OF_RANGE:return O.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return O.UNIMPLEMENTED;case ze.DATA_LOSS:return O.DATA_LOSS;default:return ne(39323,{code:t})}}(fe=ze||(ze={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2=new Ir([4294967295,4294967295],0);function y0(t){const e=E2().encode(t),n=new Bv;return n.update(e),new Uint8Array(n.digest())}function x0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ir([n,r],0),new Ir([s,i],0)]}class zf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ao(`Invalid padding: ${n}`);if(r<0)throw new ao(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ao(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ao(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ir.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Ir.fromNumber(r)));return s.compare(b2)===1&&(s=new Ir([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=y0(e),[r,s]=x0(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new zf(i,s,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.ge===0)return;const n=y0(e),[r,s]=x0(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ao extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,la.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new $c(re.min(),s,new De(de),Gn(),he())}}class la{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new la(r,n,he(),he(),he())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class A_{constructor(e,n){this.targetId=e,this.Ce=n}}class j_{constructor(e,n,r=ot.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class v0{constructor(){this.ve=0,this.Fe=_0(),this.Me=ot.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=he(),n=he(),r=he();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ne(38017,{changeType:i})}}),new la(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=_0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ve(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class N2{constructor(e){this.Ge=e,this.ze=new Map,this.je=Gn(),this.Je=tl(),this.He=tl(),this.Ye=new De(de)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ne(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(mh(i))if(r===0){const o=new ee(i.path);this.et(n,o,pt.newNoDocument(o,re.min()))}else ve(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const c=this.ut(e),u=c?this.ct(c,e,o):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=Pr(r).toUint8Array()}catch(u){if(u instanceof e_)return ui("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new zf(o,s,i)}catch(u){return ui(u instanceof ao?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const c=this.ot(o);if(c){if(i.current&&mh(c.target)){const u=new ee(c.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,pt.newNoDocument(u,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=he();this.He.forEach((i,o)=>{let c=!0;o.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new $c(e,n,this.Ye,this.je,r);return this.je=Gn(),this.Je=tl(),this.He=tl(),this.Ye=new De(de),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new v0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ke(de),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ke(de),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new v0),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function tl(){return new De(ee.comparator)}function _0(){return new De(ee.comparator)}const T2={asc:"ASCENDING",desc:"DESCENDING"},I2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},S2={and:"AND",or:"OR"};class k2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function gh(t,e){return t.useProto3Json||Mc(e)?e:{value:e}}function oc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function P_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function C2(t,e){return oc(t,e.toTimestamp())}function En(t){return ve(!!t,49232),re.fromTimestamp(function(n){const r=jr(n);return new ke(r.seconds,r.nanos)}(t))}function Bf(t,e){return yh(t,e).canonicalString()}function yh(t,e){const n=function(s){return new Ne(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function R_(t){const e=Ne.fromString(t);return ve(O_(e),10190,{key:e.toString()}),e}function xh(t,e){return Bf(t.databaseId,e.path)}function od(t,e){const n=R_(e);if(n.get(1)!==t.databaseId.projectId)throw new H(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ee(V_(n))}function D_(t,e){return Bf(t.databaseId,e)}function A2(t){const e=R_(t);return e.length===4?Ne.emptyPath():V_(e)}function vh(t){return new Ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function V_(t){return ve(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function w0(t,e,n){return{name:xh(t,e),fields:n.value.mapValue.fields}}function j2(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ne(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,m){return d.useProto3Json?(ve(m===void 0||typeof m=="string",58123),ot.fromBase64String(m||"")):(ve(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),ot.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const m=d.code===void 0?O.UNKNOWN:C_(d.code);return new H(m,d.message||"")}(o);n=new j_(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=od(t,r.document.name),i=En(r.document.updateTime),o=r.document.createTime?En(r.document.createTime):re.min(),c=new St({mapValue:{fields:r.document.fields}}),u=pt.newFoundDocument(s,i,o,c),d=r.targetIds||[],m=r.removedTargetIds||[];n=new El(d,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=od(t,r.document),i=r.readTime?En(r.readTime):re.min(),o=pt.newNoDocument(s,i),c=r.removedTargetIds||[];n=new El([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=od(t,r.document),i=r.removedTargetIds||[];n=new El([],i,s,null)}else{if(!("filter"in e))return ne(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new _2(s,i),c=r.targetId;n=new A_(c,o)}}return n}function P2(t,e){let n;if(e instanceof aa)n={update:w0(t,e.key,e.value)};else if(e instanceof Uf)n={delete:xh(t,e.key)};else if(e instanceof Fr)n={update:w0(t,e.key,e.data),updateMask:z2(e.fieldMask)};else{if(!(e instanceof y2))return ne(16599,{Vt:e.type});n={verify:xh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const c=o.transform;if(c instanceof ic)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Go)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Qo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Yo)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw ne(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:C2(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ne(27497)}(t,e.precondition)),n}function R2(t,e){return t&&t.length>0?(ve(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?En(s.updateTime):En(i);return o.isEqual(re.min())&&(o=En(i)),new m2(o,s.transformResults||[])}(n,e))):[]}function D2(t,e){return{documents:[D_(t,e.path)]}}function V2(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=D_(t,s);const i=function(d){if(d.length!==0)return M_(ln.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(m=>function(g){return{field:As(g.field),direction:O2(g.dir)}}(m))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=gh(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function L2(t){let e=A2(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ve(r===1,65062);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let i=[];n.where&&(i=function(p){const g=L_(p);return g instanceof ln&&d_(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(C){return new Ko(js(C.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(p){let g;return g=typeof p=="object"?p.value:p,Mc(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,b=p.values||[];return new rc(b,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,b=p.values||[];return new rc(b,g)}(n.endAt)),t2(e,s,o,i,c,"F",u,d)}function M2(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function L_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=js(n.unaryFilter.field);return $e.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=js(n.unaryFilter.field);return $e.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=js(n.unaryFilter.field);return $e.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=js(n.unaryFilter.field);return $e.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ne(61313);default:return ne(60726)}}(t):t.fieldFilter!==void 0?function(n){return $e.create(js(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ne(58110);default:return ne(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ln.create(n.compositeFilter.filters.map(r=>L_(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ne(1026)}}(n.compositeFilter.op))}(t):ne(30097,{filter:t})}function O2(t){return T2[t]}function U2(t){return I2[t]}function F2(t){return S2[t]}function As(t){return{fieldPath:t.canonicalString()}}function js(t){return rt.fromServerFormat(t.fieldPath)}function M_(t){return t instanceof $e?function(n){if(n.op==="=="){if(l0(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NAN"}};if(a0(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(l0(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NOT_NAN"}};if(a0(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:As(n.field),op:U2(n.op),value:n.value}}}(t):t instanceof ln?function(n){const r=n.getFilters().map(s=>M_(s));return r.length===1?r[0]:{compositeFilter:{op:F2(n.op),filters:r}}}(t):ne(54877,{filter:t})}function z2(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function O_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,n,r,s,i=re.min(),o=re.min(),c=ot.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new mr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e){this.yt=e}}function $2(t){const e=L2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?sc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(){this.Cn=new W2}addToCollectionParentIndex(e,n){return this.Cn.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Ar.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Ar.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class W2{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ke(Ne.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ke(Ne.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},U_=41943040;class Tt{static withCacheSize(e){return new Tt(e,Tt.DEFAULT_COLLECTION_PERCENTILE,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tt.DEFAULT_COLLECTION_PERCENTILE=10,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tt.DEFAULT=new Tt(U_,Tt.DEFAULT_COLLECTION_PERCENTILE,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tt.DISABLED=new Tt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new mi(0)}static cr(){return new mi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="LruGarbageCollector",H2=1048576;function N0([t,e],[n,r]){const s=de(t,n);return s===0?de(e,r):s}class K2{constructor(e){this.Ir=e,this.buffer=new Ke(N0),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();N0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class G2{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Q(b0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Si(n)?Q(b0,"Ignoring IndexedDB error during garbage collection: ",n):await Ii(n)}await this.Vr(3e5)})}}class Q2{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return U.resolve(Lc.ce);const r=new K2(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Q("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(E0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),E0):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,c,u,d;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(Q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,n))).next(p=>(i=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),ks()<=ue.DEBUG&&Q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-m}ms
	Determined least recently used ${s} in `+(c-o)+`ms
	Removed ${i} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(d-u)+`ms
Total Duration: ${d-m}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function Y2(t,e){return new Q2(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(){this.changes=new vs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,pt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&bo(r.mutation,s,Vt.empty(),ke.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,n,r=he()){const s=Zr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=oo();return i.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Zr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,he()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,s){let i=Gn();const o=Eo(),c=function(){return Eo()}();return n.forEach((u,d)=>{const m=r.get(d.key);s.has(d.key)&&(m===void 0||m.mutation instanceof Fr)?i=i.insert(d.key,d):m!==void 0?(o.set(d.key,m.mutation.getFieldMask()),bo(m.mutation,d,m.mutation.getFieldMask(),ke.now())):o.set(d.key,Vt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,m)=>o.set(d,m)),n.forEach((d,m)=>c.set(d,new J2(m,o.get(d)??null))),c))}recalculateAndSaveOverlays(e,n){const r=Eo();let s=new De((o,c)=>o-c),i=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let m=r.get(u)||Vt.empty();m=c.applyToLocalView(d,m),r.set(u,m);const p=(s.get(c.batchId)||he()).add(u);s=s.insert(c.batchId,p)})}).next(()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,m=u.value,p=__();m.forEach(g=>{if(!i.has(g)){const b=S_(n.get(g),r.get(g));b!==null&&p.set(g,b),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ee.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):p_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(Zr());let c=$o,u=i;return o.next(d=>U.forEach(d,(m,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),i.get(m)?U.resolve():this.remoteDocumentCache.getEntry(e,m).next(g=>{u=u.insert(m,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,he())).next(m=>({batchId:c,changes:v_(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ee(n)).next(r=>{let s=oo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=oo();return this.indexManager.getCollectionParents(e,i).next(c=>U.forEach(c,u=>{const d=function(p,g){return new ki(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(m=>{m.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const m=d.getKey();o.get(m)===null&&(o=o.insert(m,pt.newInvalidDocument(m)))});let c=oo();return o.forEach((u,d)=>{const m=i.get(u);m!==void 0&&bo(m.mutation,d,Vt.empty(),ke.now()),Fc(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return U.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:En(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:$2(s.bundledQuery),readTime:En(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(){this.overlays=new De(ee.comparator),this.qr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Zr();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=Zr(),i=n.length+1,o=new ee(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new De((d,m)=>d-m);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let m=i.get(d.largestBatchId);m===null&&(m=Zr(),i=i.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const c=Zr(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,m)=>c.set(d,m)),!(c.size()>=s)););return U.resolve(c)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new v2(n,r));let i=this.qr.get(n);i===void 0&&(i=he(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(){this.sessionToken=ot.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(){this.Qr=new Ke(Ye.$r),this.Ur=new Ke(Ye.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ye(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ye(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ee(new Ne([])),r=new Ye(n,e),s=new Ye(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ee(new Ne([])),r=new Ye(n,e),s=new Ye(n,e+1);let i=he();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ye(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ye{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ee.comparator(e.key,n.key)||de(e.Yr,n.Yr)}static Kr(e,n){return de(e.Yr,n.Yr)||ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ke(Ye.$r)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new x2(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.Zr=this.Zr.add(new Ye(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?Pf:this.tr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ye(n,0),s=new Ye(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const c=this.Xr(o.Yr);i.push(c)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ke(de);return n.forEach(s=>{const i=new Ye(s,0),o=new Ye(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],c=>{r=r.add(c.Yr)})}),U.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ee.isDocumentKey(i)||(i=i.child(""));const o=new Ye(new ee(i),0);let c=new Ke(de);return this.Zr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.Yr)),!0)},o),U.resolve(this.ti(c))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ve(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return U.forEach(n.mutations,s=>{const i=new Ye(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Ye(n,0),s=this.Zr.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e){this.ri=e,this.docs=function(){return new De(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():pt.newInvalidDocument(n))}getEntries(e,n){let r=Gn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():pt.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Gn();const o=n.path,c=new ee(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:m}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||DI(RI(m),r)<=0||(s.has(m.key)||Fc(n,m))&&(i=i.insert(m.key,m.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ne(9500)}ii(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new iS(this)}getSize(e){return U.resolve(this.size)}}class iS extends X2{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e){this.persistence=e,this.si=new vs(n=>Vf(n),Lf),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.oi=0,this._i=new $f,this.targetCount=0,this.ai=mi.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),U.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new mi(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Pr(n),U.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e,n){this.ui={},this.overlays={},this.ci=new Lc(0),this.li=!1,this.li=!0,this.hi=new nS,this.referenceDelegate=e(this),this.Pi=new oS(this),this.indexManager=new q2,this.remoteDocumentCache=function(s){return new sS(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new B2(n),this.Ii=new eS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new tS,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new rS(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const s=new aS(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return U.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class aS extends LI{constructor(e){super(),this.currentSequenceNumber=e}}class qf{constructor(e){this.persistence=e,this.Ri=new $f,this.Vi=null}static mi(e){return new qf(e)}get fi(){if(this.Vi)return this.Vi;throw ne(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),U.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.fi,r=>{const s=ee.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,re.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return U.or([()=>U.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class ac{constructor(e,n){this.persistence=e,this.pi=new vs(r=>UI(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Y2(this,n)}static mi(e,n){return new ac(e,n)}Ei(){}di(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return U.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?U.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(c=>{c||(r++,i.removeEntry(o,re.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=vl(e.data.value)),n}br(e,n,r){return U.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return U.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=he(),s=he();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Wf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return nT()?8:MI(yt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new lS;return this.Ss(e,n,o).next(c=>{if(i.result=c,this.Vs)return this.bs(e,n,o,c.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(ks()<=ue.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",Cs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),U.resolve()):(ks()<=ue.DEBUG&&Q("QueryEngine","Query:",Cs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(ks()<=ue.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",Cs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wn(n))):U.resolve())}ys(e,n){if(h0(n))return U.resolve(null);let r=wn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=sc(n,null,"F"),r=wn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=he(...i);return this.ps.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Ds(n,c);return this.Cs(n,d,o,u.readTime)?this.ys(e,sc(n,null,"F")):this.vs(e,d,n,u)}))})))}ws(e,n,r,s){return h0(n)||s.isEqual(re.min())?U.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?U.resolve(null):(ks()<=ue.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Cs(n)),this.vs(e,o,n,PI(s,$o)).next(c=>c))})}Ds(e,n){let r=new Ke(y_(e));return n.forEach((s,i)=>{Fc(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return ks()<=ue.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",Cs(n)),this.ps.getDocumentsMatchingQuery(e,n,Ar.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hf="LocalStore",uS=3e8;class dS{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new De(de),this.xs=new vs(i=>Vf(i),Lf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Z2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function hS(t,e,n,r){return new dS(t,e,n,r)}async function z_(t,e){const n=ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],c=[];let u=he();for(const d of s){o.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}for(const d of i){c.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:c}))})})}function fS(t,e){const n=ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(c,u,d,m){const p=d.batch,g=p.keys();let b=U.resolve();return g.forEach(C=>{b=b.next(()=>m.getEntry(u,C)).next(k=>{const P=d.docVersions.get(C);ve(P!==null,48541),k.version.compareTo(P)<0&&(p.applyToRemoteDocument(k,d),k.isValidDocument()&&(k.setReadTime(d.commitVersion),m.addEntry(k)))})}),b.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=he();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function B_(t){const e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function mS(t,e){const n=ie(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const c=[];e.targetChanges.forEach((m,p)=>{const g=s.get(p);if(!g)return;c.push(n.Pi.removeMatchingKeys(i,m.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(i,m.addedDocuments,p)));let b=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?b=b.withResumeToken(ot.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):m.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(m.resumeToken,r)),s=s.insert(p,b),function(k,P,w){return k.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=uS?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(g,b,m)&&c.push(n.Pi.updateTargetData(i,b))});let u=Gn(),d=he();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,m))}),c.push(pS(i,o,e.documentUpdates).next(m=>{u=m.ks,d=m.qs})),!r.isEqual(re.min())){const m=n.Pi.getLastRemoteSnapshotVersion(i).next(p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(m)}return U.waitFor(c).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.Ms=s,i))}function pS(t,e,n){let r=he(),s=he();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Gn();return n.forEach((c,u)=>{const d=i.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(re.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):Q(Hf,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{ks:o,qs:s}})}function gS(t,e){const n=ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Pf),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function yS(t,e){const n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new mr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function _h(t,e,n){const r=ie(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Si(o))throw o;Q(Hf,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function T0(t,e,n){const r=ie(t);let s=re.min(),i=he();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,m){const p=ie(u),g=p.xs.get(m);return g!==void 0?U.resolve(p.Ms.get(g)):p.Pi.getTargetData(d,m)}(r,o,wn(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next(u=>{i=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:re.min(),n?i:he())).next(c=>(xS(r,r2(e),c),{documents:c,Qs:i})))}function xS(t,e,n){let r=t.Os.get(e)||re.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class I0{constructor(){this.activeTargetIds=c2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vS{constructor(){this.Mo=new I0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new I0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0="ConnectivityMonitor";class k0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Q(S0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Q(S0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nl=null;function wh(){return nl===null?nl=function(){return 268435456+Math.round(2147483648*Math.random())}():nl++,"0x"+nl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ad="RestConnection",wS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ES{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===tc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=wh(),c=this.zo(e,n.toUriEncodedString());Q(ad,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,i);const{host:d}=new URL(c),m=bi(d);return this.Jo(e,c,u,r,m).then(p=>(Q(ad,`Received RPC '${e}' ${o}: `,p),p),p=>{throw ui(ad,`RPC '${e}' ${o} failed with error: `,p,"url: ",c,"request:",r),p})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ti}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=wS[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht="WebChannelConnection";class NS extends ES{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=wh();return new Promise((c,u)=>{const d=new $v;d.setWithCredentials(!0),d.listenOnce(qv.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case xl.NO_ERROR:const p=d.getResponseJson();Q(ht,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),c(p);break;case xl.TIMEOUT:Q(ht,`RPC '${e}' ${o} timed out`),u(new H(O.DEADLINE_EXCEEDED,"Request time out"));break;case xl.HTTP_ERROR:const g=d.getStatus();if(Q(ht,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let b=d.getResponseJson();Array.isArray(b)&&(b=b[0]);const C=b==null?void 0:b.error;if(C&&C.status&&C.message){const k=function(w){const E=w.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(E)>=0?E:O.UNKNOWN}(C.status);u(new H(k,C.message))}else u(new H(O.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new H(O.UNAVAILABLE,"Connection failed."));break;default:ne(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{Q(ht,`RPC '${e}' ${o} completed.`)}});const m=JSON.stringify(s);Q(ht,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",m,r,15)})}T_(e,n,r){const s=wh(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Kv(),c=Hv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const m=i.join("");Q(ht,`Creating RPC '${e}' stream ${s}: ${m}`,u);const p=o.createWebChannel(m,u);this.I_(p);let g=!1,b=!1;const C=new bS({Yo:P=>{b?Q(ht,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(g||(Q(ht,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),Q(ht,`RPC '${e}' stream ${s} sending:`,P),p.send(P))},Zo:()=>p.close()}),k=(P,w,E)=>{P.listen(w,v=>{try{E(v)}catch(j){setTimeout(()=>{throw j},0)}})};return k(p,io.EventType.OPEN,()=>{b||(Q(ht,`RPC '${e}' stream ${s} transport opened.`),C.o_())}),k(p,io.EventType.CLOSE,()=>{b||(b=!0,Q(ht,`RPC '${e}' stream ${s} transport closed`),C.a_(),this.E_(p))}),k(p,io.EventType.ERROR,P=>{b||(b=!0,ui(ht,`RPC '${e}' stream ${s} transport errored. Name:`,P.name,"Message:",P.message),C.a_(new H(O.UNAVAILABLE,"The operation could not be completed")))}),k(p,io.EventType.MESSAGE,P=>{var w;if(!b){const E=P.data[0];ve(!!E,16349);const v=E,j=(v==null?void 0:v.error)||((w=v[0])==null?void 0:w.error);if(j){Q(ht,`RPC '${e}' stream ${s} received error:`,j);const D=j.status;let V=function(N){const I=ze[N];if(I!==void 0)return C_(I)}(D),_=j.message;V===void 0&&(V=O.INTERNAL,_="Unknown error status: "+D+" with message "+j.message),b=!0,C.a_(new H(V,_)),p.close()}else Q(ht,`RPC '${e}' stream ${s} received:`,E),C.u_(E)}}),k(c,Wv.STAT_EVENT,P=>{P.stat===ch.PROXY?Q(ht,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===ch.NOPROXY&&Q(ht,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.__()},0),C}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function ld(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(t){return new k2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&Q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="PersistentStream";class q_{constructor(e,n,r,s,i,o,c,u){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(Kn(n.toString()),Kn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new H(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Q(C0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Q(C0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class TS extends q_{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=j2(this.serializer,e),r=function(i){if(!("targetChange"in i))return re.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?re.min():o.readTime?En(o.readTime):re.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=vh(this.serializer),n.addTarget=function(i,o){let c;const u=o.target;if(c=mh(u)?{documents:D2(i,u)}:{query:V2(i,u).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=P_(i,o.resumeToken);const d=gh(i,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(re.min())>0){c.readTime=oc(i,o.snapshotVersion.toTimestamp());const d=gh(i,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=M2(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=vh(this.serializer),n.removeTarget=e,this.q_(n)}}class IS extends q_{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=R2(e.writeResults,e.commitTime),r=En(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=vh(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>P2(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{}class kS extends SS{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new H(O.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,yh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new H(O.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Ho(e,yh(n,r),s,o,c,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(O.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class CS{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Kn(n),this.aa=!1):Q("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="RemoteStore";class AS{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{_s(this)&&(Q(hs,"Restarting streams for network reachability change."),await async function(u){const d=ie(u);d.Ea.add(4),await ca(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Wc(d)}(this))})}),this.Ra=new CS(r,s)}}async function Wc(t){if(_s(t))for(const e of t.da)await e(!0)}async function ca(t){for(const e of t.da)await e(!1)}function W_(t,e){const n=ie(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Yf(n)?Qf(n):Ci(n).O_()&&Gf(n,e))}function Kf(t,e){const n=ie(t),r=Ci(n);n.Ia.delete(e),r.O_()&&H_(n,e),n.Ia.size===0&&(r.O_()?r.L_():_s(n)&&n.Ra.set("Unknown"))}function Gf(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ci(t).Y_(e)}function H_(t,e){t.Va.Ue(e),Ci(t).Z_(e)}function Qf(t){t.Va=new N2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ci(t).start(),t.Ra.ua()}function Yf(t){return _s(t)&&!Ci(t).x_()&&t.Ia.size>0}function _s(t){return ie(t).Ea.size===0}function K_(t){t.Va=void 0}async function jS(t){t.Ra.set("Online")}async function PS(t){t.Ia.forEach((e,n)=>{Gf(t,e)})}async function RS(t,e){K_(t),Yf(t)?(t.Ra.ha(e),Qf(t)):t.Ra.set("Unknown")}async function DS(t,e,n){if(t.Ra.set("Online"),e instanceof j_&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const c of i.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.Ia.delete(c),s.Va.removeTarget(c))}(t,e)}catch(r){Q(hs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await lc(t,r)}else if(e instanceof El?t.Va.Ze(e):e instanceof A_?t.Va.st(e):t.Va.tt(e),!n.isEqual(re.min()))try{const r=await B_(t.localStore);n.compareTo(r)>=0&&await function(i,o){const c=i.Va.Tt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const m=i.Ia.get(d);m&&i.Ia.set(d,m.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const m=i.Ia.get(u);if(!m)return;i.Ia.set(u,m.withResumeToken(ot.EMPTY_BYTE_STRING,m.snapshotVersion)),H_(i,u);const p=new mr(m.target,u,d,m.sequenceNumber);Gf(i,p)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){Q(hs,"Failed to raise snapshot:",r),await lc(t,r)}}async function lc(t,e,n){if(!Si(e))throw e;t.Ea.add(1),await ca(t),t.Ra.set("Offline"),n||(n=()=>B_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q(hs,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Wc(t)})}function G_(t,e){return e().catch(n=>lc(t,n,e))}async function Hc(t){const e=ie(t),n=Dr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Pf;for(;VS(e);)try{const s=await gS(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,LS(e,s)}catch(s){await lc(e,s)}Q_(e)&&Y_(e)}function VS(t){return _s(t)&&t.Ta.length<10}function LS(t,e){t.Ta.push(e);const n=Dr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Q_(t){return _s(t)&&!Dr(t).x_()&&t.Ta.length>0}function Y_(t){Dr(t).start()}async function MS(t){Dr(t).ra()}async function OS(t){const e=Dr(t);for(const n of t.Ta)e.ea(n.mutations)}async function US(t,e,n){const r=t.Ta.shift(),s=Ff.from(r,e,n);await G_(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Hc(t)}async function FS(t,e){e&&Dr(t).X_&&await async function(r,s){if(function(o){return w2(o)&&o!==O.ABORTED}(s.code)){const i=r.Ta.shift();Dr(r).B_(),await G_(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Hc(r)}}(t,e),Q_(t)&&Y_(t)}async function A0(t,e){const n=ie(t);n.asyncQueue.verifyOperationInProgress(),Q(hs,"RemoteStore received new credentials");const r=_s(n);n.Ea.add(3),await ca(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Wc(n)}async function zS(t,e){const n=ie(t);e?(n.Ea.delete(2),await Wc(n)):e||(n.Ea.add(2),await ca(n),n.Ra.set("Unknown"))}function Ci(t){return t.ma||(t.ma=function(n,r,s){const i=ie(n);return i.sa(),new TS(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:jS.bind(null,t),t_:PS.bind(null,t),r_:RS.bind(null,t),H_:DS.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Yf(t)?Qf(t):t.Ra.set("Unknown")):(await t.ma.stop(),K_(t))})),t.ma}function Dr(t){return t.fa||(t.fa=function(n,r,s){const i=ie(n);return i.sa(),new IS(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:MS.bind(null,t),r_:FS.bind(null,t),ta:OS.bind(null,t),na:US.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Hc(t)):(await t.fa.stop(),t.Ta.length>0&&(Q(hs,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Un,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new Xf(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jf(t,e){if(Kn("AsyncQueue",`${e}: ${t}`),Si(t))return new H(O.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{static emptySet(e){return new Xs(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ee.comparator(n.key,r.key):(n,r)=>ee.comparator(n.key,r.key),this.keyedMap=oo(),this.sortedSet=new De(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Xs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Xs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(){this.ga=new De(ee.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ne(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class pi{constructor(e,n,r,s,i,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new pi(e,n,Xs.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class $S{constructor(){this.queries=P0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ie(n),i=s.queries;s.queries=P0(),i.forEach((o,c)=>{for(const u of c.Sa)u.onError(r)})})(this,new H(O.ABORTED,"Firestore shutting down"))}}function P0(){return new vs(t=>g_(t),Uc)}async function X_(t,e){const n=ie(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new BS,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=Jf(o,`Initialization of query '${Cs(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Zf(n)}async function J_(t,e){const n=ie(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function qS(t,e){const n=ie(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.Sa)c.Fa(s)&&(r=!0);o.wa=s}}r&&Zf(n)}function WS(t,e,n){const r=ie(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Zf(t){t.Ca.forEach(e=>{e.next()})}var Eh,R0;(R0=Eh||(Eh={})).Ma="default",R0.Cache="cache";class Z_{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new pi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=pi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Eh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e){this.key=e}}class tw{constructor(e){this.key=e}}class HS{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=he(),this.mutatedKeys=he(),this.eu=y_(e),this.tu=new Xs(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new j0,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,p)=>{const g=s.get(m),b=Fc(this.query,p)?p:null,C=!!g&&this.mutatedKeys.has(g.key),k=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let P=!1;g&&b?g.data.isEqual(b.data)?C!==k&&(r.track({type:3,doc:b}),P=!0):this.su(g,b)||(r.track({type:2,doc:b}),P=!0,(u&&this.eu(b,u)>0||d&&this.eu(b,d)<0)&&(c=!0)):!g&&b?(r.track({type:0,doc:b}),P=!0):g&&!b&&(r.track({type:1,doc:g}),P=!0,(u||d)&&(c=!0)),P&&(b?(o=o.add(b),i=k?i.add(m):i.delete(m)):(o=o.delete(m),i=i.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),i=i.delete(m.key),r.track({type:1,doc:m})}return{tu:o,iu:r,Cs:c,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((m,p)=>function(b,C){const k=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne(20277,{Rt:P})}};return k(b)-k(C)}(m.type,p.type)||this.eu(m.doc,p.doc)),this.ou(r),s=s??!1;const c=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,d=u!==this.Za;return this.Za=u,o.length!==0||d?{snapshot:new pi(this.query,e.tu,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new j0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=he(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new tw(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new ew(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=he();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return pi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const em="SyncEngine";class KS{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class GS{constructor(e){this.key=e,this.hu=!1}}class QS{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new vs(c=>g_(c),Uc),this.Iu=new Map,this.Eu=new Set,this.du=new De(ee.comparator),this.Au=new Map,this.Ru=new $f,this.Vu={},this.mu=new Map,this.fu=mi.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function YS(t,e,n=!0){const r=aw(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await nw(r,e,n,!0),s}async function XS(t,e){const n=aw(t);await nw(n,e,!0,!1)}async function nw(t,e,n,r){const s=await yS(t.localStore,wn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await JS(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&W_(t.remoteStore,s),c}async function JS(t,e,n,r,s){t.pu=(p,g,b)=>async function(k,P,w,E){let v=P.view.ru(w);v.Cs&&(v=await T0(k.localStore,P.query,!1).then(({documents:_})=>P.view.ru(_,v)));const j=E&&E.targetChanges.get(P.targetId),D=E&&E.targetMismatches.get(P.targetId)!=null,V=P.view.applyChanges(v,k.isPrimaryClient,j,D);return V0(k,P.targetId,V.au),V.snapshot}(t,p,g,b);const i=await T0(t.localStore,e,!0),o=new HS(e,i.Qs),c=o.ru(i.documents),u=la.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(c,t.isPrimaryClient,u);V0(t,n,d.au);const m=new KS(e,n,o);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function ZS(t,e,n){const r=ie(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Uc(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await _h(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Kf(r.remoteStore,s.targetId),bh(r,s.targetId)}).catch(Ii)):(bh(r,s.targetId),await _h(r.localStore,s.targetId,!0))}async function ek(t,e){const n=ie(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Kf(n.remoteStore,r.targetId))}async function tk(t,e,n){const r=lk(t);try{const s=await function(o,c){const u=ie(o),d=ke.now(),m=c.reduce((b,C)=>b.add(C.key),he());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",b=>{let C=Gn(),k=he();return u.Ns.getEntries(b,m).next(P=>{C=P,C.forEach((w,E)=>{E.isValidDocument()||(k=k.add(w))})}).next(()=>u.localDocuments.getOverlayedDocuments(b,C)).next(P=>{p=P;const w=[];for(const E of c){const v=g2(E,p.get(E.key).overlayedDocument);v!=null&&w.push(new Fr(E.key,v,l_(v.value.mapValue),Ht.exists(!0)))}return u.mutationQueue.addMutationBatch(b,d,w,c)}).next(P=>{g=P;const w=P.applyToLocalDocumentSet(p,k);return u.documentOverlayCache.saveOverlays(b,P.batchId,w)})}).then(()=>({batchId:g.batchId,changes:v_(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,c,u){let d=o.Vu[o.currentUser.toKey()];d||(d=new De(de)),d=d.insert(c,u),o.Vu[o.currentUser.toKey()]=d}(r,s.batchId,n),await ua(r,s.changes),await Hc(r.remoteStore)}catch(s){const i=Jf(s,"Failed to persist write");n.reject(i)}}async function rw(t,e){const n=ie(t);try{const r=await mS(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(ve(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?ve(o.hu,14607):s.removedDocuments.size>0&&(ve(o.hu,42227),o.hu=!1))}),await ua(n,r,e)}catch(r){await Ii(r)}}function D0(t,e,n){const r=ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const c=o.view.va(e);c.snapshot&&s.push(c.snapshot)}),function(o,c){const u=ie(o);u.onlineState=c;let d=!1;u.queries.forEach((m,p)=>{for(const g of p.Sa)g.va(c)&&(d=!0)}),d&&Zf(u)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function nk(t,e,n){const r=ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new De(ee.comparator);o=o.insert(i,pt.newNoDocument(i,re.min()));const c=he().add(i),u=new $c(re.min(),new Map,new De(de),o,c);await rw(r,u),r.du=r.du.remove(i),r.Au.delete(e),tm(r)}else await _h(r.localStore,e,!1).then(()=>bh(r,e,n)).catch(Ii)}async function rk(t,e){const n=ie(t),r=e.batch.batchId;try{const s=await fS(n.localStore,e);iw(n,r,null),sw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ua(n,s)}catch(s){await Ii(s)}}async function sk(t,e,n){const r=ie(t);try{const s=await function(o,c){const u=ie(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let m;return u.mutationQueue.lookupMutationBatch(d,c).next(p=>(ve(p!==null,37113),m=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,m,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m)).next(()=>u.localDocuments.getDocuments(d,m))})}(r.localStore,e);iw(r,e,n),sw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ua(r,s)}catch(s){await Ii(s)}}function sw(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function iw(t,e,n){const r=ie(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function bh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||ow(t,r)})}function ow(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Kf(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),tm(t))}function V0(t,e,n){for(const r of n)r instanceof ew?(t.Ru.addReference(r.key,e),ik(t,r)):r instanceof tw?(Q(em,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||ow(t,r.key)):ne(19791,{wu:r})}function ik(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Q(em,"New document in limbo: "+n),t.Eu.add(r),tm(t))}function tm(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ee(Ne.fromString(e)),r=t.fu.next();t.Au.set(r,new GS(n)),t.du=t.du.insert(n,r),W_(t.remoteStore,new mr(wn(Mf(n.path)),r,"TargetPurposeLimboResolution",Lc.ce))}}async function ua(t,e,n){const r=ie(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{o.push(r.pu(u,e,n).then(d=>{var m;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(m=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:m.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){s.push(d);const p=Wf.As(u.targetId,d);i.push(p)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(u,d){const m=ie(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>U.forEach(d,g=>U.forEach(g.Es,b=>m.persistence.referenceDelegate.addReference(p,g.targetId,b)).next(()=>U.forEach(g.ds,b=>m.persistence.referenceDelegate.removeReference(p,g.targetId,b)))))}catch(p){if(!Si(p))throw p;Q(Hf,"Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const b=m.Ms.get(g),C=b.snapshotVersion,k=b.withLastLimboFreeSnapshotVersion(C);m.Ms=m.Ms.insert(g,k)}}}(r.localStore,i))}async function ok(t,e){const n=ie(t);if(!n.currentUser.isEqual(e)){Q(em,"User change. New user:",e.toKey());const r=await z_(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(c=>{c.forEach(u=>{u.reject(new H(O.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ua(n,r.Ls)}}function ak(t,e){const n=ie(t),r=n.Au.get(e);if(r&&r.hu)return he().add(r.key);{let s=he();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const c=n.Tu.get(o);s=s.unionWith(c.view.nu)}return s}}function aw(t){const e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=rw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ak.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nk.bind(null,e),e.Pu.H_=qS.bind(null,e.eventManager),e.Pu.yu=WS.bind(null,e.eventManager),e}function lk(t){const e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sk.bind(null,e),e}class cc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return hS(this.persistence,new cS,e.initialUser,this.serializer)}Cu(e){return new F_(qf.mi,this.serializer)}Du(e){return new vS}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}cc.provider={build:()=>new cc};class ck extends cc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ve(this.persistence.referenceDelegate instanceof ac,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new G2(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Tt.withCacheSize(this.cacheSizeBytes):Tt.DEFAULT;return new F_(r=>ac.mi(r,n),this.serializer)}}class Nh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>D0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ok.bind(null,this.syncEngine),await zS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new $S}()}createDatastore(e){const n=qc(e.databaseInfo.databaseId),r=function(i){return new NS(i)}(e.databaseInfo);return function(i,o,c,u){return new kS(i,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,c){return new AS(r,s,i,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>D0(this.syncEngine,n,0),function(){return k0.v()?new k0:new _S}())}createSyncEngine(e,n){return function(s,i,o,c,u,d,m){const p=new QS(s,i,o,c,u,d);return m&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ie(s);Q(hs,"RemoteStore shutting down."),i.Ea.add(5),await ca(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Nh.provider={build:()=>new Nh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Kn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr="FirestoreClient";class uk{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ft.UNAUTHENTICATED,this.clientId=jf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Q(Vr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Q(Vr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Un;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Jf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function cd(t,e){t.asyncQueue.verifyOperationInProgress(),Q(Vr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await z_(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function L0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await dk(t);Q(Vr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>A0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>A0(e.remoteStore,s)),t._onlineComponents=e}async function dk(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q(Vr,"Using user provided OfflineComponentProvider");try{await cd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===O.FAILED_PRECONDITION||s.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ui("Error using user provided cache. Falling back to memory cache: "+n),await cd(t,new cc)}}else Q(Vr,"Using default OfflineComponentProvider"),await cd(t,new ck(void 0));return t._offlineComponents}async function cw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q(Vr,"Using user provided OnlineComponentProvider"),await L0(t,t._uninitializedComponentsProvider._online)):(Q(Vr,"Using default OnlineComponentProvider"),await L0(t,new Nh))),t._onlineComponents}function hk(t){return cw(t).then(e=>e.syncEngine)}async function uw(t){const e=await cw(t),n=e.eventManager;return n.onListen=YS.bind(null,e.syncEngine),n.onUnlisten=ZS.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=XS.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ek.bind(null,e.syncEngine),n}function fk(t,e,n={}){const r=new Un;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,d){const m=new lw({next:g=>{m.Nu(),o.enqueueAndForget(()=>J_(i,p));const b=g.docs.has(c);!b&&g.fromCache?d.reject(new H(O.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&g.fromCache&&u&&u.source==="server"?d.reject(new H(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new Z_(Mf(c.path),m,{includeMetadataChanges:!0,qa:!0});return X_(i,p)}(await uw(t),t.asyncQueue,e,n,r)),r.promise}function mk(t,e,n={}){const r=new Un;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,d){const m=new lw({next:g=>{m.Nu(),o.enqueueAndForget(()=>J_(i,p)),g.fromCache&&u.source==="server"?d.reject(new H(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new Z_(c,m,{includeMetadataChanges:!0,qa:!0});return X_(i,p)}(await uw(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="firestore.googleapis.com",O0=!0;class U0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new H(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hw,this.ssl=O0}else this.host=e.host,this.ssl=e.ssl??O0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=U_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<H2)throw new H(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dw(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new H(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new H(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new H(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new U0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new U0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new _I;switch(r.type){case"firstParty":return new NI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=M0.get(n);r&&(Q("ComponentProvider","Removing Datastore"),M0.delete(n),r.terminate())}(this),Promise.resolve()}}function pk(t,e,n,r={}){var d;t=an(t,Kc);const s=bi(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(Dv(`https://${c}`),Vv("Firestore",!0)),i.host!==hw&&i.host!==c&&ui("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:c,ssl:s,emulatorOptions:r};if(!cs(u,o)&&(t._setSettings(u),r.mockUserToken)){let m,p;if(typeof r.mockUserToken=="string")m=r.mockUserToken,p=ft.MOCK_USER;else{m=KN(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new H(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new ft(g)}t._authCredentials=new wI(new Qv(m,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zr(this.firestore,e,this._query)}}class Ue{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ue(this.firestore,e,this._key)}toJSON(){return{type:Ue._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(oa(n,Ue._jsonSchema))return new Ue(e,r||null,new ee(Ne.fromString(n.referencePath)))}}Ue._jsonSchemaVersion="firestore/documentReference/1.0",Ue._jsonSchema={type:qe("string",Ue._jsonSchemaVersion),referencePath:qe("string")};class Sr extends zr{constructor(e,n,r){super(e,n,Mf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ue(this.firestore,null,new ee(e))}withConverter(e){return new Sr(this.firestore,e,this._path)}}function le(t,e,...n){if(t=Ge(t),Yv("collection","path",e),t instanceof Kc){const r=Ne.fromString(e,...n);return Jg(r),new Sr(t,null,r)}{if(!(t instanceof Ue||t instanceof Sr))throw new H(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return Jg(r),new Sr(t.firestore,null,r)}}function wt(t,e,...n){if(t=Ge(t),arguments.length===1&&(e=jf.newId()),Yv("doc","path",e),t instanceof Kc){const r=Ne.fromString(e,...n);return Xg(r),new Ue(t,null,new ee(r))}{if(!(t instanceof Ue||t instanceof Sr))throw new H(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return Xg(r),new Ue(t.firestore,t instanceof Sr?t.converter:null,new ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0="AsyncQueue";class z0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $_(this,"async_queue_retry"),this._c=()=>{const r=ld();r&&Q(F0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=ld();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=ld();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Un;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Si(e))throw e;Q(F0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Kn("INTERNAL UNHANDLED ERROR: ",B0(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Xf.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ne(47125,{Pc:B0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function B0(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class ws extends Kc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new z0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new z0(e),this._firestoreClient=void 0,await e}}}function gk(t,e){const n=typeof t=="object"?t:Uv(),r=typeof t=="string"?t:tc,s=Cf(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=WN("firestore");i&&pk(s,...i)}return s}function nm(t){if(t._terminated)throw new H(O.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||yk(t),t._firestoreClient}function yk(t){var r,s,i;const e=t._freezeSettings(),n=function(c,u,d,m){return new BI(c,u,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,dw(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new uk(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $t(ot.fromBase64String(e))}catch(n){throw new H(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new $t(ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:$t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(oa(e,$t._jsonSchema))return $t.fromBase64String(e.bytes)}}$t._jsonSchemaVersion="firestore/bytes/1.0",$t._jsonSchema={type:qe("string",$t._jsonSchemaVersion),bytes:qe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:bn._jsonSchemaVersion}}static fromJSON(e){if(oa(e,bn._jsonSchema))return new bn(e.latitude,e.longitude)}}bn._jsonSchemaVersion="firestore/geoPoint/1.0",bn._jsonSchema={type:qe("string",bn._jsonSchemaVersion),latitude:qe("number"),longitude:qe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Nn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(oa(e,Nn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Nn(e.vectorValues);throw new H(O.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Nn._jsonSchemaVersion="firestore/vectorValue/1.0",Nn._jsonSchema={type:qe("string",Nn._jsonSchemaVersion),vectorValues:qe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk=/^__.*__$/;class vk{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Fr(e,this.data,this.fieldMask,n,this.fieldTransforms):new aa(e,this.data,n,this.fieldTransforms)}}class fw{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Fr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function mw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne(40011,{Ac:t})}}class rm{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new rm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return uc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(mw(this.Ac)&&xk.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class _k{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||qc(e)}Cc(e,n,r,s=!1){return new rm({Ac:e,methodName:n,Dc:r,path:rt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yc(t){const e=t._freezeSettings(),n=qc(t._databaseId);return new _k(t._databaseId,!!e.ignoreUndefinedProperties,n)}function pw(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);im("Data must be an object, but it was:",o,r);const c=gw(r,o);let u,d;if(i.merge)u=new Vt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const m=[];for(const p of i.mergeFields){const g=Th(e,p,n);if(!o.contains(g))throw new H(O.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);xw(m,g)||m.push(g)}u=new Vt(m),d=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=o.fieldTransforms;return new vk(new St(c),u,d)}class Xc extends Qc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xc}}class sm extends Qc{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new Yo(e.serializer,E_(e.serializer,this.Fc));return new h2(e.path,n)}isEqual(e){return e instanceof sm&&this.Fc===e.Fc}}function wk(t,e,n,r){const s=t.Cc(1,e,n);im("Data must be an object, but it was:",s,r);const i=[],o=St.empty();Ur(r,(u,d)=>{const m=om(e,u,n);d=Ge(d);const p=s.yc(m);if(d instanceof Xc)i.push(m);else{const g=da(d,p);g!=null&&(i.push(m),o.set(m,g))}});const c=new Vt(i);return new fw(o,c,s.fieldTransforms)}function Ek(t,e,n,r,s,i){const o=t.Cc(1,e,n),c=[Th(e,r,n)],u=[s];if(i.length%2!=0)throw new H(O.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)c.push(Th(e,i[g])),u.push(i[g+1]);const d=[],m=St.empty();for(let g=c.length-1;g>=0;--g)if(!xw(d,c[g])){const b=c[g];let C=u[g];C=Ge(C);const k=o.yc(b);if(C instanceof Xc)d.push(b);else{const P=da(C,k);P!=null&&(d.push(b),m.set(b,P))}}const p=new Vt(d);return new fw(m,p,o.fieldTransforms)}function bk(t,e,n,r=!1){return da(n,t.Cc(r?4:3,e))}function da(t,e){if(yw(t=Ge(t)))return im("Unsupported field value:",e,t),gw(t,e);if(t instanceof Qc)return function(r,s){if(!mw(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const c of r){let u=da(c,s.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ge(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return E_(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ke.fromDate(r);return{timestampValue:oc(s.serializer,i)}}if(r instanceof ke){const i=new ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:oc(s.serializer,i)}}if(r instanceof bn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $t)return{bytesValue:P_(s.serializer,r._byteString)};if(r instanceof Ue){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Bf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Nn)return function(o,c){return{mapValue:{fields:{[i_]:{stringValue:a_},[nc]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return Of(c.serializer,d)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Vc(r)}`)}(t,e)}function gw(t,e){const n={};return Zv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ur(t,(r,s)=>{const i=da(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function yw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ke||t instanceof bn||t instanceof $t||t instanceof Ue||t instanceof Qc||t instanceof Nn)}function im(t,e,n){if(!yw(n)||!Xv(n)){const r=Vc(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Th(t,e,n){if((e=Ge(e))instanceof Gc)return e._internalPath;if(typeof e=="string")return om(t,e);throw uc("Field path arguments must be of type string or ",t,!1,void 0,n)}const Nk=new RegExp("[~\\*/\\[\\]]");function om(t,e,n){if(e.search(Nk)>=0)throw uc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Gc(...e.split("."))._internalPath}catch{throw uc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function uc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new H(O.INVALID_ARGUMENT,c+t+u)}function xw(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ue(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Tk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Jc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Tk extends vw{data(){return super.data()}}function Jc(t,e){return typeof e=="string"?om(t,e):e instanceof Gc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class am{}class lm extends am{}function me(t,e,...n){let r=[];e instanceof am&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof cm).length,c=i.filter(u=>u instanceof Zc).length;if(o>1||o>0&&c>0)throw new H(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Zc extends lm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Zc(e,n,r)}_apply(e){const n=this._parse(e);return _w(e._query,n),new zr(e.firestore,e.converter,ph(e._query,n))}_parse(e){const n=Yc(e.firestore);return function(i,o,c,u,d,m,p){let g;if(d.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new H(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){q0(p,m);const C=[];for(const k of p)C.push($0(u,i,k));g={arrayValue:{values:C}}}else g=$0(u,i,p)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||q0(p,m),g=bk(c,o,p,m==="in"||m==="not-in");return $e.create(d,m,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function xe(t,e,n){const r=e,s=Jc("where",t);return Zc._create(s,r,n)}class cm extends am{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new cm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ln.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const c=i.getFlattenedFilters();for(const u of c)_w(o,u),o=ph(o,u)}(e._query,n),new zr(e.firestore,e.converter,ph(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class um extends lm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new um(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new H(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new H(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ko(i,o)}(e._query,this._field,this._direction);return new zr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new ki(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function eu(t,e="asc"){const n=e,r=Jc("orderBy",t);return um._create(r,n)}class dm extends lm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new dm(e,n,r)}_apply(e){return new zr(e.firestore,e.converter,sc(e._query,this._limit,this._limitType))}}function Xo(t){return jI("limit",t),dm._create("limit",t,"F")}function $0(t,e,n){if(typeof(n=Ge(n))=="string"){if(n==="")throw new H(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!p_(e)&&n.indexOf("/")!==-1)throw new H(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ne.fromString(n));if(!ee.isDocumentKey(r))throw new H(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return o0(t,new ee(r))}if(n instanceof Ue)return o0(t,n._key);throw new H(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vc(n)}.`)}function q0(t,e){if(!Array.isArray(t)||t.length===0)throw new H(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _w(t,e){const n=function(s,i){for(const o of s)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new H(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Sk{convertValue(e,n="none"){switch(Rr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Me(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Pr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ur(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[nc].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Me(o.doubleValue));return new Nn(n)}convertGeoPoint(e){return new bn(Me(e.latitude),Me(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Oc(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(qo(e));default:return null}}convertTimestamp(e){const n=jr(e);return new ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ne.fromString(e);ve(O_(r),9688,{name:e});const s=new Wo(r.get(1),r.get(3)),i=new ee(r.popFirst(5));return s.isEqual(n)||Kn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ww(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class lo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ns extends vw{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new bl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Jc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new H(O.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ns._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ns._jsonSchemaVersion="firestore/documentSnapshot/1.0",ns._jsonSchema={type:qe("string",ns._jsonSchemaVersion),bundleSource:qe("string","DocumentSnapshot"),bundleName:qe("string"),bundle:qe("string")};class bl extends ns{data(e={}){return super.data(e)}}class Js{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new lo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new bl(this._firestore,this._userDataWriter,r.key,r,new lo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const u=new bl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new lo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new bl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new lo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,m=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),m=o.indexOf(c.doc.key)),{type:kk(c.type),doc:u,oldIndex:d,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new H(O.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Js._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=jf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function kk(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(t){t=an(t,Ue);const e=an(t.firestore,ws);return fk(nm(e),t._key).then(n=>Ck(e,t,n))}Js._jsonSchemaVersion="firestore/querySnapshot/1.0",Js._jsonSchema={type:qe("string",Js._jsonSchemaVersion),bundleSource:qe("string","QuerySnapshot"),bundleName:qe("string"),bundle:qe("string")};class Ew extends Sk{constructor(e){super(),this.firestore=e}convertBytes(e){return new $t(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ue(this.firestore,null,n)}}function pe(t){t=an(t,zr);const e=an(t.firestore,ws),n=nm(e),r=new Ew(e);return Ik(t._query),mk(n,t._query).then(s=>new Js(e,r,t,s))}function bw(t,e,n){t=an(t,Ue);const r=an(t.firestore,ws),s=ww(t.converter,e);return tu(r,[pw(Yc(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Ht.none())])}function gi(t,e,n,...r){t=an(t,Ue);const s=an(t.firestore,ws),i=Yc(s);let o;return o=typeof(e=Ge(e))=="string"||e instanceof Gc?Ek(i,"updateDoc",t._key,e,n,r):wk(i,"updateDoc",t._key,e),tu(s,[o.toMutation(t._key,Ht.exists(!0))])}function Nw(t){return tu(an(t.firestore,ws),[new Uf(t._key,Ht.none())])}function fs(t,e){const n=an(t.firestore,ws),r=wt(t),s=ww(t.converter,e);return tu(n,[pw(Yc(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Ht.exists(!1))]).then(()=>r)}function tu(t,e){return function(r,s){const i=new Un;return r.asyncQueue.enqueueAndForget(async()=>tk(await hk(r),s,i)),i.promise}(nm(t),e)}function Ck(t,e,n){const r=n.docs.get(e._key),s=new Ew(t);return new ns(t,s,e._key,r,new lo(n.hasPendingWrites,n.fromCache),e.converter)}function Ih(t){return new sm("increment",t)}(function(e,n=!0){(function(s){Ti=s})(Ni),ci(new us("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new ws(new EI(r.getProvider("auth-internal")),new TI(o,r.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new H(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wo(d.options.projectId,m)}(o,s),o);return i={useFetchStreams:n,...i},c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),Tr(Kg,Gg,e),Tr(Kg,Gg,"esm2020")})();var Ak="firebase",jk="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tr(Ak,jk,"app");function Tw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Pk=Tw,Iw=new sa("auth","Firebase",Tw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=new Sf("@firebase/auth");function Rk(t,...e){dc.logLevel<=ue.WARN&&dc.warn(`Auth (${Ni}): ${t}`,...e)}function Nl(t,...e){dc.logLevel<=ue.ERROR&&dc.error(`Auth (${Ni}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(t,...e){throw hm(t,...e)}function Tn(t,...e){return hm(t,...e)}function Sw(t,e,n){const r={...Pk(),[e]:n};return new sa("auth","Firebase",r).create(e,{appName:t.name})}function zn(t){return Sw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Iw.create(t,...e)}function te(t,e,...n){if(!t)throw hm(e,...n)}function Vn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Nl(e),new Error(e)}function Qn(t,e){t||Vn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function Dk(){return W0()==="http:"||W0()==="https:"}function W0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Dk()||ZN()||"connection"in navigator)?navigator.onLine:!0}function Lk(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,n){this.shortDelay=e,this.longDelay=n,Qn(n>e,"Short delay should be less than long delay!"),this.isMobile=YN()||eT()}get(){return Vk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(t,e){Qn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Uk=new ha(3e4,6e4);function Br(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Jn(t,e,n,r,s={}){return Cw(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=ia({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...i};return JN()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&bi(t.emulatorConfig.host)&&(d.credentials="include"),kw.fetch()(await Aw(t,t.config.apiHost,n,c),d)})}async function Cw(t,e,n){t._canInitEmulator=!1;const r={...Mk,...e};try{const s=new zk(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw rl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw rl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw rl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw rl(t,"user-disabled",o);const m=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Sw(t,m,d);cn(t,m)}}catch(s){if(s instanceof Xn)throw s;cn(t,"network-request-failed",{message:String(s)})}}async function fa(t,e,n,r,s={}){const i=await Jn(t,e,n,r,s);return"mfaPendingCredential"in i&&cn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Aw(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?fm(t.config,s):`${t.config.apiScheme}://${s}`;return Ok.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function Fk(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Tn(this.auth,"network-request-failed")),Uk.get())})}}function rl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Tn(t,e,r);return s.customData._tokenResponse=n,s}function H0(t){return t!==void 0&&t.enterprise!==void 0}class Bk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Fk(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function $k(t,e){return Jn(t,"GET","/v2/recaptchaConfig",Br(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qk(t,e){return Jn(t,"POST","/v1/accounts:delete",e)}async function hc(t,e){return Jn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function No(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Wk(t,e=!1){const n=Ge(t),r=await n.getIdToken(e),s=mm(r);te(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:No(ud(s.auth_time)),issuedAtTime:No(ud(s.iat)),expirationTime:No(ud(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function ud(t){return Number(t)*1e3}function mm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Nl("JWT malformed, contained fewer than 3 sections"),null;try{const s=Av(n);return s?JSON.parse(s):(Nl("Failed to decode base64 JWT payload"),null)}catch(s){return Nl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function K0(t){const e=mm(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Xn&&Hk(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Hk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=No(this.lastLoginAt),this.creationTime=No(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fc(t){var p;const e=t.auth,n=await t.getIdToken(),r=await yi(t,hc(e,{idToken:n}));te(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(p=s.providerUserInfo)!=null&&p.length?jw(s.providerUserInfo):[],o=Qk(t.providerData,i),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),d=c?u:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new kh(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,m)}async function Gk(t){const e=Ge(t);await fc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Qk(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function jw(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yk(t,e){const n=await Cw(t,{},async()=>{const r=ia({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await Aw(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return t.emulatorConfig&&bi(t.emulatorConfig.host)&&(u.credentials="include"),kw.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Xk(t,e){return Jn(t,"POST","/v2/accounts:revokeToken",Br(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):K0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){te(e.length!==0,"internal-error");const n=K0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await Yk(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Zs;return r&&(te(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(te(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(te(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zs,this.toJSON())}_performRefresh(){return Vn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class tn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new Kk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new kh(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await yi(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Wk(this,e)}reload(){return Gk(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new tn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await fc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Bt(this.auth.app))return Promise.reject(zn(this.auth));const e=await this.getIdToken();return await yi(this,qk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:b,providerData:C,stsTokenManager:k}=n;te(p&&k,e,"internal-error");const P=Zs.fromJSON(this.name,k);te(typeof p=="string",e,"internal-error"),rr(r,e.name),rr(s,e.name),te(typeof g=="boolean",e,"internal-error"),te(typeof b=="boolean",e,"internal-error"),rr(i,e.name),rr(o,e.name),rr(c,e.name),rr(u,e.name),rr(d,e.name),rr(m,e.name);const w=new tn({uid:p,auth:e,email:s,emailVerified:g,displayName:r,isAnonymous:b,photoURL:o,phoneNumber:i,tenantId:c,stsTokenManager:P,createdAt:d,lastLoginAt:m});return C&&Array.isArray(C)&&(w.providerData=C.map(E=>({...E}))),u&&(w._redirectEventId=u),w}static async _fromIdTokenResponse(e,n,r=!1){const s=new Zs;s.updateFromServerResponse(n);const i=new tn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await fc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];te(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?jw(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new Zs;c.updateFromIdToken(r);const u=new tn({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new kh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0=new Map;function Ln(t){Qn(t instanceof Function,"Expected a class definition");let e=G0.get(t);return e?(Qn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,G0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Pw.type="NONE";const Q0=Pw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(t,e,n){return`firebase:${t}:${e}:${n}`}class ei{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Tl(this.userKey,s.apiKey,i),this.fullPersistenceKey=Tl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await hc(this.auth,{idToken:e}).catch(()=>{});return n?tn._fromGetAccountInfoResponse(this.auth,n,e):null}return tn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ei(Ln(Q0),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Ln(Q0);const o=Tl(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const m=await d._get(o);if(m){let p;if(typeof m=="string"){const g=await hc(e,{idToken:m}).catch(()=>{});if(!g)break;p=await tn._fromGetAccountInfoResponse(e,g,m)}else p=tn._fromJSON(e,m);d!==i&&(c=p),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new ei(i,e,r):(i=u[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new ei(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Lw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Rw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ow(e))return"Blackberry";if(Uw(e))return"Webos";if(Dw(e))return"Safari";if((e.includes("chrome/")||Vw(e))&&!e.includes("edge/"))return"Chrome";if(Mw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Rw(t=yt()){return/firefox\//i.test(t)}function Dw(t=yt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Vw(t=yt()){return/crios\//i.test(t)}function Lw(t=yt()){return/iemobile/i.test(t)}function Mw(t=yt()){return/android/i.test(t)}function Ow(t=yt()){return/blackberry/i.test(t)}function Uw(t=yt()){return/webos/i.test(t)}function pm(t=yt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Jk(t=yt()){var e;return pm(t)&&!!((e=window.navigator)!=null&&e.standalone)}function Zk(){return tT()&&document.documentMode===10}function Fw(t=yt()){return pm(t)||Mw(t)||Uw(t)||Ow(t)||/windows phone/i.test(t)||Lw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(t,e=[]){let n;switch(t){case"Browser":n=Y0(yt());break;case"Worker":n=`${Y0(yt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ni}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const u=e(i);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tC(t,e={}){return Jn(t,"GET","/v2/passwordPolicy",Br(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC=6;class rC{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??nC,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new X0(this),this.idTokenSubscription=new X0(this),this.beforeStateQueue=new eC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Iw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ln(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await ei.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await hc(this,{idToken:e}),r=await tn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Bt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,c=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await fc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Lk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Bt(this.app))return Promise.reject(zn(this));const n=e?Ge(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Bt(this.app)?Promise.reject(zn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Bt(this.app)?Promise.reject(zn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ln(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await tC(this),n=new rC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new sa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Xk(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ln(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await ei.create(this,[Ln(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Bt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Rk(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Es(t){return Ge(t)}class X0{constructor(e){this.auth=e,this.observer=null,this.addObserver=cT(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function iC(t){nu=t}function Bw(t){return nu.loadJS(t)}function oC(){return nu.recaptchaEnterpriseScript}function aC(){return nu.gapiScript}function lC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class cC{constructor(){this.enterprise=new uC}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class uC{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const dC="recaptcha-enterprise",$w="NO_RECAPTCHA";class hC{constructor(e){this.type=dC,this.auth=Es(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,c)=>{$k(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new Bk(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function s(i,o,c){const u=window.grecaptcha;H0(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o($w)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new cC().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(c=>{if(!n&&H0(window.grecaptcha))s(c,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=oC();u.length!==0&&(u+=c),Bw(u).then(()=>{s(c,i,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function J0(t,e,n,r=!1,s=!1){const i=new hC(t);let o;if(s)o=$w;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Ch(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await J0(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await J0(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(t,e){const n=Cf(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(cs(i,e??{}))return s;cn(s,"already-initialized")}return n.initialize({options:e})}function mC(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ln);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function pC(t,e,n){const r=Es(t);te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=qw(e),{host:o,port:c}=gC(e),u=c===null?"":`:${c}`,d={url:`${i}//${o}${u}/`},m=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){te(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),te(cs(d,r.config.emulator)&&cs(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,bi(o)?(Dv(`${i}//${o}${u}`),Vv("Auth",!0)):yC()}function qw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function gC(t){const e=qw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Z0(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Z0(o)}}}function Z0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function yC(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Vn("not implemented")}_getIdTokenResponse(e){return Vn("not implemented")}_linkToIdToken(e,n){return Vn("not implemented")}_getReauthenticationResolver(e){return Vn("not implemented")}}async function xC(t,e){return Jn(t,"POST","/v1/accounts:update",e)}async function vC(t,e){return Jn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _C(t,e){return fa(t,"POST","/v1/accounts:signInWithPassword",Br(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wC(t,e){return fa(t,"POST","/v1/accounts:signInWithEmailLink",Br(t,e))}async function EC(t,e){return fa(t,"POST","/v1/accounts:signInWithEmailLink",Br(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo extends gm{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Jo(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Jo(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ch(e,n,"signInWithPassword",_C);case"emailLink":return wC(e,{email:this._email,oobCode:this._password});default:cn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ch(e,r,"signUpPassword",vC);case"emailLink":return EC(e,{idToken:n,email:this._email,oobCode:this._password});default:cn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ti(t,e){return fa(t,"POST","/v1/accounts:signInWithIdp",Br(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC="http://localhost";class ms extends gm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ms(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):cn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new ms(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ti(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ti(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ti(e,n)}buildRequest(){const e={requestUri:bC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ia(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function TC(t){const e=ro(so(t)).link,n=e?ro(so(e)).deep_link_id:null,r=ro(so(t)).deep_link_id;return(r?ro(so(r)).link:null)||r||n||e||t}class ym{constructor(e){const n=ro(so(e)),r=n.apiKey??null,s=n.oobCode??null,i=NC(n.mode??null);te(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=TC(e);try{return new ym(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(){this.providerId=Ai.PROVIDER_ID}static credential(e,n){return Jo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=ym.parseLink(n);return te(r,"argument-error"),Jo._fromEmailAndCode(e,r.code,r.tenantId)}}Ai.PROVIDER_ID="password";Ai.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ai.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma extends Ww{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends ma{constructor(){super("facebook.com")}static credential(e){return ms._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lr.credential(e.oauthAccessToken)}catch{return null}}}lr.FACEBOOK_SIGN_IN_METHOD="facebook.com";lr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends ma{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ms._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return cr.credential(n,r)}catch{return null}}}cr.GOOGLE_SIGN_IN_METHOD="google.com";cr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends ma{constructor(){super("github.com")}static credential(e){return ms._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ur.credential(e.oauthAccessToken)}catch{return null}}}ur.GITHUB_SIGN_IN_METHOD="github.com";ur.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends ma{constructor(){super("twitter.com")}static credential(e,n){return ms._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return dr.credential(n,r)}catch{return null}}}dr.TWITTER_SIGN_IN_METHOD="twitter.com";dr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IC(t,e){return fa(t,"POST","/v1/accounts:signUp",Br(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await tn._fromIdTokenResponse(e,r,s),o=ey(r);return new ps({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=ey(r);return new ps({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function ey(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc extends Xn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,mc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new mc(e,n,r,s)}}function Hw(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?mc._fromErrorAndOperation(t,i,e,r):i})}async function SC(t,e,n=!1){const r=await yi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ps._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kC(t,e,n=!1){const{auth:r}=t;if(Bt(r.app))return Promise.reject(zn(r));const s="reauthenticate";try{const i=await yi(t,Hw(r,s,e,t),n);te(i.idToken,r,"internal-error");const o=mm(i.idToken);te(o,r,"internal-error");const{sub:c}=o;return te(t.uid===c,r,"user-mismatch"),ps._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&cn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kw(t,e,n=!1){if(Bt(t.app))return Promise.reject(zn(t));const r="signIn",s=await Hw(t,r,e),i=await ps._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function CC(t,e){return Kw(Es(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gw(t){const e=Es(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function AC(t,e,n){if(Bt(t.app))return Promise.reject(zn(t));const r=Es(t),o=await Ch(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",IC).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Gw(t),u}),c=await ps._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function jC(t,e,n){return Bt(t.app)?Promise.reject(zn(t)):CC(Ge(t),Ai.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Gw(t),r})}function PC(t,e){return RC(Ge(t),null,e)}async function RC(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const o=await yi(t,xC(r,i));await t._updateTokensIfNecessary(o,!0)}function DC(t,e,n,r){return Ge(t).onIdTokenChanged(e,n,r)}function VC(t,e,n){return Ge(t).beforeAuthStateChanged(e,n)}function LC(t,e,n,r){return Ge(t).onAuthStateChanged(e,n,r)}function MC(t){return Ge(t).signOut()}const pc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(pc,"1"),this.storage.removeItem(pc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=1e3,UC=10;class Yw extends Qw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Fw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);Zk()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,UC):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},OC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Yw.type="LOCAL";const FC=Yw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw extends Qw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Xw.type="SESSION";const Jw=Xw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new ru(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async d=>d(n.origin,i)),u=await zC(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ru.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,u)=>{const d=xm("",20);s.port1.start();const m=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(m),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(g.data.response);break;default:clearTimeout(m),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(){return window}function $C(t){In().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(){return typeof In().WorkerGlobalScope<"u"&&typeof In().importScripts=="function"}async function qC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function WC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function HC(){return Zw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1="firebaseLocalStorageDb",KC=1,gc="firebaseLocalStorage",t1="fbase_key";class pa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function su(t,e){return t.transaction([gc],e?"readwrite":"readonly").objectStore(gc)}function GC(){const t=indexedDB.deleteDatabase(e1);return new pa(t).toPromise()}function Ah(){const t=indexedDB.open(e1,KC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(gc,{keyPath:t1})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(gc)?e(r):(r.close(),await GC(),e(await Ah()))})})}async function ty(t,e,n){const r=su(t,!0).put({[t1]:e,value:n});return new pa(r).toPromise()}async function QC(t,e){const n=su(t,!1).get(e),r=await new pa(n).toPromise();return r===void 0?null:r.value}function ny(t,e){const n=su(t,!0).delete(e);return new pa(n).toPromise()}const YC=800,XC=3;class n1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ah(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>XC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Zw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ru._getInstance(HC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await qC(),!this.activeServiceWorker)return;this.sender=new BC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||WC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ah();return await ty(e,pc,"1"),await ny(e,pc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ty(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>QC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ny(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=su(s,!1).getAll();return new pa(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),YC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}n1.type="LOCAL";const JC=n1;new ha(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC(t,e){return e?Ln(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm extends gm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ti(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ti(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ti(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function eA(t){return Kw(t.auth,new vm(t),t.bypassAuthState)}function tA(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),kC(n,new vm(t),t.bypassAuthState)}async function nA(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),SC(n,new vm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eA;case"linkViaPopup":case"linkViaRedirect":return nA;case"reauthViaPopup":case"reauthViaRedirect":return tA;default:cn(this.auth,"internal-error")}}resolve(e){Qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA=new ha(2e3,1e4);class qs extends r1{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,qs.currentPopupAction&&qs.currentPopupAction.cancel(),qs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){Qn(this.filter.length===1,"Popup operations only handle one event");const e=xm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Tn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Tn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Tn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rA.get())};e()}}qs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA="pendingRedirect",Il=new Map;class iA extends r1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Il.get(this.auth._key());if(!e){try{const r=await oA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Il.set(this.auth._key(),e)}return this.bypassAuthState||Il.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function oA(t,e){const n=cA(e),r=lA(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function aA(t,e){Il.set(t._key(),e)}function lA(t){return Ln(t._redirectPersistence)}function cA(t){return Tl(sA,t.config.apiKey,t.name)}async function uA(t,e,n=!1){if(Bt(t.app))return Promise.reject(zn(t));const r=Es(t),s=ZC(r,e),o=await new iA(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=10*60*1e3;class hA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fA(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!s1(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Tn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=dA&&this.cachedEventUids.clear(),this.cachedEventUids.has(ry(e))}saveEventToCache(e){this.cachedEventUids.add(ry(e)),this.lastProcessedEventTime=Date.now()}}function ry(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function s1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function fA(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return s1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mA(t,e={}){return Jn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gA=/^https?/;async function yA(t){if(t.config.emulator)return;const{authorizedDomains:e}=await mA(t);for(const n of e)try{if(xA(n))return}catch{}cn(t,"unauthorized-domain")}function xA(t){const e=Sh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!gA.test(n))return!1;if(pA.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA=new ha(3e4,6e4);function sy(){const t=In().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function _A(t){return new Promise((e,n)=>{var s,i,o;function r(){sy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sy(),n(Tn(t,"network-request-failed"))},timeout:vA.get()})}if((i=(s=In().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=In().gapi)!=null&&o.load)r();else{const c=lC("iframefcb");return In()[c]=()=>{gapi.load?r():n(Tn(t,"network-request-failed"))},Bw(`${aC()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Sl=null,e})}let Sl=null;function wA(t){return Sl=Sl||_A(t),Sl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA=new ha(5e3,15e3),bA="__/auth/iframe",NA="emulator/auth/iframe",TA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},IA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SA(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?fm(e,NA):`https://${t.config.authDomain}/${bA}`,r={apiKey:e.apiKey,appName:t.name,v:Ni},s=IA.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ia(r).slice(1)}`}async function kA(t){const e=await wA(t),n=In().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:SA(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:TA,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Tn(t,"network-request-failed"),c=In().setTimeout(()=>{i(o)},EA.get());function u(){In().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},AA=500,jA=600,PA="_blank",RA="http://localhost";class iy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function DA(t,e,n,r=AA,s=jA){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...CA,width:r.toString(),height:s.toString(),top:i,left:o},d=yt().toLowerCase();n&&(c=Vw(d)?PA:n),Rw(d)&&(e=e||RA,u.scrollbars="yes");const m=Object.entries(u).reduce((g,[b,C])=>`${g}${b}=${C},`,"");if(Jk(d)&&c!=="_self")return VA(e||"",c),new iy(null);const p=window.open(e||"",c,m);te(p,t,"popup-blocked");try{p.focus()}catch{}return new iy(p)}function VA(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA="__/auth/handler",MA="emulator/auth/handler",OA=encodeURIComponent("fac");async function oy(t,e,n,r,s,i){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ni,eventId:s};if(e instanceof Ww){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",lT(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,p]of Object.entries({}))o[m]=p}if(e instanceof ma){const m=e.getScopes().filter(p=>p!=="");m.length>0&&(o.scopes=m.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const u=await t._getAppCheckToken(),d=u?`#${OA}=${encodeURIComponent(u)}`:"";return`${UA(t)}?${ia(c).slice(1)}${d}`}function UA({config:t}){return t.emulator?fm(t,MA):`https://${t.authDomain}/${LA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd="webStorageSupport";class FA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Jw,this._completeRedirectFn=uA,this._overrideRedirectResult=aA}async _openPopup(e,n,r,s){var o;Qn((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await oy(e,n,r,Sh(),s);return DA(e,i,xm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await oy(e,n,r,Sh(),s);return $C(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Qn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await kA(e),r=new hA(e);return n.register("authEvent",s=>(te(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(dd,{type:dd},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[dd];i!==void 0&&n(!!i),cn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=yA(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Fw()||Dw()||pm()}}const zA=FA;var ay="@firebase/auth",ly="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qA(t){ci(new us("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;te(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zw(t)},d=new sC(r,s,i,u);return mC(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ci(new us("auth-internal",e=>{const n=Es(e.getProvider("auth").getImmediate());return(r=>new BA(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Tr(ay,ly,$A(t)),Tr(ay,ly,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA=5*60,HA=Rv("authIdTokenMaxAge")||WA;let cy=null;const KA=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>HA)return;const s=n==null?void 0:n.token;cy!==s&&(cy=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function GA(t=Uv()){const e=Cf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=fC(t,{popupRedirectResolver:zA,persistence:[JC,FC,Jw]}),r=Rv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=KA(i.toString());VC(n,o,()=>o(n.currentUser)),DC(n,c=>o(c))}}const s=jv("auth");return s&&pC(n,`http://${s}`),n}function QA(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}iC({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Tn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",QA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qA("Browser");const YA={apiKey:"AIzaSyBTDEFh60Y0Rbgdgz7L5qvTTfwF6tTU4_w",authDomain:"vocabulary-app-7fe34.firebaseapp.com",projectId:"vocabulary-app-7fe34",storageBucket:"vocabulary-app-7fe34.firebasestorage.app",messagingSenderId:"791241143324",appId:"1:791241143324:web:da37f567108608702b9bd9",measurementId:"G-4TMRJZ28JX"},i1=Ov(YA),sl=GA(i1),Z=gk(i1),XA=async(t,e,n)=>{console.log("Saving collection with userId:",t),console.log("Collection data:",n);const r={...n,userId:t,username:e,rating:0,usageCount:0,createdAt:n.createdAt},s=await fs(le(Z,"collections"),r);return console.log("Collection saved with ID:",s.id),{id:s.id,...r}},o1=async t=>{console.log("Loading user collections for userId:",t);const e=me(le(Z,"collections"),xe("userId","==",t)),n=await pe(e);console.log("Found user collections:",n.docs.length);const r=n.docs.map(s=>({id:s.id,...s.data(),createdAt:s.data().createdAt.toDate()}));return r.sort((s,i)=>i.createdAt.getTime()-s.createdAt.getTime()),console.log("Processed user collections:",r),r},a1=async t=>{console.log("Loading saved collections for userId:",t);const e=me(le(Z,"saved_collections"),xe("userId","==",t)),r=(await pe(e)).docs.map(c=>c.data().collectionId);if(r.length===0)return[];const s=me(le(Z,"collections")),o=(await pe(s)).docs.filter(c=>r.includes(c.id)).map(c=>({id:c.id,...c.data(),createdAt:c.data().createdAt.toDate()}));return console.log("Found saved collections:",o.length),o},l1=async()=>{console.log("Loading public collections");const t=me(le(Z,"collections"),xe("visibility","==","public")),e=await pe(t);console.log("Found public collections:",e.docs.length);const n=e.docs.map(r=>({id:r.id,...r.data(),createdAt:r.data().createdAt.toDate()}));return n.sort((r,s)=>s.rating!==r.rating?s.rating-r.rating:s.usageCount-r.usageCount),n},c1=async(t=10)=>{console.log("Loading top rated collections");try{const e=me(le(Z,"collections"),xe("visibility","==","public")),r=(await pe(e)).docs.map(s=>({id:s.id,...s.data(),createdAt:s.data().createdAt.toDate()}));return r.sort((s,i)=>i.rating!==s.rating?i.rating-s.rating:i.usageCount-s.usageCount),r.slice(0,t)}catch(e){return console.error("Error in loadTopRatedCollections:",e),[]}},u1=async t=>{await Nw(wt(Z,"collections",t))},d1=async(t,e)=>{console.log("Updating collection:",t,e),await gi(wt(Z,"collections",t),e)},JA=async(t,e)=>{try{console.log("🎓 Marking collection as learned:",{userId:t,collectionId:e});let n=null;const r=wt(Z,"collections",e),s=await Fn(r);if(s.exists()){const c=s.data();n={id:s.id,...c,createdAt:c.createdAt.toDate()}}else{const c=wt(Z,"public_exams",e),u=await Fn(c);if(u.exists()){const d=u.data();n={id:u.id,name:d.name,description:d.description||"",words:d.embeddedWords||[],createdAt:d.createdAt.toDate(),userId:d.userId,username:d.username,visibility:"public",rating:d.rating||0,usageCount:d.totalAttempts||0}}}if(!n)throw console.log("⚠️ Collection not found for learning, it may have been deleted:",e),new Error(`Collection ${e} not found. It may have been deleted.`);console.log("📦 Embedding collection data:",n.name);const i=me(le(Z,"learned_collections"),xe("userId","==",t),xe("collectionId","==",e)),o=await pe(i);if(o.empty)console.log("📝 Creating new learned record..."),await fs(le(Z,"learned_collections"),{userId:t,collectionId:e,learnedAt:new Date,perfectScoreCount:1,embeddedData:n}),console.log("✅ New learned record created");else{console.log("📝 Updating existing learned record...");const c=o.docs[0].ref;await gi(c,{perfectScoreCount:Ih(1),learnedAt:new Date,embeddedData:n}),console.log("✅ Existing learned record updated")}try{console.log("📈 Attempting to update collection usage count...");const c=wt(Z,"collections",e),u=await Fn(c);if(u.exists()){const d=u.data();console.log("🔍 Collection owner:",d.userId,"Current user:",t),d.userId===t?(await gi(c,{usageCount:Ih(1)}),console.log("✅ Collection usage count updated")):console.log("⚠️ Skipping usage count update - user does not own collection")}else console.log("⚠️ Collection document not found")}catch(c){console.error("❌ Error updating collection usage count (non-critical):",c)}}catch(n){throw console.error("❌ Error in markCollectionAsLearned:",n),n}},_m=async t=>{const e=me(le(Z,"learned_collections"),xe("userId","==",t));return(await pe(e)).docs.map(r=>({id:r.id,...r.data(),learnedAt:r.data().learnedAt.toDate()}))},h1=async t=>{try{console.log("📚 Loading learned collections with embedded data for user:",t);const e=me(le(Z,"learned_collections"),xe("userId","==",t)),n=await pe(e);if(console.log("🔍 Found learned records:",n.docs.length),n.empty)return[];const r=[],s=n.docs.map(async i=>{const o=i.data();if(o.embeddedData){const c={...o.embeddedData,createdAt:o.embeddedData.createdAt.toDate?o.embeddedData.createdAt.toDate():o.embeddedData.createdAt};r.push(c),console.log("✅ Using embedded data for collection:",o.embeddedData.name);return}console.log(`⚠️ No embedded data found for learned collection: ${o.collectionId}, trying to find original...`);try{const c=wt(Z,"collections",o.collectionId),u=await Fn(c);if(u.exists()){const p=u.data(),g={id:u.id,...p,createdAt:p.createdAt.toDate()};r.push(g),console.log("✅ Found original collection in collections table:",p.name);return}const d=wt(Z,"public_exams",o.collectionId),m=await Fn(d);if(m.exists()){const p=m.data(),g={id:m.id,name:p.name,description:p.description||"",words:p.embeddedWords||[],createdAt:p.createdAt.toDate(),userId:p.userId,username:p.username,visibility:"public",rating:p.rating||0,usageCount:p.totalAttempts||0};r.push(g),console.log("✅ Found original collection in public_exams table:",p.name);return}console.log(`❌ Could not find original collection for: ${o.collectionId}`)}catch(c){console.error(`❌ Error finding original collection for ${o.collectionId}:`,c)}});return await Promise.all(s),console.log("✅ Loaded learned collections with embedded data:",r.length),r}catch(e){return console.error("❌ Error getting learned collections with embedded data:",e),[]}},f1=async(t,e)=>{const n=me(le(Z,"saved_collections"),xe("userId","==",t),xe("collectionId","==",e));(await pe(n)).empty&&await fs(le(Z,"saved_collections"),{userId:t,collectionId:e,savedAt:new Date})},m1=async(t,e)=>{const n=me(le(Z,"saved_collections"),xe("userId","==",t),xe("collectionId","==",e));(await pe(n)).docs.forEach(async s=>{await Nw(s.ref)})},p1=async(t,e)=>{const n=me(le(Z,"saved_collections"),xe("userId","==",t),xe("collectionId","==",e));return!(await pe(n)).empty},wm=async()=>{var t;try{console.log("Loading leaderboard data...");const e=me(le(Z,"users")),n=await pe(e);console.log(`👥 Total users found: ${n.docs.length}`);const r=new Map;n.docs.forEach(u=>{const d=u.data();r.set(u.id,{username:d.username||`user_${u.id.substring(0,8)}`,totalCollections:0,publicCollections:0,totalWords:0,totalUsage:0,totalExams:0,totalExamScore:0,perfectExams:0})});const s=me(le(Z,"collections")),i=await pe(s);console.log(`📝 Total collections found: ${i.docs.length}`),i.docs.forEach(u=>{var b;const d=u.data(),m=d.userId;if(!m||!r.has(m)){console.log("⚠️ Skipping collection without valid userId:",{id:u.id,name:d.name,userId:m});return}const p=r.get(m);p.totalCollections++,(d.visibility==="public"||!d.visibility)&&(p.publicCollections++,p.totalWords+=((b=d.words)==null?void 0:b.length)||0,p.totalUsage+=d.usageCount||0)}),console.log("📖 Getting learned collections...");const o=new Map;try{const u=me(le(Z,"learned_collections")),d=await pe(u);console.log(`📚 Found ${d.docs.length} learned collections`);for(const m of d.docs){const p=m.data(),g=p.userId,b=p.collectionId,C=await pe(me(le(Z,"collections"),xe("__name__","==",b)));if(!C.empty){const P=((t=C.docs[0].data().words)==null?void 0:t.length)||0;o.set(g,(o.get(g)||0)+P)}}}catch(u){console.error("❌ Error getting learned collections (skipping):",u)}try{const u=me(le(Z,"exam_participations")),d=await pe(u);console.log(`🎓 Found ${d.docs.length} exam participations`);for(const m of d.docs){const p=m.data(),g=p.userId;if(r.has(g)){const b=r.get(g);b.totalExams++,b.totalExamScore+=p.scorePercentage||0,p.scorePercentage>=100&&b.perfectExams++}}}catch(u){console.error("❌ Error getting exam participations (skipping):",u)}const c=[];return r.forEach((u,d)=>{c.push({id:d,username:u.username,totalCollections:u.publicCollections,publicCollections:u.publicCollections,totalWords:u.totalWords,learnedWords:o.get(d)||0,totalUsage:u.totalUsage,totalExams:u.totalExams,averageExamScore:u.totalExams>0?u.totalExamScore/u.totalExams:0,perfectExams:u.perfectExams,joinedAt:new Date(2024,0,1)})}),console.log("Leaderboard data loaded:",c.length,"total users"),c}catch(e){return console.error("Error loading leaderboard data:",e),[]}},g1=async(t=10)=>{const n=[...await wm()].sort((r,s)=>s.totalCollections!==r.totalCollections?s.totalCollections-r.totalCollections:s.totalWords-r.totalWords);return n.forEach((r,s)=>{r.rank=s+1}),n.slice(0,t)},y1=async(t=10)=>{const n=[...await wm()].sort((r,s)=>s.learnedWords!==r.learnedWords?s.learnedWords-r.learnedWords:s.totalCollections-r.totalCollections);return n.forEach((r,s)=>{r.rank=s+1}),n.slice(0,t)},x1=()=>Math.random().toString(36).substr(2,9),v1="vocabulary_settings",_1=t=>{localStorage.setItem(v1,JSON.stringify(t))},w1=()=>{const t=localStorage.getItem(v1);if(!t)return{autoAdvance:!0};try{return{autoAdvance:!0,...JSON.parse(t)}}catch{return{autoAdvance:!0}}},ZA=async(t,e,n,r)=>{if(!n.name)throw new Error("Name is required for exams");const s=r.filter(c=>n.selectedCollections.includes(c.id));if(s.length===0)throw new Error("Seçilmiş kolleksiyalar tapılmadı");const i=[];s.forEach(c=>{c.words.forEach(u=>{i.push({id:u.id,word:u.english||u.word,english:u.english,meaning:u.meaning,type:u.type||"noun"})})}),console.log("📚 Combined words for exam:",i.length,"total words"),console.log("🔍 Sample words being embedded:",i.slice(0,3)),s.forEach((c,u)=>{console.log(`   ${u+1}. ${c.name} (${c.words.length} words)`)});const o={name:n.name,description:n.description||"",userId:t,username:e,settings:{selectedCollections:n.selectedCollections,variantCount:n.variantCount,wordCount:n.wordCount,timeLimit:n.timeLimit,isPublic:n.isPublic,name:n.name,description:n.description},embeddedWords:i,collectionsMetadata:s.map(c=>({id:c.id,name:c.name,wordCount:c.words.length})),createdAt:new Date,totalAttempts:0,averageScore:0,rating:0};console.log("🔥 Attempting to save public exam:",o),console.log("🔍 Exam settings isPublic:",n.isPublic),console.log("🔍 newExam.settings.isPublic:",o.settings.isPublic);try{console.log("🧪 Testing collection access...");const c=le(Z,"public_exams");console.log("🧪 Collection reference created successfully");const u=await fs(c,o);return console.log("✅ Public exam saved successfully with ID:",u.id),console.log("✅ Saved exam data:",{id:u.id,name:o.name,isPublic:o.settings.isPublic,userId:o.userId,username:o.username}),{id:u.id,...o}}catch(c){console.error("❌ Detailed error in savePublicExam:",{message:c.message,code:c.code,details:c}),console.log("🔄 Trying alternative approach - saving as public collection...");try{const u={...o,isPublicExam:!0,examType:"public"},d=await fs(le(Z,"collections"),u);return console.log("✅ Alternative save successful:",d.id),{id:d.id,...u}}catch(u){throw console.error("❌ Alternative approach also failed:",u),c}}},Em=async(t=50)=>{console.log("🔍 Starting to load all public exams...");try{const e=me(le(Z,"public_exams"),eu("createdAt","desc"),Xo(t));console.log("🔍 Query created for public_exams collection");const n=await pe(e);console.log("📊 Query executed. Found docs:",n.docs.length),n.docs.length>0&&n.docs.forEach((i,o)=>{var u;const c=i.data();console.log(`📋 Exam ${o+1}:`,{id:i.id,name:c.name,isPublic:(u=c.settings)==null?void 0:u.isPublic,userId:c.userId,username:c.username})});let r=n.docs.map(i=>({id:i.id,...i.data(),createdAt:i.data().createdAt.toDate()}));const s=await Promise.all(r.map(async i=>{const o=await b1(i.id);return{...i,totalAttempts:o.totalAttempts||0,averageScore:o.averageScore||0}}));return console.log("🔍 Loaded public exams with embedded words check:"),s.forEach((i,o)=>{console.log(`   ${o+1}. ${i.name} - embeddedWords: ${i.embeddedWords?i.embeddedWords.length:"NONE"} - attempts: ${i.totalAttempts} - avg: ${i.averageScore.toFixed(1)}%`)}),s}catch(e){console.log("❌ Error in loadAllPublicExams:",e),console.log("⚠️ Failed to load from public_exams, trying collections instead...");const n=me(le(Z,"collections"),xe("isPublicExam","==",!0),Xo(t)),r=await pe(n);return console.log("📊 Loaded public exams from collections:",r.docs.length),r.docs.map(s=>({id:s.id,...s.data(),createdAt:s.data().createdAt.toDate()}))}},E1=async t=>{console.log("🔍 Loading user exams for userId:",t);try{const e=me(le(Z,"public_exams"),xe("userId","==",t)),n=await pe(e);return console.log("📊 Loaded user public exams from public_exams:",n.docs.length),n.docs.length>0&&n.docs.forEach((r,s)=>{var o;const i=r.data();console.log(`📋 User Exam ${s+1}:`,{id:r.id,name:i.name,isPublic:(o=i.settings)==null?void 0:o.isPublic,userId:i.userId})}),n.docs.map(r=>({id:r.id,...r.data(),createdAt:r.data().createdAt.toDate()}))}catch(e){throw console.log("❌ Error in loadUserPublicExams:",e),e}},ej=async(t,e,n)=>{try{const r=wt(Z,"exam_stats",t),s=e/n*100,i=await Fn(r);if(i.exists()){const o=i.data(),c=o.totalAttempts||0,u=o.averageScore||0,d=c===0?s:(u*c+s)/(c+1);await gi(r,{totalAttempts:Ih(1),averageScore:d,lastUpdated:new Date}),console.log("✅ Exam stats updated:",t,{newAttempts:c+1,newAverage:d.toFixed(1)})}else await bw(r,{examId:t,totalAttempts:1,averageScore:s,createdAt:new Date,lastUpdated:new Date}),console.log("✅ New exam stats created:",t,{totalAttempts:1,averageScore:s.toFixed(1)})}catch(r){console.error("❌ Error updating exam stats:",r)}},b1=async t=>{try{const e=await Fn(wt(Z,"exam_stats",t));return e.exists()?e.data():{totalAttempts:0,averageScore:0}}catch(e){return console.error("❌ Error getting exam stats:",e),{totalAttempts:0,averageScore:0}}},tj=async(t,e,n,r,s)=>{const i=e/n*100,o={userId:t,score:e,totalQuestions:n,scorePercentage:i,timeSpent:r,examSettings:s||null,completedAt:new Date};await fs(le(Z,"exam_results"),o)},nj=async(t,e,n,r,s)=>{const i={userId:t,examId:e,score:n,totalQuestions:r,scorePercentage:n/r*100,timeSpent:s,participatedAt:new Date};await fs(le(Z,"exam_participations"),i)},N1=async t=>{console.log("🔍 Loading participated exams for userId:",t);try{const e=me(le(Z,"exam_participations"),xe("userId","==",t),eu("participatedAt","desc")),n=await pe(e),r=[...new Set(n.docs.map(o=>o.data().examId))];if(r.length===0)return[];const s=r.map(async o=>{const c=await pe(me(le(Z,"public_exams"),xe("__name__","==",o)));if(!c.empty){const u=c.docs[0];return{id:u.id,...u.data(),createdAt:u.data().createdAt.toDate()}}return null});return(await Promise.all(s)).filter(o=>o!==null)}catch(e){return console.error("Error loading participated exams:",e),[]}},rj=async(t,e)=>{try{const n=me(le(Z,"exam_participations"),xe("userId","==",t),xe("examId","==",e),eu("scorePercentage","desc"),Xo(5));return(await pe(n)).docs.map(s=>({id:s.id,...s.data(),participatedAt:s.data().participatedAt.toDate()}))}catch(n){return console.error("Error loading user exam results:",n),[]}},T1=async(t,e)=>{try{const n=me(le(Z,"exam_participations"),xe("userId","==",t),xe("examId","==",e),Xo(1));return(await pe(n)).docs.length>0}catch(n){return console.error("Error checking user participation:",n),!1}},bm=async(t,e)=>{try{const n=me(le(Z,"exam_participations"),xe("userId","==",t),xe("examId","==",e),eu("scorePercentage","desc"),Xo(1)),r=await pe(n);return r.docs.length>0?{...r.docs[0].data(),participatedAt:r.docs[0].data().participatedAt.toDate()}:null}catch(n){return console.error("Error loading user best exam result:",n),null}},sj=async()=>{var t,e;console.log("🔄 Starting migration of old exams to embedded words format...");try{const n=me(le(Z,"public_exams")),r=await pe(n);let s=0;for(const i of r.docs){const o=i.data();if(o.embeddedWords&&o.embeddedWords.length>0){console.log(`✅ Exam ${o.name} already has embedded words, skipping...`);continue}if(console.log(`🔄 Migrating exam: ${o.name}`),((e=(t=o.settings)==null?void 0:t.selectedCollections)==null?void 0:e.length)>0)try{const c=[];for(const u of o.settings.selectedCollections){const d=await pe(me(le(Z,"collections"),xe("__name__","==",u)));d.docs.length>0&&c.push(d.docs[0].data())}if(c.length>0){const u=[];c.forEach(m=>{m.words&&Array.isArray(m.words)&&m.words.forEach(p=>{u.push({id:p.id,word:p.english||p.word,english:p.english,meaning:p.meaning,type:p.type||"noun"})})});const d=wt(Z,"public_exams",i.id);await gi(d,{embeddedWords:u,collectionsMetadata:c.map(m=>{var p;return{id:m.id,name:m.name,wordCount:((p=m.words)==null?void 0:p.length)||0}})}),console.log(`✅ Migrated exam ${o.name} with ${u.length} words`),s++}else console.log(`⚠️ No collections found for exam ${o.name}`)}catch(c){console.error(`❌ Error migrating exam ${o.name}:`,c)}else console.log(`⚠️ Exam ${o.name} has no selected collections`)}return console.log(`🎉 Migration completed! Migrated ${s} exams.`),{success:!0,migratedCount:s}}catch(n){return console.error("❌ Migration failed:",n),{success:!1,error:n}}},I1=async()=>{try{console.log("📊 Loading global statistics...");const t=me(le(Z,"collections")),e=await pe(t),n=e.size;console.log("🔍 Total collections found:",n);const r=me(le(Z,"public_exams")),s=await pe(r),i=s.size;console.log("🔍 Total exams found:",i);const o=me(le(Z,"users")),u=(await pe(o)).size;console.log("🔍 Total users found:",u);let d=0,m=0;e.forEach(b=>{const C=b.data();C.words&&Array.isArray(C.words)&&(d+=C.words.length)}),s.forEach(b=>{const C=b.data();C.embeddedWords&&Array.isArray(C.embeddedWords)&&(d+=C.embeddedWords.length)}),console.log("🔍 Total words found:",d);const p=me(le(Z,"learned_collections")),g=await pe(p);return console.log("🔍 Total learned records found:",g.size),g.forEach(b=>{const C=b.data();if(C.embeddedData&&C.embeddedData.words)m+=C.embeddedData.words.length;else{const k=C.collectionId,P=e.docs.find(w=>w.id===k);if(P){const w=P.data();w.words&&(m+=w.words.length)}else{const w=s.docs.find(E=>E.id===k);if(w){const E=w.data();E.embeddedWords&&(m+=E.embeddedWords.length)}}}}),console.log("🔍 Total learned words found:",m),{totalCollections:n,totalExams:i,totalUsers:u,totalWords:d,totalLearnedWords:m}}catch(t){return console.error("Error getting global statistics:",t),{totalCollections:0,totalExams:0,totalUsers:0,totalWords:0,totalLearnedWords:0}}},fn=Object.freeze(Object.defineProperty({__proto__:null,deleteCollection:u1,generateId:x1,getExamStats:b1,getGlobalStatistics:I1,getLeaderboardData:wm,getLearnedCollections:_m,getLearnedCollectionsWithData:h1,getTopCreators:g1,getTopLearners:y1,getUserBestExamResult:bm,getUserExamResults:rj,hasUserParticipatedInExam:T1,isCollectionSaved:p1,loadAllPublicExams:Em,loadPublicCollections:l1,loadSavedCollections:a1,loadSettings:w1,loadTopRatedCollections:c1,loadUserCollections:o1,loadUserParticipatedExams:N1,loadUserPublicExams:E1,markCollectionAsLearned:JA,migrateOldExamsToEmbedWords:sj,removeSavedCollection:m1,saveCollection:XA,saveCollectionForUser:f1,saveExamResult:tj,savePublicExam:ZA,saveSettings:_1,trackExamParticipation:nj,updateCollection:d1,updateExamStats:ej},Symbol.toStringTag,{value:"Module"}));/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ij={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),se=(t,e)=>{const n=M.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:c="",children:u,...d},m)=>M.createElement("svg",{ref:m,...ij,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${oj(t)}`,c].join(" "),...d},[...e.map(([p,g])=>M.createElement(p,g)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uy=se("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=se("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=se("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=se("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=se("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dy=se("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=se("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aj=se("BookmarkCheck",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=se("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj=se("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=se("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=se("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=se("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xi=se("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=se("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=se("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=se("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=se("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=se("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0",key:"aigmz7"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2",key:"1n6bmn"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8",key:"a9iiix"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=se("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=se("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=se("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=se("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=se("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=se("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=se("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hy=se("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=se("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=se("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nm=se("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=se("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tm=se("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=se("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=se("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=se("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jh=se("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=se("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yc=se("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=se("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=se("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j1=se("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=se("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=se("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=se("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),P1=M.createContext({}),un=()=>M.useContext(P1),Ij=({children:t})=>{const[e,n]=M.useState(null),[r,s]=M.useState(null),[i,o]=M.useState(!0),c=async(b,C,k)=>{try{const w=(await AC(sl,b,k)).user,E=me(le(Z,"users"),xe("email","==",b));if(!(await pe(E)).empty)throw await w.delete(),new Error("Bu email artıq istifadə edilir");const j=me(le(Z,"users"),xe("username","==",C));if(!(await pe(j)).empty)throw await w.delete(),new Error("Bu username artıq istifadə edilir");const V={id:w.uid,email:b,username:C,createdAt:new Date};return await bw(wt(Z,"users",w.uid),V),n(V),V}catch(P){throw P}},u=async(b,C)=>{let k=b;if(!b.includes("@")){const j=me(le(Z,"users"),xe("username","==",b)),D=await pe(j);if(D.empty)throw new Error("İstifadəçi tapılmadı");k=D.docs[0].data().email}const w=(await jC(sl,k,C)).user,E=await Fn(wt(Z,"users",w.uid));if(!E.exists())throw new Error("İstifadəçi məlumatları tapılmadı");const v={...E.data(),createdAt:E.data().createdAt.toDate()};return n(v),v},d=async()=>{await MC(sl),n(null)},m=async b=>{if(!r||!e)throw new Error("İstifadəçi sistemə daxil olmayıb");if(b.username&&b.username!==e.username){const C=me(le(Z,"users"),xe("username","==",b.username));if(!(await pe(C)).empty)throw new Error("Bu username artıq istifadə edilir")}await gi(wt(Z,"users",r.uid),b),n(C=>C?{...C,...b}:null)},p=async b=>{if(!r)throw new Error("İstifadəçi sistemə daxil olmayıb");await PC(r,b)};M.useEffect(()=>LC(sl,async C=>{if(s(C),C){const k=await Fn(wt(Z,"users",C.uid));if(k.exists()){const P={...k.data(),createdAt:k.data().createdAt.toDate()};n(P)}}else n(null);o(!1)}),[]);const g={currentUser:e,firebaseUser:r,login:u,register:c,logout:d,updateUserProfile:m,updateUserPassword:p,loading:i};return a.jsx(P1.Provider,{value:g,children:!i&&t})},Sj=({onNavigateToCollections:t,onNavigateToAllCollections:e,onNavigateToLeaderboard:n,onNavigateToExam:r,onNavigateToAllExams:s,onNavigateToMyExams:i,onNavigateToSettings:o,onTakeExam:c,onPlayQuiz:u})=>{const{currentUser:d,logout:m}=un(),[p,g]=M.useState([]),[b,C]=M.useState(!0),[k,P]=M.useState([]),[w,E]=M.useState(!0),[v,j]=M.useState({totalCollections:0,totalExams:0,totalUsers:0,totalWords:0,totalLearnedWords:0}),[D,V]=M.useState(!0),[_,y]=M.useState(new Set);M.useEffect(()=>{N(),I(),S(),A(),window.location.search.includes("migrate=true")&&hn(async()=>{const{migrateOldExamsToEmbedWords:$}=await Promise.resolve().then(()=>fn);return{migrateOldExamsToEmbedWords:$}},void 0).then(({migrateOldExamsToEmbedWords:$})=>{console.log("🔄 Running one-time migration..."),$().then(ae=>{console.log("Migration result:",ae),alert(`Migration tamamlandı! ${ae.migratedCount||0} imtahan yeniləndi.`)})})},[d]);const N=async()=>{try{C(!0);const $=await c1(10);g($)}catch($){console.error("Error loading top collections:",$)}finally{C(!1)}},I=async()=>{try{E(!0);const $=await Em(6);P($)}catch($){console.error("Error loading top exams:",$)}finally{E(!1)}},S=async()=>{try{V(!0);const $=await I1();j($)}catch($){console.error("Error loading global statistics:",$)}finally{V(!1)}},A=async()=>{if(d)try{const $=await _m(d.id),ae=new Set($.map(W=>W.collectionId));y(ae)}catch($){console.error("Error loading learned collections:",$)}},T=async()=>{try{await m()}catch($){console.error("Logout failed:",$)}};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[a.jsx("div",{className:"bg-white shadow-sm border-b",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg",children:a.jsx(Je,{className:"w-6 h-6 text-white"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Learning App"})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[a.jsx(j1,{className:"w-4 h-4"}),a.jsx("span",{className:"font-medium",children:d==null?void 0:d.username})]}),a.jsx("button",{onClick:o,className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(Tm,{className:"w-5 h-5"})}),a.jsx("button",{onClick:T,className:"p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(yj,{className:"w-5 h-5"})})]})]})})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-12",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsxs("h2",{className:"text-4xl font-bold text-gray-800 mb-4",children:["Xoş gəldin, ",d==null?void 0:d.username,"!"]}),a.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"İngilis dili öyrənmə səfərində sənə kömək edəcək alətlər. Yeni sözlər öyrən, kolleksiyalar yarat və biliklərinizi imtahanlarda sınayın."})]}),a.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:[a.jsxs("div",{onClick:t,className:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 p-8 cursor-pointer group transform hover:scale-105",children:[a.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full mb-6 group-hover:from-blue-600 group-hover:to-indigo-700 transition-all",children:a.jsx(Je,{className:"w-8 h-8 text-white"})}),a.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-3",children:"Kolleksiyalarım"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Söz kolleksiyalarınızı yaradın, idarə edin və öyrənin."}),a.jsxs("div",{className:"flex items-center text-blue-600 font-semibold group-hover:text-blue-700",children:[a.jsx("span",{children:"Kolleksiyalara get"}),a.jsx("svg",{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),a.jsxs("div",{onClick:n,className:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 p-8 cursor-pointer group transform hover:scale-105",children:[a.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-gradient-to-r from-yellow-500 to-orange-600 rounded-full mb-6 group-hover:from-yellow-600 group-hover:to-orange-700 transition-all",children:a.jsx(xn,{className:"w-8 h-8 text-white"})}),a.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-3",children:"Liderlik Cədvəli"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Ən çox yaradan və öyrənən istifadəçiləri görün, rəqabət edin."}),a.jsxs("div",{className:"flex items-center text-yellow-600 font-semibold group-hover:text-yellow-700",children:[a.jsx("span",{children:"Liderlərə bax"}),a.jsx("svg",{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),a.jsxs("div",{onClick:r,className:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 p-8 cursor-pointer group transform hover:scale-105",children:[a.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-gradient-to-r from-green-500 to-teal-600 rounded-full mb-6 group-hover:from-green-600 group-hover:to-teal-700 transition-all",children:a.jsx(Mn,{className:"w-8 h-8 text-white"})}),a.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-3",children:"Peşəkar İmtahan"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Comprehensive imtahan verin, bilik səviyyənizi ölçün."}),a.jsxs("div",{className:"flex items-center text-green-600 font-semibold group-hover:text-green-700",children:[a.jsx("span",{children:"İmtahan ver"}),a.jsx("svg",{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),a.jsxs("div",{onClick:i,className:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 p-8 cursor-pointer group transform hover:scale-105",children:[a.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-600 rounded-full mb-6 group-hover:from-purple-600 group-hover:to-pink-700 transition-all",children:a.jsx(dy,{className:"w-8 h-8 text-white"})}),a.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-3",children:"Mənim İmtahanlarım"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Yaratdığınız və iştirak etdiyiniz imtahanlara baxın."}),a.jsxs("div",{className:"flex items-center text-purple-600 font-semibold group-hover:text-purple-700",children:[a.jsx("span",{children:"İmtahanlarıma get"}),a.jsx("svg",{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]}),a.jsxs("div",{className:"mt-16 bg-white rounded-2xl shadow-lg p-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-lg",children:a.jsx(yc,{className:"w-6 h-6 text-white"})}),a.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Ən Populyar Kolleksiyalar"})]}),a.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-blue-600 hover:text-blue-700 font-semibold transition-colors",children:[a.jsx("span",{children:"Hamısını gör"}),a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),b?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("span",{className:"text-gray-600",children:"Populyar kolleksiyalar yüklənir..."})]}):!p||p.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"w-16 h-16 mx-auto bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mb-4",children:a.jsx(Je,{className:"w-8 h-8 text-gray-400"})}),a.jsx("p",{className:"text-gray-600",children:"Hələ public kolleksiya yoxdur."}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"İlk kolleksiyanızı yaradıb community ilə paylaşın!"})]}):a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:(p||[]).slice(0,6).map(($,ae)=>{var W;return a.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-white rounded-xl p-6 border border-gray-200 hover:shadow-md transition-shadow cursor-pointer",children:[ae<3&&a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold text-white ${ae===0?"bg-yellow-500":ae===1?"bg-gray-400":"bg-orange-600"}`,children:ae+1}),a.jsx("span",{className:"ml-2 text-xs font-medium text-gray-500",children:ae===0?"Ən Populyar":ae===1?"2-ci":"3-cü"})]}),a.jsx("h4",{className:"font-bold text-gray-800 mb-2 line-clamp-2",children:$.name}),a.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-3",children:[a.jsxs("span",{children:["@",$.username]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(vi,{className:"w-3 h-3 text-yellow-500 mr-1"}),a.jsx("span",{children:$.rating.toFixed(1)})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(sn,{className:"w-3 h-3 text-blue-500 mr-1"}),a.jsx("span",{children:$.usageCount})]})]})]}),a.jsxs("div",{className:"text-xs text-gray-500 mb-4",children:[$.words.length," söz • ",(W=$.tags)==null?void 0:W.slice(0,2).map(Ee=>`#${Ee}`).join(" ")]}),_.has($.id)&&a.jsxs("div",{className:"flex items-center space-x-2 mb-3 p-2 bg-green-50 rounded-lg",children:[a.jsx(Kt,{className:"w-4 h-4 text-green-600"}),a.jsx("span",{className:"text-sm text-green-700 font-medium",children:"Artıq öyrəndiniz"})]}),a.jsxs("button",{onClick:()=>u($),className:`w-full flex items-center justify-center space-x-2 py-2 px-4 rounded-lg text-sm font-medium transition-all ${_.has($.id)?"bg-green-100 text-green-700 border border-green-200 hover:bg-green-200":"bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700"}`,children:[a.jsx(yn,{className:"w-3 h-3"}),a.jsx("span",{children:_.has($.id)?"Yenidən Oyna":"Quiz Oyna"})]})]},$.id)})}),p&&p.length>6&&a.jsx("div",{className:"text-center mt-6",children:a.jsxs("button",{onClick:e,className:"inline-flex items-center space-x-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-blue-600 hover:to-purple-700 transition-all",children:[a.jsx(Je,{className:"w-4 h-4"}),a.jsx("span",{children:"Bütün Kolleksiyalara Bax"})]})})]}),a.jsxs("div",{className:"mt-8 bg-white rounded-2xl shadow-lg p-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-gradient-to-r from-green-400 to-blue-500 rounded-lg",children:a.jsx(Mn,{className:"w-6 h-6 text-white"})}),a.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Ən Yaxşı İmtahanlar"})]}),a.jsxs("button",{onClick:i,className:"flex items-center space-x-2 text-blue-600 hover:text-blue-700 font-semibold transition-colors",children:[a.jsx("span",{children:"Hamısını gör"}),a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),w?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("span",{className:"text-gray-600",children:"Top imtahanlar yüklənir..."})]}):!k||k.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"w-16 h-16 mx-auto bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mb-4",children:a.jsx(Mn,{className:"w-8 h-8 text-gray-400"})}),a.jsx("p",{className:"text-gray-600",children:"Hələ public imtahan yoxdur."}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"İlk imtahanınızı yaradıb community ilə paylaşın!"})]}):a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:(k||[]).slice(0,6).map(($,ae)=>a.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-white rounded-xl p-6 border border-gray-200 hover:shadow-md transition-shadow",children:[ae<3&&a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold text-white ${ae===0?"bg-yellow-500":ae===1?"bg-gray-400":"bg-orange-600"}`,children:ae+1}),a.jsx("span",{className:"ml-2 text-xs font-medium text-gray-500",children:ae===0?"Ən Populyar":ae===1?"2-ci":"3-cü"})]}),a.jsx("h4",{className:"font-bold text-gray-800 mb-2 line-clamp-2",children:$.name}),a.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-3",children:[a.jsxs("span",{children:["@",$.username]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(sn,{className:"w-3 h-3 text-blue-500 mr-1"}),a.jsx("span",{children:$.totalAttempts})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(vi,{className:"w-3 h-3 text-yellow-500 mr-1"}),a.jsxs("span",{children:[$.averageScore.toFixed(1),"%"]})]})]})]}),a.jsxs("div",{className:"text-xs text-gray-500 mb-4",children:[$.settings.wordCount," sual • ",$.settings.timeLimit," dəqiqə"]}),a.jsxs("button",{onClick:()=>c($),className:"w-full flex items-center justify-center space-x-2 bg-gradient-to-r from-green-500 to-blue-600 text-white py-2 px-4 rounded-lg text-sm font-medium hover:from-green-600 hover:to-blue-700 transition-all",children:[a.jsx(yn,{className:"w-3 h-3"}),a.jsx("span",{children:"İmtahan Ver"})]})]},$.id))})]}),a.jsxs("div",{className:"mt-8 bg-white rounded-2xl shadow-lg p-8",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-400 to-pink-500 rounded-lg",children:a.jsx(dy,{className:"w-6 h-6 text-white"})}),a.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Global Statistikalar"})]}),D?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto mb-4"}),a.jsx("span",{className:"text-gray-600",children:"Statistikalar yüklənir..."})]}):a.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsxs("div",{className:"text-center bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl p-6",children:[a.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-500 rounded-full mx-auto mb-3",children:a.jsx(Je,{className:"w-6 h-6 text-white"})}),a.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:v.totalCollections}),a.jsx("div",{className:"text-sm text-gray-600",children:"Kolleksiya"})]}),a.jsxs("div",{className:"text-center bg-gradient-to-br from-green-50 to-emerald-100 rounded-xl p-6",children:[a.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-green-500 rounded-full mx-auto mb-3",children:a.jsx(Mn,{className:"w-6 h-6 text-white"})}),a.jsx("div",{className:"text-2xl font-bold text-green-600 mb-1",children:v.totalExams}),a.jsx("div",{className:"text-sm text-gray-600",children:"İmtahan"})]}),a.jsxs("div",{className:"text-center bg-gradient-to-br from-purple-50 to-pink-100 rounded-xl p-6",children:[a.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-purple-500 rounded-full mx-auto mb-3",children:a.jsx(sn,{className:"w-6 h-6 text-white"})}),a.jsx("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:v.totalUsers}),a.jsx("div",{className:"text-sm text-gray-600",children:"İstifadəçi"})]}),a.jsxs("div",{className:"text-center bg-gradient-to-br from-yellow-50 to-orange-100 rounded-xl p-6",children:[a.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-yellow-500 rounded-full mx-auto mb-3",children:a.jsx(yc,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{className:"text-xl font-bold text-yellow-600 mb-1",children:[v.totalLearnedWords,"/",v.totalWords]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Öyrənilən/Cəmi Sözlər"})]})]})]})]})]})},kj=({onSave:t,onBack:e})=>{const[n,r]=M.useState(""),[s,i]=M.useState(""),[o,c]=M.useState("private"),[u,d]=M.useState([]),[m,p]=M.useState(""),[g,b]=M.useState([]),[C,k]=M.useState(""),[P,w]=M.useState(""),E=()=>{if(C.trim()&&P.trim()&&g.length<30){const N={id:x1(),english:C.trim(),meaning:P.trim()};b([...g,N]),k(""),w("")}},v=N=>{b(g.filter(I=>I.id!==N))},j=()=>{m.trim()&&!u.includes(m.trim())&&u.length<5&&(d([...u,m.trim()]),p(""))},D=N=>{d(u.filter(I=>I!==N))},[V,_]=M.useState(!1),y=async()=>{if(n.trim()&&g.length>=6&&!V){_(!0);try{const N={name:n.trim(),description:s.trim()||void 0,words:g,visibility:o,tags:u.length>0?u:void 0,createdAt:new Date};await t(N)}catch(N){console.error("Collection save error:",N),alert("Kolleksiya saxlanmadı. Yenidən cəhd edin.")}finally{_(!1)}}};return a.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200 mr-4",children:a.jsx(kn,{className:"w-5 h-5 text-gray-600"})}),a.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Yeni Kolleksiya Yarat"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-6",children:[a.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kolleksiya Adı"}),a.jsx("input",{type:"text",value:n,onChange:N=>r(N.target.value),placeholder:"Məsələn: Günlük sözlər",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Təsvir (isteğe bağlı)"}),a.jsx("textarea",{value:s,onChange:N=>i(N.target.value),placeholder:"Bu kolleksiyanın təsviri...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 h-20 resize-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Görünmə Ayarı"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("button",{type:"button",onClick:()=>c("private"),className:`flex items-center justify-center space-x-2 p-3 rounded-lg border transition-all duration-200 ${o==="private"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-600 hover:border-gray-400"}`,children:[a.jsx(xi,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:"Şəxsi"})]}),a.jsxs("button",{type:"button",onClick:()=>c("public"),className:`flex items-center justify-center space-x-2 p-3 rounded-lg border transition-all duration-200 ${o==="public"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-600 hover:border-gray-400"}`,children:[a.jsx(gs,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:"Ümumi"})]})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:o==="private"?"Yalnız sizin üçün görünəcək":"Bütün istifadəçilər görəcək"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Etiketlər (isteğe bağlı)"}),a.jsxs("div",{className:"flex space-x-2 mb-2",children:[a.jsx("input",{type:"text",value:m,onChange:N=>p(N.target.value),placeholder:"etiket",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 text-sm",onKeyPress:N=>N.key==="Enter"&&(N.preventDefault(),j())}),a.jsx("button",{type:"button",onClick:j,disabled:!m.trim()||u.includes(m.trim())||u.length>=5,className:"px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 text-sm",children:a.jsx(fj,{className:"w-4 h-4"})})]}),u.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2",children:u.map((N,I)=>a.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:["#",N,a.jsx("button",{type:"button",onClick:()=>D(N),className:"ml-1 text-blue-600 hover:text-blue-800",children:a.jsx(rs,{className:"w-3 h-3 rotate-45"})})]},I))}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[u.length,"/5 etiket"]})]})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"İngilis dili sözü"}),a.jsx("input",{type:"text",value:C,onChange:N=>k(N.target.value),placeholder:"Hello",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Azərbaycan dilində mənası"}),a.jsx("input",{type:"text",value:P,onChange:N=>w(N.target.value),placeholder:"Salam",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"})]})]}),a.jsxs("button",{onClick:E,disabled:!C.trim()||!P.trim()||g.length>=30,className:"w-full md:w-auto flex items-center justify-center space-x-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-lg",children:[a.jsx(rs,{className:"w-4 h-4"}),a.jsx("span",{children:"Söz əlavə et"})]})]}),g.length>0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Əlavə edilmiş sözlər (",g.length,"/30)"]}),a.jsx("div",{className:"text-sm text-gray-600",children:g.length>=6?a.jsx("span",{className:"text-green-600 font-medium",children:"✓ Quiz üçün hazır"}):a.jsxs("span",{className:"text-orange-600",children:["Daha ",6-g.length," söz lazım"]})})]}),a.jsx("div",{className:"grid gap-3",children:g.map(N=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors duration-200",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{className:"font-medium text-gray-800",children:N.english}),a.jsx("span",{className:"text-gray-600 mx-3",children:"→"}),a.jsx("span",{className:"text-gray-700",children:N.meaning})]}),a.jsx("button",{onClick:()=>v(N.id),className:"p-1 text-gray-400 hover:text-red-500 transition-colors duration-200",children:a.jsx(rs,{className:"w-4 h-4 transform rotate-45"})})]},N.id))})]}),a.jsx("div",{className:"flex justify-center",children:a.jsx("button",{onClick:y,disabled:!n.trim()||g.length<6||V,className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white px-8 py-4 rounded-xl font-semibold text-lg hover:from-green-600 hover:to-emerald-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:V?"Saxlanılır...":"Kolleksiyanı Saxla"})})]})},Cj=({onBack:t,onNavigateToAllCollections:e,onPlayQuiz:n,onSaveCollection:r})=>{const{currentUser:s}=un(),[i,o]=M.useState([]),[c,u]=M.useState([]),[d,m]=M.useState([]),[p,g]=M.useState(new Set),[b,C]=M.useState(!0),[k,P]=M.useState(!1),[w,E]=M.useState(null),[v,j]=M.useState({name:"",visibility:"public"});M.useEffect(()=>{D()},[s]);const D=async()=>{if(s){C(!0);try{const[S,A,T,$]=await Promise.all([o1(s.id),a1(s.id),h1(s.id),_m(s.id)]);console.log("📊 Loaded collections:",{own:S.length,saved:A.length,learned:T.length,learnedRecords:$.length}),o(S),u(A),m(T);const ae=new Set($.map(W=>W.collectionId));g(ae),console.log("🎯 Learned collection IDs:",Array.from(ae)),console.log("📚 Learned collections with data:",T.map(W=>({id:W.id,name:W.name})))}catch(S){console.error("Error loading collections:",S)}finally{C(!1)}}},V=async S=>{await r(S),P(!1),await D()},_=async S=>{if(window.confirm("Bu kolleksiyanı silmək istədiyinizə əminsiniz?"))try{await u1(S),o(A=>A.filter(T=>T.id!==S))}catch(A){console.error("Error deleting collection:",A),alert("Kolleksiya silinə bilmədi. Yenidən cəhd edin.")}},y=S=>{E(S),j({name:S.name,visibility:S.visibility||"public"})},N=async()=>{if(!(!w||!v.name.trim()))try{await d1(w.id,{name:v.name.trim(),visibility:v.visibility}),o(S=>S.map(A=>A.id===w.id?{...A,name:v.name.trim(),visibility:v.visibility}:A)),E(null),j({name:"",visibility:"public"})}catch(S){console.error("Error updating collection:",S),alert("Kolleksiya yenilənə bilmədi. Yenidən cəhd edin.")}},I=()=>{E(null),j({name:"",visibility:"public"})};return k?a.jsx(kj,{onSave:V,onBack:()=>P(!1)}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[a.jsx("div",{className:"bg-white shadow-sm border-b",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-4",children:[a.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[a.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(kn,{className:"w-5 h-5 text-gray-600"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg",children:a.jsx(Je,{className:"w-6 h-6 text-white"})}),a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Kolleksiyalarım"})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[a.jsxs("button",{onClick:e,className:"flex items-center justify-center space-x-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white px-4 sm:px-6 py-3 rounded-lg font-semibold hover:from-green-600 hover:to-emerald-700 transition-all shadow-lg hover:shadow-xl text-sm sm:text-base",children:[a.jsx(Je,{className:"w-4 h-4"}),a.jsx("span",{children:"Bütün Kolleksiyalar"})]}),a.jsxs("button",{onClick:()=>P(!0),className:"flex items-center justify-center space-x-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white px-4 sm:px-6 py-3 rounded-lg font-semibold hover:from-blue-600 hover:to-purple-700 transition-all shadow-lg hover:shadow-xl text-sm sm:text-base",children:[a.jsx(rs,{className:"w-4 h-4"}),a.jsx("span",{children:"Yeni Kolleksiya"})]})]})]})}),a.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8",children:b?a.jsxs("div",{className:"flex justify-center items-center py-20",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),a.jsx("span",{className:"ml-4 text-gray-600",children:"Kolleksiyalar yüklənir..."})]}):i.length===0&&c.length===0&&d.length===0?a.jsxs("div",{className:"text-center py-20",children:[a.jsx("div",{className:"w-24 h-24 mx-auto bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mb-6",children:a.jsx(Je,{className:"w-12 h-12 text-gray-400"})}),a.jsx("h3",{className:"text-2xl font-semibold text-gray-600 mb-4",children:"Hələ kolleksiya yoxdur"}),a.jsx("p",{className:"text-gray-500 mb-8 max-w-md mx-auto",children:"İlk kolleksiyanızı yaradın və söz öyrənməyə başlayın. Hər kolleksiya minimum 6 söz içərməlidir."}),a.jsxs("button",{onClick:()=>P(!0),className:"flex items-center space-x-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white px-8 py-4 rounded-xl font-semibold text-lg hover:from-blue-600 hover:to-purple-700 transition-all shadow-lg hover:shadow-xl mx-auto",children:[a.jsx(rs,{className:"w-5 h-5"}),a.jsx("span",{children:"İlk Kolleksiyanı Yarat"})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid md:grid-cols-4 gap-6 mb-8",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:a.jsx(Je,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-800",children:i.length+c.length+d.length}),a.jsx("div",{className:"text-gray-600",children:"Cəmi Kolleksiya"})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:a.jsx(Kt,{className:"w-6 h-6 text-green-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-800",children:[...i,...c].filter(S=>p.has(S.id)).reduce((S,A)=>{var T;return S+(((T=A.words)==null?void 0:T.length)||0)},0)}),a.jsx("div",{className:"text-gray-600",children:"Öyrənilən Söz"})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:a.jsx(hy,{className:"w-6 h-6 text-orange-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-800",children:[...i,...c].reduce((S,A)=>{var T;return S+(((T=A.words)==null?void 0:T.length)||0)},0)}),a.jsx("div",{className:"text-gray-600",children:"Cəmi Söz"})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:a.jsx(yn,{className:"w-6 h-6 text-purple-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-800",children:[...i,...c].filter(S=>{var A;return(((A=S.words)==null?void 0:A.length)||0)>=6&&!p.has(S.id)}).length}),a.jsx("div",{className:"text-gray-600",children:"Quiz Hazır"})]})]})})]}),(()=>{const S=(i||[]).filter(W=>!p.has(W.id));(i||[]).filter(W=>p.has(W.id));const A=(c||[]).filter(W=>!(i||[]).some(Ee=>Ee.id===W.id)),T=A.filter(W=>!p.has(W.id));A.filter(W=>p.has(W.id));const $=d||[],ae=[...S||[],...T||[]];return a.jsxs(a.Fragment,{children:[ae.length>0&&a.jsxs("div",{className:"mb-12",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:a.jsx(ga,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("h2",{className:"text-2xl font-bold text-gray-800 ml-4",children:["Öyrəniləsi Olanlar (",ae.length,")"]})]}),a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:ae.map(W=>{var Ee,B,J,F,K,Y,G,oe;return a.jsx("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden border-l-4 border-blue-500",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-800 line-clamp-2",children:W.name}),W.userId===(s==null?void 0:s.id)&&a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>y(W),className:"p-1 text-gray-400 hover:text-blue-500 transition-colors",children:a.jsx(hy,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>_(W.id),className:"p-1 text-gray-400 hover:text-red-500 transition-colors",children:a.jsx(fy,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Müəllif"}),a.jsx("span",{className:"font-semibold text-gray-800",children:W.userId===(s==null?void 0:s.id)?"Mən":`@${W.username}`})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Sözlər"}),a.jsx("span",{className:"font-semibold text-gray-800",children:((Ee=W.words)==null?void 0:Ee.length)||0})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Yaradılma"}),a.jsx("span",{className:"text-gray-800",children:W.createdAt.toLocaleDateString("az-AZ")})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Status"}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${(((B=W.words)==null?void 0:B.length)||0)>=6?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:(((J=W.words)==null?void 0:J.length)||0)>=6?"Quiz hazır":`${6-(((F=W.words)==null?void 0:F.length)||0)} söz lazım`})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Görünürlük"}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${(W.visibility||"public")==="public"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:(W.visibility||"public")==="public"?"Açıq":"Gizli"})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Nümunə sözlər:"}),a.jsxs("div",{className:"space-y-1",children:[(W.words||[]).slice(0,2).map((_e,Fe)=>a.jsxs("div",{className:"text-sm bg-gray-50 rounded p-2",children:[a.jsx("span",{className:"font-medium",children:_e.english}),a.jsx("span",{className:"text-gray-600 mx-2",children:"→"}),a.jsx("span",{className:"text-gray-700",children:_e.meaning})]},Fe)),(((K=W.words)==null?void 0:K.length)||0)>2&&a.jsxs("div",{className:"text-sm text-gray-500 text-center py-1",children:["...və ",(((Y=W.words)==null?void 0:Y.length)||0)-2," söz daha"]})]})]}),a.jsxs("button",{onClick:()=>n(W),disabled:(((G=W.words)==null?void 0:G.length)||0)<6,className:"w-full flex items-center justify-center space-x-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white py-3 rounded-lg font-semibold hover:from-blue-600 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(yn,{className:"w-4 h-4"}),a.jsx("span",{children:(((oe=W.words)==null?void 0:oe.length)||0)>=6?"Quiz Oyna":"Quiz üçün hazır deyil"})]})]})},W.id)})})]}),A.length>0&&a.jsxs("div",{className:"mb-12",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:a.jsx(C1,{className:"w-6 h-6 text-yellow-600"})}),a.jsxs("h2",{className:"text-2xl font-bold text-gray-800 ml-4",children:["Saxlanılan Kolleksiyalar (",A.length,")"]})]}),a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:A.map(W=>{var Ee,B,J,F;return a.jsx("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden border-l-4 border-yellow-500",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-800 line-clamp-2",children:W.name}),a.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full font-medium",children:"Saxlanılan"})]}),a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Müəllif"}),a.jsxs("span",{className:"font-semibold text-gray-800",children:["@",W.username]})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Sözlər"}),a.jsx("span",{className:"font-semibold text-gray-800",children:((Ee=W.words)==null?void 0:Ee.length)||0})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Status"}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${p.has(W.id)?"bg-green-100 text-green-800":(((B=W.words)==null?void 0:B.length)||0)>=6?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:p.has(W.id)?"Öyrənildi":(((J=W.words)==null?void 0:J.length)||0)>=6?"Quiz hazır":"Quiz yoxdur"})]})]}),(((F=W.words)==null?void 0:F.length)||0)>=6&&a.jsxs("button",{onClick:()=>n(W),disabled:p.has(W.id),className:`w-full flex items-center justify-center space-x-2 py-3 rounded-lg font-semibold transition-all ${p.has(W.id)?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700"}`,children:[a.jsx(yn,{className:"w-4 h-4"}),a.jsx("span",{children:p.has(W.id)?"Öyrənildi":"Quiz Oyna"})]})]})},`saved-${W.id}`)})})]}),$.length>0&&a.jsxs("div",{className:"mb-12",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:a.jsx(Kt,{className:"w-6 h-6 text-green-600"})}),a.jsxs("h2",{className:"text-2xl font-bold text-gray-800 ml-4",children:["Öyrənilən Kolleksiyalar (",$.length,")"]})]}),a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:$.map(W=>{var Ee,B,J;return a.jsx("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden border-l-4 border-green-500 opacity-90",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-800 line-clamp-2",children:W.name}),a.jsx(Kt,{className:"w-5 h-5 text-green-600 ml-2 flex-shrink-0"})]}),W.userId===(s==null?void 0:s.id)&&a.jsx("button",{onClick:()=>_(W.id),className:"p-1 text-gray-400 hover:text-red-500 transition-colors",children:a.jsx(fy,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Müəllif"}),a.jsx("span",{className:"font-semibold text-gray-800",children:W.userId===(s==null?void 0:s.id)?"Mən":`@${W.username}`})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Sözlər"}),a.jsx("span",{className:"font-semibold text-gray-800",children:((Ee=W.words)==null?void 0:Ee.length)||0})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Yaradılma"}),a.jsx("span",{className:"text-gray-800",children:W.createdAt.toLocaleDateString("az-AZ")})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Status"}),a.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"✨ Öyrənildi"})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Nümunə sözlər:"}),a.jsxs("div",{className:"space-y-1",children:[(W.words||[]).slice(0,2).map((F,K)=>a.jsxs("div",{className:"text-sm bg-green-50 rounded p-2",children:[a.jsx("span",{className:"font-medium",children:F.english}),a.jsx("span",{className:"text-gray-600 mx-2",children:"→"}),a.jsx("span",{className:"text-gray-700",children:F.meaning})]},K)),(((B=W.words)==null?void 0:B.length)||0)>2&&a.jsxs("div",{className:"text-sm text-gray-500 text-center py-1",children:["...və ",(((J=W.words)==null?void 0:J.length)||0)-2," söz daha"]})]})]}),a.jsxs("button",{onClick:()=>n(W),className:"w-full flex items-center justify-center space-x-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white py-3 rounded-lg font-semibold hover:from-green-600 hover:to-emerald-700 transition-all",children:[a.jsx(yn,{className:"w-4 h-4"}),a.jsx("span",{children:"Yenidən Oyna"})]})]})},W.id)})})]})]})})()]})}),w&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsx("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md",children:a.jsxs("div",{className:"p-6",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:"Kolleksiyanı Redaktə Et"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kolleksiya Adı"}),a.jsx("input",{type:"text",value:v.name,onChange:S=>j(A=>({...A,name:S.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Kolleksiya adını daxil edin"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Görünürlük"}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"visibility",value:"public",checked:v.visibility==="public",onChange:S=>j(A=>({...A,visibility:S.target.value})),className:"mr-2"}),a.jsx("span",{className:"text-sm",children:"Açıq (hər kəs görə bilər)"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"visibility",value:"private",checked:v.visibility==="private",onChange:S=>j(A=>({...A,visibility:S.target.value})),className:"mr-2"}),a.jsx("span",{className:"text-sm",children:"Gizli (yalnız mən)"})]})]})]})]}),a.jsxs("div",{className:"flex space-x-3 mt-6",children:[a.jsx("button",{onClick:I,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors",children:"Ləğv Et"}),a.jsx("button",{onClick:N,disabled:!v.name.trim(),className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Yadda Saxla"})]})]})})})]})},Aj=({onBack:t,onPlayQuiz:e})=>{const{currentUser:n}=un(),[r,s]=M.useState([]),[i,o]=M.useState([]),[c,u]=M.useState(!0),[d,m]=M.useState(""),[p,g]=M.useState("rating"),[b,C]=M.useState(new Set);M.useEffect(()=>{k()},[]),M.useEffect(()=>{P()},[r,d,p]);const k=async()=>{try{u(!0);const v=await l1();if(s(v),n){const j=await Promise.all(v.map(async V=>{const _=await p1(n.id,V.id);return{id:V.id,isSaved:_}})),D=new Set(j.filter(V=>V.isSaved).map(V=>V.id));C(D)}}catch(v){console.error("Error loading public collections:",v)}finally{u(!1)}},P=()=>{let v=r;d&&(v=v.filter(j=>{var D;return j.name.toLowerCase().includes(d.toLowerCase())||j.username.toLowerCase().includes(d.toLowerCase())||((D=j.tags)==null?void 0:D.some(V=>V.toLowerCase().includes(d.toLowerCase())))})),v.sort((j,D)=>{switch(p){case"rating":return D.rating!==j.rating?D.rating-j.rating:D.usageCount-j.usageCount;case"recent":return D.createdAt.getTime()-j.createdAt.getTime();case"usage":return D.usageCount!==j.usageCount?D.usageCount-j.usageCount:D.rating-j.rating;default:return 0}}),o(v)},w=async v=>{if(n)try{b.has(v)?(await m1(n.id,v),C(D=>{const V=new Set(D);return V.delete(v),V})):(await f1(n.id,v),C(D=>new Set([...D,v])))}catch(j){console.error("Error saving/removing collection:",j)}},E=async v=>{e(v)};return c?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex justify-center items-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mb-4"}),a.jsx("span",{className:"text-gray-600",children:"Public kolleksiyalar yüklənir..."})]})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[a.jsx("div",{className:"bg-white shadow-sm border-b",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(kn,{className:"w-5 h-5 text-gray-600"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg",children:a.jsx(Je,{className:"w-6 h-6 text-white"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Bütün Kolleksiyalar"})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(vj,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Kolleksiya və ya müəllif axtar...",value:d,onChange:v=>m(v.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 w-64"})]}),a.jsxs("select",{value:p,onChange:v=>g(v.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"rating",children:"Reytinqə görə"}),a.jsx("option",{value:"recent",children:"Yenilərə görə"}),a.jsx("option",{value:"usage",children:"İstifadəyə görə"})]})]})]})})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[a.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:a.jsx(Je,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-800",children:i.length}),a.jsx("div",{className:"text-gray-600",children:"Mövcud Kolleksiya"})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:a.jsx(sn,{className:"w-6 h-6 text-green-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-800",children:new Set(i.map(v=>v.userId)).size}),a.jsx("div",{className:"text-gray-600",children:"Aktiv Müəllif"})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:a.jsx(yc,{className:"w-6 h-6 text-purple-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-800",children:i.reduce((v,j)=>v+j.usageCount,0)}),a.jsx("div",{className:"text-gray-600",children:"Ümumi İstifadə"})]})]})})]}),i.length===0?a.jsxs("div",{className:"text-center py-20",children:[a.jsx("div",{className:"w-24 h-24 mx-auto bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mb-6",children:a.jsx(Je,{className:"w-12 h-12 text-gray-400"})}),a.jsx("h3",{className:"text-2xl font-semibold text-gray-600 mb-4",children:d?"Heç bir kolleksiya tapılmadı":"Hələ public kolleksiya yoxdur"}),a.jsx("p",{className:"text-gray-500 max-w-md mx-auto",children:d?"Axtarış kriteriyalarınızı dəyişdirərək yenidən cəhd edin.":"İlk public kolleksiya yaradın və başqaları ilə paylaşın."})]}):a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(v=>a.jsx("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-800 line-clamp-2 flex-1",children:v.name}),a.jsx("button",{onClick:()=>w(v.id),className:`p-2 rounded-lg transition-colors ${b.has(v.id)?"bg-yellow-100 text-yellow-600 hover:bg-yellow-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,title:b.has(v.id)?"Saxlanılıbdan çıxar":"Saxla",children:b.has(v.id)?a.jsx(aj,{className:"w-4 h-4"}):a.jsx(C1,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Müəllif"}),a.jsxs("span",{className:"font-semibold text-gray-800",children:["@",v.username]})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Sözlər"}),a.jsx("span",{className:"font-semibold text-gray-800",children:v.words.length})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Reytinq"}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(vi,{className:"w-4 h-4 text-yellow-500 mr-1"}),a.jsx("span",{className:"font-semibold text-gray-800",children:v.rating.toFixed(1)})]})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"İstifadə"}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(sn,{className:"w-4 h-4 text-blue-500 mr-1"}),a.jsx("span",{className:"font-semibold text-gray-800",children:v.usageCount})]})]})]}),v.description&&a.jsx("div",{className:"mb-4",children:a.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:v.description})}),a.jsxs("div",{className:"mb-4",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Nümunə sözlər:"}),a.jsxs("div",{className:"space-y-1",children:[v.words.slice(0,2).map((j,D)=>a.jsxs("div",{className:"text-sm bg-blue-50 rounded p-2",children:[a.jsx("span",{className:"font-medium",children:j.english}),a.jsx("span",{className:"text-gray-600 mx-2",children:"→"}),a.jsx("span",{className:"text-gray-700",children:j.meaning})]},D)),v.words.length>2&&a.jsxs("div",{className:"text-sm text-gray-500 text-center py-1",children:["...və ",v.words.length-2," söz daha"]})]})]}),v.tags&&v.tags.length>0&&a.jsx("div",{className:"mb-4",children:a.jsx("div",{className:"flex flex-wrap gap-2",children:v.tags.map((j,D)=>a.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:["#",j]},D))})}),a.jsxs("button",{onClick:()=>E(v),disabled:v.words.length<6,className:"w-full flex items-center justify-center space-x-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white py-3 rounded-lg font-semibold hover:from-blue-600 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(yn,{className:"w-4 h-4"}),a.jsx("span",{children:v.words.length>=6?"Quiz Oyna":"Quiz üçün hazır deyil"})]})]})},v.id))})]})]})},jj=({onBack:t,onTakeExam:e})=>{const{currentUser:n}=un(),[r,s]=M.useState([]),[i,o]=M.useState({}),[c,u]=M.useState({}),[d,m]=M.useState(!0),[p,g]=M.useState("newest");M.useEffect(()=>{b()},[]);const b=async()=>{try{m(!0);const P=await Em(50);if(s(P),n&&P.length>0){const w=P.map(async _=>{const y=await T1(n.id,_.id);return{examId:_.id,hasParticipated:y}}),E=P.map(async _=>{const y=await bm(n.id,_.id);return{examId:_.id,bestResult:y}}),[v,j]=await Promise.all([Promise.all(w),Promise.all(E)]),D=v.reduce((_,{examId:y,hasParticipated:N})=>(_[y]=N,_),{}),V=j.reduce((_,{examId:y,bestResult:N})=>(N&&(_[y]=N),_),{});o(D),u(V)}}catch(P){console.error("Error loading exams:",P)}finally{m(!1)}},C=r.sort((P,w)=>{switch(p){case"newest":return new Date(w.createdAt).getTime()-new Date(P.createdAt).getTime();case"popular":return w.totalAttempts-P.totalAttempts;case"rating":return w.rating-P.rating;default:return 0}}),k=P=>P>=90?"text-green-600":P>=80?"text-blue-600":P>=70?"text-yellow-600":P>=60?"text-orange-600":"text-red-600";return d?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50 flex justify-center items-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mb-4"}),a.jsx("span",{className:"text-gray-600",children:"İmtahanlar yüklənir..."})]})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50",children:[a.jsx("div",{className:"bg-white shadow-sm border-b",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100  rounded-lg transition-colors",children:a.jsx(kn,{className:"w-5 h-5 text-gray-600"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-lg",children:a.jsx(Mn,{className:"w-6 h-6 text-white"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Bütün İmtahanlar"})]})]}),a.jsx("div",{className:"flex items-center space-x-4",children:a.jsxs("div",{className:"flex items-center space-x-2 bg-blue-50 px-3 py-2 rounded-lg",children:[a.jsx(xn,{className:"w-4 h-4 text-blue-600"}),a.jsxs("span",{className:"text-sm text-blue-800",children:[a.jsx("strong",{children:r.length})," İmtahan"]})]})})]})})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Sıralama"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>g("newest"),className:`px-4 py-2 rounded-lg transition-colors ${p==="newest"?"bg-purple-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Ən Yeni"}),a.jsx("button",{onClick:()=>g("popular"),className:`px-4 py-2 rounded-lg transition-colors ${p==="popular"?"bg-purple-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Ən Populyar"}),a.jsx("button",{onClick:()=>g("rating"),className:`px-4 py-2 rounded-lg transition-colors ${p==="rating"?"bg-purple-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Ən Yüksək Reytinq"})]})]})}),C.length===0?a.jsxs("div",{className:"text-center py-16",children:[a.jsx("div",{className:"w-16 h-16 mx-auto bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mb-4",children:a.jsx(Mn,{className:"w-8 h-8 text-gray-400"})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Hələ public imtahan yoxdur"}),a.jsx("p",{className:"text-gray-500",children:"İlk public imtahanınızı yaradın və community ilə paylaşın!"})]}):a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:C.map(P=>a.jsxs("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 p-6 border border-gray-200",children:[a.jsx("div",{className:"flex items-start justify-between mb-4",children:a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2 line-clamp-2",children:P.name}),a.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["@",P.username]}),P.description&&a.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-3",children:P.description})]})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{className:"text-center bg-gray-50 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-center mb-1",children:[a.jsx(Je,{className:"w-4 h-4 text-blue-500 mr-1"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Sözlər"})]}),a.jsx("div",{className:"text-lg font-bold text-gray-800",children:P.settings.wordCount})]}),a.jsxs("div",{className:"text-center bg-gray-50 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-center mb-1",children:[a.jsx(ga,{className:"w-4 h-4 text-green-500 mr-1"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Vaxt"})]}),a.jsxs("div",{className:"text-lg font-bold text-gray-800",children:[P.settings.timeLimit,"m"]})]})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(sn,{className:"w-3 h-3 mr-1"}),a.jsx("span",{children:P.totalAttempts})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(vi,{className:"w-3 h-3 mr-1 text-yellow-500"}),a.jsx("span",{children:P.rating.toFixed(1)})]})]}),a.jsx("div",{className:"text-xs",children:new Date(P.createdAt).toLocaleDateString("az-AZ")})]}),n&&i[P.id]&&c[P.id]&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Kt,{className:"w-4 h-4 text-blue-600 mr-2"}),a.jsx("span",{className:"text-sm font-medium text-blue-800",children:"İştirak etmisiniz"})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:`text-sm font-bold ${k(c[P.id].scorePercentage)}`,children:[c[P.id].scorePercentage.toFixed(1),"%"]}),a.jsxs("div",{className:"text-xs text-gray-600",children:[c[P.id].score,"/",c[P.id].totalQuestions]})]})]})}),a.jsxs("button",{onClick:()=>e(P),className:`w-full flex items-center justify-center space-x-2 py-3 px-4 rounded-lg font-medium transition-all ${n&&i[P.id]?"bg-gradient-to-r from-yellow-500 to-orange-600 hover:from-yellow-600 hover:to-orange-700":"bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700"} text-white`,children:[a.jsx(yn,{className:"w-4 h-4"}),a.jsx("span",{children:n&&i[P.id]?"Yenidən Cəhd Et":"İmtahan Ver"})]})]},P.id))})]})]})},Pj=({onBack:t,onTakeExam:e,onNavigateToAllExams:n,onNavigateToCreateExam:r})=>{const{currentUser:s}=un(),[i,o]=M.useState([]),[c,u]=M.useState([]),[d,m]=M.useState({}),[p,g]=M.useState(!0);M.useEffect(()=>{b()},[s]);const b=async()=>{if(!s){console.log("❌ No current user in MyExams loadExams");return}console.log("🔥 MyExams loadExams called for user:",s.id,s.username),g(!0);try{console.log("📞 Calling loadUserPublicExams...");const k=await E1(s.id);console.log("✅ loadUserPublicExams result:",k.length,"exams"),o(k),console.log("📞 Calling loadUserParticipatedExams...");const P=await N1(s.id);if(console.log("✅ loadUserParticipatedExams result:",P.length,"exams"),u(P),P.length>0){const w=P.map(async j=>{const D=await bm(s.id,j.id);return{examId:j.id,bestResult:D}}),v=(await Promise.all(w)).reduce((j,{examId:D,bestResult:V})=>(V&&(j[D]=V),j),{});m(v),console.log("✅ Best results loaded for",Object.keys(v).length,"participated exams")}}catch(k){console.error("❌ Error loading exams:",k)}finally{g(!1),console.log("🏁 MyExams loadExams completed")}},C=k=>k>=90?"text-green-600":k>=80?"text-blue-600":k>=70?"text-yellow-600":k>=60?"text-orange-600":"text-red-600";return p?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50 flex justify-center items-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"İmtahanlar yüklənir..."})]})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50",children:[a.jsx("div",{className:"bg-white shadow-lg",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("button",{onClick:t,className:"flex items-center space-x-2 text-gray-600 hover:text-purple-600 transition-colors",children:[a.jsx(kn,{className:"w-5 h-5"}),a.jsx("span",{children:"Geri"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-lg",children:a.jsx(Je,{className:"w-6 h-6 text-white"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Mənim İmtahanlarım"})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("button",{onClick:r,className:"flex items-center space-x-2 bg-gradient-to-r from-purple-500 to-indigo-600 text-white px-4 py-2 rounded-lg hover:from-purple-600 hover:to-indigo-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:[a.jsx(rs,{className:"w-4 h-4"}),a.jsx("span",{children:"Yeni İmtahan"})]}),a.jsxs("button",{onClick:n,className:"flex items-center space-x-2 bg-gradient-to-r from-blue-500 to-cyan-600 text-white px-4 py-2 rounded-lg hover:from-blue-600 hover:to-cyan-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:[a.jsx(gs,{className:"w-4 h-4"}),a.jsx("span",{children:"Bütün İmtahanlar"})]})]})]})})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[a.jsxs("div",{className:"mb-12",children:[a.jsx("div",{className:"flex items-center justify-between mb-6",children:a.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:a.jsx(wj,{className:"w-5 h-5 text-purple-600"})}),a.jsx("span",{children:"Yaratdığım İmtahanlar"}),a.jsx("span",{className:"bg-purple-100 text-purple-600 px-2 py-1 rounded-full text-sm font-medium",children:i.length})]})}),i.length===0?a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[a.jsx("div",{className:"w-16 h-16 mx-auto bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mb-4",children:a.jsx(Je,{className:"w-8 h-8 text-gray-400"})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Hələ imtahan yaratmamısınız"}),a.jsx("p",{className:"text-gray-500 mb-6",children:"İlk imtahanınızı yaradın və digər istifadəçilərlə paylaşın!"}),a.jsxs("button",{onClick:r,className:"flex items-center space-x-2 bg-gradient-to-r from-purple-500 to-indigo-600 text-white px-6 py-3 rounded-lg hover:from-purple-600 hover:to-indigo-700 transition-all duration-200 shadow-lg hover:shadow-xl mx-auto",children:[a.jsx(rs,{className:"w-4 h-4"}),a.jsx("span",{children:"İmtahan Yarat"})]})]}):a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(k=>a.jsxs("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 p-6 border border-gray-200",children:[a.jsx("div",{className:"flex items-start justify-between mb-4",children:a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2 line-clamp-2",children:k.name}),k.description&&a.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-3",children:k.description})]})}),a.jsxs("div",{className:"space-y-3 mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Söz sayı"}),a.jsx("span",{className:"font-semibold text-gray-800",children:k.settings.wordCount})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Vaxt limiti"}),a.jsxs("span",{className:"font-semibold text-gray-800",children:[k.settings.timeLimit,"m"]})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Söz sayı"}),a.jsx("span",{className:"font-semibold text-gray-800",children:k.settings.wordCount})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Ortalama bal"}),a.jsxs("span",{className:`font-semibold ${C(k.averageScore)}`,children:[k.averageScore.toFixed(1),"%"]})]})]}),a.jsx("div",{className:"flex space-x-2",children:a.jsxs("button",{onClick:()=>e(k),className:"flex-1 flex items-center justify-center space-x-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white py-2 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-200 text-sm font-medium",children:[a.jsx(yn,{className:"w-4 h-4"}),a.jsx("span",{children:"Test Et"})]})})]},k.id))})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:a.jsx(sn,{className:"w-5 h-5 text-blue-600"})}),a.jsx("span",{children:"Digər İmtahanlar"})]}),a.jsx("button",{onClick:n,className:"text-blue-600 hover:text-blue-700 font-medium text-sm transition-colors",children:"Hamısına bax →"})]}),c.length===0?a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[a.jsx("div",{className:"w-16 h-16 mx-auto bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mb-4",children:a.jsx(sn,{className:"w-8 h-8 text-gray-400"})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Hələ imtahanda iştirak etməmisiniz"}),a.jsx("p",{className:"text-gray-500",children:"Digər istifadəçilərin yaratdığı imtahanlarda iştirak etdikləriniz burada görünəcək."})]}):a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.slice(0,6).map(k=>a.jsxs("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 p-6 border border-gray-200",children:[a.jsx("div",{className:"flex items-start justify-between mb-4",children:a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2 line-clamp-2",children:k.name}),a.jsxs("p",{className:"text-sm text-gray-600  mb-2",children:["@",k.username]}),k.description&&a.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-3",children:k.description})]})}),a.jsxs("div",{className:"space-y-3 mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Söz sayı"}),a.jsx("span",{className:"font-semibold text-gray-800",children:k.settings.wordCount})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Vaxt limiti"}),a.jsxs("span",{className:"font-semibold text-gray-800",children:[k.settings.timeLimit,"m"]})]}),d[k.id]&&a.jsxs(a.Fragment,{children:[a.jsx("hr",{className:"my-2 border-gray-200"}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Ən yaxşı nəticə"}),a.jsxs("span",{className:`font-bold ${C(d[k.id].scorePercentage)}`,children:[d[k.id].scorePercentage.toFixed(1),"%"]})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Cavablar"}),a.jsxs("span",{className:"font-semibold text-gray-800",children:[d[k.id].score,"/",d[k.id].totalQuestions]})]})]})]}),a.jsxs("button",{onClick:()=>e(k),className:"w-full flex items-center justify-center space-x-2 bg-gradient-to-r from-yellow-500 to-orange-600 text-white py-3 rounded-lg hover:from-yellow-600 hover:to-orange-700 transition-all duration-200 font-medium",children:[a.jsx(yn,{className:"w-4 h-4"}),a.jsx("span",{children:"Yenidən Cəhd Et"})]})]},k.id))})]})]})]})},Rj=({onBack:t})=>{const{currentUser:e}=un(),[n,r]=M.useState("creators"),[s,i]=M.useState([]),[o,c]=M.useState([]),[u,d]=M.useState([]),[m,p]=M.useState(!0);M.useEffect(()=>{g()},[]);const g=async()=>{try{p(!0),console.log("🚀 Starting to load leaderboard data...");const[w,E]=await Promise.all([g1(50),y1(50)]),v=new Map;[...w,...E].forEach(V=>{(!v.has(V.id)||V.totalExams>0)&&v.set(V.id,V)});const D=Array.from(v.values()).sort((V,_)=>{const y=V.averageExamScore*Math.sqrt(Math.max(1,V.totalExams)),N=_.averageExamScore*Math.sqrt(Math.max(1,_.totalExams));return y!==N?N-y:V.totalExams!==_.totalExams?_.totalExams-V.totalExams:_.averageExamScore-V.averageExamScore}).filter(V=>V.totalExams>0);console.log("🏆 Creators loaded:",w.length),console.log("🎓 Learners loaded:",E.length),console.log("🎓 Exam takers loaded:",D.length),i(w),c(E),d(D)}catch(w){console.error("❌ Error loading leaderboard:",w)}finally{p(!1)}},b=w=>{switch(w){case 1:return a.jsx(cj,{className:"w-6 h-6 text-yellow-500"});case 2:return a.jsx(k1,{className:"w-6 h-6 text-gray-400"});case 3:return a.jsx(xj,{className:"w-6 h-6 text-orange-600"});default:return a.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-xs font-bold text-blue-600",children:w})})}},C=w=>{switch(w){case 1:return"from-yellow-50 to-yellow-100 border-yellow-200";case 2:return"from-gray-50 to-gray-100 border-gray-200";case 3:return"from-orange-50 to-orange-100 border-orange-200";default:return"from-white to-gray-50 border-gray-200"}},k=n==="creators"?s:n==="learners"?o:u,P=k.findIndex(w=>w.id===(e==null?void 0:e.id))+1;return m?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50 flex justify-center items-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mb-4"}),a.jsx("span",{className:"text-gray-600",children:"Liderlik cədvəli yüklənir..."})]})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50",children:[a.jsx("div",{className:"bg-white shadow-sm border-b",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(kn,{className:"w-5 h-5 text-gray-600"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-lg",children:a.jsx(xn,{className:"w-6 h-6 text-white"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Liderlik Cədvəli"})]})]}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[a.jsxs("div",{className:"flex items-center space-x-2 bg-blue-50 px-3 py-2 rounded-lg",children:[a.jsx(vi,{className:"w-4 h-4 text-blue-600"}),a.jsxs("span",{children:["Sizin yeriniiz: ",a.jsxs("strong",{children:["#",P||"N/A"]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2 bg-green-50 px-3 py-2 rounded-lg",children:[a.jsx(sn,{className:"w-4 h-4 text-green-600"}),a.jsxs("span",{children:["Cəmi İstifadəçi: ",a.jsx("strong",{children:n==="creators"?s.length:o.length})]})]})]})]})})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-2 mb-8 flex",children:[a.jsxs("button",{onClick:()=>r("creators"),className:`flex-1 flex items-center justify-center space-x-2 py-4 px-6 rounded-xl font-semibold transition-all ${n==="creators"?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg":"text-gray-600 hover:bg-gray-50"}`,children:[a.jsx(Je,{className:"w-5 h-5"}),a.jsx("span",{children:"Ən Çox Yaradan"})]}),a.jsxs("button",{onClick:()=>r("learners"),className:`flex-1 flex items-center justify-center space-x-2 py-4 px-6 rounded-xl font-semibold transition-all ${n==="learners"?"bg-gradient-to-r from-green-500 to-emerald-600 text-white shadow-lg":"text-gray-600 hover:bg-gray-50"}`,children:[a.jsx(lj,{className:"w-5 h-5"}),a.jsx("span",{children:"Ən Çox Öyrənən"})]}),a.jsxs("button",{onClick:()=>r("exams"),className:`flex-1 flex items-center justify-center space-x-2 py-4 px-6 rounded-xl font-semibold transition-all ${n==="exams"?"bg-gradient-to-r from-orange-500 to-red-600 text-white shadow-lg":"text-gray-600 hover:bg-gray-50"}`,children:[a.jsx(Mn,{className:"w-5 h-5"}),a.jsx("span",{children:"Ən Yaxşı İmtahan"})]})]}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:a.jsx(sn,{className:"w-6 h-6 text-purple-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-800",children:k.length}),a.jsx("div",{className:"text-gray-600",children:"İstifadəçi"})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:a.jsx(Je,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-800",children:n==="exams"?k.reduce((w,E)=>w+E.totalExams,0).toLocaleString():k.reduce((w,E)=>w+E.totalWords,0).toLocaleString()}),a.jsx("div",{className:"text-gray-600",children:n==="creators"?"Yaradılan Söz":n==="learners"?"Öyrənilən Söz":"İmtahan Sayı"})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:a.jsx(yc,{className:"w-6 h-6 text-green-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsxs("div",{className:"text-2xl font-bold text-gray-800",children:[n==="exams"?Math.round(k.reduce((w,E)=>w+E.averageExamScore,0)/Math.max(k.length,1)):k.reduce((w,E)=>w+E.totalCollections,0),n==="exams"&&"%"]}),a.jsx("div",{className:"text-gray-600",children:n==="exams"?"Ortalama Bal":"Cəmi Kolleksiya"})]})]})})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-600 px-8 py-6",children:[a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center",children:[a.jsx(xn,{className:"w-6 h-6 mr-3"}),n==="creators"?"Ən Çox Kolleksiya Yaradanlar":n==="learners"?"Ən Çox Söz Öyrənənlər":"Ən Yaxşı İmtahan Nəticələri"]}),a.jsx("p",{className:"text-purple-100 mt-2",children:n==="creators"?"Ən çox söz və kolleksiya yaradıb community ilə paylaşanlar":n==="learners"?"Ən çox söz öyrənib bilik qazananlar":"Ən yüksək ortalama imtahan nəticəsi əldə edənlər"})]}),k.length===0?a.jsxs("div",{className:"text-center py-16",children:[a.jsx("div",{className:"w-16 h-16 mx-auto bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mb-4",children:a.jsx(xn,{className:"w-8 h-8 text-gray-400"})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Hələ məlumat yoxdur"}),a.jsx("p",{className:"text-gray-500",children:n==="creators"?"İlk public kolleksiyanı yaradın və liderlik cədvəlində yerinizi alın!":n==="learners"?"İlk quiz-lərinizi tamamlayın və liderlik cədvəlində yerinizi alın!":"İlk imtahanınızı verin və liderlik cədvəlində yerinizi alın!"})]}):a.jsx("div",{className:"divide-y divide-gray-100",children:k.map((w,E)=>{const v=w.id===(e==null?void 0:e.id),j=w.rank||E+1;return a.jsx("div",{className:`px-8 py-6 transition-all duration-200 ${v?"bg-gradient-to-r from-blue-50 to-purple-50 border-l-4 border-blue-500":j<=3?`bg-gradient-to-r ${C(j)} border-l-4 border-transparent`:"hover:bg-gray-50"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"flex items-center justify-center",children:b(j)}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center font-bold text-white ${v?"bg-gradient-to-r from-blue-500 to-purple-600":"bg-gradient-to-r from-gray-400 to-gray-600"}`,children:w.username.charAt(0).toUpperCase()}),a.jsx("div",{children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("h3",{className:`text-lg font-bold ${v?"text-blue-700":"text-gray-800"}`,children:["@",w.username]}),v&&a.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full font-medium",children:"Siz"}),j<=3&&a.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${j===1?"bg-yellow-100 text-yellow-800":j===2?"bg-gray-100 text-gray-800":"bg-orange-100 text-orange-800"}`,children:j===1?"Birinci":j===2?"İkinci":"Üçüncü"})]})})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-8 text-center",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-gray-800",children:n==="creators"?w.totalWords:n==="learners"?w.learnedWords:`${Math.round(w.averageExamScore)}%`}),a.jsx("div",{className:"text-sm text-gray-600",children:n==="creators"?"Yaradılan Söz":n==="learners"?"Öyrənilən Söz":"Ortalama Bal"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xl font-semibold text-gray-700",children:n==="exams"?w.totalExams:w.totalCollections}),a.jsx("div",{className:"text-sm text-gray-600",children:n==="exams"?"İmtahan Sayı":"Kolleksiya"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xl font-semibold text-gray-700",children:n==="creators"?w.totalUsage:n==="learners"?w.publicCollections:Math.round(w.averageExamScore*Math.sqrt(Math.max(1,w.totalExams)))}),a.jsx("div",{className:"text-sm text-gray-600",children:n==="creators"?"İstifadə":n==="learners"?"Public":"Çəkili Bal"})]})]})]})},w.id)})})]}),a.jsxs("div",{className:"mt-8 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-2xl p-8 text-center text-white",children:[a.jsx(xn,{className:"w-16 h-16 mx-auto mb-4 opacity-80"}),a.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Səndə liderlərdən olabilərsən!"}),a.jsx("p",{className:"text-lg opacity-90 max-w-2xl mx-auto",children:n==="creators"?"Yeni kolleksiyalar yaradıb community ilə paylaş. Hər söz sayılır!":n==="learners"?"Yeni sözlər öyrən və quiz-ləri 100% nəticə ilə tamamla!":"İmtahanlar ver və yüksək nəticələrlə liderlik cədvəlində yerin qorumağa çalış!"})]})]})]})},my=t=>{const e=[...t];for(let n=e.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[e[n],e[r]]=[e[r],e[n]]}return e},Dj=(t,e="english-to-meaning")=>{if(t.length<4)throw new Error("Minimum 4 söz lazımdır quiz üçün");return my(t).map((r,s)=>{let i;if(e==="mixed"){const m=Math.random();m<.4?i="english-to-meaning":m<.8?i="meaning-to-english":i=Math.random()<.5?"english-to-meaning":"meaning-to-english"}else i=e;let o,c;i==="english-to-meaning"?(o=t.filter(m=>m.id!==r.id).map(m=>m.meaning).sort(()=>Math.random()-.5).slice(0,3),c=r.meaning):(o=t.filter(m=>m.id!==r.id).map(m=>m.word||m.english||"").filter(m=>m.trim()!=="").sort(()=>Math.random()-.5).slice(0,3),c=r.word||r.english||"");const u=my([c,...o]),d=u.indexOf(c);return{word:r,options:u,correctIndex:d,mode:i}})},Vj=({collection:t,autoAdvance:e,quizMode:n,onBack:r,onFinish:s})=>{const[i,o]=M.useState([]),[c,u]=M.useState(0),[d,m]=M.useState(null),[p,g]=M.useState(!1),[b,C]=M.useState(0),[k,P]=M.useState(!1);M.useEffect(()=>{o(Dj(t.words,n))},[t,n]);const w=i[c],E=()=>{if(c<i.length-1)u(D=>D+1),m(null),g(!1),P(!1);else{const D={correct:b,total:i.length,percentage:Math.round(b/i.length*100)};s(D)}},v=D=>{d===null&&(m(D),P(!0),D===w.correctIndex&&C(V=>V+1),e&&setTimeout(()=>{E()},1500))},j=D=>d===null?"bg-white border-2 border-gray-200 hover:border-blue-300 hover:bg-blue-50 text-gray-800":D===w.correctIndex?"bg-green-500 border-green-500 text-white":D===d?"bg-red-500 border-red-500 text-white":"bg-gray-100 border-gray-200 text-gray-500";return w?a.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("button",{onClick:r,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800 transition-colors duration-200",children:[a.jsx(kn,{className:"w-5 h-5"}),a.jsx("span",{children:"Geri"})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[c+1," / ",i.length]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:w.mode==="english-to-meaning"?"Bu sözün mənası nədir?":"Bu mənanın ingilis dilindəki qarşılığı nədir?"}),a.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-8 py-4 rounded-xl inline-block",children:a.jsx("span",{className:"text-3xl font-bold",children:w.mode==="english-to-meaning"?w.word.word||w.word.english:w.word.meaning})})]}),a.jsx("div",{className:"grid gap-4",children:w.options.map((D,V)=>a.jsx("button",{onClick:()=>v(V),disabled:d!==null,className:`p-4 rounded-xl text-left font-medium transition-all duration-300 transform hover:scale-102 ${j(V)}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{children:D}),d!==null&&a.jsx("div",{children:V===w.correctIndex?a.jsx(Kt,{className:"w-5 h-5 text-white"}):V===d?a.jsx(bj,{className:"w-5 h-5 text-white"}):null})]})},V))}),!e&&k&&a.jsx("div",{className:"mt-6 flex justify-center",children:a.jsxs("button",{onClick:E,className:"flex items-center space-x-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-md hover:shadow-lg",children:[a.jsx("span",{children:c<i.length-1?"Növbəti sual":"Nəticəni gör"}),a.jsx(S1,{className:"w-4 h-4"})]})}),a.jsx("div",{className:"mt-8",children:a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full transition-all duration-500",style:{width:`${(c+1)/i.length*100}%`}})})})]})]}):a.jsx("div",{children:"Yüklənir..."})},Lj=({result:t,collection:e,onPlayAgain:n,onBackHome:r,onMarkAsLearned:s})=>{const[i,o]=M.useState(!1),c=()=>t.percentage>=90?{text:"Əla nəticə!",icon:xn,color:"from-yellow-400 to-orange-500"}:t.percentage>=75?{text:"Çox yaxşı!",icon:k1,color:"from-green-400 to-emerald-500"}:t.percentage>=60?{text:"Yaxşı!",icon:jh,color:"from-blue-400 to-cyan-500"}:{text:"Daha çox məşq lazım",icon:jh,color:"from-gray-400 to-gray-500"},{text:u,icon:d,color:m}=c(),p=async()=>{if(s&&!i){o(!0);try{await s(e.id),r()}catch(g){console.error("Failed to mark as learned:",g),o(!1)}}};return a.jsx("div",{className:"max-w-2xl mx-auto p-6",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("div",{className:`w-20 h-20 mx-auto bg-gradient-to-br ${m} rounded-full flex items-center justify-center mb-4`,children:a.jsx(d,{className:"w-10 h-10 text-white"})}),a.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:u}),a.jsxs("p",{className:"text-gray-600",children:['"',e.name,'" kolleksiyasını bitirdiniz']})]}),a.jsx("div",{className:"bg-gray-50 rounded-xl p-6 mb-8",children:a.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.correct}),a.jsx("div",{className:"text-sm text-gray-600",children:"Doğru"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:t.total-t.correct}),a.jsx("div",{className:"text-sm text-gray-600",children:"Yanlış"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[t.percentage,"%"]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Nəticə"})]})]})}),a.jsxs("div",{className:"space-y-4",children:[t.percentage===100&&s&&!e.isLearned&&a.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-6",children:[a.jsx("div",{className:"flex items-center justify-center mb-4",children:a.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:a.jsx(xn,{className:"w-8 h-8 text-green-600"})})}),a.jsx("h3",{className:"text-lg font-bold text-green-800 mb-2",children:"Mükəmməl Nəticə! 🎉"}),a.jsx("p",{className:"text-green-700 mb-4",children:"100% nəticə əldə etdiniz! Bu kolleksiyanı tamamilə öyrəndiniz."}),a.jsxs("button",{onClick:p,disabled:i,className:"flex items-center justify-center space-x-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-green-600 hover:to-emerald-700 transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50",children:[a.jsx(Kt,{className:"w-5 h-5"}),a.jsx("span",{children:i?"Saxlanır...":"Öyrəndim! ✨"})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[a.jsxs("button",{onClick:n,className:"flex items-center justify-center space-x-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-md hover:shadow-lg",children:[a.jsx(Nm,{className:"w-4 h-4"}),a.jsx("span",{children:"Yenidən oyna"})]}),a.jsxs("button",{onClick:r,className:"flex items-center justify-center space-x-2 bg-white border-2 border-gray-300 text-gray-700 px-6 py-3 rounded-lg font-medium hover:bg-gray-50 transition-all duration-200",children:[a.jsx(A1,{className:"w-4 h-4"}),a.jsx("span",{children:"Ana səhifə"})]})]})]})]})})},Mj=({settings:t,onUpdateSettings:e,onBack:n})=>{const{currentUser:r,updateUserProfile:s,updateUserPassword:i}=un(),[o,c]=M.useState(!1),[u,d]=M.useState(!1),[m,p]=M.useState((r==null?void 0:r.username)||""),[g,b]=M.useState(""),[C,k]=M.useState(""),[P,w]=M.useState(!1),[E,v]=M.useState(!1),[j,D]=M.useState(!1),[V,_]=M.useState(""),[y,N]=M.useState(""),I=T=>{e({...t,autoAdvance:T})},S=async()=>{if(m===(r==null?void 0:r.username)){c(!1);return}if(m.length<3){_("Username ən azı 3 simvol olmalıdır");return}D(!0),_(""),N("");try{await s({username:m}),N("Username uğurla yeniləndi"),c(!1)}catch(T){_(T.message||"Username yenilənə bilmədi")}finally{D(!1)}},A=async()=>{if(g.length<6){_("Parol ən azı 6 simvol olmalıdır");return}if(g!==C){_("Parollar uyğun gəlmir");return}D(!0),_(""),N("");try{await i(g),N("Parol uğurla yeniləndi"),d(!1),b(""),k("")}catch(T){_(T.message||"Parol yenilənə bilmədi")}finally{D(!1)}};return a.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200 mr-4",children:a.jsx(kn,{className:"w-5 h-5 text-gray-600"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg",children:a.jsx(Tm,{className:"w-6 h-6 text-white"})}),a.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Tənzimləmələr"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[V&&a.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg mb-4 text-sm",children:V}),y&&a.jsx("div",{className:"bg-green-50 text-green-600 p-3 rounded-lg mb-4 text-sm",children:y}),a.jsxs("div",{className:"mb-8",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-6",children:"İstifadəçi Profili"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"border border-gray-200 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"font-medium text-gray-800",children:"İstifadəçi adı"}),!o&&a.jsx("button",{onClick:()=>c(!0),className:"text-blue-600 hover:text-blue-700 text-sm",children:"Dəyişdir"})]}),o?a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{children:a.jsx("input",{type:"text",value:m,onChange:T=>p(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Yeni username",disabled:j})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:S,disabled:j,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:j?"Saxlanır...":"Saxla"}),a.jsx("button",{onClick:()=>{c(!1),p((r==null?void 0:r.username)||""),_("")},className:"text-gray-600 hover:text-gray-800",disabled:j,children:"Ləğv et"})]})]}):a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:a.jsx(j1,{className:"w-5 h-5 text-blue-600"})}),a.jsx("span",{className:"text-gray-800",children:r==null?void 0:r.username})]})]}),a.jsxs("div",{className:"border border-gray-200 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"font-medium text-gray-800",children:"Parol"}),!u&&a.jsx("button",{onClick:()=>d(!0),className:"text-blue-600 hover:text-blue-700 text-sm",children:"Dəyişdir"})]}),u?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Yeni Parol"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:P?"text":"password",value:g,onChange:T=>b(T.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Yeni parol",disabled:j}),a.jsx("button",{type:"button",onClick:()=>w(!P),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",disabled:j,children:P?a.jsx(xi,{className:"w-4 h-4"}):a.jsx(gs,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parolu təkrarla"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:E?"text":"password",value:C,onChange:T=>k(T.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Parolu təkrarla",disabled:j}),a.jsx("button",{type:"button",onClick:()=>v(!E),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",disabled:j,children:E?a.jsx(xi,{className:"w-4 h-4"}):a.jsx(gs,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:A,disabled:j,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:j?"Saxlanır...":"Saxla"}),a.jsx("button",{onClick:()=>{d(!1),b(""),k(""),_("")},className:"text-gray-600 hover:text-gray-800",disabled:j,children:"Ləğv et"})]})]}):a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:a.jsx(mj,{className:"w-5 h-5 text-purple-600"})}),a.jsx("span",{className:"text-gray-500",children:"••••••••"})]})]})]})]}),a.jsxs("div",{className:"mb-8",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-6",children:"Quiz Ayarları"}),a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"border border-gray-200 rounded-xl p-6",children:[a.jsx("h3",{className:"font-medium text-gray-800 mb-4",children:"Sual Keçid Rejimi"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("label",{className:"flex items-center space-x-4 cursor-pointer group",children:[a.jsx("input",{type:"radio",name:"advanceMode",checked:t.autoAdvance,onChange:()=>I(!0),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),a.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[a.jsx("div",{className:"p-2 bg-blue-100 rounded-lg group-hover:bg-blue-200 transition-colors duration-200",children:a.jsx(Tj,{className:"w-5 h-5 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-800",children:"Avtomatik keçid"}),a.jsx("div",{className:"text-sm text-gray-600",children:"Cavab verdikdən sonra avtomatik növbəti suala keç"})]})]})]}),a.jsxs("label",{className:"flex items-center space-x-4 cursor-pointer group",children:[a.jsx("input",{type:"radio",name:"advanceMode",checked:!t.autoAdvance,onChange:()=>I(!1),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),a.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[a.jsx("div",{className:"p-2 bg-purple-100 rounded-lg group-hover:bg-purple-200 transition-colors duration-200",children:a.jsx(hj,{className:"w-5 h-5 text-purple-600"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-800",children:"Manual keçid"}),a.jsx("div",{className:"text-sm text-gray-600",children:'"Növbəti" düyməsinə basaraq özünüz keçid edin'})]})]})]})]})]})})]}),a.jsx("div",{className:"border-t border-gray-200 pt-6",children:a.jsx("p",{className:"text-sm text-gray-500 text-center",children:"Ayarlar avtomatik saxlanılır"})})]})]})},Oj=({onSwitchToRegister:t})=>{const[e,n]=M.useState(""),[r,s]=M.useState(""),[i,o]=M.useState(!1),[c,u]=M.useState(!1),[d,m]=M.useState(""),{login:p}=un(),g=async b=>{if(b.preventDefault(),!e||!r){m("Bütün sahələri doldurun");return}u(!0),m("");try{await p(e,r)}catch(C){m(C.message||"Giriş zamanı xəta baş verdi")}finally{u(!1)}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-8 w-full max-w-md",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(gj,{className:"w-8 h-8 text-white"})}),a.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Daxil ol"}),a.jsx("p",{className:"text-gray-600",children:"Hesabınıza daxil olun"})]}),d&&a.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg mb-4 text-sm",children:d}),a.jsxs("form",{onSubmit:g,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"emailOrUsername",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email və ya Username"}),a.jsx("input",{type:"text",id:"emailOrUsername",value:e,onChange:b=>n(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Email və ya username daxil edin",disabled:c})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Parol"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:i?"text":"password",id:"password",value:r,onChange:b=>s(b.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Parolu daxil edin",disabled:c}),a.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",disabled:c,children:i?a.jsx(xi,{className:"w-4 h-4"}):a.jsx(gs,{className:"w-4 h-4"})})]})]}),a.jsx("button",{type:"submit",disabled:c,className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-2 px-4 rounded-lg hover:from-blue-600 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:c?"Daxil olunur...":"Daxil ol"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:"text-gray-600",children:["Hesabınız yoxdur?"," ",a.jsx("button",{onClick:t,className:"text-blue-600 hover:text-blue-700 font-medium",disabled:c,children:"Qeydiyyatdan keçin"})]})})]})})},Uj=({onSwitchToLogin:t})=>{const[e,n]=M.useState(""),[r,s]=M.useState(""),[i,o]=M.useState(""),[c,u]=M.useState(""),[d,m]=M.useState(!1),[p,g]=M.useState(!1),[b,C]=M.useState(!1),[k,P]=M.useState(""),{register:w}=un(),E=async v=>{if(v.preventDefault(),!e||!r||!i||!c){P("Bütün sahələri doldurun");return}if(!e.includes("@")){P("Düzgün email adresi daxil edin");return}if(r.length<3){P("Username ən azı 3 simvol olmalıdır");return}if(i.length<6){P("Parol ən azı 6 simvol olmalıdır");return}if(i!==c){P("Parollar uyğun gəlmir");return}C(!0),P("");try{await w(e,r,i)}catch(j){P(j.message||"Qeydiyyat zamanı xəta baş verdi")}finally{C(!1)}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-8 w-full max-w-md",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-green-500 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Ej,{className:"w-8 h-8 text-white"})}),a.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Qeydiyyat"}),a.jsx("p",{className:"text-gray-600",children:"Yeni hesab yaradın"})]}),k&&a.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg mb-4 text-sm",children:k}),a.jsxs("form",{onSubmit:E,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),a.jsx("input",{type:"email",id:"email",value:e,onChange:v=>n(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Email adresinizi daxil edin",disabled:b})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),a.jsx("input",{type:"text",id:"username",value:r,onChange:v=>s(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Username daxil edin",disabled:b})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Parol"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:d?"text":"password",id:"password",value:i,onChange:v=>o(v.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Parolu daxil edin",disabled:b}),a.jsx("button",{type:"button",onClick:()=>m(!d),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",disabled:b,children:d?a.jsx(xi,{className:"w-4 h-4"}):a.jsx(gs,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Parolu təkrarla"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:p?"text":"password",id:"confirmPassword",value:c,onChange:v=>u(v.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Parolu yenidən daxil edin",disabled:b}),a.jsx("button",{type:"button",onClick:()=>g(!p),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",disabled:b,children:p?a.jsx(xi,{className:"w-4 h-4"}):a.jsx(gs,{className:"w-4 h-4"})})]})]}),a.jsx("button",{type:"submit",disabled:b,className:"w-full bg-gradient-to-r from-green-500 to-blue-600 text-white py-2 px-4 rounded-lg hover:from-green-600 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:b?"Qeydiyyat edilir...":"Qeydiyyatdan keç"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:"text-gray-600",children:["Artıq hesabınız var?"," ",a.jsx("button",{onClick:t,className:"text-blue-600 hover:text-blue-700 font-medium",disabled:b,children:"Daxil olun"})]})})]})})},Fj=({collections:t,onBack:e,onStartExam:n})=>{const[r,s]=M.useState([]),[i,o]=M.useState(4),[c,u]=M.useState(20),[d,m]=M.useState(10),[p,g]=M.useState(!1),[b,C]=M.useState(""),[k,P]=M.useState(""),w=_=>{s(y=>y.includes(_)?y.filter(N=>N!==_):[...y,_])},E=()=>{r.length===t.length?s([]):s(t.map(_=>_.id))},v=()=>t.filter(_=>r.includes(_.id)).reduce((_,y)=>{var N;return _+(((N=y.words)==null?void 0:N.length)||0)},0),j=()=>{if(r.length===0)return;const _=p&&!b.trim()?`İmtahan ${new Date().toLocaleString("az-AZ")}`:b;n({selectedCollections:r,variantCount:i,wordCount:c,timeLimit:d,isPublic:p,name:p?_:void 0,description:p?k:void 0})},D=v(),V=Math.min(D,100);return a.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200 mr-4",children:a.jsx(kn,{className:"w-5 h-5 text-gray-600"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-gradient-to-br from-green-500 to-teal-600 rounded-lg",children:a.jsx(Mn,{className:"w-6 h-6 text-white"})}),a.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Peşəkar İmtahan Ayarları"})]})]}),a.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center space-x-2",children:[a.jsx(sn,{className:"w-5 h-5 text-blue-600"}),a.jsx("span",{children:"Kolleksiyalar"})]}),a.jsx("button",{onClick:E,className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:r.length===t.length?"Hamısını ləğv et":"Hamısını seç"})]}),a.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:t.map(_=>{var y;return a.jsxs("div",{className:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",onClick:()=>w(_.id),children:[a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"checkbox",checked:r.includes(_.id),onChange:N=>{N.stopPropagation(),w(_.id)},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),r.includes(_.id)&&a.jsx(Kt,{className:"w-4 h-4 text-green-600 absolute -top-1 -right-1"})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-medium text-gray-800",children:_.name}),a.jsxs("p",{className:"text-sm text-gray-600",children:[((y=_.words)==null?void 0:y.length)||0," söz"]})]})]},_.id)})}),a.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:a.jsxs("p",{className:"text-sm text-blue-800",children:[a.jsx("span",{className:"font-medium",children:r.length})," kolleksiya seçildi",D>0&&a.jsxs("span",{children:[" • Cəmi ",a.jsx("span",{className:"font-medium",children:D})," söz"]})]})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center space-x-2",children:[a.jsx(Tm,{className:"w-5 h-5 text-purple-600"}),a.jsx("span",{children:"İmtahan Ayarları"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Variant sayı"}),a.jsxs("select",{value:i,onChange:_=>o(Number(_.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:3,children:"3 variant"}),a.jsx("option",{value:4,children:"4 variant"}),a.jsx("option",{value:5,children:"5 variant"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sual sayı"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("input",{type:"range",min:"5",max:V,step:"1",value:Math.min(c,V),onChange:_=>u(Number(_.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),a.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[a.jsx("span",{children:"5"}),a.jsx("span",{className:"font-medium text-blue-600",children:Math.min(c,V)}),a.jsx("span",{children:V})]})]}),D<c&&D>0&&a.jsxs("p",{className:"text-sm text-orange-600 mt-1",children:["Maksimum ",D," sual edə bilərsiniz"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vaxt limiti (dəqiqə)"}),a.jsxs("select",{value:d,onChange:_=>m(Number(_.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:5,children:"5 dəqiqə"}),a.jsx("option",{value:10,children:"10 dəqiqə"}),a.jsx("option",{value:15,children:"15 dəqiqə"}),a.jsx("option",{value:20,children:"20 dəqiqə"}),a.jsx("option",{value:30,children:"30 dəqiqə"}),a.jsx("option",{value:45,children:"45 dəqiqə"}),a.jsx("option",{value:60,children:"1 saat"})]})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[a.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:p,onChange:_=>g(_.target.checked),className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-800",children:"Public İmtahan"}),a.jsx("div",{className:"text-sm text-gray-600",children:"İmtahanınızı digər istifadəçilər də görsün"})]})]}),p&&a.jsxs("div",{className:"mt-4 space-y-4 p-4 bg-purple-50 rounded-lg border border-purple-200",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-1",children:"İmtahan Adı *"}),a.jsx("input",{type:"text",value:b,onChange:_=>C(_.target.value),placeholder:"Məsələn: İngilis dili - Orta səviyyə",className:"w-full px-3 py-2 border border-purple-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-1",children:"Təsvir (seçimlik)"}),a.jsx("textarea",{value:k,onChange:_=>P(_.target.value),placeholder:"İmtahan haqqında qısa məlumat...",className:"w-full px-3 py-2 border border-purple-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",rows:3})]})]})]})]}),a.jsxs("div",{className:"mt-6 p-4 bg-gradient-to-r from-green-50 to-teal-50 rounded-lg border border-green-200",children:[a.jsxs("h3",{className:"font-medium text-green-800 mb-2 flex items-center space-x-2",children:[a.jsx(uj,{className:"w-4 h-4"}),a.jsx("span",{children:"İmtahan Xülasəsi"})]}),a.jsxs("div",{className:"space-y-1 text-sm text-green-700",children:[a.jsxs("p",{children:["• ",r.length," kolleksiya"]}),a.jsxs("p",{children:["• ",Math.min(c,V)," sual"]}),a.jsxs("p",{children:["• ",i," variant"]}),a.jsxs("p",{className:"flex items-center space-x-1",children:[a.jsx(ga,{className:"w-3 h-3"}),a.jsxs("span",{children:[d," dəqiqə"]})]})]})]})]})]}),a.jsx("div",{className:"mt-8 flex justify-center",children:a.jsxs("button",{onClick:j,disabled:r.length===0||p&&!b.trim(),className:"flex items-center space-x-3 bg-gradient-to-r from-green-500 to-teal-600 text-white px-8 py-4 rounded-xl font-semibold text-lg hover:from-green-600 hover:to-teal-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:transform-none",children:[a.jsx(Mn,{className:"w-5 h-5"}),a.jsx("span",{children:"İmtahana Başla"})]})}),(r.length===0||p&&!b.trim())&&a.jsx("div",{className:"mt-4 text-center",children:a.jsx("p",{className:"text-sm text-gray-500",children:r.length===0?"İmtahana başlamaq üçün ən azı bir kolleksiya seçin":"Public imtahan üçün ad məcburidir"})})]})},zj=({isOpen:t,onClose:e,onConfirm:n,title:r,message:s,bestScore:i,totalAttempts:o,recentResults:c=[]})=>t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"relative bg-gradient-to-r from-blue-500 to-purple-600 rounded-t-2xl p-6 text-white",children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition-all",children:a.jsx(Nj,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"bg-white bg-opacity-20 rounded-full p-3",children:a.jsx(xn,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold",children:r}),a.jsx("p",{className:"text-blue-100 opacity-90",children:"Əvvəlki nəticələriniz"})]})]})]}),a.jsxs("div",{className:"p-6",children:[a.jsx("p",{className:"text-gray-600 mb-4",children:s}),i!==void 0&&o!==void 0&&a.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-4 mb-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"bg-green-500 rounded-full p-2",children:a.jsx(Kt,{className:"w-4 h-4 text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-green-800",children:"Ən yaxşı nəticə"}),a.jsxs("p",{className:"text-sm text-green-600",children:[o," cəhddən"]})]})]}),a.jsx("div",{className:"text-right",children:a.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[i,"%"]})})]})}),c.length>0&&a.jsxs("div",{className:"space-y-3 mb-6",children:[a.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center space-x-2",children:[a.jsx(Nm,{className:"w-4 h-4"}),a.jsx("span",{children:"Son nəticələr"})]}),a.jsx("div",{className:"space-y-2",children:c.slice(0,3).map((u,d)=>{const m=new Date(u.participatedAt).toLocaleDateString("az-AZ",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"}),p=u.scorePercentage>=80?"text-green-600":u.scorePercentage>=60?"text-yellow-600":"text-red-600";return a.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center text-sm font-medium",children:d+1}),a.jsxs("div",{children:[a.jsxs("p",{className:`font-semibold ${p}`,children:[u.scorePercentage.toFixed(1),"%"]}),a.jsxs("p",{className:"text-xs text-gray-500",children:[u.score,"/",u.totalQuestions," doğru"]})]})]}),a.jsx("p",{className:"text-sm text-gray-500",children:m})]},d)})})]})]}),a.jsxs("div",{className:"flex space-x-3 p-6 pt-0",children:[a.jsx("button",{onClick:e,className:"flex-1 px-4 py-3 bg-gray-200 text-gray-800 rounded-xl font-semibold hover:bg-gray-300 transition-all duration-200",children:"Ləğv et"}),a.jsx("button",{onClick:n,className:"flex-1 px-4 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl font-semibold hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-lg",children:"Yenidən cəhd et"})]})]})}):null,Bj=({isOpen:t,onClose:e,onSelectMode:n,currentMode:r})=>{if(!t)return null;const s=[{id:"english-to-meaning",title:"İngilis → Azərbaycan",description:"İngilis sözü göstərilir, Azərbaycan mənasını seç",icon:a.jsx(S1,{className:"w-6 h-6"}),color:"from-blue-500 to-cyan-600",example:"apple → alma"},{id:"meaning-to-english",title:"Azərbaycan → İngilis",description:"Azərbaycan mənası göstərilir, İngilis sözünü seç",icon:a.jsx(kn,{className:"w-6 h-6"}),color:"from-green-500 to-emerald-600",example:"alma → apple"},{id:"mixed",title:"Qarışıq Rejim",description:"Həm ingilis → azərbaycan, həm də azərbaycan → ingilis",icon:a.jsx(_j,{className:"w-6 h-6"}),color:"from-purple-500 to-pink-600",example:"Random seçim"}];return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4",children:a.jsxs("div",{className:"bg-white  rounded-2xl shadow-2xl max-w-lg w-full max-h-[95vh] sm:max-h-[90vh] overflow-y-auto mx-2 sm:mx-0",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-t-2xl p-4 sm:p-6 text-white",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"bg-white bg-opacity-20 rounded-full p-2 sm:p-3",children:a.jsx(pj,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg sm:text-xl font-bold",children:"Quiz Rejimini Seç"}),a.jsx("p",{className:"text-blue-100 opacity-90 text-sm sm:text-base",children:"Hansı istiqamətdə test etmək istəyirsiniz?"})]})]})}),a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsx("div",{className:"space-y-3 sm:space-y-4",children:s.map(i=>a.jsx("button",{onClick:()=>n(i.id),className:`w-full text-left p-3 sm:p-4 rounded-xl border-2 transition-all duration-200 ${r===i.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:a.jsxs("div",{className:"flex items-start space-x-3 sm:space-x-4",children:[a.jsx("div",{className:`bg-gradient-to-r ${i.color} rounded-lg p-2 text-white flex-shrink-0`,children:a.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6",children:i.icon})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-gray-800  text-base sm:text-lg mb-1",children:i.title}),a.jsx("p",{className:"text-gray-600  text-xs sm:text-sm mb-2 leading-relaxed",children:i.description}),a.jsx("div",{className:"text-xs text-gray-500  font-mono bg-gray-100  rounded px-2 py-1 inline-block",children:i.example})]}),r===i.id&&a.jsx("div",{className:"text-blue-500 flex-shrink-0",children:a.jsx(Je,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]})},i.id))}),a.jsxs("div",{className:"mt-4 sm:mt-6 bg-blue-50   rounded-lg p-3 sm:p-4",children:[a.jsx("h4",{className:"font-semibold text-blue-800  mb-2 text-sm sm:text-base",children:"💡 Məsləhət:"}),a.jsx("p",{className:"text-xs sm:text-sm text-blue-700  leading-relaxed",children:"Qarışıq rejim sözləri daha yaxşı yadda saxlamağa kömək edir. Həm oxumaq, həm də yazmaq bacarığınızı inkişaf etdirir."})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3 p-4 sm:p-6 sm:pt-0",children:[a.jsx("button",{onClick:e,className:"flex-1 px-4 py-3 bg-gray-200  text-gray-800  rounded-xl font-semibold hover:bg-gray-300  transition-all duration-200 text-sm sm:text-base",children:"Ləğv et"}),a.jsx("button",{onClick:()=>n(r),className:"flex-1 px-4 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl font-semibold hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-lg text-sm sm:text-base",children:"Başla"})]})]})})},$j=({collections:t,examSettings:e,publicExam:n,onFinish:r,onBack:s})=>{const[i,o]=M.useState([]),[c,u]=M.useState(0),[d,m]=M.useState({}),[p,g]=M.useState(e.timeLimit*60),[b,C]=M.useState(!1),[k,P]=M.useState(!1),[w,E]=M.useState(!0),[v,j]=M.useState(null);M.useEffect(()=>{const T=(()=>{E(!0),j(null);let $=[];if(n&&n.embeddedWords&&n.embeddedWords.length>0)console.log("🌐 Using public exam embedded words:",n.embeddedWords.length,"words"),console.log("🔍 Sample embedded words:",n.embeddedWords.slice(0,3)),$=n.embeddedWords;else if(n){if(console.log("⚠️ Legacy public exam detected without embedded words"),console.log("🔄 Falling back to collection-based approach for public exam"),!t.length||!e.selectedCollections.length)return j("Köhnə imtahan formatı - kolleksiya məlumatları tapılmadı"),E(!1),[];const K=t.filter(G=>e.selectedCollections.includes(G.id));if(!K.length)return j("Seçilmiş kolleksiya tapılmadı - köhnə imtahan formatı"),E(!1),[];const Y=new Map;K.forEach(G=>{G.words&&Array.isArray(G.words)&&G.words.forEach(oe=>{const _e=oe.id||oe.word||oe.english||"";_e&&Y.set(_e,oe)})}),$=Array.from(Y.values())}else{if(console.log("👤 Using own collections:",t.length,"available collections"),!t.length||!e.selectedCollections.length)return j("Heç bir kolleksiya seçilməyib"),E(!1),[];const K=t.filter(G=>e.selectedCollections.includes(G.id));if(!K.length)return j("Seçilmiş kolleksiya tapılmadı"),E(!1),[];console.log("✅ Final selected collections:",K.length,"collections"),K.forEach((G,oe)=>{console.log(`   ${oe+1}. ${G.name} (${G.words.length} words)`)});const Y=new Map;K.forEach(G=>{G.words&&Array.isArray(G.words)&&G.words.forEach(oe=>{const _e=oe.id||oe.word||oe.english||"";_e&&Y.set(_e,oe)})}),$=Array.from(Y.values())}if($.length===0)return j("Seçilmiş kolleksiyalarda söz tapılmadı"),E(!1),[];$.length<e.wordCount&&(console.warn("Not enough unique words for exam. Available:",$.length,"Required:",e.wordCount),console.log(`Using ${$.length} words instead of ${e.wordCount}`));const ae=K=>{const Y=[...K];for(let G=Y.length-1;G>0;G--){const oe=Math.floor(Math.random()*(G+1));[Y[G],Y[oe]]=[Y[oe],Y[G]]}return Y},W=ae($),Ee=Math.min(e.wordCount,$.length),B=W.slice(0,Ee),J=$.map(K=>K.meaning),F=B.map(K=>{const Y=J.filter(Qe=>Qe!==K.meaning),oe=ae(Y).slice(0,e.variantCount-1),_e=ae([K.meaning,...oe]),Fe=_e.indexOf(K.meaning);return{word:K,options:_e,correctIndex:Fe}});return E(!1),F})();o(T)},[t,e,n]),M.useEffect(()=>{if(p>0&&!b){const A=setTimeout(()=>{g(T=>T-1)},1e3);return()=>clearTimeout(A)}else p===0&&!b&&V(!0)},[p,b]);const D=(A,T)=>{m($=>({...$,[A]:T}))},V=M.useCallback((A=!1)=>{if(b)return;C(!0);const T=i.filter((ae,W)=>d[W]===ae.correctIndex).length,$=e.timeLimit*60-p;r(T,i.length,Math.floor($/60))},[i,d,p,e.timeLimit,r,b]),_=()=>{P(!1),V()},y=()=>{S()>0?P(!0):V()},N=A=>{const T=Math.floor(A/60),$=A%60;return`${T}:${$.toString().padStart(2,"0")}`},I=()=>Object.keys(d).length,S=()=>i.length-I();return w?a.jsx("div",{className:"max-w-4xl mx-auto p-6 flex justify-center items-center min-h-96",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"İmtahan yüklənir..."})]})}):v?a.jsx("div",{className:"max-w-4xl mx-auto p-6 flex justify-center items-center min-h-96",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 mx-auto bg-red-100 rounded-full flex items-center justify-center mb-4",children:a.jsx(il,{className:"w-8 h-8 text-red-600"})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"İmtahan başladıla bilmədi"}),a.jsx("p",{className:"text-gray-600 mb-6",children:v}),a.jsx("button",{onClick:s,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Geri qayıt"})]})}):i.length===0?a.jsx("div",{className:"max-w-4xl mx-auto p-6 flex justify-center items-center min-h-96",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 mx-auto bg-yellow-100 rounded-full flex items-center justify-center mb-4",children:a.jsx(il,{className:"w-8 h-8 text-yellow-600"})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Sual tapılmadı"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Seçilmiş kolleksiyalarda kifayət qədər söz yoxdur."}),a.jsx("button",{onClick:s,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Geri qayıt"})]})}):i.length===0||!i[c]?a.jsx("div",{className:"max-w-4xl mx-auto p-6 flex justify-center items-center min-h-96",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"İmtahan hazırlanır..."})]})}):a.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-blue-600",children:[a.jsx(dj,{className:"w-5 h-5"}),a.jsxs("span",{className:"font-semibold",children:["Sual ",c+1," / ",i.length]})]}),a.jsxs("div",{className:"flex items-center space-x-2 text-green-600",children:[a.jsx(Kt,{className:"w-5 h-5"}),a.jsxs("span",{className:"font-semibold",children:["Cavablanmış: ",I()]})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:`flex items-center space-x-2 ${p<300?"text-red-600":"text-blue-600"}`,children:[a.jsx(ga,{className:"w-5 h-5"}),a.jsx("span",{className:"font-mono text-lg font-bold",children:N(p)})]}),a.jsx("button",{onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800 font-medium",children:"Çıx"})]})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"İrəliləmə"}),a.jsxs("span",{className:"text-sm text-gray-600",children:[Math.round((c+1)/i.length*100),"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:a.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-3 rounded-full transition-all duration-300",style:{width:`${(c+1)/i.length*100}%`}})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-6",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:i[c].word.word||i[c].word.english}),a.jsx("p",{className:"text-lg text-gray-600",children:"Bu sözün mənası nədir?"})]}),a.jsx("div",{className:"grid gap-4",children:i[c].options.map((A,T)=>a.jsx("button",{onClick:()=>D(c,T),className:`p-4 text-left rounded-lg border-2 transition-all duration-200 ${d[c]===T?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"}`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:`w-6 h-6 rounded-full border-2 mr-4 flex items-center justify-center ${d[c]===T?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:d[c]===T&&a.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),a.jsx("span",{className:"text-lg",children:A})]})},T))})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("button",{onClick:()=>u(Math.max(0,c-1)),disabled:c===0,className:`px-6 py-2 rounded-lg font-medium ${c===0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Əvvəlki"}),a.jsxs("div",{className:"flex items-center space-x-4",children:[S()>0&&a.jsxs("div",{className:"flex items-center space-x-2 text-orange-600",children:[a.jsx(il,{className:"w-4 h-4"}),a.jsxs("span",{className:"text-sm font-medium",children:[S()," cavabsız sual"]})]}),a.jsx("button",{onClick:y,className:"px-8 py-3 bg-gradient-to-r from-green-500 to-blue-600 text-white rounded-lg font-semibold hover:from-green-600 hover:to-blue-700 transition-all duration-200",children:"İmtahanı Bitir"})]}),a.jsx("button",{onClick:()=>u(Math.min(i.length-1,c+1)),disabled:c===i.length-1,className:`px-6 py-2 rounded-lg font-medium ${c===i.length-1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Növbəti"})]})}),a.jsxs("div",{className:"mt-6 bg-white rounded-xl shadow-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Suallar"}),a.jsx("div",{className:"grid grid-cols-5 sm:grid-cols-8 md:grid-cols-10 gap-2",children:i.map((A,T)=>a.jsx("button",{onClick:()=>u(T),className:`aspect-square rounded-lg font-medium text-sm transition-all duration-200 ${T===c?"bg-blue-600 text-white":d[T]!==void 0?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:T+1},T))})]}),k&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-xl p-8 max-w-md mx-4",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center mr-4",children:a.jsx(il,{className:"w-6 h-6 text-orange-600"})}),a.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"İmtahanı bitirmək istəyirsiniz?"})]}),a.jsxs("p",{className:"text-gray-600 mb-6",children:[S()," sual cavabsız qalıb. İmtahanı indi bitirməyə əminsizmi?"]}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsx("button",{onClick:()=>P(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Davam et"}),a.jsx("button",{onClick:_,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Bitir"})]})]})})]})},qj=({score:t,totalQuestions:e,timeSpent:n,timeLimit:r,onRetakeExam:s,onBackToHome:i})=>{const o=Math.round(t/e*100),c=p=>{const g=Math.floor(p/60),b=p%60;return`${g}:${b.toString().padStart(2,"0")}`},d=o>=90?{grade:"Əla",color:"text-green-600",bg:"bg-green-50",icon:xn}:o>=80?{grade:"Yaxşı",color:"text-blue-600",bg:"bg-blue-50",icon:Kt}:o>=70?{grade:"Orta",color:"text-yellow-600",bg:"bg-yellow-50",icon:vi}:o>=60?{grade:"Kəmçalı",color:"text-orange-600",bg:"bg-orange-50",icon:uy}:{grade:"Zəif",color:"text-red-600",bg:"bg-red-50",icon:uy},m=d.icon;return a.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"flex items-center justify-center mb-4",children:a.jsx("div",{className:`p-4 ${d.bg} rounded-full`,children:a.jsx(m,{className:`w-12 h-12 ${d.color}`})})}),a.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"İmtahan Nəticəsi"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Peşəkar imtahanınız tamamlandı!"})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsxs("div",{className:`inline-flex items-center space-x-3 px-6 py-3 ${d.bg} rounded-full mb-4`,children:[a.jsx(m,{className:`w-6 h-6 ${d.color}`}),a.jsx("span",{className:`text-2xl font-bold ${d.color}`,children:d.grade})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"text-6xl font-bold text-gray-800 mb-2",children:[o,"%"]}),a.jsxs("p",{className:"text-xl text-gray-600",children:[t," / ",e," doğru cavab"]})]}),a.jsxs("div",{className:"relative w-32 h-32 mx-auto mb-6",children:[a.jsxs("svg",{className:"transform -rotate-90 w-32 h-32",viewBox:"0 0 36 36",children:[a.jsx("path",{d:"m18,2.0845 a 15.9155,15.9155 0 0,1 0,31.831 a 15.9155,15.9155 0 0,1 0,-31.831",fill:"none",stroke:"#e5e7eb",strokeWidth:"2"}),a.jsx("path",{d:"m18,2.0845 a 15.9155,15.9155 0 0,1 0,31.831 a 15.9155,15.9155 0 0,1 0,-31.831",fill:"none",stroke:o>=80?"#10b981":o>=60?"#f59e0b":"#ef4444",strokeWidth:"2",strokeDasharray:`${o}, 100`,strokeLinecap:"round"})]}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsxs("span",{className:"text-xl font-bold text-gray-800",children:[o,"%"]})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 text-center",children:[a.jsx(jh,{className:"w-8 h-8 text-blue-600 mx-auto mb-3"}),a.jsx("h3",{className:"font-semibold text-gray-800 mb-1",children:"Doğruluq"}),a.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[o,"%"]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-6 text-center",children:[a.jsx(ga,{className:"w-8 h-8 text-purple-600 mx-auto mb-3"}),a.jsx("h3",{className:"font-semibold text-gray-800 mb-1",children:"Vaxt"}),a.jsx("p",{className:"text-2xl font-bold text-purple-600",children:c(n)}),a.jsxs("p",{className:"text-sm text-gray-600",children:["/ ",r," dəqiqə"]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-6 text-center",children:[a.jsx(Kt,{className:"w-8 h-8 text-green-600 mx-auto mb-3"}),a.jsx("h3",{className:"font-semibold text-gray-800 mb-1",children:"Cavablar"}),a.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[t," / ",e]})]})]}),a.jsxs("div",{className:`${d.bg} rounded-xl p-6 text-center mb-8`,children:[a.jsxs("h3",{className:`text-lg font-semibold ${d.color} mb-2`,children:[o>=90&&"Əla nəticə! Mükəmməl performans göstərdiniz!",o>=80&&o<90&&"Çox yaxşı! Bilikləriniz kifayət qədər yaxşıdır.",o>=70&&o<80&&"Yaxşı nəticə, lakin daha da yaxşılaşdıra bilərsiniz.",o>=60&&o<70&&"Orta nəticə. Daha çox məşq etməlisiniz.",o<60&&"Daha çox öyrənməyə ehtiyacınız var. Məşq etməyə davam edin!"]}),a.jsx("p",{className:`${d.color} opacity-80`,children:o>=80?"Biliklərinizlə fəxr edə bilərsiniz!":"Təkmilləşdirmək üçün daha çox məşq edin."})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[a.jsxs("button",{onClick:s,className:"flex items-center justify-center space-x-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white px-8 py-4 rounded-xl font-semibold text-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105",children:[a.jsx(Nm,{className:"w-5 h-5"}),a.jsx("span",{children:"Yenidən Cəhd Et"})]}),a.jsxs("button",{onClick:i,className:"flex items-center justify-center space-x-3 bg-gradient-to-r from-gray-500 to-gray-600 text-white px-8 py-4 rounded-xl font-semibold text-lg hover:from-gray-600 hover:to-gray-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105",children:[a.jsx(A1,{className:"w-5 h-5"}),a.jsx("span",{children:"Ana Səhifə"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Təkmilləşdirmək üçün məsləhətlər:"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mt-0.5",children:a.jsx("span",{className:"text-blue-600 text-sm font-semibold",children:"1"})}),a.jsx("p",{className:"text-gray-600",children:"Səhv etdiyiniz sözləri bir daha məşq edin"})]}),a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mt-0.5",children:a.jsx("span",{className:"text-blue-600 text-sm font-semibold",children:"2"})}),a.jsx("p",{className:"text-gray-600",children:"Yeni söz kolleksiyaları yaradın"})]}),a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mt-0.5",children:a.jsx("span",{className:"text-blue-600 text-sm font-semibold",children:"3"})}),a.jsx("p",{className:"text-gray-600",children:"Mütəmadi olaraq təkrar edin"})]}),a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mt-0.5",children:a.jsx("span",{className:"text-blue-600 text-sm font-semibold",children:"4"})}),a.jsx("p",{className:"text-gray-600",children:"Müxtəlif kolleksiyalardan imtahan verin"})]})]})]})]})},Wj=()=>{const{currentUser:t}=un(),[e,n]=M.useState("login");return t?a.jsx(Hj,{}):e==="login"?a.jsx(Oj,{onSwitchToRegister:()=>n("register")}):a.jsx(Uj,{onSwitchToLogin:()=>n("login")})},Hj=()=>{const{currentUser:t}=un(),[e,n]=M.useState([]),[r,s]=M.useState({autoAdvance:!0,quizMode:"english-to-meaning"}),[i,o]=M.useState("home"),[c,u]=M.useState(null),[d,m]=M.useState(!1),[p,g]=M.useState(null),[b,C]=M.useState(null),[k,P]=M.useState(null),[w,E]=M.useState(null),[v,j]=M.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}});M.useEffect(()=>{D(),s(w1())},[t]);const D=async()=>{if(t){const{loadUserCollections:F}=await hn(async()=>{const{loadUserCollections:Y}=await Promise.resolve().then(()=>fn);return{loadUserCollections:Y}},void 0),K=await F(t.id);n(K)}},V=F=>{s(F),_1(F)},_=async F=>{if(t){const{saveCollection:K}=await hn(async()=>{const{saveCollection:G}=await Promise.resolve().then(()=>fn);return{saveCollection:G}},void 0),Y=await K(t.id,t.username,F);n(G=>[Y,...G]),o("collections")}},y=F=>{u(F),m(!0)},N=F=>{s(K=>({...K,quizMode:F})),m(!1),o("quiz")},I=F=>{g(F),o("result")},S=()=>{o("quiz")},A=()=>{o("home"),u(null),g(null),C(null),P(null),E(null)},T=async F=>{var G;let K=null;if(t)try{const{savePublicExam:oe}=await hn(async()=>{const{savePublicExam:ji}=await Promise.resolve().then(()=>fn);return{savePublicExam:ji}},void 0),_e=F.name||`İmtahan ${new Date().toLocaleString("az-AZ")}`,Fe={...F,name:_e},Qe=await oe(t.id,t.username,Fe,e);K=Qe.id,console.log("✅ Exam saved to database:",Qe.id,F.isPublic?"(Public)":"(Private)"),console.log("🔍 DEBUG: Saved exam details:",{savedExamId:Qe.id,embeddedWords:((G=Qe.embeddedWords)==null?void 0:G.length)||0,collectionsUsed:e.length})}catch(oe){console.error("❌ Error saving exam:",oe)}const Y={...F,publicExamId:K};C(Y),o("exam-active")},$=async(F,K,Y)=>{if(t)try{const{saveExamResult:oe,trackExamParticipation:_e}=await hn(async()=>{const{saveExamResult:Qe,trackExamParticipation:ji}=await Promise.resolve().then(()=>fn);return{saveExamResult:Qe,trackExamParticipation:ji}},void 0);await oe(t.id,F,K,Y,b),console.log("✅ Exam result saved for user:",t.id);const Fe=(b==null?void 0:b.publicExamId)||(k==null?void 0:k.id);console.log("🔍 DEBUG: Tracking participation:",{publicExamId:b==null?void 0:b.publicExamId,currentPublicExamId:k==null?void 0:k.id,examIdToTrack:Fe,userId:t.id}),Fe?(await _e(t.id,Fe,F,K,Y),console.log("✅ Exam participation tracked for exam:",Fe)):console.log("⚠️ No exam ID to track participation for!")}catch(oe){console.error("❌ Error saving exam result:",oe)}const G=(b==null?void 0:b.publicExamId)||(k==null?void 0:k.id);if(G)try{const{updateExamStats:oe}=await hn(async()=>{const{updateExamStats:_e}=await Promise.resolve().then(()=>fn);return{updateExamStats:_e}},void 0);await oe(G,F,K),console.log("✅ Public exam stats updated:",G)}catch(oe){console.error("❌ Error updating exam stats:",oe)}E({score:F,total:K,timeSpent:Y,timeLimit:(b==null?void 0:b.timeLimit)||10}),o("exam-result")},ae=()=>{E(null),b!=null&&b.publicExamId||b!=null&&b.isPublic?(console.log("🔄 Retaking exam with same settings"),o("exam-active")):(console.log("🔄 Going back to exam setup"),o("exam"))},W=async F=>{if(t){const{markCollectionAsLearned:K}=await hn(async()=>{const{markCollectionAsLearned:Y}=await Promise.resolve().then(()=>fn);return{markCollectionAsLearned:Y}},void 0);await K(t.id,F),D()}},Ee=async()=>{if(t){const{loadUserCollections:F}=await hn(async()=>{const{loadUserCollections:Y}=await Promise.resolve().then(()=>fn);return{loadUserCollections:Y}},void 0),K=await F(t.id);n(K)}o("exam")},B=async F=>{if(t)try{const{getUserExamResults:K}=await hn(async()=>{const{getUserExamResults:G}=await Promise.resolve().then(()=>fn);return{getUserExamResults:G}},void 0),Y=await K(t.id,F.id);if(Y.length>0){j({isOpen:!0,title:"Bu imtahanda əvvəllər iştirak etmisiniz!",message:"Yenidən cəhd etmək istəyirsiniz?",bestScore:Y[0].scorePercentage,totalAttempts:Y.length,recentResults:Y.slice(0,3).map(G=>({scorePercentage:G.scorePercentage,participatedAt:G.participatedAt,score:G.score,totalQuestions:G.totalQuestions})),onConfirm:()=>{j(G=>({...G,isOpen:!1})),J(F)}});return}}catch(K){console.error("❌ Error checking previous results:",K)}J(F)},J=async F=>{var Y;const K={...F.settings,isPublic:!1,publicExamId:F.id};if(t){const{loadUserCollections:G}=await hn(async()=>{const{loadUserCollections:_e}=await Promise.resolve().then(()=>fn);return{loadUserCollections:_e}},void 0),oe=await G(t.id);n(oe)}console.log("🚀 Starting public exam:",F.name,"ID:",F.id),console.log("🔍 DEBUG: Taking public exam:",{examId:F.id,examName:F.name,hasEmbeddedWords:!!F.embeddedWords,embeddedWordsCount:((Y=F.embeddedWords)==null?void 0:Y.length)||0,examSettingsPublicExamId:K.publicExamId}),C(K),P(F),o("exam-active")};return a.jsxs("div",{className:"min-h-screen",children:[i==="home"&&a.jsx(Sj,{onNavigateToCollections:()=>o("collections"),onNavigateToAllCollections:()=>o("all-collections"),onNavigateToLeaderboard:()=>o("leaderboard"),onNavigateToExam:Ee,onNavigateToAllExams:()=>o("all-exams"),onNavigateToMyExams:()=>o("my-exams"),onNavigateToSettings:()=>o("settings"),onTakeExam:B,onPlayQuiz:y}),i==="collections"&&a.jsx(Cj,{onBack:A,onNavigateToAllCollections:()=>o("all-collections"),onPlayQuiz:y,onSaveCollection:_}),i==="all-collections"&&a.jsx(Aj,{onBack:A,onPlayQuiz:y}),i==="all-exams"&&a.jsx(jj,{onBack:()=>o("my-exams"),onTakeExam:B}),i==="my-exams"&&a.jsx(Pj,{onBack:A,onTakeExam:B,onNavigateToAllExams:()=>o("all-exams"),onNavigateToCreateExam:Ee}),i==="leaderboard"&&a.jsx(Rj,{onBack:A}),i==="quiz"&&c&&a.jsx(Vj,{collection:c,autoAdvance:r.autoAdvance,quizMode:r.quizMode,onBack:()=>o("collections"),onFinish:I}),i==="result"&&p&&c&&a.jsx(Lj,{result:p,collection:c,onPlayAgain:S,onBackHome:A,onMarkAsLearned:W}),i==="settings"&&a.jsx(Mj,{settings:r,onUpdateSettings:V,onBack:A}),i==="exam"&&a.jsx(Fj,{collections:e,onBack:A,onStartExam:T}),i==="exam-active"&&b&&a.jsx($j,{collections:e,examSettings:b,publicExam:k,onFinish:$,onBack:()=>o("exam")}),i==="exam-result"&&w&&a.jsx(qj,{score:w.score,totalQuestions:w.total,timeSpent:w.timeSpent,timeLimit:w.timeLimit,onRetakeExam:ae,onBackToHome:A}),a.jsx(zj,{isOpen:v.isOpen,onClose:()=>j(F=>({...F,isOpen:!1})),onConfirm:v.onConfirm,title:v.title,message:v.message,bestScore:v.bestScore,totalAttempts:v.totalAttempts,recentResults:v.recentResults}),a.jsx(Bj,{isOpen:d,onClose:()=>m(!1),onSelectMode:N,currentMode:r.quizMode})]})};function Kj(){return a.jsx(Ij,{children:a.jsx(Wj,{})})}Sv(document.getElementById("root")).render(a.jsx(M.StrictMode,{children:a.jsx(Kj,{})}));
